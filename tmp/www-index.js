import{a as sj,b as rj,r as m,u as Qt,c as tr,L as Tt,d as zr,e as Bn,g as ko,f as nj,h as ud,O as uy,N as Zg,R as lj,i as at,j as ij,B as oj}from"./react-vendor-C352iw8x.js";import{C as ri,S as Gs,X as xs,B as ni,a as my,T as Ka,b as hy,U as li,c as md,d as on,L as cj,e as dj,H as uj,P as lh,Z as fy,f as xy,M as Dn,g as Zc,h as mj,i as Wc,z as ra,j as hd,k as Rr,N as hj,E as fj,F as mr,l as ts,m as sn,n as gy,o as ii,p as Nr,q as er,A as dl,r as xj,s as As,t as oi,u as Or,v as cs,I as ci,V as po,w as ih,x as gj,y as yj,D as pj,G as Wg,J as bj,R as vj,K as fd,O as xi,Q as jj,W as oh,Y as ch,_ as yo,$ as gi,a0 as ti,a1 as fs,a2 as yi,a3 as yy,a4 as no,a5 as dh,a6 as py,a7 as Nj,a8 as pm,a9 as by,aa as uh,ab as vy,ac as hr,ad as nn,ae as ml,af as hl,ag as Ga,ah as wj,ai as rn,aj as fl,ak as jy,al as bo,am as Ny,an as ks,ao as _j,ap as wy,aq as ed,ar as Sj,as as kj,at as Ej,au as Tj,av as Aj,aw as e0,ax as Cj,ay as _y,az as Bm,aA as Mj,aB as vo,aC as Sy,aD as Rj,aE as Oj,aF as zj,aG as Pj,aH as Um,aI as ky,aJ as Dj,aK as Bj,aL as Uj,aM as Lj,aN as $j,aO as Ij,aP as fr,aQ as qj,aR as Yj,aS as Ey,aT as t0,aU as Jl,aV as Ql,aW as jo,aX as a0,aY as Gj,aZ as s0,a_ as Kj,a$ as r0,b0 as Hj,b1 as Vj,b2 as n0,b3 as Fj,b4 as l0}from"./ui-vendor-Cbm5rjvq.js";function uk(){import.meta.url,import("_").catch(()=>1),(async function*(){})().next()}function Xj(r,s){for(var l=0;l<s.length;l++){const i=s[l];if(typeof i!="string"&&!Array.isArray(i)){for(const d in i)if(d!=="default"&&!(d in r)){const u=Object.getOwnPropertyDescriptor(i,d);u&&Object.defineProperty(r,d,u.get?u:{enumerable:!0,get:()=>i[d]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))i(d);new MutationObserver(d=>{for(const u of d)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function l(d){const u={};return d.integrity&&(u.integrity=d.integrity),d.referrerPolicy&&(u.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?u.credentials="include":d.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(d){if(d.ep)return;d.ep=!0;const u=l(d);fetch(d.href,u)}})();var bm={exports:{}},lo={};var i0;function Jj(){if(i0)return lo;i0=1;var r=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(i,d,u){var c=null;if(u!==void 0&&(c=""+u),d.key!==void 0&&(c=""+d.key),"key"in d){u={};for(var g in d)g!=="key"&&(u[g]=d[g])}else u=d;return d=u.ref,{$$typeof:r,type:i,key:c,ref:d!==void 0?d:null,props:u}}return lo.Fragment=s,lo.jsx=l,lo.jsxs=l,lo}var o0;function Qj(){return o0||(o0=1,bm.exports=Jj()),bm.exports}var e=Qj(),vm={exports:{}},io={},jm={exports:{}},Nm={};var c0;function Zj(){return c0||(c0=1,(function(r){function s(z,X){var G=z.length;z.push(X);e:for(;0<G;){var D=G-1>>>1,$=z[D];if(0<d($,X))z[D]=X,z[G]=$,G=D;else break e}}function l(z){return z.length===0?null:z[0]}function i(z){if(z.length===0)return null;var X=z[0],G=z.pop();if(G!==X){z[0]=G;e:for(var D=0,$=z.length,B=$>>>1;D<B;){var Y=2*(D+1)-1,Q=z[Y],q=Y+1,I=z[q];if(0>d(Q,G))q<$&&0>d(I,Q)?(z[D]=I,z[q]=G,D=q):(z[D]=Q,z[Y]=G,D=Y);else if(q<$&&0>d(I,G))z[D]=I,z[q]=G,D=q;else break e}}return X}function d(z,X){var G=z.sortIndex-X.sortIndex;return G!==0?G:z.id-X.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var c=Date,g=c.now();r.unstable_now=function(){return c.now()-g}}var f=[],v=[],b=1,w=null,N=3,k=!1,_=!1,M=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;function p(z){for(var X=l(v);X!==null;){if(X.callback===null)i(v);else if(X.startTime<=z)i(v),X.sortIndex=X.expirationTime,s(f,X);else break;X=l(v)}}function j(z){if(M=!1,p(z),!_)if(l(f)!==null)_=!0,E||(E=!0,Z());else{var X=l(v);X!==null&&ye(j,X.startTime-z)}}var E=!1,C=-1,O=5,P=-1;function L(){return T?!0:!(r.unstable_now()-P<O)}function ce(){if(T=!1,E){var z=r.unstable_now();P=z;var X=!0;try{e:{_=!1,M&&(M=!1,S(C),C=-1),k=!0;var G=N;try{t:{for(p(z),w=l(f);w!==null&&!(w.expirationTime>z&&L());){var D=w.callback;if(typeof D=="function"){w.callback=null,N=w.priorityLevel;var $=D(w.expirationTime<=z);if(z=r.unstable_now(),typeof $=="function"){w.callback=$,p(z),X=!0;break t}w===l(f)&&i(f),p(z)}else i(f);w=l(f)}if(w!==null)X=!0;else{var B=l(v);B!==null&&ye(j,B.startTime-z),X=!1}}break e}finally{w=null,N=G,k=!1}X=void 0}}finally{X?Z():E=!1}}}var Z;if(typeof y=="function")Z=function(){y(ce)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,le=ie.port2;ie.port1.onmessage=ce,Z=function(){le.postMessage(null)}}else Z=function(){A(ce,0)};function ye(z,X){C=A(function(){z(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(z){z.callback=null},r.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<z?Math.floor(1e3/z):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(z){switch(N){case 1:case 2:case 3:var X=3;break;default:X=N}var G=N;N=X;try{return z()}finally{N=G}},r.unstable_requestPaint=function(){T=!0},r.unstable_runWithPriority=function(z,X){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=N;N=z;try{return X()}finally{N=G}},r.unstable_scheduleCallback=function(z,X,G){var D=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?D+G:D):G=D,z){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=G+$,z={id:b++,callback:X,priorityLevel:z,startTime:G,expirationTime:$,sortIndex:-1},G>D?(z.sortIndex=G,s(v,z),l(f)===null&&z===l(v)&&(M?(S(C),C=-1):M=!0,ye(j,G-D))):(z.sortIndex=$,s(f,z),_||k||(_=!0,E||(E=!0,Z()))),z},r.unstable_shouldYield=L,r.unstable_wrapCallback=function(z){var X=N;return function(){var G=N;N=X;try{return z.apply(this,arguments)}finally{N=G}}}})(Nm)),Nm}var d0;function Wj(){return d0||(d0=1,jm.exports=Zj()),jm.exports}var u0;function eN(){if(u0)return io;u0=1;var r=Wj(),s=sj(),l=rj();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)a+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var a=t,n=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(n=a.return),t=a.return;while(t)}return a.tag===3?n:null}function c(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function f(t){if(u(t)!==t)throw Error(i(188))}function v(t){var a=t.alternate;if(!a){if(a=u(t),a===null)throw Error(i(188));return a!==t?null:t}for(var n=t,o=a;;){var h=n.return;if(h===null)break;var x=h.alternate;if(x===null){if(o=h.return,o!==null){n=o;continue}break}if(h.child===x.child){for(x=h.child;x;){if(x===n)return f(h),t;if(x===o)return f(h),a;x=x.sibling}throw Error(i(188))}if(n.return!==o.return)n=h,o=x;else{for(var R=!1,U=h.child;U;){if(U===n){R=!0,n=h,o=x;break}if(U===o){R=!0,o=h,n=x;break}U=U.sibling}if(!R){for(U=x.child;U;){if(U===n){R=!0,n=x,o=h;break}if(U===o){R=!0,o=x,n=h;break}U=U.sibling}if(!R)throw Error(i(189))}}if(n.alternate!==o)throw Error(i(190))}if(n.tag!==3)throw Error(i(188));return n.stateNode.current===n?t:a}function b(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=b(t),a!==null)return a;t=t.sibling}return null}var w=Object.assign,N=Symbol.for("react.element"),k=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),y=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function Z(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var ie=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ie?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case M:return"Fragment";case A:return"Profiler";case T:return"StrictMode";case j:return"Suspense";case E:return"SuspenseList";case P:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case y:return t.displayName||"Context";case S:return(t._context.displayName||"Context")+".Consumer";case p:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return a=t.displayName||null,a!==null?a:le(t.type)||"Memo";case O:a=t._payload,t=t._init;try{return le(t(a))}catch(n){}}return null}var ye=Array.isArray,z=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},D=[],$=-1;function B(t){return{current:t}}function Y(t){0>$||(t.current=D[$],D[$]=null,$--)}function Q(t,a){$++,D[$]=t.current,t.current=a}var q=B(null),I=B(null),V=B(null),Te=B(null);function Ke(t,a){switch(Q(V,a),Q(I,t),Q(q,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?jg(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=jg(a),t=Ng(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(q),Q(q,t)}function oe(){Y(q),Y(I),Y(V)}function je(t){t.memoizedState!==null&&Q(Te,t);var a=q.current,n=Ng(a,t.type);a!==n&&(Q(I,t),Q(q,n))}function fe(t){I.current===t&&(Y(q),Y(I)),Te.current===t&&(Y(Te),to._currentValue=G)}var ke,$e;function Le(t){if(ke===void 0)try{throw Error()}catch(n){var a=n.stack.trim().match(/\n( *(at )?)/);ke=a&&a[1]||"",$e=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+ke+t+$e}var St=!1;function Qe(t,a){if(!t||St)return"";St=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var Oe=function(){throw Error()};if(Object.defineProperty(Oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Oe,[])}catch(we){var ve=we}Reflect.construct(t,[],Oe)}else{try{Oe.call()}catch(we){ve=we}t.call(Oe.prototype)}}else{try{throw Error()}catch(we){ve=we}(Oe=t())&&typeof Oe.catch=="function"&&Oe.catch(function(){})}}catch(we){if(we&&ve&&typeof we.stack=="string")return[we.stack,ve.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=o.DetermineComponentFrameRoot(),R=x[0],U=x[1];if(R&&U){var W=R.split("\n"),pe=U.split("\n");for(h=o=0;o<W.length&&!W[o].includes("DetermineComponentFrameRoot");)o++;for(;h<pe.length&&!pe[h].includes("DetermineComponentFrameRoot");)h++;if(o===W.length||h===pe.length)for(o=W.length-1,h=pe.length-1;1<=o&&0<=h&&W[o]!==pe[h];)h--;for(;1<=o&&0<=h;o--,h--)if(W[o]!==pe[h]){if(o!==1||h!==1)do if(o--,h--,0>h||W[o]!==pe[h]){var Ee="\n"+W[o].replace(" at new "," at ");return t.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",t.displayName)),Ee}while(1<=o&&0<=h);break}}}finally{St=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?Le(n):""}function It(t,a){switch(t.tag){case 26:case 27:case 5:return Le(t.type);case 16:return Le("Lazy");case 13:return t.child!==a&&a!==null?Le("Suspense Fallback"):Le("Suspense");case 19:return Le("SuspenseList");case 0:case 15:return Qe(t.type,!1);case 11:return Qe(t.type.render,!1);case 1:return Qe(t.type,!0);case 31:return Le("Activity");default:return""}}function $t(t){try{var a="",n=null;do a+=It(t,n),n=t,t=t.return;while(t);return a}catch(o){return"\nError generating stack: "+o.message+"\n"+o.stack}}var Zt=Object.prototype.hasOwnProperty,Xt=r.unstable_scheduleCallback,ya=r.unstable_cancelCallback,kt=r.unstable_shouldYield,de=r.unstable_requestPaint,Ie=r.unstable_now,Pe=r.unstable_getCurrentPriorityLevel,F=r.unstable_ImmediatePriority,nt=r.unstable_UserBlockingPriority,ee=r.unstable_NormalPriority,Re=r.unstable_LowPriority,De=r.unstable_IdlePriority,We=r.log,Ye=r.unstable_setDisableYieldValue,ct=null,Ne=null;function Xe(t){if(typeof We=="function"&&Ye(t),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(ct,t)}catch(a){}}var ut=Math.clz32?Math.clz32:st,ue=Math.log,rt=Math.LN2;function st(t){return t>>>=0,t===0?32:31-(ue(t)/rt|0)|0}var et=256,Ut=262144,Ot=4194304;function Se(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function gt(t,a,n){var o=t.pendingLanes;if(o===0)return 0;var h=0,x=t.suspendedLanes,R=t.pingedLanes;t=t.warmLanes;var U=o&134217727;return U!==0?(o=U&~x,o!==0?h=Se(o):(R&=U,R!==0?h=Se(R):n||(n=U&~t,n!==0&&(h=Se(n))))):(U=o&~x,U!==0?h=Se(U):R!==0?h=Se(R):n||(n=o&~t,n!==0&&(h=Se(n)))),h===0?0:a!==0&&a!==h&&(a&x)===0&&(x=h&-h,n=a&-a,x>=n||x===32&&(n&4194048)!==0)?a:h}function Bt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function jt(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vt(){var t=Ot;return Ot<<=1,(Ot&62914560)===0&&(Ot=4194304),t}function ia(t){for(var a=[],n=0;31>n;n++)a.push(t);return a}function K(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function se(t,a,n,o,h,x){var R=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var U=t.entanglements,W=t.expirationTimes,pe=t.hiddenUpdates;for(n=R&~n;0<n;){var Ee=31-ut(n),Oe=1<<Ee;U[Ee]=0,W[Ee]=-1;var ve=pe[Ee];if(ve!==null)for(pe[Ee]=null,Ee=0;Ee<ve.length;Ee++){var we=ve[Ee];we!==null&&(we.lane&=-536870913)}n&=~Oe}o!==0&&ae(t,o,0),x!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=x&~(R&~a))}function ae(t,a,n){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-ut(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|n&261930}function Je(t,a){var n=t.entangledLanes|=a;for(t=t.entanglements;n;){var o=31-ut(n),h=1<<o;h&a|t[o]&a&&(t[o]|=a),n&=~h}}function Nt(t,a){var n=a&-a;return n=(n&42)!==0?1:Ve(n),(n&(t.suspendedLanes|a))!==0?0:n}function Ve(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Be(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function mt(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:Kg(t.type))}function bt(t,a){var n=X.p;try{return X.p=t,a()}finally{X.p=n}}var lt=Math.random().toString(36).slice(2),At="__reactFiber$"+lt,H="__reactProps$"+lt,J="__reactContainer$"+lt,xe="__reactEvents$"+lt,qe="__reactListeners$"+lt,ot="__reactHandles$"+lt,dt="__reactResources$"+lt,Et="__reactMarker$"+lt;function Ct(t){delete t[At],delete t[H],delete t[xe],delete t[qe],delete t[ot]}function oa(t){var a=t[At];if(a)return a;for(var n=t.parentNode;n;){if(a=n[J]||n[At]){if(n=a.alternate,a.child!==null||n!==null&&n.child!==null)for(t=Ag(t);t!==null;){if(n=t[At])return n;t=Ag(t)}return a}t=n,n=t.parentNode}return null}function Da(t){if(t=t[At]||t[J]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function pa(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function yt(t){var a=t[dt];return a||(a=t[dt]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Wt(t){t[Et]=!0}var gs=new Set,Pr={};function Cs(t,a){Rs(t,a),Rs(t+"Capture",a)}function Rs(t,a){for(Pr[t]=a,t=0;t<a.length;t++)gs.add(a[t])}var _r=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Os={},Sr={};function xr(t){return Zt.call(Sr,t)?!0:Zt.call(Os,t)?!1:_r.test(t)?Sr[t]=!0:(Os[t]=!0,!1)}function ar(t,a,n){if(xr(a))if(n===null)t.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+n)}}function Dr(t,a,n){if(n===null)t.removeAttribute(a);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+n)}}function zs(t,a,n,o){if(o===null)t.removeAttribute(n);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(a,n,""+o)}}function he(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ge(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function tt(t,a,n){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,x=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return h.call(this)},set:function(R){n=""+R,x.call(this,R)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return n},setValue:function(R){n=""+R},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function it(t){if(!t._valueTracker){var a=Ge(t)?"checked":"value";t._valueTracker=tt(t,a,""+t[a])}}function Pt(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var n=a.getValue(),o="";return t&&(o=Ge(t)?t.checked?"true":"false":t.value),t=o,t!==n?(a.setValue(t),!0):!1}function Ft(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch(a){return t.body}}var ba=/[\n"\\]/g;function Gt(t){return t.replace(ba,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Ta(t,a,n,o,h,x,R,U){t.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.type=R:t.removeAttribute("type"),a!=null?R==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+he(a)):t.value!==""+he(a)&&(t.value=""+he(a)):R!=="submit"&&R!=="reset"||t.removeAttribute("value"),a!=null?be(t,R,he(a)):n!=null?be(t,R,he(n)):o!=null&&t.removeAttribute("value"),h==null&&x!=null&&(t.defaultChecked=!!x),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?t.name=""+he(U):t.removeAttribute("name")}function te(t,a,n,o,h,x,R,U){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.type=x),a!=null||n!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){it(t);return}n=n!=null?""+he(n):"",a=a!=null?""+he(a):n,U||a===t.value||(t.value=a),t.defaultValue=a}o=o!=null?o:h,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=U?t.checked:!!o,t.defaultChecked=!!o,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(t.name=R),it(t)}function be(t,a,n){a==="number"&&Ft(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Ae(t,a,n,o){if(t=t.options,a){a={};for(var h=0;h<n.length;h++)a["$"+n[h]]=!0;for(n=0;n<t.length;n++)h=a.hasOwnProperty("$"+t[n].value),t[n].selected!==h&&(t[n].selected=h),h&&o&&(t[n].defaultSelected=!0)}else{for(n=""+he(n),a=null,h=0;h<t.length;h++){if(t[h].value===n){t[h].selected=!0,o&&(t[h].defaultSelected=!0);return}a!==null||t[h].disabled||(a=t[h])}a!==null&&(a.selected=!0)}}function ze(t,a,n){if(a!=null&&(a=""+he(a),a!==t.value&&(t.value=a),n==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=n!=null?""+he(n):""}function vt(t,a,n,o){if(a==null){if(o!=null){if(n!=null)throw Error(i(92));if(ye(o)){if(1<o.length)throw Error(i(93));o=o[0]}n=o}n==null&&(n=""),a=n}n=he(a),t.defaultValue=n,o=t.textContent,o===n&&o!==""&&o!==null&&(t.value=o),it(t)}function Ue(t,a){if(a){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=a;return}}t.textContent=a}var _e=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function He(t,a,n){var o=a.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,n):typeof n!="number"||n===0||_e.has(a)?a==="float"?t.cssFloat=n:t[a]=(""+n).trim():t[a]=n+"px"}function Ce(t,a,n){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,n!=null){for(var o in n)!n.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var h in a)o=a[h],a.hasOwnProperty(h)&&n[h]!==o&&He(t,h,o)}else for(var x in a)a.hasOwnProperty(x)&&He(t,x,a[x])}function Dt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),da=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pt(t){return da.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Fe(){}var ha=null;function xt(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kt=null,Lt=null;function Ba(t){var a=Da(t);if(a&&(t=a.stateNode)){var n=t[H]||null;e:switch(t=a.stateNode,a.type){case"input":if(Ta(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),a=n.name,n.type==="radio"&&a!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Gt(""+a)+'"][type="radio"]'),a=0;a<n.length;a++){var o=n[a];if(o!==t&&o.form===t.form){var h=o[H]||null;if(!h)throw Error(i(90));Ta(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<n.length;a++)o=n[a],o.form===t.form&&Pt(o)}break e;case"textarea":ze(t,n.value,n.defaultValue);break e;case"select":a=n.value,a!=null&&Ae(t,!!n.multiple,a,!1)}}}var ea=!1;function Ha(t,a,n){if(ea)return t(a,n);ea=!0;try{var o=t(a);return o}finally{if(ea=!1,(Kt!==null||Lt!==null)&&(mc(),Kt&&(a=Kt,t=Lt,Lt=Kt=null,Ba(a),t)))for(a=0;a<t.length;a++)Ba(t[a])}}function bs(t,a){var n=t.stateNode;if(n===null)return null;var o=n[H]||null;if(o===null)return null;n=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(i(231,a,typeof n));return n}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ua=!1;if(Ua)try{var ta={};Object.defineProperty(ta,"passive",{get:function(){ua=!0}}),window.addEventListener("test",ta,ta),window.removeEventListener("test",ta,ta)}catch(t){ua=!1}var Qa=null,ys=null,Br=null;function Za(){if(Br)return Br;var t,a=ys,n=a.length,o,h="value"in Qa?Qa.value:Qa.textContent,x=h.length;for(t=0;t<n&&a[t]===h[t];t++);var R=n-t;for(o=1;o<=R&&a[n-o]===h[x-o];o++);return Br=h.slice(t,1<o?1-o:void 0)}function Ks(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function kr(){return!0}function un(){return!1}function Fa(t){function a(n,o,h,x,R){this._reactName=n,this._targetInst=h,this.type=o,this.nativeEvent=x,this.target=R,this.currentTarget=null;for(var U in t)t.hasOwnProperty(U)&&(n=t[U],this[U]=n?n(x):x[U]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?kr:un,this.isPropagationStopped=un,this}return w(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),a}var Ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gl=Fa(Ur),vi=w({},Ur,{view:0,detail:0}),tb=Fa(vi),vd,jd,ji,Co=w({},vi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ji&&(ji&&t.type==="mousemove"?(vd=t.screenX-ji.screenX,jd=t.screenY-ji.screenY):jd=vd=0,ji=t),vd)},movementY:function(t){return"movementY"in t?t.movementY:jd}}),wh=Fa(Co),ab=w({},Co,{dataTransfer:0}),sb=Fa(ab),rb=w({},vi,{relatedTarget:0}),Nd=Fa(rb),nb=w({},Ur,{animationName:0,elapsedTime:0,pseudoElement:0}),lb=Fa(nb),ib=w({},Ur,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ob=Fa(ib),cb=w({},Ur,{data:0}),_h=Fa(cb),db={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ub={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hb(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=mb[t])?!!a[t]:!1}function wd(){return hb}var fb=w({},vi,{key:function(t){if(t.key){var a=db[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ks(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ub[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wd,charCode:function(t){return t.type==="keypress"?Ks(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ks(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),xb=Fa(fb),gb=w({},Co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sh=Fa(gb),yb=w({},vi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wd}),pb=Fa(yb),bb=w({},Ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),vb=Fa(bb),jb=w({},Co,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Nb=Fa(jb),wb=w({},Ur,{newState:0,oldState:0}),_b=Fa(wb),Sb=[9,13,27,32],_d=Ua&&"CompositionEvent"in window,Ni=null;Ua&&"documentMode"in document&&(Ni=document.documentMode);var kb=Ua&&"TextEvent"in window&&!Ni,kh=Ua&&(!_d||Ni&&8<Ni&&11>=Ni),Eh=" ",Th=!1;function Ah(t,a){switch(t){case"keyup":return Sb.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ch(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yl=!1;function Eb(t,a){switch(t){case"compositionend":return Ch(a);case"keypress":return a.which!==32?null:(Th=!0,Eh);case"textInput":return t=a.data,t===Eh&&Th?null:t;default:return null}}function Tb(t,a){if(yl)return t==="compositionend"||!_d&&Ah(t,a)?(t=Za(),Br=ys=Qa=null,yl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return kh&&a.locale!=="ko"?null:a.data;default:return null}}var Ab={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!Ab[t.type]:a==="textarea"}function Rh(t,a,n,o){Kt?Lt?Lt.push(o):Lt=[o]:Kt=o,a=bc(a,"onChange"),0<a.length&&(n=new gl("onChange","change",null,n,o),t.push({event:n,listeners:a}))}var wi=null,_i=null;function Cb(t){xg(t,0)}function Mo(t){var a=pa(t);if(Pt(a))return t}function Oh(t,a){if(t==="change")return a}var zh=!1;if(Ua){var Sd;if(Ua){var kd="oninput"in document;if(!kd){var Ph=document.createElement("div");Ph.setAttribute("oninput","return;"),kd=typeof Ph.oninput=="function"}Sd=kd}else Sd=!1;zh=Sd&&(!document.documentMode||9<document.documentMode)}function Dh(){wi&&(wi.detachEvent("onpropertychange",Bh),_i=wi=null)}function Bh(t){if(t.propertyName==="value"&&Mo(_i)){var a=[];Rh(a,_i,t,xt(t)),Ha(Cb,a)}}function Mb(t,a,n){t==="focusin"?(Dh(),wi=a,_i=n,wi.attachEvent("onpropertychange",Bh)):t==="focusout"&&Dh()}function Rb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mo(_i)}function Ob(t,a){if(t==="click")return Mo(a)}function zb(t,a){if(t==="input"||t==="change")return Mo(a)}function Pb(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Hs=typeof Object.is=="function"?Object.is:Pb;function Si(t,a){if(Hs(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var n=Object.keys(t),o=Object.keys(a);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var h=n[o];if(!Zt.call(a,h)||!Hs(t[h],a[h]))return!1}return!0}function Uh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lh(t,a){var n=Uh(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=a&&o>=a)return{node:n,offset:a-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uh(n)}}function $h(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?$h(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Ih(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Ft(t.document);a instanceof t.HTMLIFrameElement;){try{var n=typeof a.contentWindow.location.href=="string"}catch(o){n=!1}if(n)t=a.contentWindow;else break;a=Ft(t.document)}return a}function Ed(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Db=Ua&&"documentMode"in document&&11>=document.documentMode,pl=null,Td=null,ki=null,Ad=!1;function qh(t,a,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ad||pl==null||pl!==Ft(o)||(o=pl,"selectionStart"in o&&Ed(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ki&&Si(ki,o)||(ki=o,o=bc(Td,"onSelect"),0<o.length&&(a=new gl("onSelect","select",null,a,n),t.push({event:a,listeners:o}),a.target=pl)))}function Un(t,a){var n={};return n[t.toLowerCase()]=a.toLowerCase(),n["Webkit"+t]="webkit"+a,n["Moz"+t]="moz"+a,n}var bl={animationend:Un("Animation","AnimationEnd"),animationiteration:Un("Animation","AnimationIteration"),animationstart:Un("Animation","AnimationStart"),transitionrun:Un("Transition","TransitionRun"),transitionstart:Un("Transition","TransitionStart"),transitioncancel:Un("Transition","TransitionCancel"),transitionend:Un("Transition","TransitionEnd")},Cd={},Yh={};Ua&&(Yh=document.createElement("div").style,"AnimationEvent"in window||(delete bl.animationend.animation,delete bl.animationiteration.animation,delete bl.animationstart.animation),"TransitionEvent"in window||delete bl.transitionend.transition);function Ln(t){if(Cd[t])return Cd[t];if(!bl[t])return t;var a=bl[t],n;for(n in a)if(a.hasOwnProperty(n)&&n in Yh)return Cd[t]=a[n];return t}var Gh=Ln("animationend"),Kh=Ln("animationiteration"),Hh=Ln("animationstart"),Bb=Ln("transitionrun"),Ub=Ln("transitionstart"),Lb=Ln("transitioncancel"),Vh=Ln("transitionend"),Fh=new Map,Md="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Md.push("scrollEnd");function gr(t,a){Fh.set(t,a),Cs(a,[t])}var Ro=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},sr=[],vl=0,Rd=0;function Oo(){for(var t=vl,a=Rd=vl=0;a<t;){var n=sr[a];sr[a++]=null;var o=sr[a];sr[a++]=null;var h=sr[a];sr[a++]=null;var x=sr[a];if(sr[a++]=null,o!==null&&h!==null){var R=o.pending;R===null?h.next=h:(h.next=R.next,R.next=h),o.pending=h}x!==0&&Xh(n,h,x)}}function zo(t,a,n,o){sr[vl++]=t,sr[vl++]=a,sr[vl++]=n,sr[vl++]=o,Rd|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Od(t,a,n,o){return zo(t,a,n,o),Po(t)}function $n(t,a){return zo(t,null,null,a),Po(t)}function Xh(t,a,n){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n);for(var h=!1,x=t.return;x!==null;)x.childLanes|=n,o=x.alternate,o!==null&&(o.childLanes|=n),x.tag===22&&(t=x.stateNode,t===null||t._visibility&1||(h=!0)),t=x,x=x.return;return t.tag===3?(x=t.stateNode,h&&a!==null&&(h=31-ut(n),t=x.hiddenUpdates,o=t[h],o===null?t[h]=[a]:o.push(a),a.lane=n|536870912),x):null}function Po(t){if(50<Fi)throw Fi=0,qu=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var jl={};function $b(t,a,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vs(t,a,n,o){return new $b(t,a,n,o)}function zd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Lr(t,a){var n=t.alternate;return n===null?(n=Vs(t.tag,a,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=a,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,a=t.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Jh(t,a){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,a=n.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Do(t,a,n,o,h,x){var R=0;if(o=t,typeof t=="function")zd(t)&&(R=1);else if(typeof t=="string")R=Kv(t,n,q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case P:return t=Vs(31,n,a,h),t.elementType=P,t.lanes=x,t;case M:return In(n.children,h,x,a);case T:R=8,h|=24;break;case A:return t=Vs(12,n,a,h|2),t.elementType=A,t.lanes=x,t;case j:return t=Vs(13,n,a,h),t.elementType=j,t.lanes=x,t;case E:return t=Vs(19,n,a,h),t.elementType=E,t.lanes=x,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case y:R=10;break e;case S:R=9;break e;case p:R=11;break e;case C:R=14;break e;case O:R=16,o=null;break e}R=29,n=Error(i(130,t===null?"null":typeof t,"")),o=null}return a=Vs(R,n,a,h),a.elementType=t,a.type=o,a.lanes=x,a}function In(t,a,n,o){return t=Vs(7,t,o,a),t.lanes=n,t}function Pd(t,a,n){return t=Vs(6,t,null,a),t.lanes=n,t}function Qh(t){var a=Vs(18,null,null,0);return a.stateNode=t,a}function Dd(t,a,n){return a=Vs(4,t.children!==null?t.children:[],t.key,a),a.lanes=n,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Zh=new WeakMap;function rr(t,a){if(typeof t=="object"&&t!==null){var n=Zh.get(t);return n!==void 0?n:(a={value:t,source:a,stack:$t(a)},Zh.set(t,a),a)}return{value:t,source:a,stack:$t(a)}}var Nl=[],wl=0,Bo=null,Ei=0,nr=[],lr=0,mn=null,Er=1,Tr="";function $r(t,a){Nl[wl++]=Ei,Nl[wl++]=Bo,Bo=t,Ei=a}function Wh(t,a,n){nr[lr++]=Er,nr[lr++]=Tr,nr[lr++]=mn,mn=t;var o=Er;t=Tr;var h=32-ut(o)-1;o&=~(1<<h),n+=1;var x=32-ut(a)+h;if(30<x){var R=h-h%5;x=(o&(1<<R)-1).toString(32),o>>=R,h-=R,Er=1<<32-ut(a)+h|n<<h|o,Tr=x+t}else Er=1<<x|n<<h|o,Tr=t}function Bd(t){t.return!==null&&($r(t,1),Wh(t,1,0))}function Ud(t){for(;t===Bo;)Bo=Nl[--wl],Nl[wl]=null,Ei=Nl[--wl],Nl[wl]=null;for(;t===mn;)mn=nr[--lr],nr[lr]=null,Tr=nr[--lr],nr[lr]=null,Er=nr[--lr],nr[lr]=null}function ef(t,a){nr[lr++]=Er,nr[lr++]=Tr,nr[lr++]=mn,Er=a.id,Tr=a.overflow,mn=t}var vs=null,La=null,ca=!1,hn=null,ir=!1,Ld=Error(i(519));function fn(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ti(rr(a,t)),Ld}function tf(t){var a=t.stateNode,n=t.type,o=t.memoizedProps;switch(a[At]=t,a[H]=o,n){case"dialog":sa("cancel",a),sa("close",a);break;case"iframe":case"object":case"embed":sa("load",a);break;case"video":case"audio":for(n=0;n<Ji.length;n++)sa(Ji[n],a);break;case"source":sa("error",a);break;case"img":case"image":case"link":sa("error",a),sa("load",a);break;case"details":sa("toggle",a);break;case"input":sa("invalid",a),te(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":sa("invalid",a);break;case"textarea":sa("invalid",a),vt(a,o.value,o.defaultValue,o.children)}n=o.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||a.textContent===""+n||o.suppressHydrationWarning===!0||bg(a.textContent,n)?(o.popover!=null&&(sa("beforetoggle",a),sa("toggle",a)),o.onScroll!=null&&sa("scroll",a),o.onScrollEnd!=null&&sa("scrollend",a),o.onClick!=null&&(a.onclick=Fe),a=!0):a=!1,a||fn(t,!0)}function af(t){for(vs=t.return;vs;)switch(vs.tag){case 5:case 31:case 13:ir=!1;return;case 27:case 3:ir=!0;return;default:vs=vs.return}}function _l(t){if(t!==vs)return!1;if(!ca)return af(t),ca=!0,!1;var a=t.tag,n;if((n=a!==3&&a!==27)&&((n=a===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||sm(t.type,t.memoizedProps)),n=!n),n&&La&&fn(t),af(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));La=Tg(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));La=Tg(t)}else a===27?(a=La,Tn(t.type)?(t=om,om=null,La=t):La=a):La=vs?cr(t.stateNode.nextSibling):null;return!0}function qn(){La=vs=null,ca=!1}function $d(){var t=hn;return t!==null&&(Us===null?Us=t:Us.push.apply(Us,t),hn=null),t}function Ti(t){hn===null?hn=[t]:hn.push(t)}var Id=B(null),Yn=null,Ir=null;function xn(t,a,n){Q(Id,a._currentValue),a._currentValue=n}function qr(t){t._currentValue=Id.current,Y(Id)}function qd(t,a,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===n)break;t=t.return}}function Yd(t,a,n,o){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var x=h.dependencies;if(x!==null){var R=h.child;x=x.firstContext;e:for(;x!==null;){var U=x;x=h;for(var W=0;W<a.length;W++)if(U.context===a[W]){x.lanes|=n,U=x.alternate,U!==null&&(U.lanes|=n),qd(x.return,n,t),o||(R=null);break e}x=U.next}}else if(h.tag===18){if(R=h.return,R===null)throw Error(i(341));R.lanes|=n,x=R.alternate,x!==null&&(x.lanes|=n),qd(R,n,t),R=null}else R=h.child;if(R!==null)R.return=h;else for(R=h;R!==null;){if(R===t){R=null;break}if(h=R.sibling,h!==null){h.return=R.return,R=h;break}R=R.return}h=R}}function Sl(t,a,n,o){t=null;for(var h=a,x=!1;h!==null;){if(!x){if((h.flags&524288)!==0)x=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var R=h.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var U=h.type;Hs(h.pendingProps.value,R.value)||(t!==null?t.push(U):t=[U])}}else if(h===Te.current){if(R=h.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(to):t=[to])}h=h.return}t!==null&&Yd(a,t,n,o),a.flags|=262144}function Uo(t){for(t=t.firstContext;t!==null;){if(!Hs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Gn(t){Yn=t,Ir=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function js(t){return sf(Yn,t)}function Lo(t,a){return Yn===null&&Gn(t),sf(t,a)}function sf(t,a){var n=a._currentValue;if(a={context:a,memoizedValue:n,next:null},Ir===null){if(t===null)throw Error(i(308));Ir=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ir=Ir.next=a;return n}var Ib=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(n,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(n){return n()})}},qb=r.unstable_scheduleCallback,Yb=r.unstable_NormalPriority,ss={$$typeof:y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gd(){return{controller:new Ib,data:new Map,refCount:0}}function Ai(t){t.refCount--,t.refCount===0&&qb(Yb,function(){t.controller.abort()})}var Ci=null,Kd=0,kl=0,El=null;function Gb(t,a){if(Ci===null){var n=Ci=[];Kd=0,kl=Fu(),El={status:"pending",value:void 0,then:function(o){n.push(o)}}}return Kd++,a.then(rf,rf),a}function rf(){if(--Kd===0&&Ci!==null){El!==null&&(El.status="fulfilled");var t=Ci;Ci=null,kl=0,El=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Kb(t,a){var n=[],o={status:"pending",value:null,reason:null,then:function(h){n.push(h)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var h=0;h<n.length;h++)(0,n[h])(a)},function(h){for(o.status="rejected",o.reason=h,h=0;h<n.length;h++)(0,n[h])(void 0)}),o}var nf=z.S;z.S=function(t,a){Yx=Ie(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Gb(t,a),nf!==null&&nf(t,a)};var Kn=B(null);function Hd(){var t=Kn.current;return t!==null?t:Aa.pooledCache}function $o(t,a){a===null?Q(Kn,Kn.current):Q(Kn,a.pool)}function lf(){var t=Hd();return t===null?null:{parent:ss._currentValue,pool:t}}var Tl=Error(i(460)),Vd=Error(i(474)),Io=Error(i(542)),qo={then:function(){}};function of(t){return t=t.status,t==="fulfilled"||t==="rejected"}function cf(t,a,n){switch(n=t[n],n===void 0?t.push(a):n!==a&&(a.then(Fe,Fe),a=n),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,uf(t),t;default:if(typeof a.status=="string")a.then(Fe,Fe);else{if(t=Aa,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=o}},function(o){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,uf(t),t}throw Vn=a,Tl}}function Hn(t){try{var a=t._init;return a(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Vn=n,Tl):n}}var Vn=null;function df(){if(Vn===null)throw Error(i(459));var t=Vn;return Vn=null,t}function uf(t){if(t===Tl||t===Io)throw Error(i(483))}var Al=null,Mi=0;function Yo(t){var a=Mi;return Mi+=1,Al===null&&(Al=[]),cf(Al,t,a)}function Ri(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Go(t,a){throw a.$$typeof===N?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function mf(t){function a(me,ne){if(t){var ge=me.deletions;ge===null?(me.deletions=[ne],me.flags|=16):ge.push(ne)}}function n(me,ne){if(!t)return null;for(;ne!==null;)a(me,ne),ne=ne.sibling;return null}function o(me){for(var ne=new Map;me!==null;)me.key!==null?ne.set(me.key,me):ne.set(me.index,me),me=me.sibling;return ne}function h(me,ne){return me=Lr(me,ne),me.index=0,me.sibling=null,me}function x(me,ne,ge){return me.index=ge,t?(ge=me.alternate,ge!==null?(ge=ge.index,ge<ne?(me.flags|=67108866,ne):ge):(me.flags|=67108866,ne)):(me.flags|=1048576,ne)}function R(me){return t&&me.alternate===null&&(me.flags|=67108866),me}function U(me,ne,ge,Me){return ne===null||ne.tag!==6?(ne=Pd(ge,me.mode,Me),ne.return=me,ne):(ne=h(ne,ge),ne.return=me,ne)}function W(me,ne,ge,Me){var Mt=ge.type;return Mt===M?Ee(me,ne,ge.props.children,Me,ge.key):ne!==null&&(ne.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===O&&Hn(Mt)===ne.type)?(ne=h(ne,ge.props),Ri(ne,ge),ne.return=me,ne):(ne=Do(ge.type,ge.key,ge.props,null,me.mode,Me),Ri(ne,ge),ne.return=me,ne)}function pe(me,ne,ge,Me){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ge.containerInfo||ne.stateNode.implementation!==ge.implementation?(ne=Dd(ge,me.mode,Me),ne.return=me,ne):(ne=h(ne,ge.children||[]),ne.return=me,ne)}function Ee(me,ne,ge,Me,Mt){return ne===null||ne.tag!==7?(ne=In(ge,me.mode,Me,Mt),ne.return=me,ne):(ne=h(ne,ge),ne.return=me,ne)}function Oe(me,ne,ge){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=Pd(""+ne,me.mode,ge),ne.return=me,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case k:return ge=Do(ne.type,ne.key,ne.props,null,me.mode,ge),Ri(ge,ne),ge.return=me,ge;case _:return ne=Dd(ne,me.mode,ge),ne.return=me,ne;case O:return ne=Hn(ne),Oe(me,ne,ge)}if(ye(ne)||Z(ne))return ne=In(ne,me.mode,ge,null),ne.return=me,ne;if(typeof ne.then=="function")return Oe(me,Yo(ne),ge);if(ne.$$typeof===y)return Oe(me,Lo(me,ne),ge);Go(me,ne)}return null}function ve(me,ne,ge,Me){var Mt=ne!==null?ne.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Mt!==null?null:U(me,ne,""+ge,Me);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case k:return ge.key===Mt?W(me,ne,ge,Me):null;case _:return ge.key===Mt?pe(me,ne,ge,Me):null;case O:return ge=Hn(ge),ve(me,ne,ge,Me)}if(ye(ge)||Z(ge))return Mt!==null?null:Ee(me,ne,ge,Me,null);if(typeof ge.then=="function")return ve(me,ne,Yo(ge),Me);if(ge.$$typeof===y)return ve(me,ne,Lo(me,ge),Me);Go(me,ge)}return null}function we(me,ne,ge,Me,Mt){if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return me=me.get(ge)||null,U(ne,me,""+Me,Mt);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case k:return me=me.get(Me.key===null?ge:Me.key)||null,W(ne,me,Me,Mt);case _:return me=me.get(Me.key===null?ge:Me.key)||null,pe(ne,me,Me,Mt);case O:return Me=Hn(Me),we(me,ne,ge,Me,Mt)}if(ye(Me)||Z(Me))return me=me.get(ge)||null,Ee(ne,me,Me,Mt,null);if(typeof Me.then=="function")return we(me,ne,ge,Yo(Me),Mt);if(Me.$$typeof===y)return we(me,ne,ge,Lo(ne,Me),Mt);Go(ne,Me)}return null}function ft(me,ne,ge,Me){for(var Mt=null,fa=null,wt=ne,Ht=ne=0,la=null;wt!==null&&Ht<ge.length;Ht++){wt.index>Ht?(la=wt,wt=null):la=wt.sibling;var xa=ve(me,wt,ge[Ht],Me);if(xa===null){wt===null&&(wt=la);break}t&&wt&&xa.alternate===null&&a(me,wt),ne=x(xa,ne,Ht),fa===null?Mt=xa:fa.sibling=xa,fa=xa,wt=la}if(Ht===ge.length)return n(me,wt),ca&&$r(me,Ht),Mt;if(wt===null){for(;Ht<ge.length;Ht++)wt=Oe(me,ge[Ht],Me),wt!==null&&(ne=x(wt,ne,Ht),fa===null?Mt=wt:fa.sibling=wt,fa=wt);return ca&&$r(me,Ht),Mt}for(wt=o(wt);Ht<ge.length;Ht++)la=we(wt,me,Ht,ge[Ht],Me),la!==null&&(t&&la.alternate!==null&&wt.delete(la.key===null?Ht:la.key),ne=x(la,ne,Ht),fa===null?Mt=la:fa.sibling=la,fa=la);return t&&wt.forEach(function(On){return a(me,On)}),ca&&$r(me,Ht),Mt}function Rt(me,ne,ge,Me){if(ge==null)throw Error(i(151));for(var Mt=null,fa=null,wt=ne,Ht=ne=0,la=null,xa=ge.next();wt!==null&&!xa.done;Ht++,xa=ge.next()){wt.index>Ht?(la=wt,wt=null):la=wt.sibling;var On=ve(me,wt,xa.value,Me);if(On===null){wt===null&&(wt=la);break}t&&wt&&On.alternate===null&&a(me,wt),ne=x(On,ne,Ht),fa===null?Mt=On:fa.sibling=On,fa=On,wt=la}if(xa.done)return n(me,wt),ca&&$r(me,Ht),Mt;if(wt===null){for(;!xa.done;Ht++,xa=ge.next())xa=Oe(me,xa.value,Me),xa!==null&&(ne=x(xa,ne,Ht),fa===null?Mt=xa:fa.sibling=xa,fa=xa);return ca&&$r(me,Ht),Mt}for(wt=o(wt);!xa.done;Ht++,xa=ge.next())xa=we(wt,me,Ht,xa.value,Me),xa!==null&&(t&&xa.alternate!==null&&wt.delete(xa.key===null?Ht:xa.key),ne=x(xa,ne,Ht),fa===null?Mt=xa:fa.sibling=xa,fa=xa);return t&&wt.forEach(function(aj){return a(me,aj)}),ca&&$r(me,Ht),Mt}function Sa(me,ne,ge,Me){if(typeof ge=="object"&&ge!==null&&ge.type===M&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case k:e:{for(var Mt=ge.key;ne!==null;){if(ne.key===Mt){if(Mt=ge.type,Mt===M){if(ne.tag===7){n(me,ne.sibling),Me=h(ne,ge.props.children),Me.return=me,me=Me;break e}}else if(ne.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===O&&Hn(Mt)===ne.type){n(me,ne.sibling),Me=h(ne,ge.props),Ri(Me,ge),Me.return=me,me=Me;break e}n(me,ne);break}else a(me,ne);ne=ne.sibling}ge.type===M?(Me=In(ge.props.children,me.mode,Me,ge.key),Me.return=me,me=Me):(Me=Do(ge.type,ge.key,ge.props,null,me.mode,Me),Ri(Me,ge),Me.return=me,me=Me)}return R(me);case _:e:{for(Mt=ge.key;ne!==null;){if(ne.key===Mt)if(ne.tag===4&&ne.stateNode.containerInfo===ge.containerInfo&&ne.stateNode.implementation===ge.implementation){n(me,ne.sibling),Me=h(ne,ge.children||[]),Me.return=me,me=Me;break e}else{n(me,ne);break}else a(me,ne);ne=ne.sibling}Me=Dd(ge,me.mode,Me),Me.return=me,me=Me}return R(me);case O:return ge=Hn(ge),Sa(me,ne,ge,Me)}if(ye(ge))return ft(me,ne,ge,Me);if(Z(ge)){if(Mt=Z(ge),typeof Mt!="function")throw Error(i(150));return ge=Mt.call(ge),Rt(me,ne,ge,Me)}if(typeof ge.then=="function")return Sa(me,ne,Yo(ge),Me);if(ge.$$typeof===y)return Sa(me,ne,Lo(me,ge),Me);Go(me,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ne!==null&&ne.tag===6?(n(me,ne.sibling),Me=h(ne,ge),Me.return=me,me=Me):(n(me,ne),Me=Pd(ge,me.mode,Me),Me.return=me,me=Me),R(me)):n(me,ne)}return function(me,ne,ge,Me){try{Mi=0;var Mt=Sa(me,ne,ge,Me);return Al=null,Mt}catch(wt){if(wt===Tl||wt===Io)throw wt;var fa=Vs(29,wt,null,me.mode);return fa.lanes=Me,fa.return=me,fa}finally{}}}var Fn=mf(!0),hf=mf(!1),gn=!1;function Fd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xd(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function yn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function pn(t,a,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ga&2)!==0){var h=o.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),o.pending=a,a=Po(t),Xh(t,null,n),a}return zo(t,o,a,n),Po(t)}function Oi(t,a,n){if(a=a.updateQueue,a!==null&&(a=a.shared,(n&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,n|=o,a.lanes=n,Je(t,n)}}function Jd(t,a){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var h=null,x=null;if(n=n.firstBaseUpdate,n!==null){do{var R={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};x===null?h=x=R:x=x.next=R,n=n.next}while(n!==null);x===null?h=x=a:x=x.next=a}else h=x=a;n={baseState:o.baseState,firstBaseUpdate:h,lastBaseUpdate:x,shared:o.shared,callbacks:o.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=a:t.next=a,n.lastBaseUpdate=a}var Qd=!1;function zi(){if(Qd){var t=El;if(t!==null)throw t}}function Pi(t,a,n,o){Qd=!1;var h=t.updateQueue;gn=!1;var x=h.firstBaseUpdate,R=h.lastBaseUpdate,U=h.shared.pending;if(U!==null){h.shared.pending=null;var W=U,pe=W.next;W.next=null,R===null?x=pe:R.next=pe,R=W;var Ee=t.alternate;Ee!==null&&(Ee=Ee.updateQueue,U=Ee.lastBaseUpdate,U!==R&&(U===null?Ee.firstBaseUpdate=pe:U.next=pe,Ee.lastBaseUpdate=W))}if(x!==null){var Oe=h.baseState;R=0,Ee=pe=W=null,U=x;do{var ve=U.lane&-536870913,we=ve!==U.lane;if(we?(na&ve)===ve:(o&ve)===ve){ve!==0&&ve===kl&&(Qd=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var ft=t,Rt=U;ve=a;var Sa=n;switch(Rt.tag){case 1:if(ft=Rt.payload,typeof ft=="function"){Oe=ft.call(Sa,Oe,ve);break e}Oe=ft;break e;case 3:ft.flags=ft.flags&-65537|128;case 0:if(ft=Rt.payload,ve=typeof ft=="function"?ft.call(Sa,Oe,ve):ft,ve==null)break e;Oe=w({},Oe,ve);break e;case 2:gn=!0}}ve=U.callback,ve!==null&&(t.flags|=64,we&&(t.flags|=8192),we=h.callbacks,we===null?h.callbacks=[ve]:we.push(ve))}else we={lane:ve,tag:U.tag,payload:U.payload,callback:U.callback,next:null},Ee===null?(pe=Ee=we,W=Oe):Ee=Ee.next=we,R|=ve;if(U=U.next,U===null){if(U=h.shared.pending,U===null)break;we=U,U=we.next,we.next=null,h.lastBaseUpdate=we,h.shared.pending=null}}while(!0);Ee===null&&(W=Oe),h.baseState=W,h.firstBaseUpdate=pe,h.lastBaseUpdate=Ee,x===null&&(h.shared.lanes=0),wn|=R,t.lanes=R,t.memoizedState=Oe}}function ff(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function xf(t,a){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)ff(n[t],a)}var Cl=B(null),Ko=B(0);function gf(t,a){t=Qr,Q(Ko,t),Q(Cl,a),Qr=t|a.baseLanes}function Zd(){Q(Ko,Qr),Q(Cl,Cl.current)}function Wd(){Qr=Ko.current,Y(Cl),Y(Ko)}var Fs=B(null),or=null;function bn(t){var a=t.alternate;Q(Wa,Wa.current&1),Q(Fs,t),or===null&&(a===null||Cl.current!==null||a.memoizedState!==null)&&(or=t)}function eu(t){Q(Wa,Wa.current),Q(Fs,t),or===null&&(or=t)}function yf(t){t.tag===22?(Q(Wa,Wa.current),Q(Fs,t),or===null&&(or=t)):vn()}function vn(){Q(Wa,Wa.current),Q(Fs,Fs.current)}function Xs(t){Y(Fs),or===t&&(or=null),Y(Wa)}var Wa=B(0);function Ho(t){for(var a=t;a!==null;){if(a.tag===13){var n=a.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||lm(n)||im(n)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Yr=0,qt=null,wa=null,rs=null,Vo=!1,Ml=!1,Xn=!1,Fo=0,Di=0,Rl=null,Hb=0;function Xa(){throw Error(i(321))}function tu(t,a){if(a===null)return!1;for(var n=0;n<a.length&&n<t.length;n++)if(!Hs(t[n],a[n]))return!1;return!0}function au(t,a,n,o,h,x){return Yr=x,qt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,z.H=t===null||t.memoizedState===null?ex:yu,Xn=!1,x=n(o,h),Xn=!1,Ml&&(x=bf(a,n,o,h)),pf(t),x}function pf(t){z.H=Li;var a=wa!==null&&wa.next!==null;if(Yr=0,rs=wa=qt=null,Vo=!1,Di=0,Rl=null,a)throw Error(i(300));t===null||ns||(t=t.dependencies,t!==null&&Uo(t)&&(ns=!0))}function bf(t,a,n,o){qt=t;var h=0;do{if(Ml&&(Rl=null),Di=0,Ml=!1,25<=h)throw Error(i(301));if(h+=1,rs=wa=null,t.updateQueue!=null){var x=t.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}z.H=tx,x=a(n,o)}while(Ml);return x}function Vb(){var t=z.H,a=t.useState()[0];return a=typeof a.then=="function"?Bi(a):a,t=t.useState()[0],(wa!==null?wa.memoizedState:null)!==t&&(qt.flags|=1024),a}function su(){var t=Fo!==0;return Fo=0,t}function ru(t,a,n){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~n}function nu(t){if(Vo){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Vo=!1}Yr=0,rs=wa=qt=null,Ml=!1,Di=Fo=0,Rl=null}function Ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rs===null?qt.memoizedState=rs=t:rs=rs.next=t,rs}function es(){if(wa===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=wa.next;var a=rs===null?qt.memoizedState:rs.next;if(a!==null)rs=a,wa=t;else{if(t===null)throw qt.alternate===null?Error(i(467)):Error(i(310));wa=t,t={memoizedState:wa.memoizedState,baseState:wa.baseState,baseQueue:wa.baseQueue,queue:wa.queue,next:null},rs===null?qt.memoizedState=rs=t:rs=rs.next=t}return rs}function Xo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Bi(t){var a=Di;return Di+=1,Rl===null&&(Rl=[]),t=cf(Rl,t,a),a=qt,(rs===null?a.memoizedState:rs.next)===null&&(a=a.alternate,z.H=a===null||a.memoizedState===null?ex:yu),t}function Jo(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Bi(t);if(t.$$typeof===y)return js(t)}throw Error(i(438,String(t)))}function lu(t){var a=null,n=qt.updateQueue;if(n!==null&&(a=n.memoCache),a==null){var o=qt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),n===null&&(n=Xo(),qt.updateQueue=n),n.memoCache=a,n=a.data[a.index],n===void 0)for(n=a.data[a.index]=Array(t),o=0;o<t;o++)n[o]=L;return a.index++,n}function Gr(t,a){return typeof a=="function"?a(t):a}function Qo(t){var a=es();return iu(a,wa,t)}function iu(t,a,n){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var h=t.baseQueue,x=o.pending;if(x!==null){if(h!==null){var R=h.next;h.next=x.next,x.next=R}a.baseQueue=h=x,o.pending=null}if(x=t.baseState,h===null)t.memoizedState=x;else{a=h.next;var U=R=null,W=null,pe=a,Ee=!1;do{var Oe=pe.lane&-536870913;if(Oe!==pe.lane?(na&Oe)===Oe:(Yr&Oe)===Oe){var ve=pe.revertLane;if(ve===0)W!==null&&(W=W.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Oe===kl&&(Ee=!0);else if((Yr&ve)===ve){pe=pe.next,ve===kl&&(Ee=!0);continue}else Oe={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},W===null?(U=W=Oe,R=x):W=W.next=Oe,qt.lanes|=ve,wn|=ve;Oe=pe.action,Xn&&n(x,Oe),x=pe.hasEagerState?pe.eagerState:n(x,Oe)}else ve={lane:Oe,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},W===null?(U=W=ve,R=x):W=W.next=ve,qt.lanes|=Oe,wn|=Oe;pe=pe.next}while(pe!==null&&pe!==a);if(W===null?R=x:W.next=U,!Hs(x,t.memoizedState)&&(ns=!0,Ee&&(n=El,n!==null)))throw n;t.memoizedState=x,t.baseState=R,t.baseQueue=W,o.lastRenderedState=x}return h===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function ou(t){var a=es(),n=a.queue;if(n===null)throw Error(i(311));n.lastRenderedReducer=t;var o=n.dispatch,h=n.pending,x=a.memoizedState;if(h!==null){n.pending=null;var R=h=h.next;do x=t(x,R.action),R=R.next;while(R!==h);Hs(x,a.memoizedState)||(ns=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),n.lastRenderedState=x}return[x,o]}function vf(t,a,n){var o=qt,h=es(),x=ca;if(x){if(n===void 0)throw Error(i(407));n=n()}else n=a();var R=!Hs((wa||h).memoizedState,n);if(R&&(h.memoizedState=n,ns=!0),h=h.queue,uu(wf.bind(null,o,h,t),[t]),h.getSnapshot!==a||R||rs!==null&&rs.memoizedState.tag&1){if(o.flags|=2048,Ol(9,{destroy:void 0},Nf.bind(null,o,h,n,a),null),Aa===null)throw Error(i(349));x||(Yr&127)!==0||jf(o,a,n)}return n}function jf(t,a,n){t.flags|=16384,t={getSnapshot:a,value:n},a=qt.updateQueue,a===null?(a=Xo(),qt.updateQueue=a,a.stores=[t]):(n=a.stores,n===null?a.stores=[t]:n.push(t))}function Nf(t,a,n,o){a.value=n,a.getSnapshot=o,_f(a)&&Sf(t)}function wf(t,a,n){return n(function(){_f(a)&&Sf(t)})}function _f(t){var a=t.getSnapshot;t=t.value;try{var n=a();return!Hs(t,n)}catch(o){return!0}}function Sf(t){var a=$n(t,2);a!==null&&Ls(a,t,2)}function cu(t){var a=Ms();if(typeof t=="function"){var n=t;if(t=n(),Xn){Xe(!0);try{n()}finally{Xe(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:t},a}function kf(t,a,n,o){return t.baseState=n,iu(t,wa,typeof o=="function"?o:Gr)}function Fb(t,a,n,o,h){if(ec(t))throw Error(i(485));if(t=a.action,t!==null){var x={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){x.listeners.push(R)}};z.T!==null?n(!0):x.isTransition=!1,o(x),n=a.pending,n===null?(x.next=a.pending=x,Ef(a,x)):(x.next=n.next,a.pending=n.next=x)}}function Ef(t,a){var n=a.action,o=a.payload,h=t.state;if(a.isTransition){var x=z.T,R={};z.T=R;try{var U=n(h,o),W=z.S;W!==null&&W(R,U),Tf(t,a,U)}catch(pe){du(t,a,pe)}finally{x!==null&&R.types!==null&&(x.types=R.types),z.T=x}}else try{x=n(h,o),Tf(t,a,x)}catch(pe){du(t,a,pe)}}function Tf(t,a,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(o){Af(t,a,o)},function(o){return du(t,a,o)}):Af(t,a,n)}function Af(t,a,n){a.status="fulfilled",a.value=n,Cf(a),t.state=n,a=t.pending,a!==null&&(n=a.next,n===a?t.pending=null:(n=n.next,a.next=n,Ef(t,n)))}function du(t,a,n){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=n,Cf(a),a=a.next;while(a!==o)}t.action=null}function Cf(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Mf(t,a){return a}function Rf(t,a){if(ca){var n=Aa.formState;if(n!==null){e:{var o=qt;if(ca){if(La){t:{for(var h=La,x=ir;h.nodeType!==8;){if(!x){h=null;break t}if(h=cr(h.nextSibling),h===null){h=null;break t}}x=h.data,h=x==="F!"||x==="F"?h:null}if(h){La=cr(h.nextSibling),o=h.data==="F!";break e}}fn(o)}o=!1}o&&(a=n[0])}}return n=Ms(),n.memoizedState=n.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:a},n.queue=o,n=Qf.bind(null,qt,o),o.dispatch=n,o=cu(!1),x=gu.bind(null,qt,!1,o.queue),o=Ms(),h={state:a,dispatch:null,action:t,pending:null},o.queue=h,n=Fb.bind(null,qt,h,x,n),h.dispatch=n,o.memoizedState=t,[a,n,!1]}function Of(t){var a=es();return zf(a,wa,t)}function zf(t,a,n){if(a=iu(t,a,Mf)[0],t=Qo(Gr)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Bi(a)}catch(R){throw R===Tl?Io:R}else o=a;a=es();var h=a.queue,x=h.dispatch;return n!==a.memoizedState&&(qt.flags|=2048,Ol(9,{destroy:void 0},Xb.bind(null,h,n),null)),[o,x,t]}function Xb(t,a){t.action=a}function Pf(t){var a=es(),n=wa;if(n!==null)return zf(a,n,t);es(),a=a.memoizedState,n=es();var o=n.queue.dispatch;return n.memoizedState=t,[a,o,!1]}function Ol(t,a,n,o){return t={tag:t,create:n,deps:o,inst:a,next:null},a=qt.updateQueue,a===null&&(a=Xo(),qt.updateQueue=a),n=a.lastEffect,n===null?a.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,a.lastEffect=t),t}function Df(){return es().memoizedState}function Zo(t,a,n,o){var h=Ms();qt.flags|=t,h.memoizedState=Ol(1|a,{destroy:void 0},n,o===void 0?null:o)}function Wo(t,a,n,o){var h=es();o=o===void 0?null:o;var x=h.memoizedState.inst;wa!==null&&o!==null&&tu(o,wa.memoizedState.deps)?h.memoizedState=Ol(a,x,n,o):(qt.flags|=t,h.memoizedState=Ol(1|a,x,n,o))}function Bf(t,a){Zo(8390656,8,t,a)}function uu(t,a){Wo(2048,8,t,a)}function Jb(t){qt.flags|=4;var a=qt.updateQueue;if(a===null)a=Xo(),qt.updateQueue=a,a.events=[t];else{var n=a.events;n===null?a.events=[t]:n.push(t)}}function Uf(t){var a=es().memoizedState;return Jb({ref:a,nextImpl:t}),function(){if((ga&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Lf(t,a){return Wo(4,2,t,a)}function $f(t,a){return Wo(4,4,t,a)}function If(t,a){if(typeof a=="function"){t=t();var n=a(t);return function(){typeof n=="function"?n():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function qf(t,a,n){n=n!=null?n.concat([t]):null,Wo(4,4,If.bind(null,a,t),n)}function mu(){}function Yf(t,a){var n=es();a=a===void 0?null:a;var o=n.memoizedState;return a!==null&&tu(a,o[1])?o[0]:(n.memoizedState=[t,a],t)}function Gf(t,a){var n=es();a=a===void 0?null:a;var o=n.memoizedState;if(a!==null&&tu(a,o[1]))return o[0];if(o=t(),Xn){Xe(!0);try{t()}finally{Xe(!1)}}return n.memoizedState=[o,a],o}function hu(t,a,n){return n===void 0||(Yr&1073741824)!==0&&(na&261930)===0?t.memoizedState=a:(t.memoizedState=n,t=Kx(),qt.lanes|=t,wn|=t,n)}function Kf(t,a,n,o){return Hs(n,a)?n:Cl.current!==null?(t=hu(t,n,o),Hs(t,a)||(ns=!0),t):(Yr&42)===0||(Yr&1073741824)!==0&&(na&261930)===0?(ns=!0,t.memoizedState=n):(t=Kx(),qt.lanes|=t,wn|=t,a)}function Hf(t,a,n,o,h){var x=X.p;X.p=x!==0&&8>x?x:8;var R=z.T,U={};z.T=U,gu(t,!1,a,n);try{var W=h(),pe=z.S;if(pe!==null&&pe(U,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var Ee=Kb(W,o);Ui(t,a,Ee,Zs(t))}else Ui(t,a,o,Zs(t))}catch(Oe){Ui(t,a,{then:function(){},status:"rejected",reason:Oe},Zs())}finally{X.p=x,R!==null&&U.types!==null&&(R.types=U.types),z.T=R}}function Qb(){}function fu(t,a,n,o){if(t.tag!==5)throw Error(i(476));var h=Vf(t).queue;Hf(t,h,a,G,n===null?Qb:function(){return Ff(t),n(o)})}function Vf(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:G},next:null};var n={};return a.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Gr,lastRenderedState:n},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Ff(t){var a=Vf(t);a.next===null&&(a=t.alternate.memoizedState),Ui(t,a.next.queue,{},Zs())}function xu(){return js(to)}function Xf(){return es().memoizedState}function Jf(){return es().memoizedState}function Zb(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var n=Zs();t=yn(n);var o=pn(a,t,n);o!==null&&(Ls(o,a,n),Oi(o,a,n)),a={cache:Gd()},t.payload=a;return}a=a.return}}function Wb(t,a,n){var o=Zs();n={lane:o,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},ec(t)?Zf(a,n):(n=Od(t,a,n,o),n!==null&&(Ls(n,t,o),Wf(n,a,o)))}function Qf(t,a,n){var o=Zs();Ui(t,a,n,o)}function Ui(t,a,n,o){var h={lane:o,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(ec(t))Zf(a,h);else{var x=t.alternate;if(t.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var R=a.lastRenderedState,U=x(R,n);if(h.hasEagerState=!0,h.eagerState=U,Hs(U,R))return zo(t,a,h,0),Aa===null&&Oo(),!1}catch(W){}finally{}if(n=Od(t,a,h,o),n!==null)return Ls(n,t,o),Wf(n,a,o),!0}return!1}function gu(t,a,n,o){if(o={lane:2,revertLane:Fu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ec(t)){if(a)throw Error(i(479))}else a=Od(t,n,o,2),a!==null&&Ls(a,t,2)}function ec(t){var a=t.alternate;return t===qt||a!==null&&a===qt}function Zf(t,a){Ml=Vo=!0;var n=t.pending;n===null?a.next=a:(a.next=n.next,n.next=a),t.pending=a}function Wf(t,a,n){if((n&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,n|=o,a.lanes=n,Je(t,n)}}var Li={readContext:js,use:Jo,useCallback:Xa,useContext:Xa,useEffect:Xa,useImperativeHandle:Xa,useLayoutEffect:Xa,useInsertionEffect:Xa,useMemo:Xa,useReducer:Xa,useRef:Xa,useState:Xa,useDebugValue:Xa,useDeferredValue:Xa,useTransition:Xa,useSyncExternalStore:Xa,useId:Xa,useHostTransitionStatus:Xa,useFormState:Xa,useActionState:Xa,useOptimistic:Xa,useMemoCache:Xa,useCacheRefresh:Xa};Li.useEffectEvent=Xa;var ex={readContext:js,use:Jo,useCallback:function(t,a){return Ms().memoizedState=[t,a===void 0?null:a],t},useContext:js,useEffect:Bf,useImperativeHandle:function(t,a,n){n=n!=null?n.concat([t]):null,Zo(4194308,4,If.bind(null,a,t),n)},useLayoutEffect:function(t,a){return Zo(4194308,4,t,a)},useInsertionEffect:function(t,a){Zo(4,2,t,a)},useMemo:function(t,a){var n=Ms();a=a===void 0?null:a;var o=t();if(Xn){Xe(!0);try{t()}finally{Xe(!1)}}return n.memoizedState=[o,a],o},useReducer:function(t,a,n){var o=Ms();if(n!==void 0){var h=n(a);if(Xn){Xe(!0);try{n(a)}finally{Xe(!1)}}}else h=a;return o.memoizedState=o.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},o.queue=t,t=t.dispatch=Wb.bind(null,qt,t),[o.memoizedState,t]},useRef:function(t){var a=Ms();return t={current:t},a.memoizedState=t},useState:function(t){t=cu(t);var a=t.queue,n=Qf.bind(null,qt,a);return a.dispatch=n,[t.memoizedState,n]},useDebugValue:mu,useDeferredValue:function(t,a){var n=Ms();return hu(n,t,a)},useTransition:function(){var t=cu(!1);return t=Hf.bind(null,qt,t.queue,!0,!1),Ms().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,n){var o=qt,h=Ms();if(ca){if(n===void 0)throw Error(i(407));n=n()}else{if(n=a(),Aa===null)throw Error(i(349));(na&127)!==0||jf(o,a,n)}h.memoizedState=n;var x={value:n,getSnapshot:a};return h.queue=x,Bf(wf.bind(null,o,x,t),[t]),o.flags|=2048,Ol(9,{destroy:void 0},Nf.bind(null,o,x,n,a),null),n},useId:function(){var t=Ms(),a=Aa.identifierPrefix;if(ca){var n=Tr,o=Er;n=(o&~(1<<32-ut(o)-1)).toString(32)+n,a="_"+a+"R_"+n,n=Fo++,0<n&&(a+="H"+n.toString(32)),a+="_"}else n=Hb++,a="_"+a+"r_"+n.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:xu,useFormState:Rf,useActionState:Rf,useOptimistic:function(t){var a=Ms();a.memoizedState=a.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=n,a=gu.bind(null,qt,!0,n),n.dispatch=a,[t,a]},useMemoCache:lu,useCacheRefresh:function(){return Ms().memoizedState=Zb.bind(null,qt)},useEffectEvent:function(t){var a=Ms(),n={impl:t};return a.memoizedState=n,function(){if((ga&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}},yu={readContext:js,use:Jo,useCallback:Yf,useContext:js,useEffect:uu,useImperativeHandle:qf,useInsertionEffect:Lf,useLayoutEffect:$f,useMemo:Gf,useReducer:Qo,useRef:Df,useState:function(){return Qo(Gr)},useDebugValue:mu,useDeferredValue:function(t,a){var n=es();return Kf(n,wa.memoizedState,t,a)},useTransition:function(){var t=Qo(Gr)[0],a=es().memoizedState;return[typeof t=="boolean"?t:Bi(t),a]},useSyncExternalStore:vf,useId:Xf,useHostTransitionStatus:xu,useFormState:Of,useActionState:Of,useOptimistic:function(t,a){var n=es();return kf(n,wa,t,a)},useMemoCache:lu,useCacheRefresh:Jf};yu.useEffectEvent=Uf;var tx={readContext:js,use:Jo,useCallback:Yf,useContext:js,useEffect:uu,useImperativeHandle:qf,useInsertionEffect:Lf,useLayoutEffect:$f,useMemo:Gf,useReducer:ou,useRef:Df,useState:function(){return ou(Gr)},useDebugValue:mu,useDeferredValue:function(t,a){var n=es();return wa===null?hu(n,t,a):Kf(n,wa.memoizedState,t,a)},useTransition:function(){var t=ou(Gr)[0],a=es().memoizedState;return[typeof t=="boolean"?t:Bi(t),a]},useSyncExternalStore:vf,useId:Xf,useHostTransitionStatus:xu,useFormState:Pf,useActionState:Pf,useOptimistic:function(t,a){var n=es();return wa!==null?kf(n,wa,t,a):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:lu,useCacheRefresh:Jf};tx.useEffectEvent=Uf;function pu(t,a,n,o){a=t.memoizedState,n=n(o,a),n=n==null?a:w({},a,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bu={enqueueSetState:function(t,a,n){t=t._reactInternals;var o=Zs(),h=yn(o);h.payload=a,n!=null&&(h.callback=n),a=pn(t,h,o),a!==null&&(Ls(a,t,o),Oi(a,t,o))},enqueueReplaceState:function(t,a,n){t=t._reactInternals;var o=Zs(),h=yn(o);h.tag=1,h.payload=a,n!=null&&(h.callback=n),a=pn(t,h,o),a!==null&&(Ls(a,t,o),Oi(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var n=Zs(),o=yn(n);o.tag=2,a!=null&&(o.callback=a),a=pn(t,o,n),a!==null&&(Ls(a,t,n),Oi(a,t,n))}};function ax(t,a,n,o,h,x,R){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,x,R):a.prototype&&a.prototype.isPureReactComponent?!Si(n,o)||!Si(h,x):!0}function sx(t,a,n,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(n,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(n,o),a.state!==t&&bu.enqueueReplaceState(a,a.state,null)}function Jn(t,a){var n=a;if("ref"in a){n={};for(var o in a)o!=="ref"&&(n[o]=a[o])}if(t=t.defaultProps){n===a&&(n=w({},n));for(var h in t)n[h]===void 0&&(n[h]=t[h])}return n}function rx(t){Ro(t)}function nx(t){console.error(t)}function lx(t){Ro(t)}function tc(t,a){try{var n=t.onUncaughtError;n(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function ix(t,a,n){try{var o=t.onCaughtError;o(n.value,{componentStack:n.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function vu(t,a,n){return n=yn(n),n.tag=3,n.payload={element:null},n.callback=function(){tc(t,a)},n}function ox(t){return t=yn(t),t.tag=3,t}function cx(t,a,n,o){var h=n.type.getDerivedStateFromError;if(typeof h=="function"){var x=o.value;t.payload=function(){return h(x)},t.callback=function(){ix(a,n,o)}}var R=n.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(t.callback=function(){ix(a,n,o),typeof h!="function"&&(_n===null?_n=new Set([this]):_n.add(this));var U=o.stack;this.componentDidCatch(o.value,{componentStack:U!==null?U:""})})}function ev(t,a,n,o,h){if(n.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=n.alternate,a!==null&&Sl(a,n,h,!0),n=Fs.current,n!==null){switch(n.tag){case 31:case 13:return or===null?hc():n.alternate===null&&Ja===0&&(Ja=3),n.flags&=-257,n.flags|=65536,n.lanes=h,o===qo?n.flags|=16384:(a=n.updateQueue,a===null?n.updateQueue=new Set([o]):a.add(o),Ku(t,o,h)),!1;case 22:return n.flags|=65536,o===qo?n.flags|=16384:(a=n.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},n.updateQueue=a):(n=a.retryQueue,n===null?a.retryQueue=new Set([o]):n.add(o)),Ku(t,o,h)),!1}throw Error(i(435,n.tag))}return Ku(t,o,h),hc(),!1}if(ca)return a=Fs.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,o!==Ld&&(t=Error(i(422),{cause:o}),Ti(rr(t,n)))):(o!==Ld&&(a=Error(i(423),{cause:o}),Ti(rr(a,n))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,o=rr(o,n),h=vu(t.stateNode,o,h),Jd(t,h),Ja!==4&&(Ja=2)),!1;var x=Error(i(520),{cause:o});if(x=rr(x,n),Vi===null?Vi=[x]:Vi.push(x),Ja!==4&&(Ja=2),a===null)return!0;o=rr(o,n),n=a;do{switch(n.tag){case 3:return n.flags|=65536,t=h&-h,n.lanes|=t,t=vu(n.stateNode,o,t),Jd(n,t),!1;case 1:if(a=n.type,x=n.stateNode,(n.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(_n===null||!_n.has(x))))return n.flags|=65536,h&=-h,n.lanes|=h,h=ox(h),cx(h,t,n,o),Jd(n,h),!1}n=n.return}while(n!==null);return!1}var ju=Error(i(461)),ns=!1;function Ns(t,a,n,o){a.child=t===null?hf(a,null,n,o):Fn(a,t.child,n,o)}function dx(t,a,n,o,h){n=n.render;var x=a.ref;if("ref"in o){var R={};for(var U in o)U!=="ref"&&(R[U]=o[U])}else R=o;return Gn(a),o=au(t,a,n,R,x,h),U=su(),t!==null&&!ns?(ru(t,a,h),Kr(t,a,h)):(ca&&U&&Bd(a),a.flags|=1,Ns(t,a,o,h),a.child)}function ux(t,a,n,o,h){if(t===null){var x=n.type;return typeof x=="function"&&!zd(x)&&x.defaultProps===void 0&&n.compare===null?(a.tag=15,a.type=x,mx(t,a,x,o,h)):(t=Do(n.type,null,o,a,a.mode,h),t.ref=a.ref,t.return=a,a.child=t)}if(x=t.child,!Au(t,h)){var R=x.memoizedProps;if(n=n.compare,n=n!==null?n:Si,n(R,o)&&t.ref===a.ref)return Kr(t,a,h)}return a.flags|=1,t=Lr(x,o),t.ref=a.ref,t.return=a,a.child=t}function mx(t,a,n,o,h){if(t!==null){var x=t.memoizedProps;if(Si(x,o)&&t.ref===a.ref)if(ns=!1,a.pendingProps=o=x,Au(t,h))(t.flags&131072)!==0&&(ns=!0);else return a.lanes=t.lanes,Kr(t,a,h)}return Nu(t,a,n,o,h)}function hx(t,a,n,o){var h=o.children,x=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|n:n,t!==null){for(o=a.child=t.child,h=0;o!==null;)h=h|o.lanes|o.childLanes,o=o.sibling;o=h&~x}else o=0,a.child=null;return fx(t,a,x,n,o)}if((n&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&$o(a,x!==null?x.cachePool:null),x!==null?gf(a,x):Zd(),yf(a);else return o=a.lanes=536870912,fx(t,a,x!==null?x.baseLanes|n:n,n,o)}else x!==null?($o(a,x.cachePool),gf(a,x),vn(),a.memoizedState=null):(t!==null&&$o(a,null),Zd(),vn());return Ns(t,a,h,n),a.child}function $i(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function fx(t,a,n,o,h){var x=Hd();return x=x===null?null:{parent:ss._currentValue,pool:x},a.memoizedState={baseLanes:n,cachePool:x},t!==null&&$o(a,null),Zd(),yf(a),t!==null&&Sl(t,a,o,!0),a.childLanes=h,null}function ac(t,a){return a=rc({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function xx(t,a,n){return Fn(a,t.child,null,n),t=ac(a,a.pendingProps),t.flags|=2,Xs(a),a.memoizedState=null,t}function tv(t,a,n){var o=a.pendingProps,h=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(ca){if(o.mode==="hidden")return t=ac(a,o),a.lanes=536870912,$i(null,t);if(eu(a),(t=La)?(t=Eg(t,ir),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:mn!==null?{id:Er,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},n=Qh(t),n.return=a,a.child=n,vs=a,La=null)):t=null,t===null)throw fn(a);return a.lanes=536870912,null}return ac(a,o)}var x=t.memoizedState;if(x!==null){var R=x.dehydrated;if(eu(a),h)if(a.flags&256)a.flags&=-257,a=xx(t,a,n);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(ns||Sl(t,a,n,!1),h=(n&t.childLanes)!==0,ns||h){if(o=Aa,o!==null&&(R=Nt(o,n),R!==0&&R!==x.retryLane))throw x.retryLane=R,$n(t,R),Ls(o,t,R),ju;hc(),a=xx(t,a,n)}else t=x.treeContext,La=cr(R.nextSibling),vs=a,ca=!0,hn=null,ir=!1,t!==null&&ef(a,t),a=ac(a,o),a.flags|=4096;return a}return t=Lr(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function sc(t,a){var n=a.ref;if(n===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(i(284));(t===null||t.ref!==n)&&(a.flags|=4194816)}}function Nu(t,a,n,o,h){return Gn(a),n=au(t,a,n,o,void 0,h),o=su(),t!==null&&!ns?(ru(t,a,h),Kr(t,a,h)):(ca&&o&&Bd(a),a.flags|=1,Ns(t,a,n,h),a.child)}function gx(t,a,n,o,h,x){return Gn(a),a.updateQueue=null,n=bf(a,o,n,h),pf(t),o=su(),t!==null&&!ns?(ru(t,a,x),Kr(t,a,x)):(ca&&o&&Bd(a),a.flags|=1,Ns(t,a,n,x),a.child)}function yx(t,a,n,o,h){if(Gn(a),a.stateNode===null){var x=jl,R=n.contextType;typeof R=="object"&&R!==null&&(x=js(R)),x=new n(o,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=bu,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=o,x.state=a.memoizedState,x.refs={},Fd(a),R=n.contextType,x.context=typeof R=="object"&&R!==null?js(R):jl,x.state=a.memoizedState,R=n.getDerivedStateFromProps,typeof R=="function"&&(pu(a,n,R,o),x.state=a.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(R=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),R!==x.state&&bu.enqueueReplaceState(x,x.state,null),Pi(a,o,x,h),zi(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){x=a.stateNode;var U=a.memoizedProps,W=Jn(n,U);x.props=W;var pe=x.context,Ee=n.contextType;R=jl,typeof Ee=="object"&&Ee!==null&&(R=js(Ee));var Oe=n.getDerivedStateFromProps;Ee=typeof Oe=="function"||typeof x.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,Ee||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(U||pe!==R)&&sx(a,x,o,R),gn=!1;var ve=a.memoizedState;x.state=ve,Pi(a,o,x,h),zi(),pe=a.memoizedState,U||ve!==pe||gn?(typeof Oe=="function"&&(pu(a,n,Oe,o),pe=a.memoizedState),(W=gn||ax(a,n,W,o,ve,pe,R))?(Ee||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=pe),x.props=o,x.state=pe,x.context=R,o=W):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{x=a.stateNode,Xd(t,a),R=a.memoizedProps,Ee=Jn(n,R),x.props=Ee,Oe=a.pendingProps,ve=x.context,pe=n.contextType,W=jl,typeof pe=="object"&&pe!==null&&(W=js(pe)),U=n.getDerivedStateFromProps,(pe=typeof U=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(R!==Oe||ve!==W)&&sx(a,x,o,W),gn=!1,ve=a.memoizedState,x.state=ve,Pi(a,o,x,h),zi();var we=a.memoizedState;R!==Oe||ve!==we||gn||t!==null&&t.dependencies!==null&&Uo(t.dependencies)?(typeof U=="function"&&(pu(a,n,U,o),we=a.memoizedState),(Ee=gn||ax(a,n,Ee,o,ve,we,W)||t!==null&&t.dependencies!==null&&Uo(t.dependencies))?(pe||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(o,we,W),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(o,we,W)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||R===t.memoizedProps&&ve===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&ve===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=we),x.props=o,x.state=we,x.context=W,o=Ee):(typeof x.componentDidUpdate!="function"||R===t.memoizedProps&&ve===t.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||R===t.memoizedProps&&ve===t.memoizedState||(a.flags|=1024),o=!1)}return x=o,sc(t,a),o=(a.flags&128)!==0,x||o?(x=a.stateNode,n=o&&typeof n.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,t!==null&&o?(a.child=Fn(a,t.child,null,h),a.child=Fn(a,null,n,h)):Ns(t,a,n,h),a.memoizedState=x.state,t=a.child):t=Kr(t,a,h),t}function px(t,a,n,o){return qn(),a.flags|=256,Ns(t,a,n,o),a.child}var wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function _u(t){return{baseLanes:t,cachePool:lf()}}function Su(t,a,n){return t=t!==null?t.childLanes&~n:0,a&&(t|=Qs),t}function bx(t,a,n){var o=a.pendingProps,h=!1,x=(a.flags&128)!==0,R;if((R=x)||(R=t!==null&&t.memoizedState===null?!1:(Wa.current&2)!==0),R&&(h=!0,a.flags&=-129),R=(a.flags&32)!==0,a.flags&=-33,t===null){if(ca){if(h?bn(a):vn(),(t=La)?(t=Eg(t,ir),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:mn!==null?{id:Er,overflow:Tr}:null,retryLane:536870912,hydrationErrors:null},n=Qh(t),n.return=a,a.child=n,vs=a,La=null)):t=null,t===null)throw fn(a);return im(t)?a.lanes=32:a.lanes=536870912,null}var U=o.children;return o=o.fallback,h?(vn(),h=a.mode,U=rc({mode:"hidden",children:U},h),o=In(o,h,n,null),U.return=a,o.return=a,U.sibling=o,a.child=U,o=a.child,o.memoizedState=_u(n),o.childLanes=Su(t,R,n),a.memoizedState=wu,$i(null,o)):(bn(a),ku(a,U))}var W=t.memoizedState;if(W!==null&&(U=W.dehydrated,U!==null)){if(x)a.flags&256?(bn(a),a.flags&=-257,a=Eu(t,a,n)):a.memoizedState!==null?(vn(),a.child=t.child,a.flags|=128,a=null):(vn(),U=o.fallback,h=a.mode,o=rc({mode:"visible",children:o.children},h),U=In(U,h,n,null),U.flags|=2,o.return=a,U.return=a,o.sibling=U,a.child=o,Fn(a,t.child,null,n),o=a.child,o.memoizedState=_u(n),o.childLanes=Su(t,R,n),a.memoizedState=wu,a=$i(null,o));else if(bn(a),im(U)){if(R=U.nextSibling&&U.nextSibling.dataset,R)var pe=R.dgst;R=pe,o=Error(i(419)),o.stack="",o.digest=R,Ti({value:o,source:null,stack:null}),a=Eu(t,a,n)}else if(ns||Sl(t,a,n,!1),R=(n&t.childLanes)!==0,ns||R){if(R=Aa,R!==null&&(o=Nt(R,n),o!==0&&o!==W.retryLane))throw W.retryLane=o,$n(t,o),Ls(R,t,o),ju;lm(U)||hc(),a=Eu(t,a,n)}else lm(U)?(a.flags|=192,a.child=t.child,a=null):(t=W.treeContext,La=cr(U.nextSibling),vs=a,ca=!0,hn=null,ir=!1,t!==null&&ef(a,t),a=ku(a,o.children),a.flags|=4096);return a}return h?(vn(),U=o.fallback,h=a.mode,W=t.child,pe=W.sibling,o=Lr(W,{mode:"hidden",children:o.children}),o.subtreeFlags=W.subtreeFlags&65011712,pe!==null?U=Lr(pe,U):(U=In(U,h,n,null),U.flags|=2),U.return=a,o.return=a,o.sibling=U,a.child=o,$i(null,o),o=a.child,U=t.child.memoizedState,U===null?U=_u(n):(h=U.cachePool,h!==null?(W=ss._currentValue,h=h.parent!==W?{parent:W,pool:W}:h):h=lf(),U={baseLanes:U.baseLanes|n,cachePool:h}),o.memoizedState=U,o.childLanes=Su(t,R,n),a.memoizedState=wu,$i(t.child,o)):(bn(a),n=t.child,t=n.sibling,n=Lr(n,{mode:"visible",children:o.children}),n.return=a,n.sibling=null,t!==null&&(R=a.deletions,R===null?(a.deletions=[t],a.flags|=16):R.push(t)),a.child=n,a.memoizedState=null,n)}function ku(t,a){return a=rc({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function rc(t,a){return t=Vs(22,t,null,a),t.lanes=0,t}function Eu(t,a,n){return Fn(a,t.child,null,n),t=ku(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function vx(t,a,n){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),qd(t.return,a,n)}function Tu(t,a,n,o,h,x){var R=t.memoizedState;R===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:h,treeForkCount:x}:(R.isBackwards=a,R.rendering=null,R.renderingStartTime=0,R.last=o,R.tail=n,R.tailMode=h,R.treeForkCount=x)}function jx(t,a,n){var o=a.pendingProps,h=o.revealOrder,x=o.tail;o=o.children;var R=Wa.current,U=(R&2)!==0;if(U?(R=R&1|2,a.flags|=128):R&=1,Q(Wa,R),Ns(t,a,o,n),o=ca?Ei:0,!U&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vx(t,n,a);else if(t.tag===19)vx(t,n,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(n=a.child,h=null;n!==null;)t=n.alternate,t!==null&&Ho(t)===null&&(h=n),n=n.sibling;n=h,n===null?(h=a.child,a.child=null):(h=n.sibling,n.sibling=null),Tu(a,!1,h,n,x,o);break;case"backwards":case"unstable_legacy-backwards":for(n=null,h=a.child,a.child=null;h!==null;){if(t=h.alternate,t!==null&&Ho(t)===null){a.child=h;break}t=h.sibling,h.sibling=n,n=h,h=t}Tu(a,!0,n,null,x,o);break;case"together":Tu(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Kr(t,a,n){if(t!==null&&(a.dependencies=t.dependencies),wn|=a.lanes,(n&a.childLanes)===0)if(t!==null){if(Sl(t,a,n,!1),(n&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,n=Lr(t,t.pendingProps),a.child=n,n.return=a;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=a;n.sibling=null}return a.child}function Au(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Uo(t)))}function av(t,a,n){switch(a.tag){case 3:Ke(a,a.stateNode.containerInfo),xn(a,ss,t.memoizedState.cache),qn();break;case 27:case 5:je(a);break;case 4:Ke(a,a.stateNode.containerInfo);break;case 10:xn(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,eu(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(bn(a),a.flags|=128,null):(n&a.child.childLanes)!==0?bx(t,a,n):(bn(a),t=Kr(t,a,n),t!==null?t.sibling:null);bn(a);break;case 19:var h=(t.flags&128)!==0;if(o=(n&a.childLanes)!==0,o||(Sl(t,a,n,!1),o=(n&a.childLanes)!==0),h){if(o)return jx(t,a,n);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),Q(Wa,Wa.current),o)break;return null;case 22:return a.lanes=0,hx(t,a,n,a.pendingProps);case 24:xn(a,ss,t.memoizedState.cache)}return Kr(t,a,n)}function Nx(t,a,n){if(t!==null)if(t.memoizedProps!==a.pendingProps)ns=!0;else{if(!Au(t,n)&&(a.flags&128)===0)return ns=!1,av(t,a,n);ns=(t.flags&131072)!==0}else ns=!1,ca&&(a.flags&1048576)!==0&&Wh(a,Ei,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=Hn(a.elementType),a.type=t,typeof t=="function")zd(t)?(o=Jn(t,o),a.tag=1,a=yx(null,a,t,o,n)):(a.tag=0,a=Nu(null,a,t,o,n));else{if(t!=null){var h=t.$$typeof;if(h===p){a.tag=11,a=dx(null,a,t,o,n);break e}else if(h===C){a.tag=14,a=ux(null,a,t,o,n);break e}}throw a=le(t)||t,Error(i(306,a,""))}}return a;case 0:return Nu(t,a,a.type,a.pendingProps,n);case 1:return o=a.type,h=Jn(o,a.pendingProps),yx(t,a,o,h,n);case 3:e:{if(Ke(a,a.stateNode.containerInfo),t===null)throw Error(i(387));o=a.pendingProps;var x=a.memoizedState;h=x.element,Xd(t,a),Pi(a,o,null,n);var R=a.memoizedState;if(o=R.cache,xn(a,ss,o),o!==x.cache&&Yd(a,[ss],n,!0),zi(),o=R.element,x.isDehydrated)if(x={element:o,isDehydrated:!1,cache:R.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=px(t,a,o,n);break e}else if(o!==h){h=rr(Error(i(424)),a),Ti(h),a=px(t,a,o,n);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(La=cr(t.firstChild),vs=a,ca=!0,hn=null,ir=!0,n=hf(a,null,o,n),a.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(qn(),o===h){a=Kr(t,a,n);break e}Ns(t,a,o,n)}a=a.child}return a;case 26:return sc(t,a),t===null?(n=Og(a.type,null,a.pendingProps,null))?a.memoizedState=n:ca||(n=a.type,t=a.pendingProps,o=vc(V.current).createElement(n),o[At]=a,o[H]=t,ws(o,n,t),Wt(o),a.stateNode=o):a.memoizedState=Og(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return je(a),t===null&&ca&&(o=a.stateNode=Cg(a.type,a.pendingProps,V.current),vs=a,ir=!0,h=La,Tn(a.type)?(om=h,La=cr(o.firstChild)):La=h),Ns(t,a,a.pendingProps.children,n),sc(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&ca&&((h=o=La)&&(o=Rv(o,a.type,a.pendingProps,ir),o!==null?(a.stateNode=o,vs=a,La=cr(o.firstChild),ir=!1,h=!0):h=!1),h||fn(a)),je(a),h=a.type,x=a.pendingProps,R=t!==null?t.memoizedProps:null,o=x.children,sm(h,x)?o=null:R!==null&&sm(h,R)&&(a.flags|=32),a.memoizedState!==null&&(h=au(t,a,Vb,null,null,n),to._currentValue=h),sc(t,a),Ns(t,a,o,n),a.child;case 6:return t===null&&ca&&((t=n=La)&&(n=Ov(n,a.pendingProps,ir),n!==null?(a.stateNode=n,vs=a,La=null,t=!0):t=!1),t||fn(a)),null;case 13:return bx(t,a,n);case 4:return Ke(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=Fn(a,null,o,n):Ns(t,a,o,n),a.child;case 11:return dx(t,a,a.type,a.pendingProps,n);case 7:return Ns(t,a,a.pendingProps,n),a.child;case 8:return Ns(t,a,a.pendingProps.children,n),a.child;case 12:return Ns(t,a,a.pendingProps.children,n),a.child;case 10:return o=a.pendingProps,xn(a,a.type,o.value),Ns(t,a,o.children,n),a.child;case 9:return h=a.type._context,o=a.pendingProps.children,Gn(a),h=js(h),o=o(h),a.flags|=1,Ns(t,a,o,n),a.child;case 14:return ux(t,a,a.type,a.pendingProps,n);case 15:return mx(t,a,a.type,a.pendingProps,n);case 19:return jx(t,a,n);case 31:return tv(t,a,n);case 22:return hx(t,a,n,a.pendingProps);case 24:return Gn(a),o=js(ss),t===null?(h=Hd(),h===null&&(h=Aa,x=Gd(),h.pooledCache=x,x.refCount++,x!==null&&(h.pooledCacheLanes|=n),h=x),a.memoizedState={parent:o,cache:h},Fd(a),xn(a,ss,h)):((t.lanes&n)!==0&&(Xd(t,a),Pi(a,null,null,n),zi()),h=t.memoizedState,x=a.memoizedState,h.parent!==o?(h={parent:o,cache:o},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),xn(a,ss,o)):(o=x.cache,xn(a,ss,o),o!==h.cache&&Yd(a,[ss],n,!0))),Ns(t,a,a.pendingProps.children,n),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Hr(t){t.flags|=4}function Cu(t,a,n,o,h){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Xx())t.flags|=8192;else throw Vn=qo,Vd}else t.flags&=-16777217}function wx(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ug(a))if(Xx())t.flags|=8192;else throw Vn=qo,Vd}function nc(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Vt():536870912,t.lanes|=a,Bl|=a)}function Ii(t,a){if(!ca)switch(t.tailMode){case"hidden":a=t.tail;for(var n=null;a!==null;)a.alternate!==null&&(n=a),a=a.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function $a(t){var a=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(a)for(var h=t.child;h!==null;)n|=h.lanes|h.childLanes,o|=h.subtreeFlags&65011712,o|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)n|=h.lanes|h.childLanes,o|=h.subtreeFlags,o|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=o,t.childLanes=n,a}function sv(t,a,n){var o=a.pendingProps;switch(Ud(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(a),null;case 1:return $a(a),null;case 3:return n=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),qr(ss),oe(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(_l(a)?Hr(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$d())),$a(a),null;case 26:var h=a.type,x=a.memoizedState;return t===null?(Hr(a),x!==null?($a(a),wx(a,x)):($a(a),Cu(a,h,null,o,n))):x?x!==t.memoizedState?(Hr(a),$a(a),wx(a,x)):($a(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Hr(a),$a(a),Cu(a,h,t,o,n)),null;case 27:if(fe(a),n=V.current,h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Hr(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return $a(a),null}t=q.current,_l(a)?tf(a):(t=Cg(h,o,n),a.stateNode=t,Hr(a))}return $a(a),null;case 5:if(fe(a),h=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Hr(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return $a(a),null}if(x=q.current,_l(a))tf(a);else{var R=vc(V.current);switch(x){case 1:x=R.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:x=R.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":x=R.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":x=R.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":x=R.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof o.is=="string"?R.createElement("select",{is:o.is}):R.createElement("select"),o.multiple?x.multiple=!0:o.size&&(x.size=o.size);break;default:x=typeof o.is=="string"?R.createElement(h,{is:o.is}):R.createElement(h)}}x[At]=a,x[H]=o;e:for(R=a.child;R!==null;){if(R.tag===5||R.tag===6)x.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===a)break e;for(;R.sibling===null;){if(R.return===null||R.return===a)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}a.stateNode=x;e:switch(ws(x,h,o),h){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Hr(a)}}return $a(a),Cu(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,n),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Hr(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(i(166));if(t=V.current,_l(a)){if(t=a.stateNode,n=a.memoizedProps,o=null,h=vs,h!==null)switch(h.tag){case 27:case 5:o=h.memoizedProps}t[At]=a,t=!!(t.nodeValue===n||o!==null&&o.suppressHydrationWarning===!0||bg(t.nodeValue,n)),t||fn(a,!0)}else t=vc(t).createTextNode(o),t[At]=a,a.stateNode=t}return $a(a),null;case 31:if(n=a.memoizedState,t===null||t.memoizedState!==null){if(o=_l(a),n!==null){if(t===null){if(!o)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[At]=a}else qn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;$a(a),t=!1}else n=$d(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return a.flags&256?(Xs(a),a):(Xs(a),null);if((a.flags&128)!==0)throw Error(i(558))}return $a(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=_l(a),o!==null&&o.dehydrated!==null){if(t===null){if(!h)throw Error(i(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[At]=a}else qn(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;$a(a),h=!1}else h=$d(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return a.flags&256?(Xs(a),a):(Xs(a),null)}return Xs(a),(a.flags&128)!==0?(a.lanes=n,a):(n=o!==null,t=t!==null&&t.memoizedState!==null,n&&(o=a.child,h=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(h=o.alternate.memoizedState.cachePool.pool),x=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(x=o.memoizedState.cachePool.pool),x!==h&&(o.flags|=2048)),n!==t&&n&&(a.child.flags|=8192),nc(a,a.updateQueue),$a(a),null);case 4:return oe(),t===null&&Zu(a.stateNode.containerInfo),$a(a),null;case 10:return qr(a.type),$a(a),null;case 19:if(Y(Wa),o=a.memoizedState,o===null)return $a(a),null;if(h=(a.flags&128)!==0,x=o.rendering,x===null)if(h)Ii(o,!1);else{if(Ja!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(x=Ho(t),x!==null){for(a.flags|=128,Ii(o,!1),t=x.updateQueue,a.updateQueue=t,nc(a,t),a.subtreeFlags=0,t=n,n=a.child;n!==null;)Jh(n,t),n=n.sibling;return Q(Wa,Wa.current&1|2),ca&&$r(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&Ie()>dc&&(a.flags|=128,h=!0,Ii(o,!1),a.lanes=4194304)}else{if(!h)if(t=Ho(x),t!==null){if(a.flags|=128,h=!0,t=t.updateQueue,a.updateQueue=t,nc(a,t),Ii(o,!0),o.tail===null&&o.tailMode==="hidden"&&!x.alternate&&!ca)return $a(a),null}else 2*Ie()-o.renderingStartTime>dc&&n!==536870912&&(a.flags|=128,h=!0,Ii(o,!1),a.lanes=4194304);o.isBackwards?(x.sibling=a.child,a.child=x):(t=o.last,t!==null?t.sibling=x:a.child=x,o.last=x)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ie(),t.sibling=null,n=Wa.current,Q(Wa,h?n&1|2:n&1),ca&&$r(a,o.treeForkCount),t):($a(a),null);case 22:case 23:return Xs(a),Wd(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(n&536870912)!==0&&(a.flags&128)===0&&($a(a),a.subtreeFlags&6&&(a.flags|=8192)):$a(a),n=a.updateQueue,n!==null&&nc(a,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==n&&(a.flags|=2048),t!==null&&Y(Kn),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),qr(ss),$a(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function rv(t,a){switch(Ud(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return qr(ss),oe(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return fe(a),null;case 31:if(a.memoizedState!==null){if(Xs(a),a.alternate===null)throw Error(i(340));qn()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Xs(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));qn()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return Y(Wa),null;case 4:return oe(),null;case 10:return qr(a.type),null;case 22:case 23:return Xs(a),Wd(),t!==null&&Y(Kn),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return qr(ss),null;case 25:return null;default:return null}}function _x(t,a){switch(Ud(a),a.tag){case 3:qr(ss),oe();break;case 26:case 27:case 5:fe(a);break;case 4:oe();break;case 31:a.memoizedState!==null&&Xs(a);break;case 13:Xs(a);break;case 19:Y(Wa);break;case 10:qr(a.type);break;case 22:case 23:Xs(a),Wd(),t!==null&&Y(Kn);break;case 24:qr(ss)}}function qi(t,a){try{var n=a.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var h=o.next;n=h;do{if((n.tag&t)===t){o=void 0;var x=n.create,R=n.inst;o=x(),R.destroy=o}n=n.next}while(n!==h)}}catch(U){ja(a,a.return,U)}}function jn(t,a,n){try{var o=a.updateQueue,h=o!==null?o.lastEffect:null;if(h!==null){var x=h.next;o=x;do{if((o.tag&t)===t){var R=o.inst,U=R.destroy;if(U!==void 0){R.destroy=void 0,h=a;var W=n,pe=U;try{pe()}catch(Ee){ja(h,W,Ee)}}}o=o.next}while(o!==x)}}catch(Ee){ja(a,a.return,Ee)}}function Sx(t){var a=t.updateQueue;if(a!==null){var n=t.stateNode;try{xf(a,n)}catch(o){ja(t,t.return,o)}}}function kx(t,a,n){n.props=Jn(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(o){ja(t,a,o)}}function Yi(t,a){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof n=="function"?t.refCleanup=n(o):n.current=o}}catch(h){ja(t,a,h)}}function Ar(t,a){var n=t.ref,o=t.refCleanup;if(n!==null)if(typeof o=="function")try{o()}catch(h){ja(t,a,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(h){ja(t,a,h)}else n.current=null}function Ex(t){var a=t.type,n=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":n.autoFocus&&o.focus();break e;case"img":n.src?o.src=n.src:n.srcSet&&(o.srcset=n.srcSet)}}catch(h){ja(t,t.return,h)}}function Mu(t,a,n){try{var o=t.stateNode;kv(o,t.type,n,a),o[H]=a}catch(h){ja(t,t.return,h)}}function Tx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Tn(t.type)||t.tag===4}function Ru(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Tn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ou(t,a,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,a):(a=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.appendChild(t),n=n._reactRootContainer,n!=null||a.onclick!==null||(a.onclick=Fe));else if(o!==4&&(o===27&&Tn(t.type)&&(n=t.stateNode,a=null),t=t.child,t!==null))for(Ou(t,a,n),t=t.sibling;t!==null;)Ou(t,a,n),t=t.sibling}function lc(t,a,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?n.insertBefore(t,a):n.appendChild(t);else if(o!==4&&(o===27&&Tn(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(lc(t,a,n),t=t.sibling;t!==null;)lc(t,a,n),t=t.sibling}function Ax(t){var a=t.stateNode,n=t.memoizedProps;try{for(var o=t.type,h=a.attributes;h.length;)a.removeAttributeNode(h[0]);ws(a,o,n),a[At]=t,a[H]=n}catch(x){ja(t,t.return,x)}}var Vr=!1,ls=!1,zu=!1,Cx=typeof WeakSet=="function"?WeakSet:Set,ps=null;function nv(t,a){if(t=t.containerInfo,tm=Ec,t=Ih(t),Ed(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var h=o.anchorOffset,x=o.focusNode;o=o.focusOffset;try{n.nodeType,x.nodeType}catch(Rt){n=null;break e}var R=0,U=-1,W=-1,pe=0,Ee=0,Oe=t,ve=null;t:for(;;){for(var we;Oe!==n||h!==0&&Oe.nodeType!==3||(U=R+h),Oe!==x||o!==0&&Oe.nodeType!==3||(W=R+o),Oe.nodeType===3&&(R+=Oe.nodeValue.length),(we=Oe.firstChild)!==null;)ve=Oe,Oe=we;for(;;){if(Oe===t)break t;if(ve===n&&++pe===h&&(U=R),ve===x&&++Ee===o&&(W=R),(we=Oe.nextSibling)!==null)break;Oe=ve,ve=Oe.parentNode}Oe=we}n=U===-1||W===-1?null:{start:U,end:W}}else n=null}n=n||{start:0,end:0}}else n=null;for(am={focusedElem:t,selectionRange:n},Ec=!1,ps=a;ps!==null;)if(a=ps,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,ps=t;else for(;ps!==null;){switch(a=ps,x=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)h=t[n],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&x!==null){t=void 0,n=a,h=x.memoizedProps,x=x.memoizedState,o=n.stateNode;try{var ft=Jn(n.type,h);t=o.getSnapshotBeforeUpdate(ft,x),o.__reactInternalSnapshotBeforeUpdate=t}catch(Rt){ja(n,n.return,Rt)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,n=t.nodeType,n===9)nm(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":nm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,ps=t;break}ps=a.return}}function Mx(t,a,n){var o=n.flags;switch(n.tag){case 0:case 11:case 15:Xr(t,n),o&4&&qi(5,n);break;case 1:if(Xr(t,n),o&4)if(t=n.stateNode,a===null)try{t.componentDidMount()}catch(R){ja(n,n.return,R)}else{var h=Jn(n.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(h,a,t.__reactInternalSnapshotBeforeUpdate)}catch(R){ja(n,n.return,R)}}o&64&&Sx(n),o&512&&Yi(n,n.return);break;case 3:if(Xr(t,n),o&64&&(t=n.updateQueue,t!==null)){if(a=null,n.child!==null)switch(n.child.tag){case 27:case 5:a=n.child.stateNode;break;case 1:a=n.child.stateNode}try{xf(t,a)}catch(R){ja(n,n.return,R)}}break;case 27:a===null&&o&4&&Ax(n);case 26:case 5:Xr(t,n),a===null&&o&4&&Ex(n),o&512&&Yi(n,n.return);break;case 12:Xr(t,n);break;case 31:Xr(t,n),o&4&&zx(t,n);break;case 13:Xr(t,n),o&4&&Px(t,n),o&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=fv.bind(null,n),zv(t,n))));break;case 22:if(o=n.memoizedState!==null||Vr,!o){a=a!==null&&a.memoizedState!==null||ls,h=Vr;var x=ls;Vr=o,(ls=a)&&!x?Jr(t,n,(n.subtreeFlags&8772)!==0):Xr(t,n),Vr=h,ls=x}break;case 30:break;default:Xr(t,n)}}function Rx(t){var a=t.alternate;a!==null&&(t.alternate=null,Rx(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ct(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var qa=null,Ps=!1;function Fr(t,a,n){for(n=n.child;n!==null;)Ox(t,a,n),n=n.sibling}function Ox(t,a,n){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(ct,n)}catch(x){}switch(n.tag){case 26:ls||Ar(n,a),Fr(t,a,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ls||Ar(n,a);var o=qa,h=Ps;Tn(n.type)&&(qa=n.stateNode,Ps=!1),Fr(t,a,n),Zi(n.stateNode),qa=o,Ps=h;break;case 5:ls||Ar(n,a);case 6:if(o=qa,h=Ps,qa=null,Fr(t,a,n),qa=o,Ps=h,qa!==null)if(Ps)try{(qa.nodeType===9?qa.body:qa.nodeName==="HTML"?qa.ownerDocument.body:qa).removeChild(n.stateNode)}catch(x){ja(n,a,x)}else try{qa.removeChild(n.stateNode)}catch(x){ja(n,a,x)}break;case 18:qa!==null&&(Ps?(t=qa,Sg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),Kl(t)):Sg(qa,n.stateNode));break;case 4:o=qa,h=Ps,qa=n.stateNode.containerInfo,Ps=!0,Fr(t,a,n),qa=o,Ps=h;break;case 0:case 11:case 14:case 15:jn(2,n,a),ls||jn(4,n,a),Fr(t,a,n);break;case 1:ls||(Ar(n,a),o=n.stateNode,typeof o.componentWillUnmount=="function"&&kx(n,a,o)),Fr(t,a,n);break;case 21:Fr(t,a,n);break;case 22:ls=(o=ls)||n.memoizedState!==null,Fr(t,a,n),ls=o;break;default:Fr(t,a,n)}}function zx(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Kl(t)}catch(n){ja(a,a.return,n)}}}function Px(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Kl(t)}catch(n){ja(a,a.return,n)}}function lv(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Cx),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Cx),a;default:throw Error(i(435,t.tag))}}function ic(t,a){var n=lv(t);a.forEach(function(o){if(!n.has(o)){n.add(o);var h=xv.bind(null,t,o);o.then(h,h)}})}function Ds(t,a){var n=a.deletions;if(n!==null)for(var o=0;o<n.length;o++){var h=n[o],x=t,R=a,U=R;e:for(;U!==null;){switch(U.tag){case 27:if(Tn(U.type)){qa=U.stateNode,Ps=!1;break e}break;case 5:qa=U.stateNode,Ps=!1;break e;case 3:case 4:qa=U.stateNode.containerInfo,Ps=!0;break e}U=U.return}if(qa===null)throw Error(i(160));Ox(x,R,h),qa=null,Ps=!1,x=h.alternate,x!==null&&(x.return=null),h.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Dx(a,t),a=a.sibling}var yr=null;function Dx(t,a){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Ds(a,t),Bs(t),o&4&&(jn(3,t,t.return),qi(3,t),jn(5,t,t.return));break;case 1:Ds(a,t),Bs(t),o&512&&(ls||n===null||Ar(n,n.return)),o&64&&Vr&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?o:n.concat(o))));break;case 26:var h=yr;if(Ds(a,t),Bs(t),o&512&&(ls||n===null||Ar(n,n.return)),o&4){var x=n!==null?n.memoizedState:null;if(o=t.memoizedState,n===null)if(o===null)if(t.stateNode===null){e:{o=t.type,n=t.memoizedProps,h=h.ownerDocument||h;t:switch(o){case"title":x=h.getElementsByTagName("title")[0],(!x||x[Et]||x[At]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=h.createElement(o),h.head.insertBefore(x,h.querySelector("head > title"))),ws(x,o,n),x[At]=t,Wt(x),o=x;break e;case"link":var R=Dg("link","href",h).get(o+(n.href||""));if(R){for(var U=0;U<R.length;U++)if(x=R[U],x.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&x.getAttribute("rel")===(n.rel==null?null:n.rel)&&x.getAttribute("title")===(n.title==null?null:n.title)&&x.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){R.splice(U,1);break t}}x=h.createElement(o),ws(x,o,n),h.head.appendChild(x);break;case"meta":if(R=Dg("meta","content",h).get(o+(n.content||""))){for(U=0;U<R.length;U++)if(x=R[U],x.getAttribute("content")===(n.content==null?null:""+n.content)&&x.getAttribute("name")===(n.name==null?null:n.name)&&x.getAttribute("property")===(n.property==null?null:n.property)&&x.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&x.getAttribute("charset")===(n.charSet==null?null:n.charSet)){R.splice(U,1);break t}}x=h.createElement(o),ws(x,o,n),h.head.appendChild(x);break;default:throw Error(i(468,o))}x[At]=t,Wt(x),o=x}t.stateNode=o}else Bg(h,t.type,t.stateNode);else t.stateNode=Pg(h,o,t.memoizedProps);else x!==o?(x===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):x.count--,o===null?Bg(h,t.type,t.stateNode):Pg(h,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Mu(t,t.memoizedProps,n.memoizedProps)}break;case 27:Ds(a,t),Bs(t),o&512&&(ls||n===null||Ar(n,n.return)),n!==null&&o&4&&Mu(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Ds(a,t),Bs(t),o&512&&(ls||n===null||Ar(n,n.return)),t.flags&32){h=t.stateNode;try{Ue(h,"")}catch(ft){ja(t,t.return,ft)}}o&4&&t.stateNode!=null&&(h=t.memoizedProps,Mu(t,h,n!==null?n.memoizedProps:h)),o&1024&&(zu=!0);break;case 6:if(Ds(a,t),Bs(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,n=t.stateNode;try{n.nodeValue=o}catch(ft){ja(t,t.return,ft)}}break;case 3:if(wc=null,h=yr,yr=jc(a.containerInfo),Ds(a,t),yr=h,Bs(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{Kl(a.containerInfo)}catch(ft){ja(t,t.return,ft)}zu&&(zu=!1,Bx(t));break;case 4:o=yr,yr=jc(t.stateNode.containerInfo),Ds(a,t),Bs(t),yr=o;break;case 12:Ds(a,t),Bs(t);break;case 31:Ds(a,t),Bs(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ic(t,o)));break;case 13:Ds(a,t),Bs(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(cc=Ie()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ic(t,o)));break;case 22:h=t.memoizedState!==null;var W=n!==null&&n.memoizedState!==null,pe=Vr,Ee=ls;if(Vr=pe||h,ls=Ee||W,Ds(a,t),ls=Ee,Vr=pe,Bs(t),o&8192)e:for(a=t.stateNode,a._visibility=h?a._visibility&-2:a._visibility|1,h&&(n===null||W||Vr||ls||Qn(t)),n=null,a=t;;){if(a.tag===5||a.tag===26){if(n===null){W=n=a;try{if(x=W.stateNode,h)R=x.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{U=W.stateNode;var Oe=W.memoizedProps.style,ve=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null;U.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch(ft){ja(W,W.return,ft)}}}else if(a.tag===6){if(n===null){W=a;try{W.stateNode.nodeValue=h?"":W.memoizedProps}catch(ft){ja(W,W.return,ft)}}}else if(a.tag===18){if(n===null){W=a;try{var we=W.stateNode;h?kg(we,!0):kg(W.stateNode,!1)}catch(ft){ja(W,W.return,ft)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;n===a&&(n=null),a=a.return}n===a&&(n=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(n=o.retryQueue,n!==null&&(o.retryQueue=null,ic(t,n))));break;case 19:Ds(a,t),Bs(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ic(t,o)));break;case 30:break;case 21:break;default:Ds(a,t),Bs(t)}}function Bs(t){var a=t.flags;if(a&2){try{for(var n,o=t.return;o!==null;){if(Tx(o)){n=o;break}o=o.return}if(n==null)throw Error(i(160));switch(n.tag){case 27:var h=n.stateNode,x=Ru(t);lc(t,x,h);break;case 5:var R=n.stateNode;n.flags&32&&(Ue(R,""),n.flags&=-33);var U=Ru(t);lc(t,U,R);break;case 3:case 4:var W=n.stateNode.containerInfo,pe=Ru(t);Ou(t,pe,W);break;default:throw Error(i(161))}}catch(Ee){ja(t,t.return,Ee)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Bx(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Bx(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Xr(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Mx(t,a.alternate,a),a=a.sibling}function Qn(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:jn(4,a,a.return),Qn(a);break;case 1:Ar(a,a.return);var n=a.stateNode;typeof n.componentWillUnmount=="function"&&kx(a,a.return,n),Qn(a);break;case 27:Zi(a.stateNode);case 26:case 5:Ar(a,a.return),Qn(a);break;case 22:a.memoizedState===null&&Qn(a);break;case 30:Qn(a);break;default:Qn(a)}t=t.sibling}}function Jr(t,a,n){for(n=n&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,h=t,x=a,R=x.flags;switch(x.tag){case 0:case 11:case 15:Jr(h,x,n),qi(4,x);break;case 1:if(Jr(h,x,n),o=x,h=o.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(pe){ja(o,o.return,pe)}if(o=x,h=o.updateQueue,h!==null){var U=o.stateNode;try{var W=h.shared.hiddenCallbacks;if(W!==null)for(h.shared.hiddenCallbacks=null,h=0;h<W.length;h++)ff(W[h],U)}catch(pe){ja(o,o.return,pe)}}n&&R&64&&Sx(x),Yi(x,x.return);break;case 27:Ax(x);case 26:case 5:Jr(h,x,n),n&&o===null&&R&4&&Ex(x),Yi(x,x.return);break;case 12:Jr(h,x,n);break;case 31:Jr(h,x,n),n&&R&4&&zx(h,x);break;case 13:Jr(h,x,n),n&&R&4&&Px(h,x);break;case 22:x.memoizedState===null&&Jr(h,x,n),Yi(x,x.return);break;case 30:break;default:Jr(h,x,n)}a=a.sibling}}function Pu(t,a){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Ai(n))}function Du(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ai(t))}function pr(t,a,n,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ux(t,a,n,o),a=a.sibling}function Ux(t,a,n,o){var h=a.flags;switch(a.tag){case 0:case 11:case 15:pr(t,a,n,o),h&2048&&qi(9,a);break;case 1:pr(t,a,n,o);break;case 3:pr(t,a,n,o),h&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&Ai(t)));break;case 12:if(h&2048){pr(t,a,n,o),t=a.stateNode;try{var x=a.memoizedProps,R=x.id,U=x.onPostCommit;typeof U=="function"&&U(R,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(W){ja(a,a.return,W)}}else pr(t,a,n,o);break;case 31:pr(t,a,n,o);break;case 13:pr(t,a,n,o);break;case 23:break;case 22:x=a.stateNode,R=a.alternate,a.memoizedState!==null?x._visibility&2?pr(t,a,n,o):Gi(t,a):x._visibility&2?pr(t,a,n,o):(x._visibility|=2,zl(t,a,n,o,(a.subtreeFlags&10256)!==0||!1)),h&2048&&Pu(R,a);break;case 24:pr(t,a,n,o),h&2048&&Du(a.alternate,a);break;default:pr(t,a,n,o)}}function zl(t,a,n,o,h){for(h=h&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=t,R=a,U=n,W=o,pe=R.flags;switch(R.tag){case 0:case 11:case 15:zl(x,R,U,W,h),qi(8,R);break;case 23:break;case 22:var Ee=R.stateNode;R.memoizedState!==null?Ee._visibility&2?zl(x,R,U,W,h):Gi(x,R):(Ee._visibility|=2,zl(x,R,U,W,h)),h&&pe&2048&&Pu(R.alternate,R);break;case 24:zl(x,R,U,W,h),h&&pe&2048&&Du(R.alternate,R);break;default:zl(x,R,U,W,h)}a=a.sibling}}function Gi(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var n=t,o=a,h=o.flags;switch(o.tag){case 22:Gi(n,o),h&2048&&Pu(o.alternate,o);break;case 24:Gi(n,o),h&2048&&Du(o.alternate,o);break;default:Gi(n,o)}a=a.sibling}}var Ki=8192;function Pl(t,a,n){if(t.subtreeFlags&Ki)for(t=t.child;t!==null;)Lx(t,a,n),t=t.sibling}function Lx(t,a,n){switch(t.tag){case 26:Pl(t,a,n),t.flags&Ki&&t.memoizedState!==null&&Hv(n,yr,t.memoizedState,t.memoizedProps);break;case 5:Pl(t,a,n);break;case 3:case 4:var o=yr;yr=jc(t.stateNode.containerInfo),Pl(t,a,n),yr=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Ki,Ki=16777216,Pl(t,a,n),Ki=o):Pl(t,a,n));break;default:Pl(t,a,n)}}function $x(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Hi(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var n=0;n<a.length;n++){var o=a[n];ps=o,qx(o,t)}$x(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ix(t),t=t.sibling}function Ix(t){switch(t.tag){case 0:case 11:case 15:Hi(t),t.flags&2048&&jn(9,t,t.return);break;case 3:Hi(t);break;case 12:Hi(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,oc(t)):Hi(t);break;default:Hi(t)}}function oc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var n=0;n<a.length;n++){var o=a[n];ps=o,qx(o,t)}$x(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:jn(8,a,a.return),oc(a);break;case 22:n=a.stateNode,n._visibility&2&&(n._visibility&=-3,oc(a));break;default:oc(a)}t=t.sibling}}function qx(t,a){for(;ps!==null;){var n=ps;switch(n.tag){case 0:case 11:case 15:jn(8,n,a);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var o=n.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ai(n.memoizedState.cache)}if(o=n.child,o!==null)o.return=n,ps=o;else e:for(n=t;ps!==null;){o=ps;var h=o.sibling,x=o.return;if(Rx(o),o===n){ps=null;break e}if(h!==null){h.return=x,ps=h;break e}ps=x}}}var iv={getCacheForType:function(t){var a=js(ss),n=a.data.get(t);return n===void 0&&(n=t(),a.data.set(t,n)),n},cacheSignal:function(){return js(ss).controller.signal}},ov=typeof WeakMap=="function"?WeakMap:Map,ga=0,Aa=null,aa=null,na=0,va=0,Js=null,Nn=!1,Dl=!1,Bu=!1,Qr=0,Ja=0,wn=0,Zn=0,Uu=0,Qs=0,Bl=0,Vi=null,Us=null,Lu=!1,cc=0,Yx=0,dc=1/0,uc=null,_n=null,ds=0,Sn=null,Ul=null,Zr=0,$u=0,Iu=null,Gx=null,Fi=0,qu=null;function Zs(){return(ga&2)!==0&&na!==0?na&-na:z.T!==null?Fu():mt()}function Kx(){if(Qs===0)if((na&536870912)===0||ca){var t=Ut;Ut<<=1,(Ut&3932160)===0&&(Ut=262144),Qs=t}else Qs=536870912;return t=Fs.current,t!==null&&(t.flags|=32),Qs}function Ls(t,a,n){(t===Aa&&(va===2||va===9)||t.cancelPendingCommit!==null)&&(Ll(t,0),kn(t,na,Qs,!1)),K(t,n),((ga&2)===0||t!==Aa)&&(t===Aa&&((ga&2)===0&&(Zn|=n),Ja===4&&kn(t,na,Qs,!1)),Cr(t))}function Hx(t,a,n){if((ga&6)!==0)throw Error(i(327));var o=!n&&(a&127)===0&&(a&t.expiredLanes)===0||Bt(t,a),h=o?uv(t,a):Gu(t,a,!0),x=o;do{if(h===0){Dl&&!o&&kn(t,a,0,!1);break}else{if(n=t.current.alternate,x&&!cv(n)){h=Gu(t,a,!1),x=!1;continue}if(h===2){if(x=a,t.errorRecoveryDisabledLanes&x)var R=0;else R=t.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){a=R;e:{var U=t;h=Vi;var W=U.current.memoizedState.isDehydrated;if(W&&(Ll(U,R).flags|=256),R=Gu(U,R,!1),R!==2){if(Bu&&!W){U.errorRecoveryDisabledLanes|=x,Zn|=x,h=4;break e}x=Us,Us=h,x!==null&&(Us===null?Us=x:Us.push.apply(Us,x))}h=R}if(x=!1,h!==2)continue}}if(h===1){Ll(t,0),kn(t,a,0,!0);break}e:{switch(o=t,x=h,x){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:kn(o,a,Qs,!Nn);break e;case 2:Us=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(h=cc+300-Ie(),10<h)){if(kn(o,a,Qs,!Nn),gt(o,0,!0)!==0)break e;Zr=a,o.timeoutHandle=wg(Vx.bind(null,o,n,Us,uc,Lu,a,Qs,Zn,Bl,Nn,x,"Throttled",-0,0),h);break e}Vx(o,n,Us,uc,Lu,a,Qs,Zn,Bl,Nn,x,null,-0,0)}}break}while(!0);Cr(t)}function Vx(t,a,n,o,h,x,R,U,W,pe,Ee,Oe,ve,we){if(t.timeoutHandle=-1,Oe=a.subtreeFlags,Oe&8192||(Oe&16785408)===16785408){Oe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fe},Lx(a,x,Oe);var ft=(x&62914560)===x?cc-Ie():(x&4194048)===x?Yx-Ie():0;if(ft=Vv(Oe,ft),ft!==null){Zr=x,t.cancelPendingCommit=ft(tg.bind(null,t,a,x,n,o,h,R,U,W,Ee,Oe,null,ve,we)),kn(t,x,R,!pe);return}}tg(t,a,x,n,o,h,R,U,W)}function cv(t){for(var a=t;;){var n=a.tag;if((n===0||n===11||n===15)&&a.flags&16384&&(n=a.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var o=0;o<n.length;o++){var h=n[o],x=h.getSnapshot;h=h.value;try{if(!Hs(x(),h))return!1}catch(R){return!1}}if(n=a.child,a.subtreeFlags&16384&&n!==null)n.return=a,a=n;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function kn(t,a,n,o){a&=~Uu,a&=~Zn,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var h=a;0<h;){var x=31-ut(h),R=1<<x;o[x]=-1,h&=~R}n!==0&&ae(t,n,a)}function mc(){return(ga&6)===0?(Xi(0),!1):!0}function Yu(){if(aa!==null){if(va===0)var t=aa.return;else t=aa,Ir=Yn=null,nu(t),Al=null,Mi=0,t=aa;for(;t!==null;)_x(t.alternate,t),t=t.return;aa=null}}function Ll(t,a){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,Av(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Zr=0,Yu(),Aa=t,aa=n=Lr(t.current,null),na=a,va=0,Js=null,Nn=!1,Dl=Bt(t,a),Bu=!1,Bl=Qs=Uu=Zn=wn=Ja=0,Us=Vi=null,Lu=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var h=31-ut(o),x=1<<h;a|=t[h],o&=~x}return Qr=a,Oo(),n}function Fx(t,a){qt=null,z.H=Li,a===Tl||a===Io?(a=df(),va=3):a===Vd?(a=df(),va=4):va=a===ju?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Js=a,aa===null&&(Ja=1,tc(t,rr(a,t.current)))}function Xx(){var t=Fs.current;return t===null?!0:(na&4194048)===na?or===null:(na&62914560)===na||(na&536870912)!==0?t===or:!1}function Jx(){var t=z.H;return z.H=Li,t===null?Li:t}function Qx(){var t=z.A;return z.A=iv,t}function hc(){Ja=4,Nn||(na&4194048)!==na&&Fs.current!==null||(Dl=!0),(wn&134217727)===0&&(Zn&134217727)===0||Aa===null||kn(Aa,na,Qs,!1)}function Gu(t,a,n){var o=ga;ga|=2;var h=Jx(),x=Qx();(Aa!==t||na!==a)&&(uc=null,Ll(t,a)),a=!1;var R=Ja;e:do try{if(va!==0&&aa!==null){var U=aa,W=Js;switch(va){case 8:Yu(),R=6;break e;case 3:case 2:case 9:case 6:Fs.current===null&&(a=!0);var pe=va;if(va=0,Js=null,$l(t,U,W,pe),n&&Dl){R=0;break e}break;default:pe=va,va=0,Js=null,$l(t,U,W,pe)}}dv(),R=Ja;break}catch(Ee){Fx(t,Ee)}while(!0);return a&&t.shellSuspendCounter++,Ir=Yn=null,ga=o,z.H=h,z.A=x,aa===null&&(Aa=null,na=0,Oo()),R}function dv(){for(;aa!==null;)Zx(aa)}function uv(t,a){var n=ga;ga|=2;var o=Jx(),h=Qx();Aa!==t||na!==a?(uc=null,dc=Ie()+500,Ll(t,a)):Dl=Bt(t,a);e:do try{if(va!==0&&aa!==null){a=aa;var x=Js;t:switch(va){case 1:va=0,Js=null,$l(t,a,x,1);break;case 2:case 9:if(of(x)){va=0,Js=null,Wx(a);break}a=function(){va!==2&&va!==9||Aa!==t||(va=7),Cr(t)},x.then(a,a);break e;case 3:va=7;break e;case 4:va=5;break e;case 7:of(x)?(va=0,Js=null,Wx(a)):(va=0,Js=null,$l(t,a,x,7));break;case 5:var R=null;switch(aa.tag){case 26:R=aa.memoizedState;case 5:case 27:var U=aa;if(R?Ug(R):U.stateNode.complete){va=0,Js=null;var W=U.sibling;if(W!==null)aa=W;else{var pe=U.return;pe!==null?(aa=pe,fc(pe)):aa=null}break t}}va=0,Js=null,$l(t,a,x,5);break;case 6:va=0,Js=null,$l(t,a,x,6);break;case 8:Yu(),Ja=6;break e;default:throw Error(i(462))}}mv();break}catch(Ee){Fx(t,Ee)}while(!0);return Ir=Yn=null,z.H=o,z.A=h,ga=n,aa!==null?0:(Aa=null,na=0,Oo(),Ja)}function mv(){for(;aa!==null&&!kt();)Zx(aa)}function Zx(t){var a=Nx(t.alternate,t,Qr);t.memoizedProps=t.pendingProps,a===null?fc(t):aa=a}function Wx(t){var a=t,n=a.alternate;switch(a.tag){case 15:case 0:a=gx(n,a,a.pendingProps,a.type,void 0,na);break;case 11:a=gx(n,a,a.pendingProps,a.type.render,a.ref,na);break;case 5:nu(a);default:_x(n,a),a=aa=Jh(a,Qr),a=Nx(n,a,Qr)}t.memoizedProps=t.pendingProps,a===null?fc(t):aa=a}function $l(t,a,n,o){Ir=Yn=null,nu(a),Al=null,Mi=0;var h=a.return;try{if(ev(t,h,a,n,na)){Ja=1,tc(t,rr(n,t.current)),aa=null;return}}catch(x){if(h!==null)throw aa=h,x;Ja=1,tc(t,rr(n,t.current)),aa=null;return}a.flags&32768?(ca||o===1?t=!0:Dl||(na&536870912)!==0?t=!1:(Nn=t=!0,(o===2||o===9||o===3||o===6)&&(o=Fs.current,o!==null&&o.tag===13&&(o.flags|=16384))),eg(a,t)):fc(a)}function fc(t){var a=t;do{if((a.flags&32768)!==0){eg(a,Nn);return}t=a.return;var n=sv(a.alternate,a,Qr);if(n!==null){aa=n;return}if(a=a.sibling,a!==null){aa=a;return}aa=a=t}while(a!==null);Ja===0&&(Ja=5)}function eg(t,a){do{var n=rv(t.alternate,t);if(n!==null){n.flags&=32767,aa=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!a&&(t=t.sibling,t!==null)){aa=t;return}aa=t=n}while(t!==null);Ja=6,aa=null}function tg(t,a,n,o,h,x,R,U,W){t.cancelPendingCommit=null;do xc();while(ds!==0);if((ga&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(x=a.lanes|a.childLanes,x|=Rd,se(t,n,x,R,U,W),t===Aa&&(aa=Aa=null,na=0),Ul=a,Sn=t,Zr=n,$u=x,Iu=h,Gx=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,gv(ee,function(){return lg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=z.T,z.T=null,h=X.p,X.p=2,R=ga,ga|=4;try{nv(t,a,n)}finally{ga=R,X.p=h,z.T=o}}ds=1,ag(),sg(),rg()}}function ag(){if(ds===1){ds=0;var t=Sn,a=Ul,n=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||n){n=z.T,z.T=null;var o=X.p;X.p=2;var h=ga;ga|=4;try{Dx(a,t);var x=am,R=Ih(t.containerInfo),U=x.focusedElem,W=x.selectionRange;if(R!==U&&U&&U.ownerDocument&&$h(U.ownerDocument.documentElement,U)){if(W!==null&&Ed(U)){var pe=W.start,Ee=W.end;if(Ee===void 0&&(Ee=pe),"selectionStart"in U)U.selectionStart=pe,U.selectionEnd=Math.min(Ee,U.value.length);else{var Oe=U.ownerDocument||document,ve=Oe&&Oe.defaultView||window;if(ve.getSelection){var we=ve.getSelection(),ft=U.textContent.length,Rt=Math.min(W.start,ft),Sa=W.end===void 0?Rt:Math.min(W.end,ft);!we.extend&&Rt>Sa&&(R=Sa,Sa=Rt,Rt=R);var me=Lh(U,Rt),ne=Lh(U,Sa);if(me&&ne&&(we.rangeCount!==1||we.anchorNode!==me.node||we.anchorOffset!==me.offset||we.focusNode!==ne.node||we.focusOffset!==ne.offset)){var ge=Oe.createRange();ge.setStart(me.node,me.offset),we.removeAllRanges(),Rt>Sa?(we.addRange(ge),we.extend(ne.node,ne.offset)):(ge.setEnd(ne.node,ne.offset),we.addRange(ge))}}}}for(Oe=[],we=U;we=we.parentNode;)we.nodeType===1&&Oe.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<Oe.length;U++){var Me=Oe[U];Me.element.scrollLeft=Me.left,Me.element.scrollTop=Me.top}}Ec=!!tm,am=tm=null}finally{ga=h,X.p=o,z.T=n}}t.current=a,ds=2}}function sg(){if(ds===2){ds=0;var t=Sn,a=Ul,n=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||n){n=z.T,z.T=null;var o=X.p;X.p=2;var h=ga;ga|=4;try{Mx(t,a.alternate,a)}finally{ga=h,X.p=o,z.T=n}}ds=3}}function rg(){if(ds===4||ds===3){ds=0,de();var t=Sn,a=Ul,n=Zr,o=Gx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?ds=5:(ds=0,Ul=Sn=null,ng(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(_n=null),Be(n),a=a.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(ct,a,void 0,(a.current.flags&128)===128)}catch(W){}if(o!==null){a=z.T,h=X.p,X.p=2,z.T=null;try{for(var x=t.onRecoverableError,R=0;R<o.length;R++){var U=o[R];x(U.value,{componentStack:U.stack})}}finally{z.T=a,X.p=h}}(Zr&3)!==0&&xc(),Cr(t),h=t.pendingLanes,(n&261930)!==0&&(h&42)!==0?t===qu?Fi++:(Fi=0,qu=t):Fi=0,Xi(0)}}function ng(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,Ai(a)))}function xc(){return ag(),sg(),rg(),lg()}function lg(){if(ds!==5)return!1;var t=Sn,a=$u;$u=0;var n=Be(Zr),o=z.T,h=X.p;try{X.p=32>n?32:n,z.T=null,n=Iu,Iu=null;var x=Sn,R=Zr;if(ds=0,Ul=Sn=null,Zr=0,(ga&6)!==0)throw Error(i(331));var U=ga;if(ga|=4,Ix(x.current),Ux(x,x.current,R,n),ga=U,Xi(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(ct,x)}catch(W){}return!0}finally{X.p=h,z.T=o,ng(t,a)}}function ig(t,a,n){a=rr(n,a),a=vu(t.stateNode,a,2),t=pn(t,a,2),t!==null&&(K(t,2),Cr(t))}function ja(t,a,n){if(t.tag===3)ig(t,t,n);else for(;a!==null;){if(a.tag===3){ig(a,t,n);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(_n===null||!_n.has(o))){t=rr(n,t),n=ox(2),o=pn(a,n,2),o!==null&&(cx(n,o,a,t),K(o,2),Cr(o));break}}a=a.return}}function Ku(t,a,n){var o=t.pingCache;if(o===null){o=t.pingCache=new ov;var h=new Set;o.set(a,h)}else h=o.get(a),h===void 0&&(h=new Set,o.set(a,h));h.has(n)||(Bu=!0,h.add(n),t=hv.bind(null,t,a,n),a.then(t,t))}function hv(t,a,n){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,Aa===t&&(na&n)===n&&(Ja===4||Ja===3&&(na&62914560)===na&&300>Ie()-cc?(ga&2)===0&&Ll(t,0):Uu|=n,Bl===na&&(Bl=0)),Cr(t)}function og(t,a){a===0&&(a=Vt()),t=$n(t,a),t!==null&&(K(t,a),Cr(t))}function fv(t){var a=t.memoizedState,n=0;a!==null&&(n=a.retryLane),og(t,n)}function xv(t,a){var n=0;switch(t.tag){case 31:case 13:var o=t.stateNode,h=t.memoizedState;h!==null&&(n=h.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(a),og(t,n)}function gv(t,a){return Xt(t,a)}var gc=null,Il=null,Hu=!1,yc=!1,Vu=!1,En=0;function Cr(t){t!==Il&&t.next===null&&(Il===null?gc=Il=t:Il=Il.next=t),yc=!0,Hu||(Hu=!0,pv())}function Xi(t,a){if(!Vu&&yc){Vu=!0;do for(var n=!1,o=gc;o!==null;){if(t!==0){var h=o.pendingLanes;if(h===0)var x=0;else{var R=o.suspendedLanes,U=o.pingedLanes;x=(1<<31-ut(42|t)+1)-1,x&=h&~(R&~U),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(n=!0,mg(o,x))}else x=na,x=gt(o,o===Aa?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(x&3)===0||Bt(o,x)||(n=!0,mg(o,x));o=o.next}while(n);Vu=!1}}function yv(){cg()}function cg(){yc=Hu=!1;var t=0;En!==0&&Tv()&&(t=En);for(var a=Ie(),n=null,o=gc;o!==null;){var h=o.next,x=dg(o,a);x===0?(o.next=null,n===null?gc=h:n.next=h,h===null&&(Il=n)):(n=o,(t!==0||(x&3)!==0)&&(yc=!0)),o=h}ds!==0&&ds!==5||Xi(t),En!==0&&(En=0)}function dg(t,a){for(var n=t.suspendedLanes,o=t.pingedLanes,h=t.expirationTimes,x=t.pendingLanes&-62914561;0<x;){var R=31-ut(x),U=1<<R,W=h[R];W===-1?((U&n)===0||(U&o)!==0)&&(h[R]=jt(U,a)):W<=a&&(t.expiredLanes|=U),x&=~U}if(a=Aa,n=na,n=gt(t,t===a?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,n===0||t===a&&(va===2||va===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ya(o),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||Bt(t,n)){if(a=n&-n,a===t.callbackPriority)return a;switch(o!==null&&ya(o),Be(n)){case 2:case 8:n=nt;break;case 32:n=ee;break;case 268435456:n=De;break;default:n=ee}return o=ug.bind(null,t),n=Xt(n,o),t.callbackPriority=a,t.callbackNode=n,a}return o!==null&&o!==null&&ya(o),t.callbackPriority=2,t.callbackNode=null,2}function ug(t,a){if(ds!==0&&ds!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(xc()&&t.callbackNode!==n)return null;var o=na;return o=gt(t,t===Aa?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Hx(t,o,a),dg(t,Ie()),t.callbackNode!=null&&t.callbackNode===n?ug.bind(null,t):null)}function mg(t,a){if(xc())return null;Hx(t,a,!0)}function pv(){Cv(function(){(ga&6)!==0?Xt(F,yv):cg()})}function Fu(){if(En===0){var t=kl;t===0&&(t=et,et<<=1,(et&261888)===0&&(et=256)),En=t}return En}function hg(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:pt(""+t)}function fg(t,a){var n=a.ownerDocument.createElement("input");return n.name=a.name,n.value=a.value,t.id&&n.setAttribute("form",t.id),a.parentNode.insertBefore(n,a),t=new FormData(t),n.parentNode.removeChild(n),t}function bv(t,a,n,o,h){if(a==="submit"&&n&&n.stateNode===h){var x=hg((h[H]||null).action),R=o.submitter;R&&(a=(a=R[H]||null)?hg(a.formAction):R.getAttribute("formAction"),a!==null&&(x=a,R=null));var U=new gl("action","action",null,o,h);t.push({event:U,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(En!==0){var W=R?fg(h,R):new FormData(h);fu(n,{pending:!0,data:W,method:h.method,action:x},null,W)}}else typeof x=="function"&&(U.preventDefault(),W=R?fg(h,R):new FormData(h),fu(n,{pending:!0,data:W,method:h.method,action:x},x,W))},currentTarget:h}]})}}for(var Xu=0;Xu<Md.length;Xu++){var Ju=Md[Xu],vv=Ju.toLowerCase(),jv=Ju[0].toUpperCase()+Ju.slice(1);gr(vv,"on"+jv)}gr(Gh,"onAnimationEnd"),gr(Kh,"onAnimationIteration"),gr(Hh,"onAnimationStart"),gr("dblclick","onDoubleClick"),gr("focusin","onFocus"),gr("focusout","onBlur"),gr(Bb,"onTransitionRun"),gr(Ub,"onTransitionStart"),gr(Lb,"onTransitionCancel"),gr(Vh,"onTransitionEnd"),Rs("onMouseEnter",["mouseout","mouseover"]),Rs("onMouseLeave",["mouseout","mouseover"]),Rs("onPointerEnter",["pointerout","pointerover"]),Rs("onPointerLeave",["pointerout","pointerover"]),Cs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Cs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Cs("onBeforeInput",["compositionend","keypress","textInput","paste"]),Cs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Cs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ji="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ji));function xg(t,a){a=(a&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],h=o.event;o=o.listeners;e:{var x=void 0;if(a)for(var R=o.length-1;0<=R;R--){var U=o[R],W=U.instance,pe=U.currentTarget;if(U=U.listener,W!==x&&h.isPropagationStopped())break e;x=U,h.currentTarget=pe;try{x(h)}catch(Ee){Ro(Ee)}h.currentTarget=null,x=W}else for(R=0;R<o.length;R++){if(U=o[R],W=U.instance,pe=U.currentTarget,U=U.listener,W!==x&&h.isPropagationStopped())break e;x=U,h.currentTarget=pe;try{x(h)}catch(Ee){Ro(Ee)}h.currentTarget=null,x=W}}}}function sa(t,a){var n=a[xe];n===void 0&&(n=a[xe]=new Set);var o=t+"__bubble";n.has(o)||(gg(a,t,2,!1),n.add(o))}function Qu(t,a,n){var o=0;a&&(o|=4),gg(n,t,o,a)}var pc="_reactListening"+Math.random().toString(36).slice(2);function Zu(t){if(!t[pc]){t[pc]=!0,gs.forEach(function(n){n!=="selectionchange"&&(Nv.has(n)||Qu(n,!1,t),Qu(n,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[pc]||(a[pc]=!0,Qu("selectionchange",!1,a))}}function gg(t,a,n,o){switch(Kg(a)){case 2:var h=Jv;break;case 8:h=Qv;break;default:h=hm}n=h.bind(null,a,n,t),h=void 0,!ua||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),o?h!==void 0?t.addEventListener(a,n,{capture:!0,passive:h}):t.addEventListener(a,n,!0):h!==void 0?t.addEventListener(a,n,{passive:h}):t.addEventListener(a,n,!1)}function Wu(t,a,n,o,h){var x=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var R=o.tag;if(R===3||R===4){var U=o.stateNode.containerInfo;if(U===h)break;if(R===4)for(R=o.return;R!==null;){var W=R.tag;if((W===3||W===4)&&R.stateNode.containerInfo===h)return;R=R.return}for(;U!==null;){if(R=oa(U),R===null)return;if(W=R.tag,W===5||W===6||W===26||W===27){o=x=R;continue e}U=U.parentNode}}o=o.return}Ha(function(){var pe=x,Ee=xt(n),Oe=[];e:{var ve=Fh.get(t);if(ve!==void 0){var we=gl,ft=t;switch(t){case"keypress":if(Ks(n)===0)break e;case"keydown":case"keyup":we=xb;break;case"focusin":ft="focus",we=Nd;break;case"focusout":ft="blur",we=Nd;break;case"beforeblur":case"afterblur":we=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=wh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=sb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=pb;break;case Gh:case Kh:case Hh:we=lb;break;case Vh:we=vb;break;case"scroll":case"scrollend":we=tb;break;case"wheel":we=Nb;break;case"copy":case"cut":case"paste":we=ob;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Sh;break;case"toggle":case"beforetoggle":we=_b}var Rt=(a&4)!==0,Sa=!Rt&&(t==="scroll"||t==="scrollend"),me=Rt?ve!==null?ve+"Capture":null:ve;Rt=[];for(var ne=pe,ge;ne!==null;){var Me=ne;if(ge=Me.stateNode,Me=Me.tag,Me!==5&&Me!==26&&Me!==27||ge===null||me===null||(Me=bs(ne,me),Me!=null&&Rt.push(Qi(ne,Me,ge))),Sa)break;ne=ne.return}0<Rt.length&&(ve=new we(ve,ft,null,n,Ee),Oe.push({event:ve,listeners:Rt}))}}if((a&7)===0){e:{if(ve=t==="mouseover"||t==="pointerover",we=t==="mouseout"||t==="pointerout",ve&&n!==ha&&(ft=n.relatedTarget||n.fromElement)&&(oa(ft)||ft[J]))break e;if((we||ve)&&(ve=Ee.window===Ee?Ee:(ve=Ee.ownerDocument)?ve.defaultView||ve.parentWindow:window,we?(ft=n.relatedTarget||n.toElement,we=pe,ft=ft?oa(ft):null,ft!==null&&(Sa=u(ft),Rt=ft.tag,ft!==Sa||Rt!==5&&Rt!==27&&Rt!==6)&&(ft=null)):(we=null,ft=pe),we!==ft)){if(Rt=wh,Me="onMouseLeave",me="onMouseEnter",ne="mouse",(t==="pointerout"||t==="pointerover")&&(Rt=Sh,Me="onPointerLeave",me="onPointerEnter",ne="pointer"),Sa=we==null?ve:pa(we),ge=ft==null?ve:pa(ft),ve=new Rt(Me,ne+"leave",we,n,Ee),ve.target=Sa,ve.relatedTarget=ge,Me=null,oa(Ee)===pe&&(Rt=new Rt(me,ne+"enter",ft,n,Ee),Rt.target=ge,Rt.relatedTarget=Sa,Me=Rt),Sa=Me,we&&ft)t:{for(Rt=wv,me=we,ne=ft,ge=0,Me=me;Me;Me=Rt(Me))ge++;Me=0;for(var Mt=ne;Mt;Mt=Rt(Mt))Me++;for(;0<ge-Me;)me=Rt(me),ge--;for(;0<Me-ge;)ne=Rt(ne),Me--;for(;ge--;){if(me===ne||ne!==null&&me===ne.alternate){Rt=me;break t}me=Rt(me),ne=Rt(ne)}Rt=null}else Rt=null;we!==null&&yg(Oe,ve,we,Rt,!1),ft!==null&&Sa!==null&&yg(Oe,Sa,ft,Rt,!0)}}e:{if(ve=pe?pa(pe):window,we=ve.nodeName&&ve.nodeName.toLowerCase(),we==="select"||we==="input"&&ve.type==="file")var fa=Oh;else if(Mh(ve))if(zh)fa=zb;else{fa=Rb;var wt=Mb}else we=ve.nodeName,!we||we.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?pe&&Dt(pe.elementType)&&(fa=Oh):fa=Ob;if(fa&&(fa=fa(t,pe))){Rh(Oe,fa,n,Ee);break e}wt&&wt(t,ve,pe),t==="focusout"&&pe&&ve.type==="number"&&pe.memoizedProps.value!=null&&be(ve,"number",ve.value)}switch(wt=pe?pa(pe):window,t){case"focusin":(Mh(wt)||wt.contentEditable==="true")&&(pl=wt,Td=pe,ki=null);break;case"focusout":ki=Td=pl=null;break;case"mousedown":Ad=!0;break;case"contextmenu":case"mouseup":case"dragend":Ad=!1,qh(Oe,n,Ee);break;case"selectionchange":if(Db)break;case"keydown":case"keyup":qh(Oe,n,Ee)}var Ht;if(_d)e:{switch(t){case"compositionstart":var la="onCompositionStart";break e;case"compositionend":la="onCompositionEnd";break e;case"compositionupdate":la="onCompositionUpdate";break e}la=void 0}else yl?Ah(t,n)&&(la="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(la="onCompositionStart");la&&(kh&&n.locale!=="ko"&&(yl||la!=="onCompositionStart"?la==="onCompositionEnd"&&yl&&(Ht=Za()):(Qa=Ee,ys="value"in Qa?Qa.value:Qa.textContent,yl=!0)),wt=bc(pe,la),0<wt.length&&(la=new _h(la,t,null,n,Ee),Oe.push({event:la,listeners:wt}),Ht?la.data=Ht:(Ht=Ch(n),Ht!==null&&(la.data=Ht)))),(Ht=kb?Eb(t,n):Tb(t,n))&&(la=bc(pe,"onBeforeInput"),0<la.length&&(wt=new _h("onBeforeInput","beforeinput",null,n,Ee),Oe.push({event:wt,listeners:la}),wt.data=Ht)),bv(Oe,t,pe,n,Ee)}xg(Oe,a)})}function Qi(t,a,n){return{instance:t,listener:a,currentTarget:n}}function bc(t,a){for(var n=a+"Capture",o=[];t!==null;){var h=t,x=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||x===null||(h=bs(t,n),h!=null&&o.unshift(Qi(t,h,x)),h=bs(t,a),h!=null&&o.push(Qi(t,h,x))),t.tag===3)return o;t=t.return}return[]}function wv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function yg(t,a,n,o,h){for(var x=a._reactName,R=[];n!==null&&n!==o;){var U=n,W=U.alternate,pe=U.stateNode;if(U=U.tag,W!==null&&W===o)break;U!==5&&U!==26&&U!==27||pe===null||(W=pe,h?(pe=bs(n,x),pe!=null&&R.unshift(Qi(n,pe,W))):h||(pe=bs(n,x),pe!=null&&R.push(Qi(n,pe,W)))),n=n.return}R.length!==0&&t.push({event:a,listeners:R})}var _v=/\r\n?/g,Sv=/\u0000|\uFFFD/g;function pg(t){return(typeof t=="string"?t:""+t).replace(_v,"\n").replace(Sv,"")}function bg(t,a){return a=pg(a),pg(t)===a}function _a(t,a,n,o,h,x){switch(n){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||Ue(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&Ue(t,""+o);break;case"className":Dr(t,"class",o);break;case"tabIndex":Dr(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Dr(t,n,o);break;case"style":Ce(t,o,x);break;case"data":if(a!=="object"){Dr(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||n!=="href")){t.removeAttribute(n);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(n);break}o=pt(""+o),t.setAttribute(n,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(n==="formAction"?(a!=="input"&&_a(t,a,"name",h.name,h,null),_a(t,a,"formEncType",h.formEncType,h,null),_a(t,a,"formMethod",h.formMethod,h,null),_a(t,a,"formTarget",h.formTarget,h,null)):(_a(t,a,"encType",h.encType,h,null),_a(t,a,"method",h.method,h,null),_a(t,a,"target",h.target,h,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(n);break}o=pt(""+o),t.setAttribute(n,o);break;case"onClick":o!=null&&(t.onclick=Fe);break;case"onScroll":o!=null&&sa("scroll",t);break;case"onScrollEnd":o!=null&&sa("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(n=o.__html,n!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=n}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}n=pt(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(n,""+o):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":o===!0?t.setAttribute(n,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(n,o):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(n,o):t.removeAttribute(n);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(n):t.setAttribute(n,o);break;case"popover":sa("beforetoggle",t),sa("toggle",t),ar(t,"popover",o);break;case"xlinkActuate":zs(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":zs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":zs(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":zs(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":zs(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":zs(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":zs(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":zs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":zs(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ar(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Jt.get(n)||n,ar(t,n,o))}}function em(t,a,n,o,h,x){switch(n){case"style":Ce(t,o,x);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(n=o.__html,n!=null){if(h.children!=null)throw Error(i(60));t.innerHTML=n}}break;case"children":typeof o=="string"?Ue(t,o):(typeof o=="number"||typeof o=="bigint")&&Ue(t,""+o);break;case"onScroll":o!=null&&sa("scroll",t);break;case"onScrollEnd":o!=null&&sa("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Fe);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pr.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(h=n.endsWith("Capture"),a=n.slice(2,h?n.length-7:void 0),x=t[H]||null,x=x!=null?x[n]:null,typeof x=="function"&&t.removeEventListener(a,x,h),typeof o=="function")){typeof x!="function"&&x!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(a,o,h);break e}n in t?t[n]=o:o===!0?t.setAttribute(n,""):ar(t,n,o)}}}function ws(t,a,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":sa("error",t),sa("load",t);var o=!1,h=!1,x;for(x in n)if(n.hasOwnProperty(x)){var R=n[x];if(R!=null)switch(x){case"src":o=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:_a(t,a,x,R,n,null)}}h&&_a(t,a,"srcSet",n.srcSet,n,null),o&&_a(t,a,"src",n.src,n,null);return;case"input":sa("invalid",t);var U=x=R=h=null,W=null,pe=null;for(o in n)if(n.hasOwnProperty(o)){var Ee=n[o];if(Ee!=null)switch(o){case"name":h=Ee;break;case"type":R=Ee;break;case"checked":W=Ee;break;case"defaultChecked":pe=Ee;break;case"value":x=Ee;break;case"defaultValue":U=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(i(137,a));break;default:_a(t,a,o,Ee,n,null)}}te(t,x,U,W,pe,R,h,!1);return;case"select":sa("invalid",t),o=R=x=null;for(h in n)if(n.hasOwnProperty(h)&&(U=n[h],U!=null))switch(h){case"value":x=U;break;case"defaultValue":R=U;break;case"multiple":o=U;default:_a(t,a,h,U,n,null)}a=x,n=R,t.multiple=!!o,a!=null?Ae(t,!!o,a,!1):n!=null&&Ae(t,!!o,n,!0);return;case"textarea":sa("invalid",t),x=h=o=null;for(R in n)if(n.hasOwnProperty(R)&&(U=n[R],U!=null))switch(R){case"value":o=U;break;case"defaultValue":h=U;break;case"children":x=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(91));break;default:_a(t,a,R,U,n,null)}vt(t,o,h,x);return;case"option":for(W in n)if(n.hasOwnProperty(W)&&(o=n[W],o!=null))switch(W){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:_a(t,a,W,o,n,null)}return;case"dialog":sa("beforetoggle",t),sa("toggle",t),sa("cancel",t),sa("close",t);break;case"iframe":case"object":sa("load",t);break;case"video":case"audio":for(o=0;o<Ji.length;o++)sa(Ji[o],t);break;case"image":sa("error",t),sa("load",t);break;case"details":sa("toggle",t);break;case"embed":case"source":case"link":sa("error",t),sa("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in n)if(n.hasOwnProperty(pe)&&(o=n[pe],o!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:_a(t,a,pe,o,n,null)}return;default:if(Dt(a)){for(Ee in n)n.hasOwnProperty(Ee)&&(o=n[Ee],o!==void 0&&em(t,a,Ee,o,n,void 0));return}}for(U in n)n.hasOwnProperty(U)&&(o=n[U],o!=null&&_a(t,a,U,o,n,null))}function kv(t,a,n,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,x=null,R=null,U=null,W=null,pe=null,Ee=null;for(we in n){var Oe=n[we];if(n.hasOwnProperty(we)&&Oe!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":W=Oe;default:o.hasOwnProperty(we)||_a(t,a,we,null,o,Oe)}}for(var ve in o){var we=o[ve];if(Oe=n[ve],o.hasOwnProperty(ve)&&(we!=null||Oe!=null))switch(ve){case"type":x=we;break;case"name":h=we;break;case"checked":pe=we;break;case"defaultChecked":Ee=we;break;case"value":R=we;break;case"defaultValue":U=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,a));break;default:we!==Oe&&_a(t,a,ve,we,o,Oe)}}Ta(t,R,U,W,pe,Ee,x,h);return;case"select":we=R=U=ve=null;for(x in n)if(W=n[x],n.hasOwnProperty(x)&&W!=null)switch(x){case"value":break;case"multiple":we=W;default:o.hasOwnProperty(x)||_a(t,a,x,null,o,W)}for(h in o)if(x=o[h],W=n[h],o.hasOwnProperty(h)&&(x!=null||W!=null))switch(h){case"value":ve=x;break;case"defaultValue":U=x;break;case"multiple":R=x;default:x!==W&&_a(t,a,h,x,o,W)}a=U,n=R,o=we,ve!=null?Ae(t,!!n,ve,!1):!!o!=!!n&&(a!=null?Ae(t,!!n,a,!0):Ae(t,!!n,n?[]:"",!1));return;case"textarea":we=ve=null;for(U in n)if(h=n[U],n.hasOwnProperty(U)&&h!=null&&!o.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:_a(t,a,U,null,o,h)}for(R in o)if(h=o[R],x=n[R],o.hasOwnProperty(R)&&(h!=null||x!=null))switch(R){case"value":ve=h;break;case"defaultValue":we=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==x&&_a(t,a,R,h,o,x)}ze(t,ve,we);return;case"option":for(var ft in n)if(ve=n[ft],n.hasOwnProperty(ft)&&ve!=null&&!o.hasOwnProperty(ft))switch(ft){case"selected":t.selected=!1;break;default:_a(t,a,ft,null,o,ve)}for(W in o)if(ve=o[W],we=n[W],o.hasOwnProperty(W)&&ve!==we&&(ve!=null||we!=null))switch(W){case"selected":t.selected=ve&&typeof ve!="function"&&typeof ve!="symbol";break;default:_a(t,a,W,ve,o,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in n)ve=n[Rt],n.hasOwnProperty(Rt)&&ve!=null&&!o.hasOwnProperty(Rt)&&_a(t,a,Rt,null,o,ve);for(pe in o)if(ve=o[pe],we=n[pe],o.hasOwnProperty(pe)&&ve!==we&&(ve!=null||we!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,a));break;default:_a(t,a,pe,ve,o,we)}return;default:if(Dt(a)){for(var Sa in n)ve=n[Sa],n.hasOwnProperty(Sa)&&ve!==void 0&&!o.hasOwnProperty(Sa)&&em(t,a,Sa,void 0,o,ve);for(Ee in o)ve=o[Ee],we=n[Ee],!o.hasOwnProperty(Ee)||ve===we||ve===void 0&&we===void 0||em(t,a,Ee,ve,o,we);return}}for(var me in n)ve=n[me],n.hasOwnProperty(me)&&ve!=null&&!o.hasOwnProperty(me)&&_a(t,a,me,null,o,ve);for(Oe in o)ve=o[Oe],we=n[Oe],!o.hasOwnProperty(Oe)||ve===we||ve==null&&we==null||_a(t,a,Oe,ve,o,we)}function vg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ev(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,n=performance.getEntriesByType("resource"),o=0;o<n.length;o++){var h=n[o],x=h.transferSize,R=h.initiatorType,U=h.duration;if(x&&U&&vg(R)){for(R=0,U=h.responseEnd,o+=1;o<n.length;o++){var W=n[o],pe=W.startTime;if(pe>U)break;var Ee=W.transferSize,Oe=W.initiatorType;Ee&&vg(Oe)&&(W=W.responseEnd,R+=Ee*(W<U?1:(U-pe)/(W-pe)))}if(--o,a+=8*(x+R)/(h.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var tm=null,am=null;function vc(t){return t.nodeType===9?t:t.ownerDocument}function jg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ng(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function sm(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rm=null;function Tv(){var t=window.event;return t&&t.type==="popstate"?t===rm?!1:(rm=t,!0):(rm=null,!1)}var wg=typeof setTimeout=="function"?setTimeout:void 0,Av=typeof clearTimeout=="function"?clearTimeout:void 0,_g=typeof Promise=="function"?Promise:void 0,Cv=typeof queueMicrotask=="function"?queueMicrotask:typeof _g<"u"?function(t){return _g.resolve(null).then(t).catch(Mv)}:wg;function Mv(t){setTimeout(function(){throw t})}function Tn(t){return t==="head"}function Sg(t,a){var n=a,o=0;do{var h=n.nextSibling;if(t.removeChild(n),h&&h.nodeType===8)if(n=h.data,n==="/$"||n==="/&"){if(o===0){t.removeChild(h),Kl(a);return}o--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")o++;else if(n==="html")Zi(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Zi(n);for(var x=n.firstChild;x;){var R=x.nextSibling,U=x.nodeName;x[Et]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&x.rel.toLowerCase()==="stylesheet"||n.removeChild(x),x=R}}else n==="body"&&Zi(t.ownerDocument.body);n=h}while(n);Kl(a)}function kg(t,a){var n=t;t=0;do{var o=n.nextSibling;if(n.nodeType===1?a?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(a?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=o}while(n)}function nm(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var n=a;switch(a=a.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":nm(n),Ct(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function Rv(t,a,n,o){for(;t.nodeType===1;){var h=n;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Et])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(x=t.getAttribute("rel"),x==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(x!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(x=t.getAttribute("src"),(x!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&x&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var x=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===x)return t}else return t;if(t=cr(t.nextSibling),t===null)break}return null}function Ov(t,a,n){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=cr(t.nextSibling),t===null))return null;return t}function Eg(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=cr(t.nextSibling),t===null))return null;return t}function lm(t){return t.data==="$?"||t.data==="$~"}function im(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function zv(t,a){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||n.readyState!=="loading")a();else{var o=function(){a(),n.removeEventListener("DOMContentLoaded",o)};n.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function cr(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var om=null;function Tg(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(a===0)return cr(t.nextSibling);a--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||a++}t=t.nextSibling}return null}function Ag(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(a===0)return t;a--}else n!=="/$"&&n!=="/&"||a++}t=t.previousSibling}return null}function Cg(t,a,n){switch(a=vc(n),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Zi(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ct(t)}var dr=new Map,Mg=new Set;function jc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Wr=X.d;X.d={f:Pv,r:Dv,D:Bv,C:Uv,L:Lv,m:$v,X:qv,S:Iv,M:Yv};function Pv(){var t=Wr.f(),a=mc();return t||a}function Dv(t){var a=Da(t);a!==null&&a.tag===5&&a.type==="form"?Ff(a):Wr.r(t)}var ql=typeof document>"u"?null:document;function Rg(t,a,n){var o=ql;if(o&&typeof a=="string"&&a){var h=Gt(a);h='link[rel="'+t+'"][href="'+h+'"]',typeof n=="string"&&(h+='[crossorigin="'+n+'"]'),Mg.has(h)||(Mg.add(h),t={rel:t,crossOrigin:n,href:a},o.querySelector(h)===null&&(a=o.createElement("link"),ws(a,"link",t),Wt(a),o.head.appendChild(a)))}}function Bv(t){Wr.D(t),Rg("dns-prefetch",t,null)}function Uv(t,a){Wr.C(t,a),Rg("preconnect",t,a)}function Lv(t,a,n){Wr.L(t,a,n);var o=ql;if(o&&t&&a){var h='link[rel="preload"][as="'+Gt(a)+'"]';a==="image"&&n&&n.imageSrcSet?(h+='[imagesrcset="'+Gt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(h+='[imagesizes="'+Gt(n.imageSizes)+'"]')):h+='[href="'+Gt(t)+'"]';var x=h;switch(a){case"style":x=Yl(t);break;case"script":x=Gl(t)}dr.has(x)||(t=w({rel:"preload",href:a==="image"&&n&&n.imageSrcSet?void 0:t,as:a},n),dr.set(x,t),o.querySelector(h)!==null||a==="style"&&o.querySelector(Wi(x))||a==="script"&&o.querySelector(eo(x))||(a=o.createElement("link"),ws(a,"link",t),Wt(a),o.head.appendChild(a)))}}function $v(t,a){Wr.m(t,a);var n=ql;if(n&&t){var o=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+Gt(o)+'"][href="'+Gt(t)+'"]',x=h;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=Gl(t)}if(!dr.has(x)&&(t=w({rel:"modulepreload",href:t},a),dr.set(x,t),n.querySelector(h)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(eo(x)))return}o=n.createElement("link"),ws(o,"link",t),Wt(o),n.head.appendChild(o)}}}function Iv(t,a,n){Wr.S(t,a,n);var o=ql;if(o&&t){var h=yt(o).hoistableStyles,x=Yl(t);a=a||"default";var R=h.get(x);if(!R){var U={loading:0,preload:null};if(R=o.querySelector(Wi(x)))U.loading=5;else{t=w({rel:"stylesheet",href:t,"data-precedence":a},n),(n=dr.get(x))&&cm(t,n);var W=R=o.createElement("link");Wt(W),ws(W,"link",t),W._p=new Promise(function(pe,Ee){W.onload=pe,W.onerror=Ee}),W.addEventListener("load",function(){U.loading|=1}),W.addEventListener("error",function(){U.loading|=2}),U.loading|=4,Nc(R,a,o)}R={type:"stylesheet",instance:R,count:1,state:U},h.set(x,R)}}}function qv(t,a){Wr.X(t,a);var n=ql;if(n&&t){var o=yt(n).hoistableScripts,h=Gl(t),x=o.get(h);x||(x=n.querySelector(eo(h)),x||(t=w({src:t,async:!0},a),(a=dr.get(h))&&dm(t,a),x=n.createElement("script"),Wt(x),ws(x,"link",t),n.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},o.set(h,x))}}function Yv(t,a){Wr.M(t,a);var n=ql;if(n&&t){var o=yt(n).hoistableScripts,h=Gl(t),x=o.get(h);x||(x=n.querySelector(eo(h)),x||(t=w({src:t,async:!0,type:"module"},a),(a=dr.get(h))&&dm(t,a),x=n.createElement("script"),Wt(x),ws(x,"link",t),n.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},o.set(h,x))}}function Og(t,a,n,o){var h=(h=V.current)?jc(h):null;if(!h)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(a=Yl(n.href),n=yt(h).hoistableStyles,o=n.get(a),o||(o={type:"style",instance:null,count:0,state:null},n.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=Yl(n.href);var x=yt(h).hoistableStyles,R=x.get(t);if(R||(h=h.ownerDocument||h,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(t,R),(x=h.querySelector(Wi(t)))&&!x._p&&(R.instance=x,R.state.loading=5),dr.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},dr.set(t,n),x||Gv(h,t,n,R.state))),a&&o===null)throw Error(i(528,""));return R}if(a&&o!==null)throw Error(i(529,""));return null;case"script":return a=n.async,n=n.src,typeof n=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Gl(n),n=yt(h).hoistableScripts,o=n.get(a),o||(o={type:"script",instance:null,count:0,state:null},n.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Yl(t){return'href="'+Gt(t)+'"'}function Wi(t){return'link[rel="stylesheet"]['+t+"]"}function zg(t){return w({},t,{"data-precedence":t.precedence,precedence:null})}function Gv(t,a,n,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),ws(a,"link",n),Wt(a),t.head.appendChild(a))}function Gl(t){return'[src="'+Gt(t)+'"]'}function eo(t){return"script[async]"+t}function Pg(t,a,n){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+Gt(n.href)+'"]');if(o)return a.instance=o,Wt(o),o;var h=w({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Wt(o),ws(o,"style",h),Nc(o,n.precedence,t),a.instance=o;case"stylesheet":h=Yl(n.href);var x=t.querySelector(Wi(h));if(x)return a.state.loading|=4,a.instance=x,Wt(x),x;o=zg(n),(h=dr.get(h))&&cm(o,h),x=(t.ownerDocument||t).createElement("link"),Wt(x);var R=x;return R._p=new Promise(function(U,W){R.onload=U,R.onerror=W}),ws(x,"link",o),a.state.loading|=4,Nc(x,n.precedence,t),a.instance=x;case"script":return x=Gl(n.src),(h=t.querySelector(eo(x)))?(a.instance=h,Wt(h),h):(o=n,(h=dr.get(x))&&(o=w({},n),dm(o,h)),t=t.ownerDocument||t,h=t.createElement("script"),Wt(h),ws(h,"link",o),t.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,Nc(o,n.precedence,t));return a.instance}function Nc(t,a,n){for(var o=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=o.length?o[o.length-1]:null,x=h,R=0;R<o.length;R++){var U=o[R];if(U.dataset.precedence===a)x=U;else if(x!==h)break}x?x.parentNode.insertBefore(t,x.nextSibling):(a=n.nodeType===9?n.head:n,a.insertBefore(t,a.firstChild))}function cm(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function dm(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var wc=null;function Dg(t,a,n){if(wc===null){var o=new Map,h=wc=new Map;h.set(n,o)}else h=wc,o=h.get(n),o||(o=new Map,h.set(n,o));if(o.has(t))return o;for(o.set(t,null),n=n.getElementsByTagName(t),h=0;h<n.length;h++){var x=n[h];if(!(x[Et]||x[At]||t==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var R=x.getAttribute(a)||"";R=t+R;var U=o.get(R);U?U.push(x):o.set(R,[x])}}return o}function Bg(t,a,n){t=t.ownerDocument||t,t.head.insertBefore(n,a==="title"?t.querySelector("head > title"):null)}function Kv(t,a,n){if(n===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ug(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Hv(t,a,n,o){if(n.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var h=Yl(o.href),x=a.querySelector(Wi(h));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=_c.bind(t),a.then(t,t)),n.state.loading|=4,n.instance=x,Wt(x);return}x=a.ownerDocument||a,o=zg(o),(h=dr.get(h))&&cm(o,h),x=x.createElement("link"),Wt(x);var R=x;R._p=new Promise(function(U,W){R.onload=U,R.onerror=W}),ws(x,"link",o),n.instance=x}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,a),(a=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=_c.bind(t),a.addEventListener("load",n),a.addEventListener("error",n))}}var um=0;function Vv(t,a){return t.stylesheets&&t.count===0&&kc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var o=setTimeout(function(){if(t.stylesheets&&kc(t,t.stylesheets),t.unsuspend){var x=t.unsuspend;t.unsuspend=null,x()}},6e4+a);0<t.imgBytes&&um===0&&(um=62500*Ev());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&kc(t,t.stylesheets),t.unsuspend)){var x=t.unsuspend;t.unsuspend=null,x()}},(t.imgBytes>um?50:800)+a);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(h)}}:null}function _c(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)kc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Sc=null;function kc(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Sc=new Map,a.forEach(Fv,t),Sc=null,_c.call(t))}function Fv(t,a){if(!(a.state.loading&4)){var n=Sc.get(t);if(n)var o=n.get(null);else{n=new Map,Sc.set(t,n);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<h.length;x++){var R=h[x];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(n.set(R.dataset.precedence,R),o=R)}o&&n.set(null,o)}h=a.instance,R=h.getAttribute("data-precedence"),x=n.get(R)||o,x===o&&n.set(null,h),n.set(R,h),this.count++,o=_c.bind(this),h.addEventListener("load",o),h.addEventListener("error",o),x?x.parentNode.insertBefore(h,x.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),a.state.loading|=4}}var to={$$typeof:y,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function Xv(t,a,n,o,h,x,R,U,W){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ia(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ia(0),this.hiddenUpdates=ia(null),this.identifierPrefix=o,this.onUncaughtError=h,this.onCaughtError=x,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=W,this.incompleteTransitions=new Map}function Lg(t,a,n,o,h,x,R,U,W,pe,Ee,Oe){return t=new Xv(t,a,n,R,W,pe,Ee,Oe,U),a=1,x===!0&&(a|=24),x=Vs(3,null,null,a),t.current=x,x.stateNode=t,a=Gd(),a.refCount++,t.pooledCache=a,a.refCount++,x.memoizedState={element:o,isDehydrated:n,cache:a},Fd(x),t}function $g(t){return t?(t=jl,t):jl}function Ig(t,a,n,o,h,x){h=$g(h),o.context===null?o.context=h:o.pendingContext=h,o=yn(a),o.payload={element:n},x=x===void 0?null:x,x!==null&&(o.callback=x),n=pn(t,o,a),n!==null&&(Ls(n,t,a),Oi(n,t,a))}function qg(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<a?n:a}}function mm(t,a){qg(t,a),(t=t.alternate)&&qg(t,a)}function Yg(t){if(t.tag===13||t.tag===31){var a=$n(t,67108864);a!==null&&Ls(a,t,67108864),mm(t,67108864)}}function Gg(t){if(t.tag===13||t.tag===31){var a=Zs();a=Ve(a);var n=$n(t,a);n!==null&&Ls(n,t,a),mm(t,a)}}var Ec=!0;function Jv(t,a,n,o){var h=z.T;z.T=null;var x=X.p;try{X.p=2,hm(t,a,n,o)}finally{X.p=x,z.T=h}}function Qv(t,a,n,o){var h=z.T;z.T=null;var x=X.p;try{X.p=8,hm(t,a,n,o)}finally{X.p=x,z.T=h}}function hm(t,a,n,o){if(Ec){var h=fm(o);if(h===null)Wu(t,a,o,Tc,n),Hg(t,o);else if(Wv(h,t,a,n,o))o.stopPropagation();else if(Hg(t,o),a&4&&-1<Zv.indexOf(t)){for(;h!==null;){var x=Da(h);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var R=Se(x.pendingLanes);if(R!==0){var U=x;for(U.pendingLanes|=2,U.entangledLanes|=2;R;){var W=1<<31-ut(R);U.entanglements[1]|=W,R&=~W}Cr(x),(ga&6)===0&&(dc=Ie()+500,Xi(0))}}break;case 31:case 13:U=$n(x,2),U!==null&&Ls(U,x,2),mc(),mm(x,2)}if(x=fm(o),x===null&&Wu(t,a,o,Tc,n),x===h)break;h=x}h!==null&&o.stopPropagation()}else Wu(t,a,o,null,n)}}function fm(t){return t=xt(t),xm(t)}var Tc=null;function xm(t){if(Tc=null,t=oa(t),t!==null){var a=u(t);if(a===null)t=null;else{var n=a.tag;if(n===13){if(t=c(a),t!==null)return t;t=null}else if(n===31){if(t=g(a),t!==null)return t;t=null}else if(n===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Tc=t,null}function Kg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pe()){case F:return 2;case nt:return 8;case ee:case Re:return 32;case De:return 268435456;default:return 32}default:return 32}}var gm=!1,An=null,Cn=null,Mn=null,ao=new Map,so=new Map,Rn=[],Zv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hg(t,a){switch(t){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":ao.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(a.pointerId)}}function ro(t,a,n,o,h,x){return t===null||t.nativeEvent!==x?(t={blockedOn:a,domEventName:n,eventSystemFlags:o,nativeEvent:x,targetContainers:[h]},a!==null&&(a=Da(a),a!==null&&Yg(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),t)}function Wv(t,a,n,o,h){switch(a){case"focusin":return An=ro(An,t,a,n,o,h),!0;case"dragenter":return Cn=ro(Cn,t,a,n,o,h),!0;case"mouseover":return Mn=ro(Mn,t,a,n,o,h),!0;case"pointerover":var x=h.pointerId;return ao.set(x,ro(ao.get(x)||null,t,a,n,o,h)),!0;case"gotpointercapture":return x=h.pointerId,so.set(x,ro(so.get(x)||null,t,a,n,o,h)),!0}return!1}function Vg(t){var a=oa(t.target);if(a!==null){var n=u(a);if(n!==null){if(a=n.tag,a===13){if(a=c(n),a!==null){t.blockedOn=a,bt(t.priority,function(){Gg(n)});return}}else if(a===31){if(a=g(n),a!==null){t.blockedOn=a,bt(t.priority,function(){Gg(n)});return}}else if(a===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ac(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var n=fm(t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);ha=o,n.target.dispatchEvent(o),ha=null}else return a=Da(n),a!==null&&Yg(a),t.blockedOn=n,!1;a.shift()}return!0}function Fg(t,a,n){Ac(t)&&n.delete(a)}function ej(){gm=!1,An!==null&&Ac(An)&&(An=null),Cn!==null&&Ac(Cn)&&(Cn=null),Mn!==null&&Ac(Mn)&&(Mn=null),ao.forEach(Fg),so.forEach(Fg)}function Cc(t,a){t.blockedOn===a&&(t.blockedOn=null,gm||(gm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,ej)))}var Mc=null;function Xg(t){Mc!==t&&(Mc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Mc===t&&(Mc=null);for(var a=0;a<t.length;a+=3){var n=t[a],o=t[a+1],h=t[a+2];if(typeof o!="function"){if(xm(o||n)===null)continue;break}var x=Da(n);x!==null&&(t.splice(a,3),a-=3,fu(x,{pending:!0,data:h,method:n.method,action:o},o,h))}}))}function Kl(t){function a(W){return Cc(W,t)}An!==null&&Cc(An,t),Cn!==null&&Cc(Cn,t),Mn!==null&&Cc(Mn,t),ao.forEach(a),so.forEach(a);for(var n=0;n<Rn.length;n++){var o=Rn[n];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Rn.length&&(n=Rn[0],n.blockedOn===null);)Vg(n),n.blockedOn===null&&Rn.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(o=0;o<n.length;o+=3){var h=n[o],x=n[o+1],R=h[H]||null;if(typeof x=="function")R||Xg(n);else if(R){var U=null;if(x&&x.hasAttribute("formAction")){if(h=x,R=x[H]||null)U=R.formAction;else if(xm(h)!==null)continue}else U=R.action;typeof U=="function"?n[o+1]=U:(n.splice(o,3),o-=3),Xg(n)}}}function Jg(){function t(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(R){return h=R})},focusReset:"manual",scroll:"manual"})}function a(){h!==null&&(h(),h=null),o||setTimeout(n,20)}function n(){if(!o&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(n,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),h!==null&&(h(),h=null)}}}function ym(t){this._internalRoot=t}Rc.prototype.render=ym.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var n=a.current,o=Zs();Ig(n,o,t,a,null,null)},Rc.prototype.unmount=ym.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Ig(t.current,2,null,t,null,null),mc(),a[J]=null}};function Rc(t){this._internalRoot=t}Rc.prototype.unstable_scheduleHydration=function(t){if(t){var a=mt();t={blockedOn:null,target:t,priority:a};for(var n=0;n<Rn.length&&a!==0&&a<Rn[n].priority;n++);Rn.splice(n,0,t),n===0&&Vg(t)}};var Qg=s.version;if(Qg!=="19.2.0")throw Error(i(527,Qg,"19.2.0"));X.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=v(a),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var tj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:z,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oc.isDisabled&&Oc.supportsFiber)try{ct=Oc.inject(tj),Ne=Oc}catch(t){}}return io.createRoot=function(t,a){if(!d(t))throw Error(i(299));var n=!1,o="",h=rx,x=nx,R=lx;return a!=null&&(a.unstable_strictMode===!0&&(n=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError)),a=Lg(t,1,!1,null,null,n,o,null,h,x,R,Jg),t[J]=a.current,Zu(t),new ym(a)},io.hydrateRoot=function(t,a,n){if(!d(t))throw Error(i(299));var o=!1,h="",x=rx,R=nx,U=lx,W=null;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(x=n.onUncaughtError),n.onCaughtError!==void 0&&(R=n.onCaughtError),n.onRecoverableError!==void 0&&(U=n.onRecoverableError),n.formState!==void 0&&(W=n.formState)),a=Lg(t,1,!0,a,n!=null?n:null,o,h,W,x,R,U,Jg),a.context=$g(null),n=a.current,o=Zs(),o=Ve(o),h=yn(o),h.callback=null,pn(n,h,o),n=o,a.current.lanes=n,K(a,n),Cr(a),t[J]=a.current,Zu(t),new Rc(a)},io.version="19.2.0",io}var m0;function tN(){if(m0)return vm.exports;m0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(s){console.error(s)}}return r(),vm.exports=eN(),vm.exports}var aN=tN();function Ty(r){var s,l,i="";if(typeof r=="string"||typeof r=="number")i+=r;else if(typeof r=="object")if(Array.isArray(r)){var d=r.length;for(s=0;s<d;s++)r[s]&&(l=Ty(r[s]))&&(i&&(i+=" "),i+=l)}else for(l in r)r[l]&&(i&&(i+=" "),i+=l);return i}function di(){for(var r,s,l=0,i="",d=arguments.length;l<d;l++)(r=arguments[l])&&(s=Ty(r))&&(i&&(i+=" "),i+=s);return i}function mo(r){const s=String(r||"").trim();if(!s)return"";if(/^https:\/\/[^/]+\.supabase\.co\/storage\/v1\/object\/public\/avatars\//i.test(s))return"/api/avatar?u=".concat(encodeURIComponent(s));if(/^https?:\/\//i.test(s))try{return s.includes("%")?s:encodeURI(s)}catch(l){return s}return s}const zc="/favicon.ico",Yt=({src:r,alt:s="",size:l="40px",verified:i=!1,partyLogo:d=null,ring:u=null,onClick:c,className:g=""})=>{const f=parseInt(l),v=f*.3,b=f*.35,w=m.useMemo(()=>{const _=String(r||"").trim(),M=[],T=A=>{const S=String(A||"").trim();S&&M.push(S)};if(_)if(_.startsWith("/")||_.startsWith("http"))T(mo(_));else{const A="https://eldoyqgzxgubkyohvquq.supabase.co".trim().replace(/\/+$/,"");A&&(T(mo("".concat(A,"/storage/v1/object/public/").concat(_))),T(mo("".concat(A,"/storage/v1/object/public/uploads/").concat(_))),_.startsWith("avatars/")&&T(mo("".concat(A,"/storage/v1/object/public/avatars/").concat(_.slice(8)))))}return T(zc),Array.from(new Set(M))},[r]),[N,k]=m.useState(0);return m.useEffect(()=>{k(0)},[r]),e.jsxs("div",{className:di("relative inline-block",c&&"cursor-pointer",g),style:{width:l,height:l},onClick:c,children:[u==="fast"?e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-dashed border-primary-blue pointer-events-none"}):null,e.jsx("img",{src:w[Math.min(N,Math.max(0,w.length-1))]||zc,alt:s,className:di("w-full h-full rounded-full object-cover bg-white",u==="fast"?"border-0":"border-2 border-gray-200"),crossOrigin:"anonymous",onError:_=>{k(M=>{var A;const T=Number(M||0)+1;if(T<((w==null?void 0:w.length)||0))return T;try{if((A=_.currentTarget)!=null&&A.src&&String(_.currentTarget.src).endsWith(zc))return M;_.currentTarget.src=zc}catch(S){}return M})}}),d&&e.jsx("div",{className:"absolute -bottom-1 -left-1 bg-white rounded-full p-0.5 shadow-sm border border-gray-200",style:{width:"".concat(b,"px"),height:"".concat(b,"px")},children:e.jsx("img",{src:d,alt:"Parti",className:"w-full h-full rounded-full object-contain",onError:_=>{_.target.style.display="none"}})}),i&&e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-green-500 rounded-full p-0.5 flex items-center justify-center",style:{width:"".concat(v,"px"),height:"".concat(v,"px")},children:e.jsx(ri,{className:"text-blue-700",style:{width:"".concat(v*.6,"px"),height:"".concat(v*.6,"px")}})})]})},ln=({children:r,variant:s="default",size:l="medium",className:i=""})=>{const d={default:"bg-gray-200 text-gray-800",primary:"bg-primary-blue text-white",secondary:"bg-primary-green text-white",success:"bg-green-500 text-white",warning:"bg-yellow-500 text-white",danger:"bg-red-500 text-white"},u={small:"px-2 py-0.5 text-xs",medium:"px-3 py-1 text-sm",large:"px-4 py-1.5 text-base"};return e.jsx("span",{className:di("rounded-full font-medium inline-flex items-center gap-1",d[s],u[l],i),children:r})},sN=()=>{const r=Qt(),[s,l]=m.useState(!1),i=["zgr","ak","effaf","siyaset","bamsz","medya"],[d,u]=m.useState(0),[c,g]=m.useState(!0),f=m.useRef(null);return m.useEffect(()=>(f.current&&clearTimeout(f.current),g(!0),f.current=setTimeout(()=>{g(!1),f.current=setTimeout(()=>{u(v=>(v+1)%i.length),g(!0)},250)},1400),()=>{f.current&&clearTimeout(f.current)}),[d,i.length]),e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[!s&&e.jsx("img",{src:"/logo.png",alt:"Polithane",width:40,height:40,className:"h-10 w-10 object-contain cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>r("/"),onError:()=>l(!0)}),e.jsx("span",{className:"text-primary-blue font-bold text-xl whitespace-nowrap cursor-pointer hover:opacity-80 transition-opacity ".concat(s?"":"hidden"),onClick:()=>r("/"),children:"Polithane"}),e.jsx("span",{className:"hidden sm:flex text-gray-600 text-sm md:text-base min-h-[1.25rem] items-center min-w-0",children:e.jsx("span",{className:"transition-opacity duration-300 inline-block ".concat(c?"opacity-100":"opacity-0"),style:{minWidth:"120px"},children:e.jsx("span",{className:"block truncate max-w-[170px] sm:max-w-[260px] md:max-w-[420px]",children:i[d]||""})})})]})},rN="",h0=(...r)=>{},Pc=(...r)=>{},nN=()=>{const r=localStorage.getItem("auth_token");return r?{Authorization:"Bearer ".concat(r)}:{}},Ia=(r={})=>{try{if(!r||typeof r!="object")return"";const s=Object.entries(r).filter(([,l])=>{if(l==null)return!1;const i=String(l).trim();return!(!i||i==="undefined"||i==="null")});return s.length===0?"":new URLSearchParams(s.map(([l,i])=>[l,String(i)])).toString()}catch(s){return""}},Wn={NETWORK_ERROR:"Sunucuya balanlamyor. Ltfen backend servern altndan emin olun.",SERVER_ERROR:"Sunucu hatas olutu. Ltfen daha sonra tekrar deneyin.",UNAUTHORIZED:"Oturum sreniz doldu. Ltfen tekrar giri yapn.",NOT_FOUND:"stek bulunamad.",BAD_REQUEST:"Geersiz istek.",UNKNOWN:"Bilinmeyen bir hata olutu."},re=async(r,s={})=>{const l="".concat(rN).concat(r),i={...nN(),...s.headers};s.body instanceof FormData||(i["Content-Type"]="application/json");try{h0(" Fetching...");const d=typeof AbortController<"u",u=3e4;let c=null,g=null;d&&(g=new AbortController,c=setTimeout(()=>{Pc(" Request timeout! (30s)");try{g.abort()}catch(w){}},u));const f=fetch(l,{...s,headers:i,...d?{signal:g.signal}:{}}),v=d?await f:await Promise.race([f,new Promise((w,N)=>{c=setTimeout(()=>{Pc(" Request timeout! (30s)"),N(new Error("REQUEST_TIMEOUT"))},u)})]);if(c&&clearTimeout(c),h0(" Response received:",v.status,v.statusText),!v.ok&&v.status===0)throw new Error(Wn.NETWORK_ERROR);const b=await v.json().catch(()=>({}));if(!v.ok){let w=b.error||b.message||Wn.UNKNOWN;throw v.status===401&&!b.error?w=Wn.UNAUTHORIZED:v.status===404&&!b.error?w=b.error||Wn.NOT_FOUND:v.status===400&&!b.error?w=w||Wn.BAD_REQUEST:v.status===429?w=b.error||"ok fazla istek gnderdiniz. Ltfen biraz bekleyip tekrar deneyin.":v.status>=500&&!b.error&&(w=Wn.SERVER_ERROR),b.remainingAttempts!==void 0&&(w+=" (Kalan deneme: ".concat(b.remainingAttempts,")")),new Error(w)}return b}catch(d){throw Pc("Error name:",d.name),Pc("Error message:",d.message),d.name==="AbortError"||d.message==="REQUEST_TIMEOUT"?new Error("stek zaman amna urad. Ltfen tekrar deneyin."):d.message==="Failed to fetch"||d.name==="TypeError"?new Error(Wn.NETWORK_ERROR):d}},lN={login:(r,s)=>re("/api/auth/login",{method:"POST",body:JSON.stringify({identifier:r,password:s})}),register:r=>re("/api/auth/register",{method:"POST",body:JSON.stringify(r)}),me:()=>re("/api/auth/me"),logout:()=>re("/api/auth/logout",{method:"POST"}),changePassword:(r,s)=>re("/api/auth/change-password",{method:"POST",body:JSON.stringify({currentPassword:r,newPassword:s})})},Ma={getAll:async(r={})=>{try{const s=Ia(r);return await re("/api/posts".concat(s?"?".concat(s):""))}catch(s){return[]}},getById:r=>re("/api/posts/".concat(r)),create:r=>re("/api/posts",{method:"POST",body:JSON.stringify(r||{})}),update:(r,s)=>re("/api/posts/".concat(r),{method:"PUT",body:JSON.stringify(s)}),delete:r=>re("/api/posts/".concat(r),{method:"DELETE"}),like:r=>re("/api/posts/".concat(r,"/like"),{method:"POST"}),share:r=>re("/api/posts/".concat(r,"/share"),{method:"POST"}),getComments:r=>re("/api/posts/".concat(r,"/comments")),addComment:(r,s,l=null)=>re("/api/posts/".concat(r,"/comments"),{method:"POST",body:JSON.stringify({content:s,parent_id:l})}),likeComment:r=>re("/api/comments/".concat(r,"/like"),{method:"POST"}),updateComment:(r,s)=>re("/api/comments/".concat(r),{method:"PUT",body:JSON.stringify({content:s})}),reportComment:(r,s,l="")=>re("/api/comments/".concat(r,"/report"),{method:"POST",body:JSON.stringify({reason:s,details:l})}),reportPost:(r,s,l="")=>re("/api/posts/".concat(r,"/report"),{method:"POST",body:JSON.stringify({reason:s,details:l})}),getPolitScoreBreakdown:r=>re("/api/posts/".concat(r,"/polit-score-breakdown"))},us={getByUsername:r=>re("/api/users?username=".concat(encodeURIComponent(r))),getById:r=>re("/api/users?id=".concat(encodeURIComponent(r))),getAll:(r={})=>{const s=Ia(r);return re("/api/users".concat(s?"?".concat(s):""))},updateProfile:r=>re("/api/users/profile",{method:"PUT",body:r}),follow:r=>re("/api/users/".concat(r,"/follow"),{method:"POST"}),getFollowStats:r=>re("/api/users/".concat(r,"/follow-stats")),getPosts:(r,s={})=>{const l=Ia(s);return re("/api/users/".concat(r,"/posts").concat(l?"?".concat(l):""))},getFollowers:(r,s={})=>{const l=Ia(s||{});return re("/api/users/".concat(r,"/followers").concat(l?"?".concat(l):""))},getFollowing:(r,s={})=>{const l=Ia(s||{});return re("/api/users/".concat(r,"/following").concat(l?"?".concat(l):""))},getFollowedByFriends:(r,{limit:s=3}={})=>re("/api/users/".concat(r,"/followed-by-friends?limit=").concat(encodeURIComponent(String(s)))),getLikes:(r,s={})=>{const l=Ia(s);return re("/api/users/".concat(r,"/likes").concat(l?"?".concat(l):""))},getComments:(r,s={})=>{const l=Ia(s);return re("/api/users/".concat(r,"/comments").concat(l?"?".concat(l):""))},getActivity:(r="me",s={})=>{const l=Ia(s);return re("/api/users/".concat(r,"/activity").concat(l?"?".concat(l):""))},getBlocks:()=>re("/api/users/blocks"),block:r=>re("/api/users/blocks",{method:"POST",body:JSON.stringify({user_id:r})}),unblock:r=>re("/api/users/blocks/".concat(r),{method:"DELETE"}),report:(r,s,l="")=>re("/api/users/".concat(r,"/report"),{method:"POST",body:JSON.stringify({reason:s,details:l})})},$s={getConversations:()=>re("/api/messages/conversations"),getMessages:r=>re("/api/messages/".concat(r)),getContacts:(r={})=>{const s=Ia(r);return re("/api/messages/contacts".concat(s?"?".concat(s):""))},getSuggestions:(r={})=>{const s=Ia(r);return re("/api/messages/suggestions".concat(s?"?".concat(s):""))},searchUsers:r=>{const s=new URLSearchParams({q:String(r||"")}).toString();return re("/api/messages/search?".concat(s))},rejectRequest:r=>re("/api/messages/requests/".concat(r,"/reject"),{method:"POST"}),send:(r,s,l=null)=>re("/api/messages/send",{method:"POST",body:JSON.stringify({receiver_id:r,content:s,attachment:l})}),deleteConversation:r=>re("/api/messages/conversations/".concat(r),{method:"DELETE"}),reportConversation:(r,{reason:s,details:l}={})=>re("/api/messages/conversations/".concat(r,"/report"),{method:"POST",body:JSON.stringify({reason:s,details:l})}),delete:r=>re("/api/messages/".concat(r),{method:"DELETE"})},Ze={getStats:()=>re("/api/admin/stats"),envCheck:()=>re("/api/admin/env-check"),schemaCheck:()=>re("/api/admin/schema-check"),getDbOverview:()=>re("/api/admin/db/overview"),getSecurityEvents:(r={})=>{const s=Ia(r);return re("/api/admin/security/events".concat(s?"?".concat(s):""))},getSecurityDevices:(r={})=>{const s=Ia(r);return re("/api/admin/security/devices".concat(s?"?".concat(s):""))},updateSecurityDevice:(r,s)=>re("/api/admin/security/devices/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),systemTransform:r=>re("/api/admin/system/transform",{method:"POST",body:JSON.stringify(r||{})}),getJobs:(r={})=>{const s=Ia(r);return re("/api/admin/jobs".concat(s?"?".concat(s):""))},enqueueJob:r=>re("/api/admin/jobs",{method:"POST",body:JSON.stringify(r||{})}),updateJob:(r,s)=>re("/api/admin/jobs/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),processJobs:(r={})=>{const s=Ia(r);return re("/api/admin/jobs/process".concat(s?"?".concat(s):""),{method:"POST"})},getAds:()=>re("/api/admin/ads"),createAd:r=>re("/api/admin/ads",{method:"POST",body:JSON.stringify(r||{})}),updateAd:(r,s)=>re("/api/admin/ads/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deleteAd:r=>re("/api/admin/ads/".concat(r),{method:"DELETE"}),getWorkflows:()=>re("/api/admin/workflows"),createWorkflow:r=>re("/api/admin/workflows",{method:"POST",body:JSON.stringify(r||{})}),updateWorkflow:(r,s)=>re("/api/admin/workflows/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deleteWorkflow:r=>re("/api/admin/workflows/".concat(r),{method:"DELETE"}),getRevenueSummary:()=>re("/api/admin/revenue/summary"),getRevenueEntries:(r={})=>{const s=Ia(r);return re("/api/admin/revenue/entries".concat(s?"?".concat(s):""))},createRevenueEntry:r=>re("/api/admin/revenue/entries",{method:"POST",body:JSON.stringify(r||{})}),deleteRevenueEntry:r=>re("/api/admin/revenue/entries/".concat(r),{method:"DELETE"}),getApiKeys:()=>re("/api/admin/api-keys"),createApiKey:r=>re("/api/admin/api-keys",{method:"POST",body:JSON.stringify(r||{})}),updateApiKey:(r,s)=>re("/api/admin/api-keys/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deleteApiKey:r=>re("/api/admin/api-keys/".concat(r),{method:"DELETE"}),getSources:()=>re("/api/admin/sources"),createSource:r=>re("/api/admin/sources",{method:"POST",body:JSON.stringify(r||{})}),updateSource:(r,s)=>re("/api/admin/sources/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deleteSource:r=>re("/api/admin/sources/".concat(r),{method:"DELETE"}),getEmailTemplates:()=>re("/api/admin/email-templates"),createEmailTemplate:r=>re("/api/admin/email-templates",{method:"POST",body:JSON.stringify(r||{})}),updateEmailTemplate:(r,s)=>re("/api/admin/email-templates/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deleteEmailTemplate:r=>re("/api/admin/email-templates/".concat(r),{method:"DELETE"}),getComments:(r={})=>{const s=Ia(r);return re("/api/admin/comments".concat(s?"?".concat(s):""))},approveComment:r=>re("/api/admin/comments/".concat(r,"/approve"),{method:"POST"}),deleteComment:r=>re("/api/admin/comments/".concat(r),{method:"DELETE"}),storageList:(r={})=>{const s=Ia(r);return re("/api/admin/storage/list".concat(s?"?".concat(s):""))},storageDelete:r=>re("/api/admin/storage/delete",{method:"POST",body:JSON.stringify(r||{})}),storageReplace:r=>re("/api/admin/storage/replace",{method:"POST",body:JSON.stringify(r||{})}),getPaymentPlans:()=>re("/api/admin/payments/plans"),createPaymentPlan:r=>re("/api/admin/payments/plans",{method:"POST",body:JSON.stringify(r||{})}),updatePaymentPlan:(r,s)=>re("/api/admin/payments/plans/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deletePaymentPlan:r=>re("/api/admin/payments/plans/".concat(r),{method:"DELETE"}),getPaymentTransactions:(r={})=>{const s=Ia(r);return re("/api/admin/payments/transactions".concat(s?"?".concat(s):""))},createPaymentTransaction:r=>re("/api/admin/payments/transactions",{method:"POST",body:JSON.stringify(r||{})}),deletePaymentTransaction:r=>re("/api/admin/payments/transactions/".concat(r),{method:"DELETE"}),getAnalytics:(r={})=>{const s=Ia(r);return re("/api/admin/analytics".concat(s?"?".concat(s):""))},getNotificationRules:()=>re("/api/admin/notification-rules"),createNotificationRule:r=>re("/api/admin/notification-rules",{method:"POST",body:JSON.stringify(r||{})}),updateNotificationRule:(r,s)=>re("/api/admin/notification-rules/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deleteNotificationRule:r=>re("/api/admin/notification-rules/".concat(r),{method:"DELETE"}),getNotificationChannels:()=>re("/api/admin/notification-channels"),updateNotificationChannels:r=>re("/api/admin/notification-channels",{method:"PUT",body:JSON.stringify(r||{})}),seedDemo:(r={})=>re("/api/admin/seed/demo",{method:"POST",body:JSON.stringify(r)}),getUsers:(r={})=>{const s=Ia(r);return re("/api/admin/users".concat(s?"?".concat(s):""))},getDuplicateUsers:(r={})=>{const s=Ia(r);return re("/api/admin/users/duplicates".concat(s?"?".concat(s):""))},dedupeUsers:({primaryId:r,duplicateIds:s,dryRun:l=!0})=>re("/api/admin/users/dedupe",{method:"POST",body:JSON.stringify({primaryId:r,duplicateIds:s,dryRun:l})}),updateUser:(r,s)=>re("/api/admin/users/".concat(r),{method:"PUT",body:JSON.stringify(s)}),deleteUser:r=>re("/api/admin/users/".concat(r),{method:"DELETE"}),getPosts:(r={})=>{const s=Ia(r);return re("/api/admin/posts".concat(s?"?".concat(s):""))},updatePost:(r,s)=>re("/api/admin/posts/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deletePost:r=>re("/api/admin/posts/".concat(r),{method:"DELETE"}),updateComment:(r,s)=>re("/api/admin/comments/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),getAgendas:(r={})=>{const s=Ia(r);return re("/api/admin/agendas".concat(s?"?".concat(s):""))},createAgenda:r=>re("/api/admin/agendas",{method:"POST",body:JSON.stringify(r||{})}),updateAgenda:(r,s)=>re("/api/admin/agendas/".concat(r),{method:"PUT",body:JSON.stringify(s||{})}),deleteAgenda:r=>re("/api/admin/agendas/".concat(r),{method:"DELETE"}),getSettings:()=>re("/api/settings"),updateSettings:r=>re("/api/settings",{method:"PUT",body:JSON.stringify(r)}),sendNotification:({user_id:r,title:s,message:l,type:i="system",broadcast:d=!1})=>re("/api/admin/notifications",{method:"POST",body:JSON.stringify({user_id:r,title:s,message:l,type:i,broadcast:d})}),getParties:(r={})=>{const s=Ia(r);return re("/api/admin/parties".concat(s?"?".concat(s):""))},createParty:r=>re("/api/admin/parties",{method:"POST",body:JSON.stringify(r)}),updateParty:(r,s)=>re("/api/admin/parties/".concat(r),{method:"PUT",body:JSON.stringify(s)}),deleteParty:r=>re("/api/admin/parties/".concat(r),{method:"DELETE"}),getPartyHierarchy:r=>re("/api/admin/parties/".concat(r,"/hierarchy")),assignPartyUnit:(r,s)=>re("/api/admin/parties/".concat(r,"/assign"),{method:"POST",body:JSON.stringify(s||{})}),unassignPartyUnit:(r,s)=>re("/api/admin/parties/".concat(r,"/unassign"),{method:"POST",body:JSON.stringify(s||{})}),setPartyChair:(r,s)=>re("/api/admin/parties/".concat(r,"/chair"),{method:"POST",body:JSON.stringify({user_id:s})}),sendTestEmail:({to:r,subject:s,text:l,html:i}={})=>re("/api/admin/mail/test",{method:"POST",body:JSON.stringify({to:r,subject:s,text:l,html:i})}),getMailSettings:()=>re("/api/admin/mail/settings"),updateMailSettings:(r={})=>re("/api/admin/mail/settings",{method:"PUT",body:JSON.stringify(r||{})})},Zl={list:(r={})=>{const s=Ia(r);return re("/api/notifications".concat(s?"?".concat(s):""))},unreadCount:()=>re("/api/notifications/unread-count"),markRead:r=>re("/api/notifications/".concat(r),{method:"POST"}),markAllRead:()=>re("/api/notifications/read-all",{method:"POST"}),delete:r=>re("/api/notifications/".concat(r),{method:"DELETE"})},iN={getAll:async()=>{try{return await re("/api/parties")}catch(r){return[]}},getById:r=>re("/api/parties/".concat(r))},ma={auth:lN,posts:Ma,users:us,messages:$s,admin:Ze,parties:iN,notifications:Zl},Ay=m.createContext(null),Pa=()=>{const r=m.useContext(Ay);if(!r)throw new Error("useAuth must be used within AuthProvider");return r},oN=({children:r})=>{const[s,l]=m.useState(null),[i,d]=m.useState(!0),[u,c]=m.useState(null),g=Qt(),f=async()=>{try{await re("/api/storage/ensure-bucket",{method:"POST",body:JSON.stringify({name:"uploads",public:!0})})}catch(y){}try{await re("/api/storage/ensure-bucket",{method:"POST",body:JSON.stringify({name:"politfest",public:!0})})}catch(y){}};m.useEffect(()=>{(async()=>{var E,C,O,P;const p=localStorage.getItem("auth_token"),j=localStorage.getItem("user");if(p&&j){c(p);try{const L=await ma.auth.me(),ce=(O=(C=(E=L==null?void 0:L.data)==null?void 0:E.user)!=null?C:L==null?void 0:L.data)!=null?O:null;ce?((P=L==null?void 0:L.data)!=null&&P.token&&(c(L.data.token),localStorage.setItem("auth_token",L.data.token)),l(ce),localStorage.setItem("user",JSON.stringify(ce)),await f()):l(JSON.parse(j))}catch(L){console.error("Auth verification error:",L),l(JSON.parse(j))}}d(!1)})()},[]);const S={user:s,token:u,loading:i,login:async(y,p)=>{try{d(!0);const j=await ma.auth.login(y,p);return c(j.data.token),l(j.data.user),localStorage.setItem("auth_token",j.data.token),localStorage.setItem("user",JSON.stringify(j.data.user)),await f(),{success:!0,user:j.data.user}}catch(j){return console.error("Login error:",j),{success:!1,error:j.message==="Failed to fetch"?"Sunucuya balanlamyor. Ltfen backend server altrdnzdan emin olun.":j.message||"Giri srasnda bir hata olutu"}}finally{d(!1)}},register:async y=>{try{d(!0);const p=await ma.auth.register(y);return c(p.data.token),l(p.data.user),localStorage.setItem("auth_token",p.data.token),localStorage.setItem("user",JSON.stringify(p.data.user)),await f(),{success:!0,user:p.data.user}}catch(p){return console.error("Register error:",p),{success:!1,error:p.message==="Failed to fetch"?"Sunucuya balanlamyor. Ltfen backend server altrdnzdan emin olun.":p.message||"Kayt srasnda bir hata olutu"}}finally{d(!1)}},logout:async()=>{try{u&&await ma.auth.logout().catch(()=>null)}catch(y){console.error("Logout error:",y)}finally{c(null),l(null),localStorage.removeItem("auth_token"),localStorage.removeItem("user"),g("/")}},updateUser:y=>{const p={...s,...y};l(p),localStorage.setItem("user",JSON.stringify(p))},refreshUser:async()=>{var y,p,j,E;if(u)try{const C=await ma.auth.me(),O=(j=(p=(y=C==null?void 0:C.data)==null?void 0:y.user)!=null?p:C==null?void 0:C.data)!=null?j:null;O&&((E=C==null?void 0:C.data)!=null&&E.token&&(c(C.data.token),localStorage.setItem("auth_token",C.data.token)),l(O),localStorage.setItem("user",JSON.stringify(O)))}catch(C){console.error("Refresh user error:",C)}},changePassword:async(y,p)=>{try{return{success:!0,message:(await ma.auth.changePassword(y,p)).message}}catch(j){return console.error("Change password error:",j),{success:!1,error:j.message}}},hasPermission:y=>{var p;return s?s.is_admin?!0:(p=s.permissions)==null?void 0:p.includes(y):!1},isAdmin:()=>(s==null?void 0:s.is_admin)===!0||(s==null?void 0:s.user_type)==="admin",getAuthHeader:()=>u?{Authorization:"Bearer ".concat(u)}:{},isAuthenticated:!!s};return e.jsx(Ay.Provider,{value:S,children:r})},Cy=m.createContext(null),cN=()=>{const r=m.useContext(Cy);if(!r)throw new Error("useNotifications must be used within NotificationProvider");return r},dN=({children:r})=>{const{isAuthenticated:s,user:l}=Pa(),[i,d]=m.useState([]),[u,c]=m.useState(0),[g,f]=m.useState(!1),[v,b]=m.useState(!0),w=m.useMemo(()=>{const j=l&&typeof l.metadata=="object"&&l.metadata?l.metadata:{};return j.notification_settings&&typeof j.notification_settings=="object"?j.notification_settings:{}},[l]),N=m.useCallback(j=>{const E=String((j==null?void 0:j.type)||"system");return E==="like"||E==="comment_like"?w.likes!==!1:E==="comment"?w.comments!==!1:E==="follow"?w.follows!==!1:E==="mention"?w.mentions!==!1:E==="message"?w.messages!==!1:!0},[w]),k=m.useCallback(async()=>{var j,E,C,O,P;if(s)try{const L=await Zl.unreadCount().catch(()=>null),ce=Number((P=(O=(j=L==null?void 0:L.data)==null?void 0:j.unread)!=null?O:(C=(E=L==null?void 0:L.data)==null?void 0:E.data)==null?void 0:C.unread)!=null?P:0)||0;c(Math.max(0,ce))}catch(L){}},[s]),_=m.useCallback(async({limit:j=10,offset:E=0,reset:C=!0}={})=>{var O;if(s&&!(typeof document<"u"&&(document!=null&&document.hidden))){f(!0);try{const P=await Zl.list({limit:j,offset:E}),L=Array.isArray(P)?P:Array.isArray(P==null?void 0:P.data)?P.data:Array.isArray((O=P==null?void 0:P.data)==null?void 0:O.data)?P.data.data:[];if(P&&P.success||Array.isArray(P)){const ce=L.filter(N);b(Array.isArray(L)&&L.length>=j),d(Z=>{var z,X;if(C)return ce;const ie=Array.isArray(Z)?Z:[],le=new Set(ie.map(G=>{var D,$;return String(($=(D=G==null?void 0:G.id)!=null?D:G==null?void 0:G.notification_id)!=null?$:"")}).filter(Boolean)),ye=ie.slice();for(const G of ce){const D=String((X=(z=G==null?void 0:G.id)!=null?z:G==null?void 0:G.notification_id)!=null?X:"").trim();!D||le.has(D)||(le.add(D),ye.push(G))}return ye})}}catch(P){console.error("Bildirimler yklenemedi:",P)}finally{f(!1)}}},[s,N]),M=m.useCallback(async({limit:j=10}={})=>{const E=Array.isArray(i)?i.length:0;await _({limit:j,offset:E,reset:!1})},[_,i]),T=async j=>{try{await Zl.markRead(j),d(E=>E.map(C=>C.id===j||C.notification_id===j?{...C,is_read:!0}:C)),c(E=>Math.max(0,E-1))}catch(E){console.error(E)}},A=async()=>{try{await Zl.markAllRead(),d(j=>j.map(E=>({...E,is_read:!0}))),c(0)}catch(j){console.error(j)}},S=async j=>{try{await Zl.delete(j)}catch(E){console.error(E)}d(E=>E.filter(C=>(C.id||C.notification_id)!==j))},y=j=>{d(E=>[j,...E]),j.is_read||c(E=>E+1)};m.useEffect(()=>{if(s){k(),_({limit:10,offset:0,reset:!0});const j=setInterval(()=>{typeof document<"u"&&(document!=null&&document.hidden)||(k(),_({limit:10,offset:0,reset:!0}))},3e4);return()=>clearInterval(j)}s||(d([]),c(0),b(!0))},[s,_,k]);const p={notifications:i,unreadCount:u,loading:g,fetchNotifications:_,loadMore:M,hasMore:v,markAsRead:T,markAllAsRead:A,deleteNotification:S,addNotification:y};return e.jsx(Cy.Provider,{value:p,children:r})},ol=r=>{var s,l,i,d;try{if(!r)return"";const u=typeof r=="string"?r:(d=(i=(l=(s=r==null?void 0:r.username)!=null?s:r==null?void 0:r.unique_name)!=null?l:r==null?void 0:r.user_name)!=null?i:r==null?void 0:r.handle)!=null?d:"";return String(u||"").trim().replace(/^@+/,"")}catch(u){return""}},as=r=>{var i;const s=ol(r);if(s)return"/".concat(encodeURIComponent(s));const l=(i=r==null?void 0:r.user_id)!=null?i:r==null?void 0:r.id;return l?"/profile/".concat(l):"/"},Lm=(r,s=null,l=null,i=!1)=>i?{mp:"Milletvekili",party_chair:"Genel Bakan",provincial_chair:"l Bakan",district_chair:"le Bakan",metropolitan_mayor:"Bykehir Bld. Bk.",district_mayor:l?"".concat(l," Bld. Bk."):"le Bld. Bk.",myk_member:"MYK yesi",vice_chair:"G. Bakan Yard.",other:"Parti Yneticisi"}[r]||"Siyaseti":{mp:"Milletvekili",party_chair:"Genel Bakan",provincial_chair:"l Bakan",district_chair:"le Bakan",metropolitan_mayor:"Bykehir Belediye Bakan",district_mayor:l?"".concat(l," Belediye Bakan"):"le Belediye Bakan",myk_member:"MYK yesi",vice_chair:"Genel Bakan Yardmcs",other:"Parti Yneticisi"}[r]||"Siyaseti",ms=(r,s=!1)=>r?r.user_type==="politician"&&r.politician_type||r.user_type==="party_official"&&r.politician_type?Lm(r.politician_type,r.city_code,r.district_name,s):r.user_type==="ex_politician"?"Deneyimli Siyaseti":r.user_type==="media"?"Medya":r.user_type==="party_member"?"Parti yesi":r.user_type==="normal"?r.party_id?"Parti yesi":"ye":null:null,za=r=>{if(!r||r.is_verified!==!0)return!1;const s=String(r.user_type||"").trim();return!(!s||s==="citizen"||s==="normal"||s==="party_member")},Na=()=>{var D,$,B;const r=Qt();tr();const{user:s,isAuthenticated:l,isAdmin:i,logout:d}=Pa(),{unreadCount:u,notifications:c,loading:g,fetchNotifications:f,loadMore:v,hasMore:b,markAsRead:w,markAllAsRead:N,deleteNotification:k}=cN(),[_,M]=m.useState(!1),T=m.useRef(null),A=m.useRef(null),S=m.useRef(null),[y,p]=m.useState(!1),[j,E]=m.useState(64),[C,O]=m.useState(""),[P,L]=m.useState({users:[],posts:[],parties:[]}),[ce,Z]=m.useState(!1),ie=m.useRef(null),le=m.useRef(null);m.useEffect(()=>{const Y=Q=>{T.current&&!T.current.contains(Q.target)&&M(!1),A.current&&!A.current.contains(Q.target)&&p(!1)};return document.addEventListener("mousedown",Y),()=>document.removeEventListener("mousedown",Y)},[]),m.useEffect(()=>{ie.current&&clearTimeout(ie.current);const Y=C.trim().toLocaleLowerCase("tr-TR");if(Y.length<3){L({users:[],posts:[],parties:[]}),Z(!1);return}return ie.current=setTimeout(async()=>{try{const Q=await re("/api/search?q=".concat(encodeURIComponent(Y)));Q!=null&&Q.success&&(L(Q.data||{users:[],posts:[],parties:[]}),Z(!0))}catch(Q){}},250),()=>clearTimeout(ie.current)},[C]),m.useEffect(()=>{const Y=()=>{var Q,q;try{(q=(Q=le.current)==null?void 0:Q.focus)==null||q.call(Q),C.trim().length>=3&&Z(!0)}catch(I){}};return window.addEventListener("polithane:focus-search",Y),()=>window.removeEventListener("polithane:focus-search",Y)},[C]);const ye=m.useMemo(()=>Array.isArray(c)?c:[],[c]),z=Y=>{if(Y!=null&&Y.title)return String(Y.title);const q=String((Y==null?void 0:Y.type)||"system").trim().toLowerCase();return q==="approval"||q.includes("approval")||q.includes("verified")?"yelik Onay":q==="welcome"||q.includes("welcome")||q.includes("hosgeldin")||q.includes("hogeldin")?"Ho geldiniz":q==="profile_reminder"||q.includes("profile")&&q.includes("reminder")||q.includes("profil")?"Profilinizi tamamlayn":q==="message"||q.includes("message")||q.includes("dm")?"Mesaj":q==="follow"||q.includes("follow")?"Takip":q==="mention"||q.includes("mention")||q.includes("tag")?"Bahsedilme":q==="share"||q.includes("share")||q.includes("repost")?"Paylam":q==="comment_like"||q.includes("comment")&&q.includes("like")?"Yorum beenisi":q==="comment"||q.includes("comment")||q.includes("reply")?"Yorum":q==="like"||q.includes("like")||q.includes("heart")?"Beeni":"Bildirim"},X=Y=>{var Q,q,I;return Y!=null&&Y.message?String(Y.message):String((Y==null?void 0:Y.type)||"")==="approval"?"yeliiniz onay bekliyor. Admin onay gelene kadar Polit Atamazsnz.":String((Y==null?void 0:Y.type)||"")==="comment_like"?"Yorumunuz beenildi.":String((Y==null?void 0:Y.type)||"")==="mention"?"Sizi bir ierikte etiketledi.":(Q=Y==null?void 0:Y.post)!=null&&Q.content_text||(q=Y==null?void 0:Y.post)!=null&&q.content?String((I=Y.post.content_text)!=null?I:Y.post.content):""},G=async()=>{var Y,Q;try{const q=(Q=(Y=S.current)==null?void 0:Y.getBoundingClientRect)==null?void 0:Q.call(Y),I=Number((q==null?void 0:q.bottom)||56)+8;E(Math.max(8,Math.min(I,window.innerHeight-140)))}catch(q){E(64)}p(q=>!q),y||await(f==null?void 0:f({limit:10,offset:0,reset:!0}))};return m.useEffect(()=>{if(!y)return;const Y=()=>{var Q,q;try{const I=(q=(Q=S.current)==null?void 0:Q.getBoundingClientRect)==null?void 0:q.call(Q),V=Number((I==null?void 0:I.bottom)||56)+8;E(Math.max(8,Math.min(V,window.innerHeight-140)))}catch(I){}};return window.addEventListener("resize",Y),window.addEventListener("orientationchange",Y),()=>{window.removeEventListener("resize",Y),window.removeEventListener("orientationchange",Y)}},[y]),e.jsx("header",{className:"sticky top-0 z-40 bg-white border-b border-gray-200 sm:h-[60px] py-2 sm:py-0",children:e.jsxs("div",{className:"container-main flex flex-wrap items-center gap-3 sm:h-full sm:flex-nowrap sm:justify-between",children:[e.jsx("div",{className:"order-1 cursor-pointer flex items-center flex-shrink min-w-0",onClick:()=>r("/"),children:e.jsx(sN,{})}),e.jsxs("div",{className:"order-3 w-full sm:order-2 sm:w-auto relative sm:flex-1 sm:max-w-[520px]",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{ref:le,value:C,onChange:Y=>O(Y.target.value),onFocus:()=>C.trim().length>=3&&Z(!0),placeholder:"Siyaseti, Gndem, Medya, Polit Ara!",className:"w-full h-[40px] pl-11 pr-10 rounded-full border border-gray-300 bg-gray-50 focus:bg-white focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none transition-all text-sm"}),C&&e.jsx("button",{type:"button",onClick:()=>{O(""),Z(!1)},className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-gray-400 hover:text-gray-700",title:"Temizle",children:e.jsx(xs,{className:"w-6 h-6 sm:w-5 sm:h-5"})})]}),ce&&(P.users.length>0||P.posts.length>0||P.parties.length>0)&&e.jsx("div",{className:"absolute top-[46px] left-0 right-0 bg-white border border-gray-200 rounded-2xl shadow-xl overflow-hidden z-50",children:e.jsxs("div",{className:"max-h-[420px] overflow-y-auto",children:[((D=P.users)==null?void 0:D.length)>0&&e.jsxs("div",{className:"p-3 border-b border-gray-100",children:[e.jsx("div",{className:"text-xs font-black text-gray-500 uppercase mb-2",children:"Kullanclar"}),e.jsx("div",{className:"space-y-2",children:P.users.slice(0,6).map(Y=>e.jsxs("button",{className:"w-full flex items-center gap-3 p-2 rounded-xl hover:bg-gray-50 text-left",onClick:()=>{Z(!1),O(""),r(as(Y))},children:[e.jsx(Yt,{src:Y.avatar_url,size:"36px",verified:za(Y)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:Y.full_name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",Y.username]})]})]},Y.id))})]}),(($=P.parties)==null?void 0:$.length)>0&&e.jsxs("div",{className:"p-3 border-b border-gray-100",children:[e.jsx("div",{className:"text-xs font-black text-gray-500 uppercase mb-2",children:"Partiler"}),e.jsx("div",{className:"space-y-2",children:P.parties.slice(0,6).map(Y=>e.jsxs("button",{className:"w-full flex items-center gap-3 p-2 rounded-xl hover:bg-gray-50 text-left",onClick:()=>{Z(!1),O(""),r("/party/".concat(Y.slug||Y.id))},children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-gray-50 border border-gray-200 flex items-center justify-center overflow-hidden",children:Y.logo_url?e.jsx("img",{src:Y.logo_url,alt:Y.short_name,className:"w-7 h-7 object-contain"}):null}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:Y.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:Y.short_name})]})]},Y.id))})]}),((B=P.posts)==null?void 0:B.length)>0&&e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"text-xs font-black text-gray-500 uppercase mb-2",children:"Politler"}),e.jsx("div",{className:"space-y-2",children:P.posts.slice(0,6).map(Y=>{var Q,q,I;return e.jsxs("button",{className:"w-full p-2 rounded-xl hover:bg-gray-50 text-left",onClick:()=>{Z(!1),O(""),r("/post/".concat(Y.id))},children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:((q=(Q=Y.content_text)!=null?Q:Y.content)!=null?q:"").slice(0,120)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[(I=Y.user)!=null&&I.full_name?"".concat(Y.user.full_name,"  "):"","#",Y.category||"genel"]})]},Y.id)})})]})]})})]}),e.jsx("div",{className:"order-2 ml-auto sm:order-3 sm:ml-0 flex items-center gap-4 flex-shrink-0",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",ref:A,children:[e.jsxs("button",{ref:S,type:"button",onClick:G,className:["relative p-2 hover:bg-gray-100 rounded-lg transition-colors",u>0?"animate-[pulse_0.9s_ease-in-out_infinite]":""].join(" "),title:"Bildirimler",children:[e.jsx(ni,{className:"w-5 h-5 text-gray-600"}),u>0&&e.jsx(ln,{variant:"danger",size:"small",className:"absolute -top-1 -right-1 animate-pulse",children:u>99?"99+":u})]}),y&&e.jsxs("div",{className:"fixed right-2 w-[92vw] max-w-[360px] bg-white rounded-2xl border border-gray-200 shadow-2xl overflow-hidden z-50",style:{top:j},children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("div",{className:"font-black text-gray-900",children:"Bildirimler"}),e.jsx("div",{className:"flex items-center gap-2",children:u>0&&e.jsxs("button",{type:"button",onClick:async()=>{await(N==null?void 0:N())},className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl bg-gray-900 hover:bg-black text-white text-xs font-black",title:"Tmn okundu yap",children:[e.jsx(my,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Okundu"]})})]}),e.jsxs("div",{className:"max-h-[420px] overflow-y-auto",children:[g&&e.jsx("div",{className:"px-4 py-6 text-sm text-gray-600",children:"Bildirimler ykleniyor"}),!g&&ye.length===0&&e.jsx("div",{className:"px-4 py-8 text-sm text-gray-600",children:"Henz bildirim yok."}),!g&&ye.map(Y=>{var fe,ke,$e,Le;const Q=String((Y==null?void 0:Y.type)||"").toLowerCase();if(Q==="message"||Q.includes("dm"))return null;const q=(fe=Y==null?void 0:Y.id)!=null?fe:Y==null?void 0:Y.notification_id,I=!!(Y!=null&&Y.is_read),V=(Y==null?void 0:Y.actor)||null,Te=z(Y),Ke=X(Y),oe=(Le=($e=Y==null?void 0:Y.post_id)!=null?$e:(ke=Y==null?void 0:Y.post)==null?void 0:ke.id)!=null?Le:null,je=Te;return e.jsxs("button",{type:"button",onClick:async()=>{if(q&&await(w==null?void 0:w(q)),p(!1),oe){const St=String((Y==null?void 0:Y.type)||""),Qe=St==="comment"||St==="comment_like";r("/post/".concat(oe).concat(Qe?"?comment=1":""));return}V&&r(as(V))},className:"w-full px-4 py-2 flex items-start gap-2 text-left border-b border-gray-100 hover:bg-gray-50 ".concat(I?"":"bg-blue-50/60"),children:[e.jsx(Yt,{src:V==null?void 0:V.avatar_url,size:"28px",verified:za(V)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"flex items-center justify-between gap-2",children:e.jsx("div",{className:"text-[13px] leading-4 ".concat(I?"font-semibold text-gray-900":"font-black text-gray-900"," truncate"),children:je})}),Ke?e.jsx("div",{className:"mt-0.5 text-[12px] leading-4 text-gray-600 line-clamp-2",children:Ke}):null]}),e.jsx("button",{type:"button",className:"p-1 rounded-lg hover:bg-red-50 text-gray-500 hover:text-red-700 mt-0.5",title:"Sil",onClick:async St=>{St.stopPropagation(),q&&await(k==null?void 0:k(q))},children:e.jsx(Ka,{className:"w-4 h-4"})})]},String(q))})]}),b&&e.jsx("div",{className:"p-3 border-t border-gray-100 bg-white",children:e.jsx("button",{type:"button",onClick:async()=>{await(v==null?void 0:v({limit:10}))},className:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-800 font-black",children:"Dierleri"})})]})]}),e.jsxs("div",{className:"relative",ref:T,children:[e.jsxs("button",{onClick:()=>M(!_),className:"flex items-center gap-2 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Yt,{src:(s==null?void 0:s.avatar_url)||(s==null?void 0:s.profile_image),size:"36px"}),e.jsx(hy,{className:"w-6 h-6 sm:w-5 sm:h-5 text-gray-600"})]}),_&&e.jsxs("div",{className:"absolute right-0 top-12 w-64 bg-white rounded-xl border border-gray-200 shadow-xl py-2",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("div",{className:"font-bold text-gray-900",children:s==null?void 0:s.full_name}),e.jsxs("div",{className:"text-sm text-gray-500",children:["@",(s==null?void 0:s.username)||(s==null?void 0:s.id)]})]}),e.jsxs(Tt,{to:as(s),className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors",onClick:()=>M(!1),children:[e.jsx(li,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Profilim"})]}),e.jsxs(Tt,{to:"/settings/profile",className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors",onClick:()=>M(!1),children:[e.jsx(md,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Ayarlar"})]}),i()&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-100 my-2"}),e.jsxs(Tt,{to:"/adminyonetim",className:"flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors bg-blue-50",onClick:()=>M(!1),children:[e.jsx(on,{className:"w-5 h-5 text-primary-blue"}),e.jsx("span",{className:"text-sm font-bold text-primary-blue",children:"Admin Paneli"})]})]}),e.jsx("div",{className:"border-t border-gray-100 my-2"}),e.jsxs("button",{onClick:()=>{d(),M(!1)},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 transition-colors text-red-600",children:[e.jsx(cj,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm font-semibold",children:"k Yap"})]})]})]})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>r("/login-new"),className:"relative p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Bildirimler",children:e.jsx(ni,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:()=>r("/register-new"),className:"px-3 sm:px-4 py-2 text-primary-blue font-semibold hover:bg-blue-50 rounded-lg transition-colors text-sm",children:"ye Ol"}),e.jsxs("button",{onClick:()=>r("/login-new"),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition-colors text-sm",children:[e.jsx(dj,{className:"w-6 h-6 sm:w-5 sm:h-5"}),e.jsx("span",{children:"Giri Yap"})]})]})})]})})},ka=()=>{const[r,s]=m.useState("info@polithane.com");return m.useEffect(()=>{let l=!0;return(async()=>{var i;try{const d=await re("/api/public/site",{method:"GET"}).catch(()=>null),u=String(((i=d==null?void 0:d.data)==null?void 0:i.contactEmail)||"").trim();l&&u&&s(u)}catch(d){}})(),()=>{l=!1}},[]),e.jsx("footer",{className:"bg-neutral-anthracite text-white py-8 mt-16",children:e.jsxs("div",{className:"container-main",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"POLITHANE"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"zgr, ak, effaf siyaset, bamsz medya!"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Hakkmzda"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[e.jsx("li",{children:e.jsx(Tt,{to:"/about",className:"hover:text-white",children:"Hakkmzda"})}),e.jsx("li",{children:e.jsx(Tt,{to:"/mission",className:"hover:text-white",children:"Misyonumuz"})}),e.jsx("li",{children:e.jsx(Tt,{to:"/contact",className:"hover:text-white",children:"letiim"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Yasal"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[e.jsx("li",{children:e.jsx(Tt,{to:"/terms",className:"hover:text-white",children:"Kullanm artlar"})}),e.jsx("li",{children:e.jsx(Tt,{to:"/privacy-policy",className:"hover:text-white",children:"Gizlilik Politikas"})}),e.jsx("li",{children:e.jsx(Tt,{to:"/cookie-policy",className:"hover:text-white",children:"erez Politikas"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"letiim"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[e.jsxs("li",{children:["E-posta: ",r]}),e.jsx("li",{children:"Telefon: +90 (212) 123 45 67"})]})]})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-gray-700 text-center text-sm text-gray-400",children:e.jsx("p",{children:" 2025 Polithane. Tm haklar sakldr."})})]})})},Ea=()=>{const r=Qt(),[s,l]=m.useState(!1),{isAuthenticated:i}=Pa(),[d,u]=m.useState(0),[c,g]=m.useState(0);m.useEffect(()=>{const v=()=>l(!1);return window.addEventListener("scroll",v,{passive:!0}),()=>window.removeEventListener("scroll",v)},[]),m.useEffect(()=>{if(!i){u(0),g(0);return}let v=!1;const b=async()=>{try{if(document!=null&&document.hidden)return;const N=await re("/api/messages/conversations").catch(()=>null),k=Array.isArray(N==null?void 0:N.data)?N.data:Array.isArray(N)?N:[],_=(k||[]).reduce((T,A)=>T+(Number((A==null?void 0:A.unread_count)||0)||0),0),M=(k||[]).filter(T=>String((T==null?void 0:T.message_type)||"")==="request").length;v||u(_),v||g(M)}catch(N){v||(u(0),g(0))}};b();const w=setInterval(b,2e4);return()=>{v=!0,clearInterval(w)}},[i]);const f=[{key:"home",label:"Ana Sayfa",onClick:()=>r("/"),icon:uj,iconClass:"text-white",bgClass:"bg-gradient-to-br from-gray-700 to-gray-900"},{key:"polit",label:"Polit At",onClick:()=>r("/polit-at"),icon:lh,iconClass:"text-white",bgClass:"bg-gradient-to-br from-primary-blue to-blue-700"},{key:"fast",label:"Fast At",onClick:()=>r("/fast-at"),icon:fy,iconClass:"text-white",bgClass:"bg-gradient-to-br from-red-500 to-rose-600",pulse:!0},{key:"search",label:"Ara",onClick:()=>{try{window.dispatchEvent(new CustomEvent("polithane:focus-search"))}catch(v){}},icon:Gs,iconClass:"text-white",bgClass:"bg-gradient-to-br from-emerald-500 to-green-600"},{key:"explore",label:"Kefet",onClick:()=>r("/hit"),icon:xy,iconClass:"text-white",bgClass:"bg-gradient-to-br from-amber-400 to-orange-500"},{key:"messages",label:"Mesajlar",onClick:()=>r("/messages"),icon:Dn,iconClass:"text-white",bgClass:"bg-gradient-to-br from-slate-700 to-slate-900"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden lg:flex fixed left-4 top-1/2 -translate-y-1/2 z-30 flex-col gap-4",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:f.map(v=>{const b=v.icon,w=v.key==="messages"&&(d>0||c>0),N=(d||0)+(c||0);return e.jsxs("button",{type:"button",onClick:v.onClick,className:"group relative flex items-center",title:v.label,children:[e.jsxs("span",{className:["w-14 h-14 rounded-full shadow-xl flex items-center justify-center","transition-transform duration-200","group-hover:scale-110",v.bgClass,v.pulse?"animate-[pulse_0.35s_ease-in-out_infinite]":"",w?"animate-[pulse_0.9s_ease-in-out_infinite]":""].join(" "),children:[e.jsx(b,{className:["w-7 h-7",v.iconClass].join(" ")}),w?e.jsx(ln,{variant:"danger",size:"small",className:"absolute -top-1 -right-1",children:N>99?"99+":N}):null]}),e.jsx("span",{className:["absolute left-full ml-3 px-3 py-2 rounded-xl bg-gray-900 text-white text-xs font-black whitespace-nowrap shadow-xl",s?"opacity-100 translate-x-0":"opacity-0 -translate-x-1 pointer-events-none","transition-all duration-150"].join(" "),children:v.label})]},v.key)})}),e.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 z-30 bg-white/90 backdrop-blur border-t border-gray-200",children:e.jsx("div",{className:"container-main py-2",children:e.jsx("div",{className:"flex items-center justify-between",children:f.map(v=>{const b=v.icon,w=v.key==="messages"&&(d>0||c>0),N=(d||0)+(c||0);return e.jsxs("button",{type:"button",onClick:v.onClick,className:"flex flex-col items-center justify-center px-2 py-1",title:v.label,children:[e.jsxs("span",{className:["relative w-9 h-9 rounded-full flex items-center justify-center shadow-md",v.bgClass,v.key==="fast"?"animate-[pulse_0.35s_ease-in-out_infinite]":"",w?"animate-[pulse_0.9s_ease-in-out_infinite]":""].join(" "),children:[e.jsx(b,{className:["w-5 h-5",v.iconClass].join(" ")}),w?e.jsx(ln,{variant:"danger",size:"small",className:"absolute -top-1 -right-1",children:N>99?"99+":N}):null]}),e.jsx("span",{className:"mt-1 text-[10px] font-black text-gray-700",children:v.label})]},v.key)})})})})]})},No=({targetUserId:r,size:s="md",onChange:l,iconOnly:i=!1})=>{const{user:d,isAuthenticated:u}=Pa(),c=Qt(),[g,f]=m.useState(!1),[v,b]=m.useState("not_following"),[w,N]=m.useState(!1);m.useEffect(()=>{(async()=>{if(r){if(!u){b("not_following");return}try{const S=await us.getFollowStats(r),y=(S==null?void 0:S.data)||S;b(y!=null&&y.is_following?"following":"not_following")}catch(S){b("not_following")}}})()},[r,u]);const k=async()=>{var S;if(r){if(!u){ra.error("Takip etmek iin giri yapmalsnz."),c("/login-new");return}if(String((d==null?void 0:d.id)||"")!==String(r)){if(v==="following"){N(!0);return}f(!0);try{const y=await us.follow(r),j=((y==null?void 0:y.action)||((S=y==null?void 0:y.data)==null?void 0:S.action))==="unfollowed"?"not_following":"following";b(j),l==null||l(j),j==="following"&&ra.success("Baaryla takip listene eklendi.")}catch(y){}finally{f(!1)}}}},_=async()=>{var S;N(!1),f(!0);try{const y=await us.follow(r),j=((y==null?void 0:y.action)||((S=y==null?void 0:y.data)==null?void 0:S.action))==="unfollowed"?"not_following":"following";b(j),l==null||l(j),j==="not_following"&&ra.success("Takipten karld.")}catch(y){}finally{f(!1)}},M={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"},T={sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"},A={sm:"p-1",md:"p-1.5",lg:"p-2"};return w?e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-white rounded-lg shadow-2xl border border-gray-200 p-4 min-w-[250px] z-50",children:[e.jsx("p",{className:"text-sm text-gray-700 mb-3",children:"Takipten kmak istediinize emin misiniz?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:_,className:"flex-1 bg-red-500 hover:bg-red-600 text-white py-2 px-3 rounded-lg text-xs font-semibold transition-colors",children:"Evet, k"}),e.jsx("button",{onClick:()=>N(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-3 rounded-lg text-xs font-semibold transition-colors",children:"ptal"})]})]})}):v==="not_following"?e.jsxs("button",{onClick:k,disabled:!u||g,className:i?"inline-flex items-center justify-center ".concat(A[s]||"p-2"," bg-primary-blue hover:bg-blue-600 text-white rounded-lg font-semibold transition-colors"):"flex items-center gap-2 ".concat(M[s]," bg-primary-blue hover:bg-blue-600 text-white rounded-lg font-semibold transition-all duration-200 transform hover:scale-105"),title:"Takip Et","aria-label":"Takip Et",children:[g?e.jsx(Zc,{className:"".concat(T[s]," animate-spin")}):e.jsx(mj,{className:T[s]}),i?null:"Takip Et"]}):v==="following"?e.jsxs("button",{onClick:k,disabled:!u||g,className:i?"inline-flex items-center justify-center ".concat(A[s]||"p-2"," bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-semibold transition-colors"):"flex items-center gap-2 ".concat(M[s]," bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-semibold transition-colors"),title:"Takip Ediliyor","aria-label":"Takip Ediliyor",children:[g?e.jsx(Zc,{className:"".concat(T[s]," animate-spin")}):e.jsx(Wc,{className:T[s]}),i?null:"Takip Ediliyor"]}):null},uN=({limit:r=8,onCollapse:s})=>{const{user:l,isAuthenticated:i}=Pa(),[d,u]=m.useState([]),[c,g]=m.useState([]),[f,v]=m.useState(!0),[b,w]=m.useState({}),[N,k]=m.useState({}),[_,M]=m.useState(null),T=m.useRef(null),A=O=>{var P,L;return String((L=(P=O==null?void 0:O.id)!=null?P:O==null?void 0:O.user_id)!=null?L:"")};m.useEffect(()=>{let O=!1;return(async()=>{v(!0);try{const[P,L]=await Promise.all([re("/api/users?limit=40&order=polit_score.desc").catch(()=>[]),i&&(l!=null&&l.id)?ma.users.getFollowing(l.id).catch(()=>null):Promise.resolve(null)]),ce=Array.isArray(P)?P:(P==null?void 0:P.data)||[],Z=Array.isArray(L==null?void 0:L.data)?L.data:Array.isArray(L)?L:[];O||g(Z||[]);const ie=new Set((Z||[]).map(z=>A(z)).filter(Boolean)),le=i&&(l!=null&&l.id)?String(l.id):null,ye=(ce||[]).filter(z=>z&&z.is_active!==!1).filter(z=>{const X=A(z);return!(!X||le&&X===le||ie.has(X))}).slice(0,Math.max(1,Number(r)||8));O||u(ye)}finally{O||v(!1)}})(),()=>{O=!0}},[i,l==null?void 0:l.id,r]);const S=m.useMemo(()=>new Set((c||[]).map(O=>A(O)).filter(Boolean)),[c]),y=O=>String((O==null?void 0:O.full_name)||(O==null?void 0:O.username)||"Kullanc").trim();m.useEffect(()=>{if(!i||!(l!=null&&l.id)||!d||d.length===0)return;let O=!1;const P=async ce=>{var ie;const Z=String(ce||"");if(Z&&!((ie=N[Z])!=null&&ie.friends_loaded))try{const le=await re("/api/users/".concat(encodeURIComponent(Z),"/followed-by-friends?limit=3")).catch(()=>null),ye=(le==null?void 0:le.data)||{},z=Array.isArray(ye==null?void 0:ye.friends)?ye.friends:[],X=z.slice(0,2).map(D=>y(D)).filter(Boolean),G=Number((ye==null?void 0:ye.count)||z.length)||0;O||k(D=>({...D||{},[Z]:{friends_loaded:!0,friend_names:X,friend_count:G}}))}catch(le){O||k(ye=>({...ye||{},[Z]:{friends_loaded:!0,friend_names:[],friend_count:0}}))}};return(async()=>{const ce=d.map(ie=>A(ie)).filter(Boolean),Z=2;for(let ie=0;ie<ce.length&&!O;ie+=Z){const le=ce.slice(ie,ie+Z);await Promise.all(le.map(ye=>P(ye)))}})(),()=>{O=!0}},[d,i,l==null?void 0:l.id,S]);const p=async O=>{const P=String(O||"");if(P&&!b[P])try{const L=await ma.users.getById(P).catch(()=>null),ce=(L==null?void 0:L.data)||null;if(!ce)return;w(Z=>({...Z||{},[P]:ce}))}catch(L){}},j=async O=>{var L;const P=String(O||"");if(P&&!((L=b[P])!=null&&L.__followStatsLoaded))try{const ce=await ma.users.getFollowStats(P).catch(()=>null),Z=(ce==null?void 0:ce.data)||null;if(!Z)return;w(ie=>({...ie||{},[P]:{...(ie==null?void 0:ie[P])||{},__followStatsLoaded:!0,followStats:Z}}))}catch(ce){}},E=O=>{M(O),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{p(O),j(O)},60)},C=()=>{M(null),T.current&&clearTimeout(T.current),T.current=null};return e.jsxs("div",{className:"bg-white/80 backdrop-blur border border-gray-200 rounded-lg p-2 shadow-sm text-[10px] leading-tight",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-[10px] font-black text-gray-900",children:"TAKP NERLER"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Tt,{to:"/hit?mode=profiles",className:"text-[10px] font-black text-primary-blue hover:underline",children:"Kefet"}),typeof s=="function"?e.jsx("button",{type:"button",onClick:s,className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-white hover:bg-gray-100 text-gray-900 border border-gray-300",title:"Kapat",children:e.jsx(xs,{className:"w-3.5 h-3.5"})}):null]})]}),f?e.jsx("div",{className:"text-[10px] text-gray-600",children:"Ykleniyor"}):null,!f&&d.length===0?e.jsx("div",{className:"text-[10px] text-gray-600",children:"neri bulunamad."}):null,e.jsx("div",{className:"space-y-2",children:d.map(O=>{var ye,z,X,G,D,$,B,Y,Q;const P=A(O),L=y(O),ce=O!=null&&O.username?"@".concat(O.username):null,Z=(N==null?void 0:N[P])||null,ie=Number((Z==null?void 0:Z.friend_count)||0)||0,le=Array.isArray(Z==null?void 0:Z.friend_names)?Z.friend_names:[];return e.jsxs("div",{className:"relative",onMouseEnter:()=>E(P),onMouseLeave:C,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs(Tt,{to:"/profile/".concat(P),className:"flex items-center gap-2 min-w-0",children:[e.jsx(Yt,{src:(O==null?void 0:O.avatar_url)||(O==null?void 0:O.profile_image),alt:L,size:"34px"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-[10px] font-black text-gray-900 truncate leading-4",children:L}),ce?e.jsx("div",{className:"text-[9px] text-gray-500 truncate leading-4",children:ce}):null,i?ie>0?e.jsxs("div",{className:"text-[9px] text-gray-600 leading-4 mt-0.5 line-clamp-2",children:[e.jsx("span",{className:"font-black",children:le.join(", ")}),ie>le.length?e.jsxs("span",{className:"font-semibold",children:[" ve ",ie-le.length," kii daha"]}):null,e.jsx("span",{className:"font-semibold",children:" takip ediyor"})]}):Z!=null&&Z.friends_loaded?null:e.jsx("div",{className:"text-[9px] text-gray-400 leading-4 mt-0.5",children:"Arkadalarn kontrol ediliyor"}):null]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(No,{targetUserId:P,size:"sm",iconOnly:!0})})]}),_&&String(_)===P?e.jsx("div",{className:"hidden lg:block absolute right-full top-0 mr-3 w-[260px] z-20",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-xl p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yt,{src:(O==null?void 0:O.avatar_url)||(O==null?void 0:O.profile_image),alt:L,size:"54px"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-[12px] font-black text-gray-900 truncate",children:L}),ce?e.jsx("div",{className:"text-[10px] text-gray-600 truncate",children:ce}):null,e.jsxs("div",{className:"mt-2 flex items-center gap-3 text-[10px] text-gray-700",children:[e.jsxs("span",{className:"font-black",children:[(X=(z=(ye=b[P])==null?void 0:ye.followStats)==null?void 0:z.followers_count)!=null?X:""," ",e.jsx("span",{className:"font-semibold text-gray-500",children:"Takipi"})]}),e.jsxs("span",{className:"font-black",children:[($=(D=(G=b[P])==null?void 0:G.followStats)==null?void 0:D.following_count)!=null?$:""," ",e.jsx("span",{className:"font-semibold text-gray-500",children:"Takip"})]}),e.jsxs("span",{className:"font-black",children:[(Q=(Y=(B=b[P])==null?void 0:B.followStats)==null?void 0:Y.posts_count)!=null?Q:""," ",e.jsx("span",{className:"font-semibold text-gray-500",children:"Polit"})]})]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsx(No,{targetUserId:P,size:"md"})})]})}):null]},P)})})]})},Ca=({limit:r=8})=>{const s="polithane_followbar_collapsed",[l,i]=m.useState(!1);m.useEffect(()=>{try{i(sessionStorage.getItem(s)==="1")}catch(c){i(!1)}},[]);const d=()=>{i(!0);try{sessionStorage.setItem(s,"1")}catch(c){}},u=()=>{i(!1);try{sessionStorage.removeItem(s)}catch(c){}};return e.jsxs(e.Fragment,{children:[l?null:e.jsx("div",{className:"hidden lg:block fixed right-2 top-1/2 -translate-y-1/2 z-30 w-[170px] xl:w-[190px] 2xl:w-[210px] overflow-hidden",children:e.jsx("div",{className:"max-h-[70vh] overflow-y-auto scrollbar-hide",children:e.jsx(uN,{limit:r,onCollapse:d})})}),l?e.jsx("button",{type:"button",onClick:u,className:"hidden lg:flex fixed right-2 top-1/2 -translate-y-1/2 z-30 w-14 h-14 rounded-full bg-gray-900/90 hover:bg-gray-900 text-white shadow-xl items-center justify-center",title:"Takip nerilerini a",children:e.jsx(xy,{className:"w-7 h-7"})}):null]})},hs=r=>!r&&r!==0?"0":r>=1e6?(r/1e6).toFixed(1)+"M":r>=1e3?(r/1e3).toFixed(1)+"K":r.toString(),Ra=r=>!r&&r!==0?"0 P.":r>=1e6?(r/1e6).toFixed(2).replace(".",",")+"M P.":r>=1e3?(r/1e3).toFixed(2).replace(".",",")+"K P.":r.toString()+" P.",td=r=>{if(!r)return"";const s=new Date(r),l=["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"];return"".concat(s.getDate()," ").concat(l[s.getMonth()]," ").concat(s.getFullYear())},ui=r=>{try{if(!r)return"";const s=new Date(r);if(isNaN(s.getTime()))return"";const l=Math.floor((new Date-s)/1e3);if(l<0)return"Az nce";const i={yl:31536e3,ay:2592e3,hafta:604800,gn:86400,saat:3600,dakika:60,saniye:1};for(const[d,u]of Object.entries(i)){const c=Math.floor(l/u);if(c>=1)return"".concat(c," ").concat(d," nce")}return"Az nce"}catch(s){return console.error("formatTimeAgo error:",s),""}},mi=r=>{if(!r)return"0:00";const s=Math.floor(r/60),l=r%60;return"".concat(s,":").concat(l.toString().padStart(2,"0"))},$m=(r,s)=>r?r.length<=s?r:r.substring(0,s)+"...":"",f0=r=>{if(!r||r===0)return"0 Bytes";const s=1024,l=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(r)/Math.log(s));return Math.round(r/Math.pow(s,i)*100)/100+" "+l[i]},mh=r=>{if(!r)return"";try{return(new URL(r).hostname||"").replace(/^www\./,"")}catch(s){return r.replace(/^https?:\/\//i,"").replace(/^www\./i,"").split("/")[0].trim()}},ur={TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio"},xl={"01":"Adana","02":"Adyaman","03":"Afyonkarahisar","04":"Ar","05":"Amasya","06":"Ankara","07":"Antalya","08":"Artvin","09":"Aydn",10:"Balkesir",11:"Bilecik",12:"Bingl",13:"Bitlis",14:"Bolu",15:"Burdur",16:"Bursa",17:"anakkale",18:"ankr",19:"orum",20:"Denizli",21:"Diyarbakr",22:"Edirne",23:"Elaz",24:"Erzincan",25:"Erzurum",26:"Eskiehir",27:"Gaziantep",28:"Giresun",29:"Gmhane",30:"Hakkari",31:"Hatay",32:"Isparta",33:"Mersin",34:"stanbul",35:"zmir",36:"Kars",37:"Kastamonu",38:"Kayseri",39:"Krklareli",40:"Krehir",41:"Kocaeli",42:"Konya",43:"Ktahya",44:"Malatya",45:"Manisa",46:"Kahramanmara",47:"Mardin",48:"Mula",49:"Mu",50:"Nevehir",51:"Nide",52:"Ordu",53:"Rize",54:"Sakarya",55:"Samsun",56:"Siirt",57:"Sinop",58:"Sivas",59:"Tekirda",60:"Tokat",61:"Trabzon",62:"Tunceli",63:"anlurfa",64:"Uak",65:"Van",66:"Yozgat",67:"Zonguldak",68:"Aksaray",69:"Bayburt",70:"Karaman",71:"Krkkale",72:"Batman",73:"rnak",74:"Bartn",75:"Ardahan",76:"Idr",77:"Yalova",78:"Karabk",79:"Kilis",80:"Osmaniye",81:"Dzce"},mN=({autoplay:r=!0,interval:s=6500})=>{const l=Qt(),[i,d]=m.useState(null),u=m.useRef({active:!1,startX:0,startY:0,lastX:0,lastY:0}),c=m.useRef(!1);m.useEffect(()=>{let k=!0;return(async()=>{var T;const _=await re("/api/public/parliament",{method:"GET"}).catch(()=>null),M=(T=_==null?void 0:_.data)==null?void 0:T.info;k&&M&&typeof M=="object"&&d(M)})(),()=>{k=!1}},[]);const g=(()=>{const k=i&&typeof i=="object"?i:null,_=String((k==null?void 0:k.legislatureYear)||"").trim(),M=String((k==null?void 0:k.termStart)||"").trim(),T=String((k==null?void 0:k.termEnd)||"").trim(),A=String((k==null?void 0:k.speakerName)||"").trim(),S=[];return _&&S.push(_),(M||T)&&S.push("".concat(M||"","  ").concat(T||"")),A&&S.push("Bakan: ".concat(A)),S.length?S.join("  "):"TBMMdeki gncel sandalye dalm ve genel bilgiler."})(),f=m.useMemo(()=>[{id:"parliament",title:"MECLS DAILIMI",subtitle:g,to:"/parliament",bg:"#0B3D91",Icon:hd},{id:"parties",title:"SYAS PARTLER",subtitle:"Meclisteki tm partiler: sandalye gc, bakan profili ve parti sayfalar tek dizinde.",to:"/parties",bg:"#6D28D9",Icon:Rr},{id:"media",title:"MEDYA",subtitle:"Trkiyenin nabz burada: bamsz, hzl ve dorulanabilir medya ak.",to:"/category/media",bg:"#F59E0B",Icon:hj},{id:"citizens",title:"VATANDA",subtitle:"zgr ifade, ak tartma, gerek gndem: sesi duyulan bir vatanda meydan.",to:"/category/citizens",bg:"#111827",Icon:fj},{id:"agenda",title:"GNDEM",subtitle:"Bugnn konusu burada belirlenir: en scak siyasi balklar tek akta.",to:"/hit",bg:"#009FD6",Icon:mr},{id:"mps",title:"VEKLLER GNDEM",subtitle:"Milletvekillerinin gndemi: Polit Puana gre ne kanlar ve son paylamlar.",to:"/category/mps",bg:"#0EA5E9",Icon:ts},{id:"org",title:"TEKLAT GNDEM",subtitle:"Tekilatn gndemi: Polit Puana gre ne kanlar ve yerel nabz.",to:"/category/organization",bg:"#84CC16",Icon:ts}],[g]),[v,b]=m.useState(0);m.useEffect(()=>{if(!r||f.length<=1)return;const k=setInterval(()=>{b(_=>(_+1)%f.length)},s);return()=>clearInterval(k)},[r,s,f.length]);const w=f[v];if(!w)return null;const N=k=>{const _=Array.isArray(f)?f.length:0;_<=1||b(M=>{const T=(Number(M)||0)+k;return T<0?_-1:T>=_?0:T})};return e.jsx("div",{className:"mb-4",children:e.jsxs("button",{type:"button",className:"relative w-full h-[104px] md:h-[120px] rounded-xl overflow-hidden shadow-lg text-left",style:{backgroundColor:w.bg,touchAction:"pan-y"},onPointerDown:k=>{var _,M;if(!(!f||f.length<=1)){c.current=!1,u.current.active=!0,u.current.startX=k.clientX,u.current.startY=k.clientY,u.current.lastX=k.clientX,u.current.lastY=k.clientY;try{(M=(_=k.currentTarget)==null?void 0:_.setPointerCapture)==null||M.call(_,k.pointerId)}catch(T){}}},onPointerMove:k=>{const _=u.current;_.active&&(_.lastX=k.clientX,_.lastY=k.clientY)},onPointerUp:()=>{const k=u.current;if(!k.active)return;k.active=!1;const _=(k.lastX||0)-(k.startX||0),M=(k.lastY||0)-(k.startY||0),T=Math.abs(_),A=Math.abs(M);T>45&&T>A*1.2&&(c.current=!0,_<0?N(1):N(-1),setTimeout(()=>{c.current=!1},0))},onPointerCancel:()=>{u.current.active=!1},onClick:()=>{c.current||l(w.to)},children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/25 to-transparent"}),e.jsx("div",{className:"relative h-full flex items-center justify-between px-4 md:px-6 gap-3",children:e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 rounded-2xl bg-white/15 border border-white/20 flex-shrink-0",children:e.jsx(w.Icon,{className:"w-12 h-12 md:w-16 md:h-16 lg:w-20 lg:h-20 text-white"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-lg md:text-xl lg:text-2xl font-black text-white drop-shadow leading-tight",children:w.title}),e.jsx("div",{className:"text-xs md:text-sm text-white/90 font-semibold mt-1 line-clamp-2",children:w.subtitle})]})]})}),f.length>1&&e.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:f.map((k,_)=>e.jsx("button",{type:"button",className:"h-3 rounded-full transition-all ".concat(_===v?"bg-white w-8":"bg-white/50 w-3"),onClick:M=>{M.stopPropagation(),b(_)},"aria-label":"Slayt ".concat(_+1)},_))})]})})},hN=(r=null,s=null)=>{if(!r&&!s)return"/assets/default/party_flag.png";const l=r?r.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")+"_flag.png":"party_".concat(s,"_flag.png");return"/assets/parties/flags/".concat(l)},fN=({party:r,onClose:s,position:l,onMouseEnter:i,onMouseLeave:d})=>{const u=Qt();if(!r)return null;const c=(v,b)=>{b.stopPropagation(),u(v),s()},g=(()=>{const v=Number(r.seats||0)||0,b=Number(r.totalSeats||600)||600;return"".concat((v/b*100).toFixed(1),"%")})(),f=[{key:"mps",label:"Milletvekilleri",icon:ts,to:"/party/".concat(r.party_id,"?tab=mps")},{key:"org",label:"Tekilat Grevlileri",icon:Rr,to:"/party/".concat(r.party_id,"?tab=org")},{key:"members",label:"yeler",icon:li,to:"/party/".concat(r.party_id,"?tab=members")},{key:"provincial",label:"l Bakanlar",icon:sn,to:"/party/".concat(r.party_id,"?tab=provincial")},{key:"metro",label:"l Belediye Bakanlar",icon:gy,to:"/party/".concat(r.party_id,"?tab=metro_mayor")},{key:"district_mayor",label:"le Belediye Bakanlar",icon:ii,to:"/party/".concat(r.party_id,"?tab=district_mayor")}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:s,style:{pointerEvents:"none"}}),e.jsxs("div",{className:"fixed z-50 bg-white rounded-lg shadow-2xl border-2 p-3 w-72 animate-fadeIn",style:{left:l!=null&&l.x?"".concat(Math.min(l.x,window.innerWidth-320),"px"):"50%",top:l!=null&&l.y?"".concat(l.y+10,"px"):"50%",transform:l!=null&&l.x?"none":"translate(-50%, -50%)",pointerEvents:"auto",borderColor:String((r==null?void 0:r.party_color)||"").trim()||"#111827"},onClick:v=>v.stopPropagation(),onMouseEnter:i,onMouseLeave:d,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[r.party_logo&&e.jsx("img",{src:r.party_logo,alt:r.party_short_name,className:"w-10 h-10 object-contain",onError:v=>{v.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:r.party_short_name}),e.jsx("p",{className:"text-xs text-gray-500",children:r.party_name}),e.jsxs("p",{className:"mt-1 text-primary-blue font-black leading-tight",children:[e.jsx("span",{className:"text-2xl",children:r.seats}),e.jsx("span",{className:"text-sm font-black ml-1",children:"Sandalye"})," ",e.jsxs("span",{className:"text-xl",children:["(",g,")"]})]})]})]})}),e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:f.map(v=>{const b=v.icon;return e.jsxs("button",{onClick:w=>c(v.to,w),className:"w-full flex items-center gap-2.5 py-1.5 px-2 bg-white hover:bg-gray-50 transition-colors border-t border-gray-200 first:border-t-0",children:[e.jsx("span",{className:"w-6 h-6 rounded-md bg-gray-900 text-white flex items-center justify-center flex-shrink-0",children:e.jsx(b,{className:"w-3.5 h-3.5"})}),e.jsx("span",{className:"text-[12px] font-bold text-gray-800 flex-1 text-left leading-tight",children:v.label}),e.jsx(Nr,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]},v.key)})}),e.jsx("button",{onClick:v=>c("/party/".concat(r.party_id),v),className:"w-full mt-3 bg-primary-blue hover:bg-[#0088bb] text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"Parti Profili"})]})]})},xN=({cityCode:r,cityName:s,onClose:l,position:i,onMouseEnter:d,onMouseLeave:u})=>{const c=Qt();if(!r)return null;const g=(f,v)=>{v.stopPropagation(),c(f),l()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40 bg-transparent",onClick:l,style:{pointerEvents:"none"}}),e.jsxs("div",{className:"fixed z-50 bg-white rounded-lg shadow-2xl border-2 border-gray-900 p-3 w-72 animate-fadeIn",style:{left:i!=null&&i.x?"".concat(Math.min(i.x,window.innerWidth-320),"px"):"50%",top:i!=null&&i.y?"".concat(i.y+10,"px"):"50%",transform:i!=null&&i.x?"none":"translate(-50%, -50%)",pointerEvents:"auto"},onClick:f=>f.stopPropagation(),onMouseEnter:d,onMouseLeave:u,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-900 text-white flex items-center justify-center font-bold text-sm",children:r}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900",children:s}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Plaka: ",r]})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:f=>g("/city/".concat(r,"?tab=mps"),f),className:"w-full flex items-center justify-between py-1.5 px-2 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary-blue rounded-full p-1",children:e.jsx(ts,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:"Milletvekilleri"})]}),e.jsx(Nr,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),e.jsxs("button",{onClick:f=>g("/city/".concat(r,"?tab=metropolitan"),f),className:"w-full flex items-center justify-between py-1.5 px-2 bg-green-50 hover:bg-green-100 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-primary-green rounded-full p-1",children:e.jsx(Rr,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:"Bykehir"})]}),e.jsx(Nr,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),e.jsxs("button",{onClick:f=>g("/city/".concat(r,"?tab=districts"),f),className:"w-full flex items-center justify-between py-1.5 px-2 bg-amber-50 hover:bg-amber-100 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-accent-mustard rounded-full p-1",children:e.jsx(ii,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:"leler"})]}),e.jsx(Nr,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]}),e.jsxs("button",{onClick:f=>g("/city/".concat(r,"?tab=posts"),f),className:"w-full flex items-center justify-between py-1.5 px-2 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors group",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-purple-600 rounded-full p-1",children:e.jsx(er,{className:"w-4 h-4 text-white"})}),e.jsx("span",{className:"text-[12px] font-semibold text-gray-700",children:"Paylamlar"})]}),e.jsx(Nr,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]})]}),e.jsx("button",{onClick:f=>g("/city/".concat(r),f),className:"w-full mt-3 bg-primary-blue hover:bg-[#0088bb] text-white font-bold py-2 px-4 rounded-lg transition-colors",children:"l Detaylar"})]})]})},gN=({parliamentData:r=[],totalSeats:s=600})=>{const l=Qt(),[i,d]=m.useState(null),[u,c]=m.useState(null),[g,f]=m.useState({x:0,y:0}),v=m.useRef(null),b=m.useRef(!1),w=m.useRef(null),N=Object.entries(xl).map(([S,y])=>({code:S,name:y})).sort((S,y)=>S.code.localeCompare(y.code));if(!r||r.length===0)return null;const k=S=>{const y=String(S||"").trim().toUpperCase("tr-TR");return y==="AK PART"||y==="AK PARTI"?"akp":y==="CHP"?"chp":y==="MHP"?"mhp":y==="DEM PART"||y==="DEM PARTI"||y==="DEM"?"dem":y==="Y PART"||y==="IYI PARTI"||y==="IYI PART"?"iyi":y==="YEN YOL"?"yeni-yol":y==="YRP"||y==="YENDEN REFAH"?"yrp":y==="HRDAVA"||y==="HDAPAR"||y==="HUDA PAR"||y==="HDA PAR"?"hurdava":y==="TP"||y==="TIP"?"tip":y==="BAIMSIZ"||y==="BAGIMSIZ"?"bagimsiz":y==="DBP"?"dbp":y==="EMEP"?"emep":y==="SAADET"||y==="SP"||y==="SAADET PARTS"||y==="SAADET PARTISI"?"saadet":y==="DSP"?"dsp":y==="DP"?"dp":null},_=()=>{v.current&&(clearTimeout(v.current),v.current=null)},M=()=>{b.current=!0,_()},T=()=>{b.current=!1,v.current=setTimeout(()=>{b.current||(d(null),c(null))},200)},A=S=>{const y=w.current;if(!y)return;const p=16;try{y.scrollBy({left:S*p,behavior:"smooth"})}catch(j){y.scrollLeft+=S*p}};return e.jsxs("div",{className:"mb-1",children:[e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"flex h-24 overflow-hidden rounded-t-lg border border-gray-300 w-full",children:r.map((S,y)=>{const p=Math.max(0,Number(S.seats||0)||0),j=hN(S.shortName,y+1),E=String((S==null?void 0:S.slug)||(S==null?void 0:S.party_slug)||(S==null?void 0:S.party_id)||"").trim()||k(S.shortName)||"",C={"AK PART":"ak_parti.png","AK PARTI":"ak_parti.png",CHP:"chp.png",MHP:"mhp.png","DEM PART":"dem_parti.png","DEM PARTI":"dem_parti.png","Y PART":"iyi_parti.png","IYI PARTI":"iyi_parti.png",YRP:"yrp.png","YEN YOL":"yeni_yol.png",HRDAVA:"hurdava.png",HDAPAR:"hurdava.png",TP:"tip.png",TIP:"tip.png",BAIMSIZ:"bagimsiz.png",BAGIMSIZ:"bagimsiz.png",DBP:"dbp.png",EMEP:"emep.png",SAADET:"saadet.png",DSP:"dsp.png",DP:"dp.png"},O=String(S.shortName||"").trim().toUpperCase("tr-TR"),P={party_id:E,party_name:S.name,party_short_name:S.shortName,party_logo:S!=null&&S.logo_url?String(S.logo_url):"/assets/parties/logos/".concat(C[O]||"bagimsiz.png"),party_color:S.color,seats:S.seats,mp_count:S.seats,totalSeats:s};return e.jsx("div",{className:"h-full cursor-pointer transition-all hover:opacity-90 hover:brightness-110 relative",style:{flexGrow:p||0,flexBasis:0,minWidth:p>0?"10px":"0px",backgroundColor:S.color,backgroundImage:"url(".concat(j,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"},onClick:()=>{E&&l("/party/".concat(E))},onMouseEnter:L=>{_(),b.current=!1;const ce=L.currentTarget.getBoundingClientRect();f({x:ce.left,y:ce.bottom}),c(null),d(P)},onMouseLeave:()=>{b.current||(v.current=setTimeout(()=>{b.current||d(null)},200))},children:p>0&&p/s*100>5&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold drop-shadow-lg px-1 text-center",style:{textShadow:"1px 1px 2px rgba(0,0,0,0.8), -1px -1px 2px rgba(0,0,0,0.8)"},children:S.shortName})})},"".concat(S.shortName,"-").concat(y))})}),e.jsx("div",{className:"bg-gray-50 px-2 py-2 rounded-b-lg border border-t-0 border-gray-300",children:e.jsxs("div",{className:"flex items-center gap-0",children:[e.jsx("button",{type:"button","aria-label":"Sola kaydr",onClick:()=>A(-1),className:"w-5 h-5 rounded-full bg-primary-blue hover:bg-[#0088bb] text-white shadow flex items-center justify-center flex-shrink-0",children:e.jsx(dl,{className:"w-[18px] h-[18px]",strokeWidth:3})}),e.jsx("div",{ref:w,className:"overflow-x-auto scrollbar-hide flex-1",children:e.jsx("div",{className:"flex gap-0 w-max",children:Array.from({length:81},(S,y)=>{const p=y+1,j=p.toString().padStart(2,"0"),E={"01":"Adana","02":"Adyaman","03":"Afyonkarahisar","04":"Ar","05":"Amasya","06":"Ankara","07":"Antalya","08":"Artvin","09":"Aydn",10:"Balkesir",11:"Bilecik",12:"Bingl",13:"Bitlis",14:"Bolu",15:"Burdur",16:"Bursa",17:"anakkale",18:"ankr",19:"orum",20:"Denizli",21:"Diyarbakr",22:"Edirne",23:"Elaz",24:"Erzincan",25:"Erzurum",26:"Eskiehir",27:"Gaziantep",28:"Giresun",29:"Gmhane",30:"Hakkri",31:"Hatay",32:"Isparta",33:"Mersin",34:"stanbul",35:"zmir",36:"Kars",37:"Kastamonu",38:"Kayseri",39:"Krklareli",40:"Krehir",41:"Kocaeli",42:"Konya",43:"Ktahya",44:"Malatya",45:"Manisa",46:"Kahramanmara",47:"Mardin",48:"Mula",49:"Mu",50:"Nevehir",51:"Nide",52:"Ordu",53:"Rize",54:"Sakarya",55:"Samsun",56:"Siirt",57:"Sinop",58:"Sivas",59:"Tekirda",60:"Tokat",61:"Trabzon",62:"Tunceli",63:"anlurfa",64:"Uak",65:"Van",66:"Yozgat",67:"Zonguldak",68:"Aksaray",69:"Bayburt",70:"Karaman",71:"Krkkale",72:"Batman",73:"rnak",74:"Bartn",75:"Ardahan",76:"Idr",77:"Yalova",78:"Karabk",79:"Kilis",80:"Osmaniye",81:"Dzce"};return e.jsx("button",{onClick:()=>l("/city/".concat(j)),className:"w-[16px] h-[16px] rounded-full bg-gray-900 hover:bg-primary-blue text-white text-[7px] font-bold flex items-center justify-center transition-colors flex-shrink-0 leading-none",onMouseEnter:C=>{_(),b.current=!1;const O=C.currentTarget.getBoundingClientRect();f({x:O.left,y:O.bottom}),d(null),c({code:j,name:E[j]})},onMouseLeave:()=>{b.current||(v.current=setTimeout(()=>{b.current||c(null)},200))},children:p},p)})})}),e.jsx("button",{type:"button","aria-label":"Saa kaydr",onClick:()=>A(1),className:"w-5 h-5 rounded-full bg-primary-blue hover:bg-[#0088bb] text-white shadow flex items-center justify-center flex-shrink-0",children:e.jsx(xj,{className:"w-[18px] h-[18px]",strokeWidth:3})})]})})]}),e.jsxs("div",{className:"md:hidden w-full bg-white border border-gray-200 rounded-lg p-3 shadow-sm",children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:"l Detaylarna Git"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute left-0 top-0 bottom-0 w-40 rounded-l-lg bg-[#0B3D91] flex items-center justify-center",children:e.jsx("span",{className:"text-[12px] font-black tracking-wide text-white",children:"TR"})}),e.jsxs("select",{className:"w-full appearance-none bg-white border-2 border-gray-900/80 text-gray-900 text-base font-black text-center [text-align-last:center] rounded-lg focus:ring-primary-blue focus:border-primary-blue block py-2.5 pr-12 pl-44 shadow-sm",onChange:S=>{S.target.value&&l("/city/".concat(S.target.value))},defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"PLAKA SE"}),N.map(S=>e.jsxs("option",{value:S.code,children:[S.code," - ",S.name]},S.code))]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:e.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),i&&e.jsx(fN,{party:i,position:g,onClose:()=>{d(null),_()},onMouseEnter:M,onMouseLeave:T}),u&&e.jsx(xN,{cityCode:u.code,cityName:u.name,position:g,onClose:()=>{c(null),_()},onMouseEnter:M,onMouseLeave:T})]})},hh=({stories:r=[],mode:s="polifest"})=>{const l=Qt(),[i,d]=m.useState(null),u=Array.isArray(r)?r:[],c=m.useMemo(()=>{const f=String(s||"polifest")==="fast";return{isFast:f,itemPath:v=>"/".concat(f?"fast":"polifest","/").concat(encodeURIComponent(String((v==null?void 0:v.user_id)||ol(v)||"").trim())),rightActionPath:f?"/fast-at":"/polifest",rightActionTitle:f?"Fast At":"Tm hikayeleri gr",ringClass:f?"border-2 border-dashed border-primary-blue":null,bgClass:f?"bg-white":null}},[s]),g=(f,v)=>{const b=_=>String((_==null?void 0:_.user_id)||(_==null?void 0:_.id)||ol(_)||"").trim(),w=(u||[]).map(_=>({key:b(_),user_id:_==null?void 0:_.user_id,username:ol(_),full_name:_==null?void 0:_.full_name,avatar_url:(_==null?void 0:_.avatar_url)||(_==null?void 0:_.profile_image),profile_image:(_==null?void 0:_.profile_image)||(_==null?void 0:_.avatar_url),story_count:_==null?void 0:_.story_count,latest_created_at:_==null?void 0:_.latest_created_at})).filter(_=>_.key),N=b(f),k=Math.max(0,w.findIndex(_=>_.key===N));try{sessionStorage.setItem("fast_queue_v1",JSON.stringify({ts:Date.now(),queue:w,startKey:N,startIndex:k}))}catch(_){}l(c.itemPath(f),{state:{fastQueue:w,fastStartKey:N,fastStartIndex:k>=0?k:v||0}})};return e.jsxs("div",{className:"mb-4 relative z-30",children:[e.jsx("div",{className:"overflow-x-auto scrollbar-hide pr-[60px]",children:e.jsx("div",{className:"flex items-center gap-2 py-2",children:u.map((f,v)=>e.jsxs("button",{onClick:()=>c.isFast?g(f,v):l(c.itemPath(f)),onMouseEnter:()=>d(f.user_id),onMouseLeave:()=>d(null),className:"flex-shrink-0 group relative",title:f.full_name,children:[e.jsx("div",{className:["w-[50px] h-[50px] rounded-full p-[2px]",c.isFast?c.ringClass:f.story_count>1?"bg-gradient-to-tr from-primary-blue via-blue-400 to-primary-blue":"bg-primary-blue"].join(" "),children:e.jsx("div",{className:["w-full h-full rounded-full p-[1.5px]",(c.isFast,"bg-white")].join(" "),children:e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(Yt,{src:(f==null?void 0:f.profile_image)||(f==null?void 0:f.avatar_url),alt:(f==null?void 0:f.full_name)||(f==null?void 0:f.username)||"",size:"45px",className:"group-hover:scale-105 transition-transform"})})})}),f.story_count>1&&e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-primary-blue text-white text-[10px] font-black rounded-full flex items-center justify-center border-2 border-white shadow-sm",children:f.story_count}),i===f.user_id&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-primary-blue bg-opacity-10 animate-pulse"})]},String((f==null?void 0:f.user_id)||(f==null?void 0:f.id)||ol(f)||v)))})}),c.isFast?null:e.jsx("button",{onClick:()=>l(c.rightActionPath),className:"absolute right-0 top-2 group z-10",style:{background:"linear-gradient(to right, transparent, #F9FAFB 20%, #F9FAFB)",paddingLeft:"20px"},title:c.rightActionTitle,children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:["w-[50px] h-[50px] rounded-full flex items-center justify-center transition-all shadow-lg border-2 border-gray-50","bg-gradient-to-br from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-400"].join(" "),children:e.jsx(As,{className:"w-6 h-6 text-gray-600 group-hover:text-gray-700"})})})})]})},qs=({isOpen:r,onClose:s,title:l,children:i,size:d="medium",footer:u,className:c=""})=>{if(m.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]),!r)return null;const g={small:"max-w-md",medium:"max-w-2xl",large:"max-w-4xl",full:"max-w-7xl"};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:s}),e.jsxs("div",{className:di("relative bg-white rounded-xl shadow-xl w-full",g[d],c),children:[l&&e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:l}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(xs,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:i}),u&&e.jsx("div",{className:"flex items-center justify-end gap-3 p-6 border-t",children:u})]})]})})},yN=({agendas:r=[]})=>{const s=Qt(),[l,i]=m.useState(!1),[d,u]=m.useState(!1),[c,g]=m.useState([]),[f,v]=m.useState(0),[b,w]=m.useState(!0),[N,k]=m.useState(!1),[_,M]=m.useState(""),T=m.useRef(null),[A,S]=m.useState(null),y=m.useRef(new Set);if(!r||r.length===0)return null;const p=D=>{var $,B,Y,Q,q;return(q=(Q=(Y=(B=($=D==null?void 0:D.agenda_id)!=null?$:D==null?void 0:D.id)!=null?B:D==null?void 0:D.slug)!=null?Y:D==null?void 0:D.agenda_slug)!=null?Q:D==null?void 0:D.title)!=null?q:D==null?void 0:D.agenda_title},j=D=>{var $,B;return(B=($=D==null?void 0:D.agenda_title)!=null?$:D==null?void 0:D.title)!=null?B:""},E=D=>{var $,B;return(B=($=D==null?void 0:D.agenda_slug)!=null?$:D==null?void 0:D.slug)!=null?B:""},C=D=>{var $,B,Y;return(Y=(B=($=D==null?void 0:D.total_polit_score)!=null?$:D==null?void 0:D.polit_score)!=null?B:D==null?void 0:D.trending_score)!=null?Y:0},O=D=>{var $,B;return(B=($=D==null?void 0:D._home_label)!=null?$:D==null?void 0:D.home_label)!=null?B:null},P=D=>{var $,B;return(B=($=D==null?void 0:D._home_color)!=null?$:D==null?void 0:D.home_color)!=null?B:null},L=D=>{const $=String(D||"").trim().toLowerCase();return $==="red"?"bg-red-100 text-red-700 border-red-200":$==="orange"?"bg-orange-100 text-orange-700 border-orange-200":$==="amber"||$==="yellow"?"bg-amber-100 text-amber-800 border-amber-200":$==="green"?"bg-green-100 text-green-700 border-green-200":$==="blue"?"bg-blue-100 text-blue-700 border-blue-200":$==="purple"?"bg-purple-100 text-purple-700 border-purple-200":"bg-gray-100 text-gray-700 border-gray-200"},ce=m.useMemo(()=>{const D=Array.isArray(r)?r:[],$=l?10:3;return D.slice(0,Math.min($,D.length))},[r,l]),Z=r.slice(0,10),ie=Z.slice(0,4),le=Z.slice(4,9),ye=({agenda:D,index:$})=>{let B=null;$===0?B=e.jsx(mr,{className:"w-5 h-5 text-red-600",fill:"currentColor",style:{animation:"pulse 0.3s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}):$===1?B=e.jsx(mr,{className:"w-5 h-5 text-orange-500",fill:"currentColor",style:{animation:"pulse 0.6s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}):$===2&&(B=e.jsx(mr,{className:"w-5 h-5 text-yellow-500",fill:"currentColor",style:{animation:"pulse 1s cubic-bezier(0.4, 0, 0.6, 1) infinite"}}));const Y=O(D),Q=P(D);return e.jsxs("button",{onClick:()=>s("/agenda/".concat(E(D))),className:"group flex items-center gap-2 px-2.5 py-1 bg-white border-2 border-gray-300 hover:border-primary-blue hover:bg-primary-blue hover:text-white rounded-lg transition-all duration-200 shadow-sm hover:shadow-md flex-1 min-w-0 h-[28px]",children:[B&&e.jsx("span",{className:"flex-shrink-0",children:B}),Y?e.jsx("span",{className:["hidden sm:inline-flex flex-shrink-0 px-2 py-0.5 rounded-full border text-[9px] font-black leading-none",L(Q),"group-hover:bg-white group-hover:text-primary-blue group-hover:border-white/70"].join(" "),title:String(Y),children:String(Y).slice(0,12)}):null,e.jsx("span",{className:"text-[11px] font-semibold truncate text-left flex-1",children:j(D)}),e.jsx("span",{className:["text-[9px] px-1.5 py-0.5 rounded-full font-black transition-colors flex-shrink-0","bg-gray-900 text-white","group-hover:bg-white group-hover:text-primary-blue","hover:bg-black hover:text-white"].join(" "),children:Ra(C(D))})]},p(D))};m.useEffect(()=>{let D=!1;return(async()=>{try{const $=await re("/api/public/ads?position=agenda_bar&limit=1",{method:"GET"}).catch(()=>null),B=$!=null&&$.success?$==null?void 0:$.data:null,Y=Array.isArray(B)&&B.length>0?B[0]:null;D||S(Y||null)}catch($){D||S(null)}})(),()=>{D=!0}},[]),m.useEffect(()=>{const D=(A==null?void 0:A.id)!=null?String(A.id):"";D&&(y.current.has(D)||(y.current.add(D),re("/api/public/ads/".concat(encodeURIComponent(D),"/impression"),{method:"POST"}).catch(()=>null)))},[A==null?void 0:A.id]);const z=({compact:D=!1})=>{if(!A)return null;const $=String((A==null?void 0:A.title)||"").trim(),B=String((A==null?void 0:A.target_url)||"").trim();return $?e.jsx("button",{type:"button",onClick:()=>{if(!B)return;const Y=(A==null?void 0:A.id)!=null?String(A.id):"";Y&&re("/api/public/ads/".concat(encodeURIComponent(Y),"/click"),{method:"POST"}).catch(()=>null),window.open(B,"_blank")},className:[D?"flex-shrink-0 px-4 py-0.5 bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 text-white rounded-full text-[10px] font-bold shadow-md whitespace-nowrap":"h-[24px] px-3 py-0.5 bg-gradient-to-r from-amber-400 to-amber-500 hover:from-amber-500 hover:to-amber-600 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 flex items-center justify-center w-full",B?"cursor-pointer":"cursor-default opacity-80"].join(" "),title:B?$:void 0,children:D?$:e.jsx("span",{className:"text-[11px] font-bold text-white drop-shadow-md",children:$})}):null},X=()=>e.jsx("button",{onClick:()=>s("/agendas"),className:"flex items-center justify-center px-4 py-0.5 bg-primary-blue hover:bg-[#0088bb] text-white rounded-lg transition-all duration-200 shadow-sm hover:shadow-md flex-shrink-0 font-bold text-[11px] h-[24px]",children:"TM GNDEME BAK"}),G=async({reset:D=!1}={})=>{if(!N&&!(!D&&!b)){k(!0),M("");try{const B=D?0:f,Y=await re("/api/agendas?limit=10&offset=".concat(B,"&order=trending_score.desc&is_active=true"),{method:"GET"}).catch(()=>null),Q=(Y==null?void 0:Y.data)||[],I=[...Array.isArray(Q)?Q:[]].sort((V,Te)=>Number(C(Te)||0)-Number(C(V)||0));D?(g(I),v(I.length)):(g(V=>{const Te=new Set((V||[]).map(oe=>String(p(oe)||""))),Ke=[...V||[]];for(const oe of I){const je=String(p(oe)||"");!je||Te.has(je)||(Te.add(je),Ke.push(oe))}return Ke}),v(V=>V+I.length)),w(I.length>=10)}catch($){M(String(($==null?void 0:$.message)||"Gndem yklenemedi.")),w(!1)}finally{k(!1)}}};return m.useEffect(()=>{d&&(g([]),v(0),w(!0),M(""),G({reset:!0}))},[d]),e.jsxs("div",{className:"mb-1",children:[e.jsx("div",{className:"md:hidden bg-gray-50 pb-1 -mx-4 px-4 pt-1",children:e.jsxs("div",{className:"space-y-2",children:[ce.map((D,$)=>{const B=$===0?e.jsx(mr,{className:"w-5 h-5 text-red-600",fill:"currentColor"}):$===1?e.jsx(mr,{className:"w-5 h-5 text-orange-500",fill:"currentColor"}):$===2?e.jsx(mr,{className:"w-5 h-5 text-yellow-500",fill:"currentColor"}):null;return e.jsxs("button",{type:"button",onClick:()=>s("/agenda/".concat(E(D))),className:"w-full flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-xl hover:border-primary-blue hover:bg-blue-50 transition-colors",children:[B?e.jsx("span",{className:"flex-shrink-0",children:B}):e.jsx("span",{className:"w-5 h-5"}),e.jsx("span",{className:"text-[13px] font-semibold text-gray-900 truncate flex-1 text-left",children:j(D)}),e.jsx("span",{className:"text-[11px] bg-gray-900 text-white px-2 py-1 rounded-full font-black flex-shrink-0",children:Ra(C(D))})]},p(D))}),!l&&r.length>3?e.jsx("button",{type:"button",onClick:()=>i(!0),className:"w-full py-2.5 rounded-xl bg-white border-2 border-gray-900 text-gray-900 font-black text-sm",children:"+ DER GNDEM MADDELER"}):null,l?e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("button",{type:"button",onClick:()=>u(!0),className:"flex-1 py-2.5 rounded-xl bg-primary-blue hover:bg-[#0088bb] text-white font-black text-sm",children:"TMNE BAK"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2.5 rounded-xl border border-gray-300 text-gray-700 font-black text-sm",children:"Kapat"})]}):null,e.jsx("div",{className:"pt-1",children:e.jsx(z,{compact:!0})})]})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex gap-2",children:[ie.slice(0,3).map((D,$)=>e.jsx(ye,{agenda:D,index:$},D.agenda_id)),e.jsx("div",{className:"flex-1 min-w-[180px] max-w-[220px]",children:e.jsx(z,{})}),ie.slice(3,4).map((D,$)=>e.jsx(ye,{agenda:D,index:3},D.agenda_id))]}),le.length>0&&e.jsxs("div",{className:"flex gap-2",children:[le.map((D,$)=>e.jsx(ye,{agenda:D,index:$+4},D.agenda_id)),e.jsx(X,{})]})]})}),e.jsx(qs,{isOpen:d,onClose:()=>u(!1),title:"Tm Gndemler",size:"small",children:e.jsxs("div",{ref:T,className:"max-h-[70vh] overflow-y-auto -mx-2 px-2",onScroll:D=>{const $=D==null?void 0:D.currentTarget;if(!$)return;$.scrollHeight-$.scrollTop-$.clientHeight<220&&G()},children:[_?e.jsx("div",{className:"mb-3 text-sm text-red-600 font-semibold",children:_}):null,(c||[]).map(D=>e.jsxs("button",{type:"button",onClick:()=>{u(!1),s("/agenda/".concat(E(D)))},className:"w-full flex items-center justify-between gap-3 p-3 rounded-xl border border-gray-200 hover:border-primary-blue hover:bg-blue-50 transition-colors mb-2",children:[e.jsx("div",{className:"min-w-0 text-left",children:e.jsx("div",{className:"font-bold text-gray-900 truncate",children:j(D)})}),e.jsx("div",{className:"flex-shrink-0 text-xs bg-gray-900 text-white px-2 py-1 rounded-full font-black",children:Ra(C(D))})]},p(D))),N?e.jsx("div",{className:"py-2 text-sm text-gray-600",children:"Ykleniyor"}):null,!N&&!b?e.jsx("div",{className:"py-2 text-xs text-gray-500",children:"Daha fazla gndem yok."}):null]})})]})},My=({post:r,onClose:s})=>{const[l,i]=m.useState(null),[d,u]=m.useState(!1),[c,g]=m.useState(""),[f,v]=m.useState(null);if(!r)return null;const b=String((r==null?void 0:r.id)||(r==null?void 0:r.post_id)||"").trim();m.useEffect(()=>{let N=!1;return(async()=>{if(b){u(!0),g("");try{const k=await ma.posts.getPolitScoreBreakdown(b).catch(()=>null);if(!(k!=null&&k.success))throw new Error((k==null?void 0:k.error)||"Polit puan detay yklenemedi.");N||v((k==null?void 0:k.data)||null)}catch(k){N||g(String((k==null?void 0:k.message)||"Polit puan detay yklenemedi.")),N||v(null)}finally{N||u(!1)}}})(),()=>{N=!0}},[b]);const w=m.useMemo(()=>{var T,A,S,y,p,j,E,C;const N=f||{},k=(N==null?void 0:N.likes)||{},_=(N==null?void 0:N.comments)||{},M=(N==null?void 0:N.views)||{};return{views:{title:"Grntleme",icon:e.jsx(cs,{className:"w-5 h-5"}),total:(T=M==null?void 0:M.score)!=null?T:null,details:[{label:"Toplam grntlenme",count:Number((S=(A=M==null?void 0:M.count)!=null?A:r.view_count)!=null?S:0)||0,points:(y=M==null?void 0:M.score)!=null?y:null,unitPoint:""},...M!=null&&M.note?[{label:"Not",count:1,points:null,unitPoint:String(M.note)}]:[]]},likes:{title:"Beeni",icon:e.jsx(Or,{className:"w-5 h-5"}),total:(p=k==null?void 0:k.totalScore)!=null?p:null,details:Array.isArray(k==null?void 0:k.byRule)?k.byRule.map(O=>{var P;return{label:O.label||O.rule||"like",count:Number(O.count||0)||0,points:Number((P=O.totalScore)!=null?P:0)||0,unitPoint:typeof O.unitScore=="number"?"".concat(O.unitScore," P."):""}}):[{label:"Toplam beeni",count:Number(r.like_count||0)||0,points:null,unitPoint:""}]},comments:{title:"Yorum",icon:e.jsx(Dn,{className:"w-5 h-5"}),total:(j=_==null?void 0:_.totalScore)!=null?j:null,details:Array.isArray(_==null?void 0:_.byRule)?_.byRule.map(O=>{var P;return{label:O.label||O.rule||"comment",count:Number(O.count||0)||0,points:Number((P=O.totalScore)!=null?P:0)||0,unitPoint:typeof O.unitScore=="number"?"".concat(O.unitScore," P."):""}}):[{label:"Toplam yorum",count:Number(r.comment_count||0)||0,points:null,unitPoint:""}]},shares:{title:"Paylam",icon:e.jsx(oi,{className:"w-5 h-5"}),total:null,details:[{label:"Not",count:1,points:null,unitPoint:"Paylam krlm u an tutulmuyor"}]},engagement:{title:"zet",icon:e.jsx(er,{className:"w-5 h-5"}),total:(E=N==null?void 0:N.totalScore)!=null?E:null,details:[{label:"Toplam (hesaplanan)",count:1,points:(C=N==null?void 0:N.totalScore)!=null?C:null,unitPoint:""},...N!=null&&N.truncated?[{label:"Not",count:1,points:null,unitPoint:"ok byk postlarda rnekleme uygulanr"}]:[]]}}},[f,r==null?void 0:r.comment_count,r==null?void 0:r.like_count,r==null?void 0:r.view_count]);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:s,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Polit Puan Detay"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Etkileim krlm DBden hesaplanr (tahmin/mock yok)."})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(xs,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"bg-gradient-to-r from-primary-blue to-blue-600 text-white p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"TOPLAM POLT PUAN"}),e.jsx("p",{className:"text-5xl font-bold",children:Ra(r.polit_score)})]})}),d?e.jsx("div",{className:"p-6 text-sm text-gray-600",children:"Ykleniyor"}):null,c?e.jsx("div",{className:"px-6 pb-2 text-sm text-red-600 font-semibold",children:c}):null,e.jsx("div",{className:"p-6 space-y-4",children:Object.entries(w).map(([N,k])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("button",{onClick:()=>i(l===N?null:N),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-primary-blue",children:k.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:k.title}),e.jsx("p",{className:"text-xs text-gray-500",children:"Toplam Katk"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-bold text-primary-blue",children:k.total==null?"":Ra(k.total)}),e.jsx("p",{className:"text-xs text-gray-500",children:l===N?"Gizle ":"Detay "})]})]}),l===N&&e.jsx("div",{className:"bg-white p-4 space-y-3 border-t border-gray-200",children:k.details.map((_,M)=>e.jsxs("div",{className:"w-full flex items-center justify-between p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:_.label}),e.jsxs("p",{className:"text-xs text-gray-500",children:[_.count," adet  ",_.unitPoint]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-lg font-bold text-primary-blue",children:_.points==null?"":Ra(_.points)})})]},M))})]},N))}),e.jsx("div",{className:"bg-gray-50 p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"bg-primary-blue rounded-full p-2 flex-shrink-0",children:e.jsx(ts,{className:"w-6 h-6 sm:w-5 sm:h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 text-sm mb-1",children:"Polithane'nin effaflk lkesi"}),e.jsx("p",{className:"text-xs text-gray-600 leading-relaxed",children:"Bu ekranda mock/tahmin hesap gstermiyoruz. effaflk iin katsaylar (kural seti) ak; ancak tekil etkileim loglar ve kullanc tipi krlmlar DBde tutulmad srece post baznda tam puan dkm gsterilemez."})]})]})})]})})})},x0=({children:r,content:s,delay:l=600})=>{const[i,d]=m.useState(!1),[u,c]=m.useState({top:0,left:0}),g=m.useRef(null),f=m.useRef(null),v=m.useRef(null),b=m.useRef(null),w=m.useRef(!1),N=()=>{f.current&&(clearTimeout(f.current),f.current=null),g.current&&clearTimeout(g.current),w.current=!0,g.current=setTimeout(()=>{if(w.current&&v.current){const _=v.current.getBoundingClientRect();c({top:_.top-40,left:_.left+_.width/2}),d(!0)}},l)},k=()=>{w.current=!1,g.current&&(clearTimeout(g.current),g.current=null),f.current=setTimeout(()=>{w.current||d(!1)},100)};return m.useEffect(()=>()=>{g.current&&clearTimeout(g.current),f.current&&clearTimeout(f.current)},[]),e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:v,onMouseEnter:N,onMouseLeave:k,className:"inline-block",children:r}),i&&s&&e.jsxs("div",{ref:b,className:"fixed z-[9999] px-3 py-2 text-xs font-semibold text-white bg-gray-900 rounded-lg shadow-xl whitespace-nowrap pointer-events-none animate-fade-in",style:{top:"".concat(u.top,"px"),left:"".concat(u.left,"px"),transform:"translateX(-50%)"},children:[s,e.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 top-full",style:{width:0,height:0,borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderTop:"6px solid #1f2937",marginTop:"-1px"}})]}),e.jsx("style",{children:"\n        @keyframes fade-in {\n          from {\n            opacity: 0;\n            transform: translateX(-50%) translateY(-5px);\n          }\n          to {\n            opacity: 1;\n            transform: translateX(-50%) translateY(0);\n          }\n        }\n        .animate-fade-in {\n          animation: fade-in 0.2s ease-out;\n        }\n      "})]})},xd=({trigger:r=0,sizeClass:s="w-8 h-8"})=>{const[l,i]=m.useState([]);return m.useEffect(()=>{if(!r)return;const d="".concat(Date.now(),"_").concat(Math.random().toString(16).slice(2));i(c=>[...c||[],d]);const u=setTimeout(()=>{i(c=>(c||[]).filter(g=>g!==d))},700);return()=>clearTimeout(u)},[r]),l.length?e.jsx(e.Fragment,{children:l.map(d=>e.jsx("span",{className:"like-burst-wrap","aria-hidden":"true",children:e.jsx(Or,{className:["like-burst-heart",s].join(" "),fill:"currentColor"})},d))}):null},Ry=r=>String(r||"").trim().toLowerCase("tr-TR").replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/\s+/g," "),pN=(()=>{const r=new Map;return Object.entries(xl).forEach(([s,l])=>{r.set(Ry(l),s)}),r})(),bN=r=>{const s=Ry(r);return pN.get(s)||null},Ts=({post:r,showCity:s=!1,showPartyLogo:l=!1,fullWidth:i=!1,style:d})=>{var B,Y,Q,q,I,V,Te,Ke;const u=Qt(),[c,g]=m.useState(!1),{isAuthenticated:f}=Pa(),v=(B=r==null?void 0:r.post_id)!=null?B:r==null?void 0:r.id,b=m.useRef(!1),[w,N]=m.useState(!1),[k,_]=m.useState(!1),[M,T]=m.useState(!1),[A,S]=m.useState(Number((r==null?void 0:r.like_count)||0)),[y,p]=m.useState(!!(r!=null&&r.is_liked)),[j,E]=m.useState(0),C=m.useMemo(()=>{try{return"".concat(window.location.origin,"/api/og/post?id=").concat(encodeURIComponent(v))}catch(oe){return"/api/og/post?id=".concat(encodeURIComponent(v))}},[v]),O=m.useMemo(()=>{var St;const oe=String(((St=r==null?void 0:r.user)==null?void 0:St.full_name)||"").trim(),je=String((r==null?void 0:r.agenda_tag)||"").trim(),fe=Ra((r==null?void 0:r.polit_score)||0),ke=String((r==null?void 0:r.content_text)||(r==null?void 0:r.content)||"").trim(),$e=ke?$m(ke,160):"Bir polit paylald.";return[oe?"".concat(oe):null,je?"Gndem: ".concat(je):null,"Polit Puan: ".concat(fe),"",$e,"","Polithane'de gr: ".concat(C)].filter(Qe=>Qe!==null).join("\n")},[(Y=r==null?void 0:r.user)==null?void 0:Y.full_name,r==null?void 0:r.agenda_tag,r==null?void 0:r.polit_score,r==null?void 0:r.content_text,r==null?void 0:r.content,C]),P=m.useMemo(()=>encodeURIComponent(O),[O]),L=oe=>{const je=String(oe||"").trim();return!je||je.startsWith("/assets/posts/")||je==="/assets/default/post_image.jpg"||je==="/assets/default/post.jpg"?"":je.startsWith("https://")||je.startsWith("http://")||je.startsWith("/")?je:""},ce=oe=>(Array.isArray(oe)?oe:oe?[oe]:[]).map(L).filter(Boolean),Z=({src:oe,className:je,fallbackIcon:fe=null})=>{const[ke,$e]=m.useState(!1),Le=L(oe);return!Le||ke?e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center ".concat(je||""),children:fe||e.jsx(ci,{className:"w-10 h-10 text-gray-400"})}):e.jsx("img",{src:Le,alt:"",className:je,onError:()=>$e(!0)})},ie=m.useMemo(()=>(r==null?void 0:r.content_type)===ur.IMAGE?ce(r==null?void 0:r.media_url):[],[r==null?void 0:r.content_type,r==null?void 0:r.media_url]),le=ie.length,[ye,z]=m.useState(0),X=m.useRef({active:!1,startX:0,startY:0,lastX:0,lastY:0,moved:!1});m.useEffect(()=>{z(0)},[v]),m.useEffect(()=>{z(oe=>Math.max(0,Math.min(oe,Math.max(0,le-1))))},[le]),m.useEffect(()=>{if((r==null?void 0:r.content_type)!==ur.IMAGE||le<=1)return;let oe=!1;const je=setInterval(()=>{oe||z(fe=>(fe+1)%le)},3200);return()=>{oe=!0,clearInterval(je)}},[le,r==null?void 0:r.content_type]);const G=oe=>{le<=1||z(je=>{const fe=(je+oe)%le;return fe<0?fe+le:fe})},D=async oe=>{var fe;const je=String(oe||"");if(!je)return!1;try{if((fe=navigator==null?void 0:navigator.clipboard)!=null&&fe.writeText)return await navigator.clipboard.writeText(je),!0}catch(ke){}try{const ke=document.createElement("textarea");ke.value=je,ke.setAttribute("readonly","true"),ke.style.position="fixed",ke.style.left="-9999px",document.body.appendChild(ke),ke.select();const $e=document.execCommand("copy");return document.body.removeChild(ke),$e}catch(ke){return!1}},$=async oe=>{var $e;if(($e=oe==null?void 0:oe.stopPropagation)==null||$e.call(oe),!v)return;if(!f){u("/login-new");return}const je=!!y,fe=Number(A||0)||0,ke=!je;p(ke),S(Math.max(0,fe+(ke?1:-1))),ke&&E(Le=>Le+1);try{const Le=await Ma.like(v);if(Le!=null&&Le.success){const St=String((Le==null?void 0:Le.action)||"").toLowerCase();St==="liked"?(ke||E(Qe=>Qe+1),p(!0),S(Math.max(0,fe+1))):St==="unliked"&&(p(!1),S(Math.max(0,fe-1)))}}catch(Le){p(je),S(Math.max(0,fe))}};return e.jsxs("div",{className:"card-hover ".concat(i?"p-3 w-full":"p-4"," flex-shrink-0 cursor-pointer flex flex-col min-h-[400px] relative"),style:i?{}:{scrollSnapAlign:"start",...d},onClick:()=>{if(b.current){b.current=!1;return}v&&u("/post/".concat(v))},children:[((Q=r.user)==null?void 0:Q.party_id)&&((I=(q=r.user)==null?void 0:q.party)==null?void 0:I.party_logo)&&e.jsx(x0,{content:"".concat(r.user.party.party_short_name," detayn gr"),delay:300,children:e.jsx("div",{className:"absolute top-3 right-3 z-10 cursor-pointer hover:scale-110 transition-transform",onClick:oe=>{oe.stopPropagation(),u("/party/".concat(r.user.party_id))},children:e.jsx("img",{src:r.user.party.party_logo,alt:r.user.party.party_short_name,className:"w-[22px] h-[22px] sm:w-[24px] sm:h-[24px] md:w-[28px] md:h-[28px] object-contain drop-shadow-md",onError:oe=>{oe.target.style.display="none"}})})}),e.jsx("div",{className:"flex items-start justify-between mb-3 pr-8",children:e.jsxs("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col items-center gap-1 flex-shrink-0",children:[e.jsx("div",{onClick:oe=>{oe.stopPropagation(),u(as(r.user))},className:"cursor-pointer hover:opacity-80 transition-opacity",children:e.jsx(Yt,{src:((V=r.user)==null?void 0:V.avatar_url)||((Te=r.user)==null?void 0:Te.profile_image),size:"32px",verified:za(r.user)})}),(()=>{var je,fe;const oe=((je=r.user)==null?void 0:je.city_code)||bN((fe=r.user)==null?void 0:fe.province);return oe?e.jsx(x0,{content:"".concat(oe," ili detayn gr"),delay:300,children:e.jsx(Tt,{to:"/city/".concat(oe),className:"inline-flex items-center justify-center px-2 py-1 bg-gray-900 hover:bg-primary-blue text-white text-[11px] font-black rounded-full transition-colors",onClick:ke=>ke.stopPropagation(),children:oe})}):null})()]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-900 cursor-pointer hover:text-primary-blue transition-colors line-clamp-2 leading-[18px] h-[36px] mb-1",onClick:oe=>{oe.stopPropagation(),u(as(r.user))},children:(Ke=r.user)==null?void 0:Ke.full_name}),e.jsx("div",{className:"flex items-center gap-1.5 mb-0.5",children:ms(r.user,!0)&&e.jsx("span",{className:"font-medium text-primary-blue cursor-pointer hover:underline text-[10px] whitespace-nowrap",onClick:oe=>{var je,fe,ke,$e,Le;oe.stopPropagation(),((je=r.user)==null?void 0:je.user_type)==="politician"&&((fe=r.user)==null?void 0:fe.politician_type)==="mp"?u("/category/mps"):((ke=r.user)==null?void 0:ke.user_type)==="politician"?u("/category/organization"):(($e=r.user)==null?void 0:$e.user_type)==="ex_politician"?u("/category/experience"):((Le=r.user)==null?void 0:Le.user_type)==="media"?u("/category/media"):u("/category/citizens")},children:ms(r.user,!0)})})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"relative w-full rounded-lg overflow-hidden mb-2",style:{height:"150px"},children:[r.content_type===ur.TEXT&&e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-amber-50 via-yellow-50 to-amber-100 flex items-center justify-center relative border border-gray-300",style:{backgroundImage:"repeating-linear-gradient(0deg, transparent, transparent 24px, #e5e7eb 24px, #e5e7eb 25px)",boxShadow:"inset 0 0 0 1px rgba(229, 231, 235, 0.5)"},children:e.jsx("div",{className:"relative",style:{filter:"drop-shadow(4px 6px 8px rgba(0,0,0,0.3))"},children:e.jsxs("svg",{width:"80",height:"80",viewBox:"0 0 100 100",className:"transform rotate-[-20deg]",children:[e.jsx("rect",{x:"30",y:"10",width:"12",height:"70",fill:"#FCD34D",stroke:"#F59E0B",strokeWidth:"1"}),e.jsx("rect",{x:"30",y:"10",width:"6",height:"70",fill:"#FDE68A",opacity:"0.6"}),e.jsx("polygon",{points:"36,80 30,90 42,90",fill:"#78716C",stroke:"#57534E",strokeWidth:"1"}),e.jsx("polygon",{points:"36,80 30,90 36,90",fill:"#A8A29E",opacity:"0.5"}),e.jsx("rect",{x:"30",y:"5",width:"12",height:"8",fill:"#EF4444",stroke:"#DC2626",strokeWidth:"1",rx:"1"}),e.jsx("rect",{x:"30",y:"5",width:"6",height:"8",fill:"#FCA5A5",opacity:"0.5",rx:"1"})]})})}),r.content_type===ur.IMAGE&&e.jsxs("div",{className:"w-full h-full relative",style:{touchAction:"pan-y"},onPointerDown:oe=>{var fe,ke;const je=X.current;je.active=!0,je.startX=oe.clientX,je.startY=oe.clientY,je.lastX=oe.clientX,je.lastY=oe.clientY,je.moved=!1;try{(ke=(fe=oe.currentTarget)==null?void 0:fe.setPointerCapture)==null||ke.call(fe,oe.pointerId)}catch($e){}},onPointerMove:oe=>{const je=X.current;if(!je.active)return;je.lastX=oe.clientX,je.lastY=oe.clientY;const fe=je.lastX-je.startX,ke=je.lastY-je.startY;!je.moved&&(Math.abs(fe)>8||Math.abs(ke)>8)&&(je.moved=!0)},onPointerUp:()=>{const oe=X.current;if(!oe.active)return;oe.active=!1;const je=oe.lastX-oe.startX,fe=oe.lastY-oe.startY,ke=Math.abs(je),$e=Math.abs(fe);le>1&&ke>30&&ke>$e*1.2&&(b.current=!0,G(je<0?1:-1))},onPointerCancel:()=>{X.current.active=!1},children:[le===0?e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ci,{className:"w-12 h-12 text-gray-400 mx-auto mb-2"}),e.jsx("div",{className:"text-xs text-gray-600 font-semibold",children:"Resim yok"})]})}):e.jsx(Z,{src:ie[Math.max(0,Math.min(ye,le-1))],className:"w-full h-full object-cover"}),le>1?e.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex items-center justify-center gap-1.5 pointer-events-none",children:Array.from({length:le}).map((oe,je)=>e.jsx("span",{className:["w-1.5 h-1.5 rounded-full",je===ye?"bg-white":"bg-white/45"].join(" ")},je))}):null]}),r.content_type===ur.VIDEO&&e.jsxs(e.Fragment,{children:[e.jsx(Z,{src:L(r.thumbnail_url)||ce(r.media_url)[0]||"",className:"w-full h-full object-cover",fallbackIcon:e.jsx(po,{className:"w-12 h-12 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"relative",style:{filter:"drop-shadow(4px 6px 12px rgba(0,0,0,0.4))"},children:e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-10 h-10 md:w-20 md:h-20",children:[e.jsx("circle",{cx:"50",cy:"53",r:"35",fill:"rgba(0,0,0,0.2)"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"playGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ffffff",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#e5e7eb",stopOpacity:"1"})]})}),e.jsx("circle",{cx:"50",cy:"50",r:"35",fill:"url(#playGradient)",stroke:"#d1d5db",strokeWidth:"2"}),e.jsx("circle",{cx:"50",cy:"50",r:"35",fill:"none",stroke:"#ffffff",strokeWidth:"1",opacity:"0.5"}),e.jsx("polygon",{points:"42,35 42,65 68,50",fill:"#009fd6",stroke:"#0088bb",strokeWidth:"1"}),e.jsx("polygon",{points:"42,35 42,50 55,42.5",fill:"#00b4f0",opacity:"0.6"})]})})}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-xs",children:mi(r.media_duration)})]}),r.content_type===ur.AUDIO&&e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center relative",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"relative inline-block mb-4",style:{filter:"drop-shadow(4px 6px 10px rgba(0,0,0,0.3))"},children:e.jsxs("svg",{width:"60",height:"80",viewBox:"0 0 100 120",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"micGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"1"}),e.jsx("stop",{offset:"100%",stopColor:"#1e40af",stopOpacity:"1"})]})}),e.jsx("rect",{x:"35",y:"20",width:"30",height:"40",rx:"15",fill:"url(#micGradient)",stroke:"#1e3a8a",strokeWidth:"2"}),e.jsx("rect",{x:"35",y:"20",width:"15",height:"40",rx:"15",fill:"#60a5fa",opacity:"0.5"}),e.jsx("path",{d:"M 35 65 Q 35 80 50 80 Q 65 80 65 65",stroke:"#1e3a8a",strokeWidth:"3",fill:"none"}),e.jsx("line",{x1:"50",y1:"80",x2:"50",y2:"100",stroke:"#1e3a8a",strokeWidth:"3"}),e.jsx("line",{x1:"35",y1:"100",x2:"65",y2:"100",stroke:"#1e3a8a",strokeWidth:"4",strokeLinecap:"round"}),e.jsx("line",{x1:"40",y1:"30",x2:"60",y2:"30",stroke:"#1e40af",strokeWidth:"1",opacity:"0.5"}),e.jsx("line",{x1:"40",y1:"40",x2:"60",y2:"40",stroke:"#1e40af",strokeWidth:"1",opacity:"0.5"}),e.jsx("line",{x1:"40",y1:"50",x2:"60",y2:"50",stroke:"#1e40af",strokeWidth:"1",opacity:"0.5"})]})}),e.jsx("p",{className:"text-sm text-gray-700 font-semibold",children:mi(r.media_duration)})]})})]}),r.content_text&&(r.content_type===ur.TEXT?e.jsx("div",{className:"mb-2",children:e.jsx("div",{className:"border-t border-gray-300 pt-3",children:e.jsx("p",{className:"text-gray-800 text-sm line-clamp-2 leading-snug h-[42px]",children:r.content_text})})}):e.jsx("p",{className:"text-gray-800 text-sm line-clamp-2 leading-snug mb-2 h-[42px]",children:r.content_text}))]}),r.content_type===ur.TEXT?e.jsx("div",{className:"h-[30px]"}):null,e.jsxs("div",{className:"mt-auto",children:[r.agenda_tag&&e.jsx("div",{className:"mb-2 cursor-pointer h-10",onClick:oe=>{oe.stopPropagation();const je=r.agenda_tag.toLowerCase().replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");u("/agenda/".concat(je))},children:e.jsx("div",{className:"inline-block px-3 py-1 bg-primary-blue text-white rounded-full text-xs font-medium line-clamp-2 leading-[18px] max-w-full",children:r.agenda_tag})}),e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("div",{className:"cursor-pointer hover:scale-105 transition-transform inline-block",onClick:oe=>{oe.stopPropagation(),g(!0)},title:"Polit Puan detaylarn gr",children:e.jsx("span",{className:"text-lg font-bold text-primary-blue hover:text-blue-700",children:Ra(r.polit_score)})}),e.jsx("div",{className:"text-[10px] text-gray-500",children:ui(r.created_at)})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-0.5 text-primary-blue hover:text-blue-700",onClick:oe=>{oe.stopPropagation(),v&&u("/post/".concat(v))},title:"Detay a",children:[e.jsx(cs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black text-gray-800 leading-4",children:hs(r.view_count)})]}),e.jsxs("button",{type:"button",className:"relative flex flex-col items-center gap-0.5 text-red-600 hover:text-red-700",onClick:$,title:y?"Beeniyi geri al":"Been",children:[e.jsx(xd,{trigger:j,sizeClass:"w-8 h-8"}),e.jsx(Or,{className:"w-5 h-5",fill:y?"currentColor":"none"}),e.jsx("span",{className:"text-xs font-black text-gray-800 leading-4",children:hs(A)})]}),e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-0.5 text-amber-600 hover:text-amber-700",onClick:oe=>{oe.stopPropagation(),v&&u("/post/".concat(v,"?comment=1"))},title:"Yorum yap",children:[e.jsx(Dn,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black text-gray-800 leading-4",children:hs(r.comment_count)})]})]}),e.jsxs("button",{type:"button",className:"text-emerald-600 hover:text-emerald-700 flex flex-col items-center gap-0.5",onClick:oe=>{oe.stopPropagation(),_(!1),T(!1);try{f&&v&&Ma.share(v).catch(()=>null)}catch(je){}N(!0)},title:"Payla",children:[e.jsx(oi,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black text-gray-800 leading-4",children:hs(r.share_count)})]})]}),r.source_url&&e.jsxs("div",{className:"mt-2 text-[10px] text-gray-500 leading-snug",onClick:oe=>oe.stopPropagation(),children:["Bu paylam ",e.jsx("span",{className:"font-semibold",children:mh(r.source_url)})," adresinden alnm olup otomatik olarak paylalmtr."]}),c&&e.jsx(My,{post:r,onClose:()=>g(!1)}),e.jsx(qs,{isOpen:w,onClose:()=>N(!1),title:"Payla",children:e.jsxs("div",{className:"space-y-4",onClick:oe=>oe.stopPropagation(),children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Paylam metni:",e.jsx("div",{className:"mt-2 p-3 rounded-lg bg-gray-50 border border-gray-200 break-all text-xs text-gray-800",children:O})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("a",{href:"https://wa.me/?text=".concat(P),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#25D366] text-white font-black text-center hover:opacity-90",onClick:oe=>oe.stopPropagation(),children:"WhatsApp"}),e.jsx("a",{href:"https://t.me/share/url?url=".concat(encodeURIComponent(C),"&text=").concat(P),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#229ED9] text-white font-black text-center hover:opacity-90",onClick:oe=>oe.stopPropagation(),children:"Telegram"}),e.jsx("a",{href:"https://twitter.com/intent/tweet?text=".concat(P),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-black text-white font-black text-center hover:bg-gray-900",onClick:oe=>oe.stopPropagation(),children:"X"}),e.jsx("a",{href:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(C)),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#1877F2] text-white font-black text-center hover:opacity-90",onClick:oe=>oe.stopPropagation(),children:"Facebook"}),e.jsx("a",{href:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(C)),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#0A66C2] text-white font-black text-center hover:opacity-90",onClick:oe=>oe.stopPropagation(),children:"LinkedIn"}),e.jsx("button",{type:"button",onClick:async oe=>{oe.stopPropagation();const je=await D(C);_(je)},className:"px-4 py-3 rounded-xl border border-gray-300 text-gray-900 font-black hover:bg-gray-50",children:k?"Link Kopyaland":"Linki Kopyala"}),e.jsx("button",{type:"button",onClick:async oe=>{oe.stopPropagation();const je=await D(O);T(je)},className:"px-4 py-3 rounded-xl border border-gray-300 text-gray-900 font-black hover:bg-gray-50",children:M?"Metin Kopyaland":"Metni Kopyala"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Instagram web zerinden direkt paylam desteklemez; linki kopyalayp Instagramda paylaabilirsiniz."})]})})]})},Dc=({children:r,autoScroll:s=!1,scrollInterval:l=5e3,itemsPerView:i={desktop:5,tablet:3,mobile:2},manualScrollItems:d=null,onAdvance:u=null,className:c=""})=>{const g=m.useRef(null),f=m.useRef(null),[v,b]=m.useState(!1),[w,N]=m.useState(!0),[k,_]=m.useState("desktop"),[M,T]=m.useState(i.desktop),[A,S]=m.useState(null);m.useEffect(()=>{const j=()=>{if(!f.current)return;const C=window.innerWidth;let O;C<768?(_("mobile"),O=i.mobile,T(O)):C<1024?(_("tablet"),O=i.tablet,T(O)):(_("desktop"),O=i.desktop,T(O));const P=f.current.clientWidth,ce=(O-1)*12,Z=(P-ce)/O;S(Z)};j(),window.addEventListener("resize",j);const E=new ResizeObserver(j);return f.current&&E.observe(f.current),()=>{window.removeEventListener("resize",j),E.disconnect()}},[i]),m.useEffect(()=>{const j=()=>{if(g.current){const{scrollLeft:C,scrollWidth:O,clientWidth:P}=g.current;b(C>0),N(C<O-P-10)}};j();const E=g.current;if(E)return E.addEventListener("scroll",j),()=>E.removeEventListener("scroll",j)},[r]),m.useEffect(()=>{if(!s||!g.current)return;const j=setInterval(()=>{if(g.current){try{u==null||u({reason:"auto",direction:"right",by:1,screenSize:k})}catch(ie){}const{scrollLeft:E,scrollWidth:C,clientWidth:O}=g.current,ce=O/M+12;E+ce>=C-O?g.current.scrollTo({left:0,behavior:"smooth"}):g.current.scrollBy({left:ce,behavior:"smooth"})}},l);return()=>clearInterval(j)},[s,l,M,u,k]);const y=j=>{if(!g.current)return;const E=g.current.clientWidth,C=12,O=(M-1)*C,L=(E-O)/M+C,ce=d&&typeof d=="object"?Number(d[k]||1):1,Z=Number.isFinite(ce)&&ce>0?ce:1;try{u==null||u({reason:"manual",direction:j,by:Z,screenSize:k})}catch(ie){}g.current.scrollBy({left:j==="left"?-L*Z:L*Z,behavior:"smooth"})},p=A?Array.isArray(r)?r.map((j,E)=>m.cloneElement(j,{key:j.key||E,style:{...j.props.style,width:"".concat(A,"px"),minWidth:"".concat(A,"px"),maxWidth:"".concat(A,"px"),flexShrink:0}})):m.cloneElement(r,{style:{...r.props.style,width:"".concat(A,"px"),minWidth:"".concat(A,"px"),maxWidth:"".concat(A,"px"),flexShrink:0}}):r;return e.jsxs("div",{className:"relative ".concat(c),ref:f,children:[v&&e.jsx("button",{onClick:()=>y("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 z-10 bg-white/25 backdrop-blur-sm border border-white/30 rounded-full p-2 shadow-lg hover:bg-white/40 transition-colors","aria-label":"nceki",children:e.jsx(ih,{className:"w-6 h-6 text-gray-800"})}),e.jsx("div",{ref:g,className:"flex gap-3 overflow-x-auto scrollbar-hide scroll-smooth pb-4",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollSnapType:"x mandatory"},children:p}),w&&e.jsx("button",{onClick:()=>y("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 z-10 bg-white/25 backdrop-blur-sm border border-white/30 rounded-full p-2 shadow-lg hover:bg-white/40 transition-colors","aria-label":"Sonraki",children:e.jsx(Nr,{className:"w-6 h-6 text-gray-800"})})]})},vN=({posts:r=[]})=>{const s=m.useRef(null),[l,i]=m.useState(!1),[d,u]=m.useState(!0),c=r.filter(f=>{var v;return((v=f.user)==null?void 0:v.user_type)==="media"}).sort((f,v)=>(v.polit_score||0)-(f.polit_score||0)).slice(0,30);m.useEffect(()=>{const f=()=>{if(s.current){const{scrollTop:b,scrollHeight:w,clientHeight:N}=s.current;i(b>0),u(b<w-N-10)}};f();const v=s.current;if(v)return v.addEventListener("scroll",f),()=>v.removeEventListener("scroll",f)},[c]);const g=f=>{if(!s.current)return;const v=400;s.current.scrollBy({top:f==="up"?-v:v,behavior:"smooth"})};return e.jsxs("div",{className:"relative w-full",children:[l&&e.jsx("button",{onClick:()=>g("up"),className:"absolute top-0 left-1/2 -translate-x-1/2 z-10 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors mb-2","aria-label":"Yukar",children:e.jsx(gj,{className:"w-5 h-5 text-gray-700"})}),e.jsx("div",{ref:s,className:"space-y-4 overflow-y-auto max-h-[800px] scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:c.map(f=>{var v;return e.jsx(Ts,{post:f,fullWidth:!0},(v=f.post_id)!=null?v:f.id)})}),d&&e.jsx("button",{onClick:()=>g("down"),className:"absolute bottom-0 left-1/2 -translate-x-1/2 z-10 bg-white rounded-full p-2 shadow-lg hover:bg-gray-100 transition-colors mt-2","aria-label":"Aa",children:e.jsx(hy,{className:"w-5 h-5 text-gray-700"})})]})},ul=[{name:"Adalet ve Kalknma Partisi",shortName:"AK PART",seats:272,color:"#F39200"},{name:"Cumhuriyet Halk Partisi",shortName:"CHP",seats:138,color:"#ED1C24"},{name:"Halklarn Eitlik ve Demokrasi Partisi",shortName:"DEM Parti",seats:56,color:"#8B008B"},{name:"Milliyeti Hareket Partisi",shortName:"MHP",seats:47,color:"#C41E3A"},{name:"Y Parti",shortName:"Y PART",seats:29,color:"#0047AB"},{name:"Yeni Yol Partisi",shortName:"YEN YOL",seats:21,color:"#FF6B35"},{name:"Yeniden Refah Partisi",shortName:"YRP",seats:4,color:"#006400"},{name:"Hr Dava Partisi",shortName:"HRDAVA",seats:4,color:"#800080"},{name:"Trkiye i Partisi",shortName:"TP",seats:3,color:"#FF0000"},{name:"Bamsz Milletvekilleri",shortName:"BAIMSIZ",seats:3,color:"#808080"},{name:"Demokratik Blgeler Partisi",shortName:"DBP",seats:2,color:"#4B0082"},{name:"Emek Partisi",shortName:"EMEP",seats:2,color:"#FF4500"},{name:"Saadet Partisi",shortName:"SAADET",seats:1,color:"#00CED1"},{name:"Demokratik Sol Parti",shortName:"DSP",seats:1,color:"#FFD700"},{name:"Demokrat Parti",shortName:"DP",seats:1,color:"#8B4513"}],wo=600,ho=(r,s=!0)=>{if(!s)return r;const l=[];let i=!1;for(const d of r){const u=d.content_type==="text"||d.content_type==="audio";u&&i||(l.push(d),i=u)}return l};function wr(r,{maxAgeMs:s=5*6e4}={}){var l;try{const i=sessionStorage.getItem(String(r));if(!i)return null;const d=JSON.parse(i),u=Number((d==null?void 0:d.ts)||0);return!u||Number.isFinite(s)&&s>0&&Date.now()-u>s?null:(l=d==null?void 0:d.data)!=null?l:null}catch(i){return null}}function cn(r,s){try{sessionStorage.setItem(String(r),JSON.stringify({ts:Date.now(),data:s}))}catch(l){}}const jN=()=>{const{user:r,isAuthenticated:s}=Pa(),l=zr(),i="pagecache:home:".concat(s?String((r==null?void 0:r.id)||"me"):"anon"),d=wr(i,{maxAgeMs:10*6e4})||(s?wr("pagecache:home:me",{maxAgeMs:10*6e4}):null)||wr("pagecache:home:anon",{maxAgeMs:10*6e4})||null,[u,c]=m.useState([]),[g,f]=m.useState([]),[v,b]=m.useState(ul),[w,N]=m.useState([]),[k,_]=m.useState([]),[M,T]=m.useState([]),[A,S]=m.useState("all"),[y,p]=m.useState(2),[j,E]=m.useState(5),[C,O]=m.useState({hit:5,mp:5,org:5,citizen:5,media:5}),[P,L]=m.useState(()=>!(d!=null&&d.posts&&Array.isArray(d.posts)&&d.posts.length>0)),[ce,Z]=m.useState(!1),[ie,le]=m.useState(!1),[ye,z]=m.useState(!0),[X,G]=m.useState(0),D=m.useRef(null),$=m.useRef(null),B=m.useRef(!1),Y=m.useRef(!1),[Q,q]=m.useState(!1),I=m.useRef(null),V=m.useRef(null),[Te,Ke]=m.useState(()=>typeof window<"u"?window.innerWidth>=768:!1);m.useEffect(()=>{if(d)try{if(Array.isArray(d.posts)&&d.posts.length>0&&c(d.posts),Array.isArray(d.parties)&&f(d.parties),Array.isArray(d.agendas)&&N(d.agendas),Array.isArray(d.polifest)&&T(d.polifest),Array.isArray(d.parliamentDistribution)&&b(d.parliamentDistribution),d.homePostsPerRow!=null&&p(Number(d.homePostsPerRow)||2),d.activeCategory&&S(String(d.activeCategory)),d.desktopVisible&&O(d.desktopVisible),d.postsOffset!=null&&G(Number(d.postsOffset)||0),d.hasMorePosts!=null&&z(!!d.hasMorePosts),L(!1),l==="POP"&&d.scrollY!=null){const ee=Math.max(0,Number(d.scrollY)||0);setTimeout(()=>{try{window.scrollTo({top:ee,left:0,behavior:"auto"})}catch(Re){}},0)}}catch(ee){}},[]);const oe=20,je=1440*60*1e3,fe=ee=>{const Re=Date.now();return(Array.isArray(ee)?ee:[]).filter(De=>{const We=new Date((De==null?void 0:De.latest_created_at)||0).getTime();return!Number.isFinite(We)||We<=0?!1:Re-We<je})};m.useEffect(()=>{const ee=()=>{Y.current||(Y.current=!0,q(!0))};return window.addEventListener("scroll",ee,{passive:!0}),()=>window.removeEventListener("scroll",ee)},[]),m.useEffect(()=>{const ee=()=>Ke(window.innerWidth>=768);return window.addEventListener("resize",ee),()=>window.removeEventListener("resize",ee)},[]),m.useEffect(()=>{E(5)},[A]),m.useEffect(()=>{if(P)return;const ee=I.current;if(ee)return V.current&&V.current.disconnect(),V.current=new IntersectionObserver(Re=>{const De=Re==null?void 0:Re[0];De!=null&&De.isIntersecting&&Y.current&&E(We=>Math.min(We+1,500))},{root:null,rootMargin:"180px",threshold:.01}),V.current.observe(ee),()=>{var Re;(Re=V.current)==null||Re.disconnect()}},[P,A]);const ke=(ee=[],Re=30)=>{var ue,rt,st,et,Ut,Ot;const De=Date.now(),We=(Array.isArray(ee)?ee:[]).filter(Se=>{var gt;return Se&&((gt=Se.post_id)!=null?gt:Se.id)}).map(Se=>{const gt=new Date(Se.created_at||0).getTime(),jt=1/(1+Math.max(0,(De-(Number.isFinite(gt)?gt:De))/36e5)/12),Vt=(Number(Se.like_count||0)||0)+(Number(Se.comment_count||0)||0)*2+(Number(Se.share_count||0)||0)*5+(Number(Se.view_count||0)||0)*.05,ia=Math.log1p(Math.max(0,Vt)),se=(Number(Se.polit_score||0)||0)*(.75+.25*jt)+ia*12;return{p:Se,score:se,recency:jt}}).sort((Se,gt)=>gt.score-Se.score||gt.recency-Se.recency),Ye=[],ct=new Map,Ne=new Map;let Xe="";const ut=2;for(const Se of We){if(Ye.length>=Re)break;const gt=Se.p,Bt=String(gt.content_type||"text"),jt=String(((ue=gt==null?void 0:gt.user)==null?void 0:ue.user_type)||""),Vt=String((Ot=(Ut=(st=gt.user_id)!=null?st:(rt=gt==null?void 0:gt.user)==null?void 0:rt.user_id)!=null?Ut:(et=gt==null?void 0:gt.user)==null?void 0:et.id)!=null?Ot:"");Vt&&(ct.get(Vt)||0)>=ut||jt&&(Ne.get(jt)||0)>=Math.ceil(Re*.45)||(Bt==="text"||Bt==="audio")&&Bt===Xe||(Ye.push(gt),Xe=Bt,Vt&&ct.set(Vt,(ct.get(Vt)||0)+1),jt&&Ne.set(jt,(Ne.get(jt)||0)+1))}return ho(Ye,!0).slice(0,Re)},$e=m.useMemo(()=>ke(u,30),[u]),Le=m.useMemo(()=>{const ee=Array.isArray(v)?v:[],Re=Array.isArray(g)?g:[],De=Ye=>String(Ye||"").trim().toUpperCase("tr-TR"),We=new Map(Re.map(Ye=>[De(Ye==null?void 0:Ye.short_name),Ye]).filter(([Ye])=>Ye));return ee.map(Ye=>{const ct=We.get(De(Ye==null?void 0:Ye.shortName))||null;return{...Ye,slug:(ct==null?void 0:ct.slug)||null,party_id:(ct==null?void 0:ct.id)||null,logo_url:(ct==null?void 0:ct.logo_url)||null,color:(ct==null?void 0:ct.color)||(Ye==null?void 0:Ye.color)}})},[g]);m.useEffect(()=>{(async()=>{var De,We;Array.isArray(d==null?void 0:d.posts)&&d.posts.length>0?Z(!0):L(!0);try{const[Ye,ct,Ne,Xe]=await Promise.all([ma.parties.getAll().catch(()=>[]),ma.posts.getAll({limit:oe,offset:0,order:"created_at.desc"}).catch(()=>[]),re("/api/public/parliament",{method:"GET"}).catch(()=>null),re("/api/public/site",{method:"GET"}).catch(()=>null)]);f(Array.isArray(Ye)?Ye:[]);const ut=(De=Ne==null?void 0:Ne.data)==null?void 0:De.distribution;Array.isArray(ut)&&ut.length>0?b(ut.map(Se=>({name:Se==null?void 0:Se.name,shortName:Se==null?void 0:Se.shortName,seats:Se==null?void 0:Se.seats,color:Se==null?void 0:Se.color,slug:Se==null?void 0:Se.slug,logo_url:Se==null?void 0:Se.logo_url}))):b(ul);const ue=(We=Xe==null?void 0:Xe.data)==null?void 0:We.homePostsPerRow;if(ue!=null){const Se=Math.max(1,Math.min(3,parseInt(String(ue),10)||2));p(Se)}else p(2);const rt=new Map((Ye||[]).map(Se=>[Se.id,Se]));_([]);const st=Se=>{const gt=Array.isArray(Se)?Se:Se?[Se]:[],Bt=jt=>jt.startsWith("/assets/posts/")||jt==="/assets/default/post_image.jpg"||jt==="/assets/default/post.jpg";return gt.map(jt=>String(jt||"").trim()).filter(jt=>jt&&!Bt(jt))},et=Se=>{var gt,Bt,jt,Vt,ia,K,se,ae,Je,Nt,Ve,Be;return{post_id:Se.id,user_id:Se.user_id,content_type:Se.content_type||"text",content_text:(Bt=(gt=Se.content_text)!=null?gt:Se.content)!=null?Bt:"",media_url:st(Se.media_urls),thumbnail_url:(jt=Se.thumbnail_url)!=null?jt:null,media_duration:(Vt=Se.media_duration)!=null?Vt:null,agenda_tag:(ia=Se.agenda_tag)!=null?ia:null,polit_score:(K=Se.polit_score)!=null?K:0,view_count:(se=Se.view_count)!=null?se:0,like_count:(ae=Se.like_count)!=null?ae:0,dislike_count:(Je=Se.dislike_count)!=null?Je:0,comment_count:(Nt=Se.comment_count)!=null?Nt:0,share_count:(Ve=Se.share_count)!=null?Ve:0,is_featured:(Be=Se.is_featured)!=null?Be:!1,created_at:Se.created_at,source_url:Se.source_url,category:Se.category,user:Se.user?{...Se.user,user_id:Se.user.id,profile_image:Se.user.avatar_url,verification_badge:!1,party_id:Se.user.party_id,party:Se.user.party_id&&rt.get(Se.user.party_id)?{party_id:rt.get(Se.user.party_id).id,party_slug:rt.get(Se.user.party_id).slug,party_short_name:rt.get(Se.user.party_id).short_name,party_logo:rt.get(Se.user.party_id).logo_url,party_color:rt.get(Se.user.party_id).color}:null}:null}};let Ot=(ct||[]).filter(Se=>!(Se!=null&&Se.is_trending)).map(et);c(Ot),G(Ot.length),z(Ot.length>=oe);try{const Se=await re("/api/agendas?limit=80").catch(()=>null),gt=(Se==null?void 0:Se.data)||[],Bt=(Array.isArray(gt)?gt:[]).filter(jt=>(jt==null?void 0:jt.is_active)!==!1).slice(0,80);N(Bt)}catch(Se){N([])}try{const gt=await re(s?"/api/fast?limit=24":"/api/fast/public?limit=24").catch(()=>null),Bt=(gt==null?void 0:gt.data)||[];T(fe(Bt))}catch(Se){T([])}}catch(Ye){console.error("Error loading data:",Ye),c([]),f([]),b(ul),N([]),T([]),G(0),z(!1)}finally{L(!1),Z(!1)}})()},[]),m.useEffect(()=>{const ee=()=>{cn(i,{posts:u,parties:g,agendas:w,polifest:M,parliamentDistribution:v,postsOffset:X,hasMorePosts:ye,homePostsPerRow:y,activeCategory:A,desktopVisible:C,scrollY:typeof window<"u"?window.scrollY:0})};return()=>ee()},[i,u,g,w,M,v,X,ye,y,A,C]),m.useEffect(()=>{let ee=!1;return(async()=>{try{const De=await re(s?"/api/fast?limit=24":"/api/fast/public?limit=24").catch(()=>null),We=(De==null?void 0:De.data)||[];ee||T(fe(We))}catch(Re){ee||T([])}})(),()=>{ee=!0}},[s]),m.useEffect(()=>{let ee=!1;const Re=async()=>{try{if(document!=null&&document.hidden)return;const Ye=await re(s?"/api/fast?limit=24":"/api/fast/public?limit=24").catch(()=>null),ct=(Ye==null?void 0:Ye.data)||[];ee||T(fe(ct))}catch(We){}};Re();const De=setInterval(Re,6e4);return()=>{ee=!0,clearInterval(De)}},[s]);const St=async()=>{if(!(B.current||ie||!ye)){B.current=!0,le(!0);try{const ee=new Map((g||[]).map(Ne=>[Ne.id,Ne])),Re=Ne=>{const Xe=Array.isArray(Ne)?Ne:Ne?[Ne]:[],ut=ue=>ue.startsWith("/assets/posts/")||ue==="/assets/default/post_image.jpg"||ue==="/assets/default/post.jpg";return Xe.map(ue=>String(ue||"").trim()).filter(ue=>ue&&!ut(ue))},De=Ne=>{var Xe,ut,ue,rt,st,et,Ut,Ot,Se,gt,Bt,jt;return{post_id:Ne.id,user_id:Ne.user_id,content_type:Ne.content_type||"text",content_text:(ut=(Xe=Ne.content_text)!=null?Xe:Ne.content)!=null?ut:"",media_url:Re(Ne.media_urls),thumbnail_url:(ue=Ne.thumbnail_url)!=null?ue:null,media_duration:(rt=Ne.media_duration)!=null?rt:null,agenda_tag:(st=Ne.agenda_tag)!=null?st:null,polit_score:(et=Ne.polit_score)!=null?et:0,view_count:(Ut=Ne.view_count)!=null?Ut:0,like_count:(Ot=Ne.like_count)!=null?Ot:0,dislike_count:(Se=Ne.dislike_count)!=null?Se:0,comment_count:(gt=Ne.comment_count)!=null?gt:0,share_count:(Bt=Ne.share_count)!=null?Bt:0,is_featured:(jt=Ne.is_featured)!=null?jt:!1,created_at:Ne.created_at,source_url:Ne.source_url,category:Ne.category,user:Ne.user?{...Ne.user,user_id:Ne.user.id,profile_image:Ne.user.avatar_url,verification_badge:!1,party_id:Ne.user.party_id,party:Ne.user.party_id&&ee.get(Ne.user.party_id)?{party_id:ee.get(Ne.user.party_id).id,party_slug:ee.get(Ne.user.party_id).slug,party_short_name:ee.get(Ne.user.party_id).short_name,party_logo:ee.get(Ne.user.party_id).logo_url,party_color:ee.get(Ne.user.party_id).color}:null}:null}},ct=(await ma.posts.getAll({limit:oe,offset:X,order:"created_at.desc"}).catch(()=>[])||[]).filter(Ne=>!(Ne!=null&&Ne.is_trending)).map(De);c(Ne=>{var ue,rt;const Xe=new Set((Ne||[]).map(st=>{var et,Ut;return String((Ut=(et=st==null?void 0:st.post_id)!=null?et:st==null?void 0:st.id)!=null?Ut:"")})),ut=Ne?Ne.slice():[];for(const st of ct){const et=String((rt=(ue=st==null?void 0:st.post_id)!=null?ue:st==null?void 0:st.id)!=null?rt:"");!et||Xe.has(et)||(Xe.add(et),ut.push(st))}return ut}),G(Ne=>Ne+ct.length),ct.length<oe&&z(!1)}catch(ee){z(!1)}finally{le(!1),B.current=!1}}};m.useEffect(()=>{var ee;if(!P){if(Te){(ee=$.current)==null||ee.disconnect();return}if(D.current)return $.current&&$.current.disconnect(),$.current=new IntersectionObserver(Re=>{const De=Re[0];Y.current&&De!=null&&De.isIntersecting&&St()},{root:null,rootMargin:"120px",threshold:.01}),$.current.observe(D.current),()=>{var Re;(Re=$.current)==null||Re.disconnect()}}},[P,ye,X,g,Q,Te]);const Qe=(ee=[])=>{const Re={video:2,image:2,text:1,audio:1},De=["video","image","text","audio"],We=[],Ye=new Set;for(const Ne of De){const Xe=Re[Ne]||0;Xe&&ee.filter(ut=>(ut.content_type||"text")===Ne&&!Ye.has(ut.post_id)).sort((ut,ue)=>Number(ue.polit_score||0)-Number(ut.polit_score||0)).slice(0,Xe).forEach(ut=>{Ye.add(ut.post_id),We.push(ut)})}const ct=5;return We.length<ct&&ee.filter(Ne=>!Ye.has(Ne.post_id)).sort((Ne,Xe)=>Number(Xe.polit_score||0)-Number(Ne.polit_score||0)).slice(0,ct-We.length).forEach(Ne=>{Ye.add(Ne.post_id),We.push(Ne)}),We},{mpPosts:It,organizationPosts:$t,citizenPosts:Zt,mediaPosts:Xt,featuredPosts:ya}=m.useMemo(()=>{const ee=(Xe,ut)=>Number((ut==null?void 0:ut.polit_score)||0)-Number((Xe==null?void 0:Xe.polit_score)||0),Re=Array.isArray(u)?u:[],De=Re.filter(Xe=>{var ut;return((ut=Xe==null?void 0:Xe.user)==null?void 0:ut.user_type)==="mp"}).slice().sort(ee),We=Re.filter(Xe=>{var ut;return((ut=Xe==null?void 0:Xe.user)==null?void 0:ut.user_type)==="party_official"}).slice().sort(ee),Ye=Re.filter(Xe=>{var ut,ue;return((ut=Xe==null?void 0:Xe.user)==null?void 0:ut.user_type)==="party_member"||((ue=Xe==null?void 0:Xe.user)==null?void 0:ue.user_type)==="citizen"}).slice().sort(ee),ct=Re.filter(Xe=>{var ut;return((ut=Xe==null?void 0:Xe.user)==null?void 0:ut.user_type)==="media"}).slice().sort(ee),Ne=Re.length>0?Re.filter(Xe=>Xe==null?void 0:Xe.is_featured).slice().sort(ee).slice(0,5):[];return{mpPosts:Qe(De),organizationPosts:Qe(We),citizenPosts:Qe(Ye),mediaPosts:Qe(ct),featuredPosts:Ne}},[u]),kt=m.useMemo(()=>ho(It,!0),[It]),de=m.useMemo(()=>ho($t,!0),[$t]),Ie=m.useMemo(()=>ho(Zt,!0),[Zt]),F=[{id:"all",name:"Tm",posts:(()=>{if(u.length===0)return[];const ee=It.slice(),Re=$t.slice(),De=Zt.slice(),We=Xt.slice(),Ye=[],ct=Math.max(ee.length,Re.length,De.length,We.length);for(let Ne=0;Ne<ct;Ne++)ee[Ne]&&Ye.push(ee[Ne]),Re[Ne]&&Ye.push(Re[Ne]),De[Ne]&&Ye.push(De[Ne]),We[Ne]&&Ye.push(We[Ne]);return Ye})(),color:"rgba(0, 0, 0, 0.02)"},{id:"mps",name:"Vekiller",posts:It,color:"rgba(0, 159, 214, 0.08)"},{id:"organization",name:"Tekilat",posts:$t,color:"rgba(135, 180, 51, 0.08)"},{id:"citizens",name:"Vatanda",posts:Zt,color:"rgba(229, 229, 229, 0.5)"},{id:"media",name:"Medya",posts:Xt,color:"rgba(255, 193, 7, 0.1)"}],nt=F.find(ee=>ee.id===A);return P?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-10",children:e.jsxs("div",{className:"max-w-xl mx-auto bg-white border border-gray-200 rounded-2xl p-8 shadow-sm text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(Yt,{src:s?(r==null?void 0:r.avatar_url)||(r==null?void 0:r.profile_image):null,alt:"Profil",size:"84px"})}),e.jsx("div",{className:"text-xl font-black text-gray-900",children:"Ykleniyor"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"erikler hazrlanyor, ltfen bekleyin."}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-100 rounded-full w-4/5 mx-auto animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded-full w-3/5 mx-auto animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-100 rounded-2xl w-full animate-pulse"})]})]})})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-6 lg:pr-0",children:[ce?e.jsx("div",{className:"mb-2 text-[11px] text-gray-500 font-semibold",children:"Gncelleniyor"}):null,e.jsx(mN,{}),e.jsx("div",{className:"mt-2",children:e.jsx(gN,{parliamentData:Le,totalSeats:wo})}),e.jsx("div",{className:"-mt-2",children:e.jsx(hh,{stories:M,mode:"fast"})}),e.jsx("div",{className:"-mt-2",children:w.length>0&&e.jsx(yN,{agendas:w})}),e.jsx("div",{className:"md:hidden sticky top-[72px] z-10 bg-gray-50 -mx-4 px-4 pb-3 mb-4 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center gap-2",children:F.map(ee=>{const Re=A===ee.id,De=ee.id==="mps"?"border-sky-300 text-sky-800 bg-sky-50":ee.id==="organization"?"border-lime-300 text-lime-800 bg-lime-50":ee.id==="citizens"?"border-gray-300 text-gray-800 bg-white":ee.id==="media"?"border-amber-300 text-amber-900 bg-amber-50":"border-blue-200 text-blue-900 bg-blue-50",We=ee.id==="mps"?"bg-sky-600 text-white border-sky-600":ee.id==="organization"?"bg-lime-600 text-white border-lime-600":ee.id==="citizens"?"bg-gray-900 text-white border-gray-900":ee.id==="media"?"bg-amber-500 text-white border-amber-500":"bg-primary-blue text-white border-primary-blue";return e.jsx("button",{onClick:()=>S(ee.id),className:["flex-1 min-w-0 px-2 py-2 rounded-full font-black text-xs tracking-tight transition-all border text-center truncate",Re?"".concat(We," shadow-sm"):"".concat(De," hover:shadow-sm")].join(" "),children:ee.name},ee.id)})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_200px] gap-4 lg:pr-0",children:[e.jsxs("div",{className:"space-y-8 min-w-0",children:[e.jsx("div",{className:"md:hidden",children:nt&&e.jsxs("section",{className:"min-w-0 rounded-lg p-2",style:{backgroundColor:nt.color},children:[e.jsx("div",{className:["grid gap-3",y>=3?"grid-cols-3":y===2?"grid-cols-2":"grid-cols-1"].join(" "),children:nt.posts.slice(0,j).map(ee=>{var Re;return e.jsx(Ts,{post:ee,showCity:nt.id==="mps"||nt.id==="all",showPartyLogo:nt.id!=="citizens",fullWidth:!0},(Re=ee.post_id)!=null?Re:ee.id)})}),e.jsx("div",{ref:I,className:"h-8"})]})}),e.jsxs("div",{className:"hidden md:block space-y-8",children:[e.jsxs("section",{className:"min-w-0 rounded-lg p-4",style:{backgroundColor:"rgba(255, 215, 0, 0.08)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:""}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"HT PAYLAIMLAR"}),e.jsx("span",{className:"text-sm text-gray-500 font-medium",children:"Tm Kategorilerden"})]}),e.jsx(Tt,{to:"/hit",className:"text-primary-blue hover:underline text-sm",children:"Tmn Gr"})]}),e.jsx(Dc,{autoScroll:!0,scrollInterval:4e3,itemsPerView:{desktop:5,tablet:3,mobile:2},manualScrollItems:{desktop:5,tablet:3,mobile:2},onAdvance:({screenSize:ee,by:Re})=>{if(ee!=="desktop")return;const De=Number(Re||0)||0;if(De<=0)return;O(Ye=>({...Ye,hit:Math.min((Ye.hit||10)+De,$e.length)}));const We=Math.max(10,(C.hit||10)+De);ye&&!ie&&We>=$e.length-2&&St()},children:$e.slice(0,Math.max(10,C.hit)).map(ee=>{var Re,De,We;return e.jsx(Ts,{post:ee,showCity:((Re=ee.user)==null?void 0:Re.politician_type)==="mp",showPartyLogo:((De=ee.user)==null?void 0:De.user_type)!=="normal"},(We=ee.post_id)!=null?We:ee.id)})})]}),e.jsxs("section",{className:"min-w-0 rounded-lg p-4",style:{backgroundColor:"rgba(0, 159, 214, 0.08)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"VEKLLER GNDEM"}),e.jsx(Tt,{to:"/category/mps",className:"text-primary-blue hover:underline text-sm",children:"Tmn Gr"})]}),e.jsx(Dc,{autoScroll:!0,scrollInterval:5e3,itemsPerView:{desktop:5,tablet:3,mobile:2},manualScrollItems:{desktop:5,tablet:3,mobile:2},onAdvance:({screenSize:ee,by:Re})=>{if(ee!=="desktop")return;const De=Number(Re||0)||0;if(De<=0)return;O(Ye=>({...Ye,mp:Math.min((Ye.mp||10)+De,kt.length)}));const We=Math.max(10,(C.mp||10)+De);ye&&!ie&&We>=kt.length-2&&St()},children:kt.slice(0,Math.max(10,C.mp)).map(ee=>{var Re;return e.jsx(Ts,{post:ee,showCity:!0,showPartyLogo:!0},(Re=ee.post_id)!=null?Re:ee.id)})})]}),e.jsxs("section",{className:"min-w-0 rounded-lg p-4",style:{backgroundColor:"rgba(135, 180, 51, 0.08)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"TEKLAT GNDEM"}),e.jsx(Tt,{to:"/category/organization",className:"text-primary-blue hover:underline text-sm",children:"Tmn Gr"})]}),e.jsx(Dc,{autoScroll:!0,scrollInterval:5e3,itemsPerView:{desktop:5,tablet:3,mobile:2},manualScrollItems:{desktop:5,tablet:3,mobile:2},onAdvance:({screenSize:ee,by:Re})=>{if(ee!=="desktop")return;const De=Number(Re||0)||0;if(De<=0)return;O(Ye=>({...Ye,org:Math.min((Ye.org||10)+De,de.length)}));const We=Math.max(10,(C.org||10)+De);ye&&!ie&&We>=de.length-2&&St()},children:de.slice(0,Math.max(10,C.org)).map(ee=>{var Re;return e.jsx(Ts,{post:ee,showPartyLogo:!0},(Re=ee.post_id)!=null?Re:ee.id)})})]}),e.jsxs("section",{className:"min-w-0 rounded-lg p-4",style:{backgroundColor:"rgba(229, 229, 229, 0.5)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"VATANDA GNDEM"}),e.jsx(Tt,{to:"/category/citizens",className:"text-primary-blue hover:underline text-sm",children:"Tmn Gr"})]}),e.jsx(Dc,{autoScroll:!0,scrollInterval:5e3,itemsPerView:{desktop:5,tablet:3,mobile:2},manualScrollItems:{desktop:5,tablet:3,mobile:2},onAdvance:({screenSize:ee,by:Re})=>{if(ee!=="desktop")return;const De=Number(Re||0)||0;if(De<=0)return;O(Ye=>({...Ye,citizen:Math.min((Ye.citizen||10)+De,Ie.length)}));const We=Math.max(10,(C.citizen||10)+De);ye&&!ie&&We>=Ie.length-2&&St()},children:Ie.slice(0,Math.max(10,C.citizen)).map(ee=>{var Re;return e.jsx(Ts,{post:ee},(Re=ee.post_id)!=null?Re:ee.id)})})]})]})]}),e.jsx("aside",{className:"hidden lg:block lg:mr-0 min-w-0",children:e.jsx("div",{className:"sticky top-20",children:e.jsxs("div",{className:"bg-slate-800/80 backdrop-blur-sm rounded-lg p-4 shadow-lg",children:[e.jsx("h2",{className:"text-sm font-bold text-white mb-4 whitespace-nowrap",children:"MEDYA GNDEM"}),e.jsx("div",{className:"-mx-4 -mb-4 px-4 pb-4",children:e.jsx(vN,{posts:u})})]})})})]}),Te?null:e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:D,className:"h-10"}),ie&&e.jsx("div",{className:"text-center text-sm text-gray-600 py-4",children:"Daha fazla ierik ykleniyor"})]})]})})},Va=({children:r,variant:s="primary",size:l="medium",disabled:i=!1,loading:d=!1,onClick:u,className:c="",type:g="button",...f})=>{const v={primary:"bg-primary-blue hover:bg-[#0088bb] text-white",secondary:"bg-primary-green hover:bg-[#6f9428] text-white",outline:"border-2 border-primary-blue text-primary-blue hover:bg-primary-blue hover:text-white",danger:"bg-red-600 hover:bg-red-700 text-white",ghost:"hover:bg-gray-100 text-gray-700"},b={small:"px-3 py-1.5 text-sm",medium:"px-4 py-2 text-base",large:"px-6 py-3 text-lg"};return e.jsxs("button",{type:g,className:di("rounded-lg font-medium transition-all duration-200","inline-flex items-center justify-center gap-2","disabled:opacity-50 disabled:cursor-not-allowed",v[s],b[l],c),disabled:i||d,onClick:u,...f,children:[d&&e.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r]})},Oy=m.createContext(null),Eo=()=>{const r=m.useContext(Oy);if(!r)throw new Error("usePublicSite must be used within PublicSiteProvider");return r},NN=({children:r})=>{const[s,l]=m.useState(!0),[i,d]=m.useState(null),[u,c]=m.useState(""),g=async()=>{l(!0),c("");try{const v=await re("/api/public/site",{method:"GET"}).catch(()=>null);v!=null&&v.success&&(v!=null&&v.data)&&typeof v.data=="object"?d(v.data):d(null)}catch(v){c(String((v==null?void 0:v.message)||"Site bilgisi alnamad.")),d(null)}finally{l(!1)}};m.useEffect(()=>{g()},[]);const f=m.useMemo(()=>({loading:s,error:u,site:i,refresh:g,maintenanceMode:!!(i!=null&&i.maintenanceMode),allowRegistration:(i==null?void 0:i.allowRegistration)!==!1,allowComments:(i==null?void 0:i.allowComments)!==!1,allowMessages:(i==null?void 0:i.allowMessages)!==!1}),[s,u,i]);return e.jsx(Oy.Provider,{value:f,children:r})},zy=r=>String(r||"").trim().toLowerCase("tr-TR").replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/\s+/g," "),wN=(()=>{const r=new Map;try{Object.entries(xl||{}).forEach(([s,l])=>{r.set(zy(l),String(s))})}catch(s){}return r})(),_N=r=>{const s=zy(r);return wN.get(s)||null},SN=({src:r,autoPlay:s=!1,overlay:l=null})=>{const i=m.useRef(null),d=String(r||"").trim(),[u,c]=m.useState(!1),[g,f]=m.useState(!1),[v,b]=m.useState(0),[w,N]=m.useState(0),[k,_]=m.useState(!1);m.useEffect(()=>{if(!d)return;const E=i.current;if(!E)return;const C=()=>c(!0),O=()=>c(!1),P=()=>c(!1),L=()=>b(Number(E.currentTime||0)||0),ce=()=>{N(Number(E.duration||0)||0)};return E.addEventListener("play",C),E.addEventListener("pause",O),E.addEventListener("ended",P),E.addEventListener("timeupdate",L),E.addEventListener("loadedmetadata",ce),E.addEventListener("durationchange",ce),()=>{E.removeEventListener("play",C),E.removeEventListener("pause",O),E.removeEventListener("ended",P),E.removeEventListener("timeupdate",L),E.removeEventListener("loadedmetadata",ce),E.removeEventListener("durationchange",ce)}},[d]),m.useEffect(()=>{if(!d)return;const E=i.current;if(E)try{E.muted=!!g}catch(C){}},[g]),m.useEffect(()=>{if(!d||!s)return;const E=i.current;if(!E)return;let C=!1;const O=async()=>{try{E.muted=!!g,await E.play(),_(!1)}catch(P){try{E.muted=!0,await E.play(),_(!1),f(!0)}catch(L){_(!0)}}};return setTimeout(()=>{C||O()},50),()=>{C=!0}},[s,g,d]);const M=Number.isFinite(w)&&w>0?w:0,T=Number.isFinite(v)&&v>=0?v:0,A=M>0?Math.max(0,Math.min(1,T/M)):0,S=E=>{const C=Math.max(0,Math.floor(Number(E||0)||0));return"".concat(C," Sn.")},y=async()=>{const E=i.current;if(E)try{E.paused?(await E.play(),_(!1)):E.pause()}catch(C){_(!0)}},p=E=>{const C=i.current;if(!C)return;const O=Number(C.duration||0)||0;if(!(O>0))return;const P=Math.max(0,Math.min(1,Number(E)||0));try{C.currentTime=P*O}catch(L){}},j=E=>{const C=i.current;if(!C)return;const O=Number(C.duration||0)||0;if(!(O>0))return;const P=Number(C.currentTime||0)||0,L=Math.max(0,Math.min(O,P+(Number(E)||0)));try{C.currentTime=L}catch(ce){}};return d?e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"relative w-full bg-black rounded-lg overflow-hidden flex items-center justify-center",style:{aspectRatio:"9 / 16"},children:[e.jsx("video",{ref:i,src:d,playsInline:!0,controls:!1,autoPlay:s,preload:"auto",className:"max-w-full max-h-full w-auto h-auto object-contain",onClick:y}),l?e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:l}):null]}),e.jsx("div",{className:"mt-2 rounded-xl border border-gray-200 bg-white px-3 py-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>j(-10),className:"w-11 h-11 rounded-lg border border-gray-200 hover:bg-gray-50 flex items-center justify-center text-gray-900","aria-label":"10 saniye geri",title:"10 saniye geri",children:e.jsx(vj,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:y,className:"w-11 h-11 rounded-full bg-gray-900 text-white flex items-center justify-center","aria-label":u?"Durdur":k?"Oynat (izin gerekli olabilir)":"Oynat",title:u?"Durdur":"Oynat",children:u?e.jsx(fd,{className:"w-5 h-5"}):e.jsx(xi,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>j(10),className:"w-11 h-11 rounded-lg border border-gray-200 hover:bg-gray-50 flex items-center justify-center text-gray-900","aria-label":"10 saniye ileri",title:"10 saniye ileri",children:e.jsx(jj,{className:"w-5 h-5"})}),e.jsx("div",{className:"flex-1 px-2",children:e.jsx("input",{type:"range",min:"0",max:"1000",value:Math.round(A*1e3),onChange:E=>p(Number(E.target.value)/1e3),className:"w-full","aria-label":"Zaman izelgesi"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-sm font-bold text-primary-blue tabular-nums whitespace-nowrap",children:[S(T)," / ",S(M)]}),e.jsx("button",{type:"button",onClick:()=>f(E=>!E),className:"w-10 h-10 rounded-lg border border-gray-200 hover:bg-gray-50 flex items-center justify-center","aria-label":g?"Sesi a":"Sesi kapat",title:g?"Sesi a":"Sesi kapat",children:g?e.jsx(oh,{className:"w-5 h-5 text-gray-700"}):e.jsx(ch,{className:"w-5 h-5 text-gray-700"})})]})]})})]}):null},kN=({src:r,alt:s=""})=>{const l=String(r||"").trim();return l?e.jsx("div",{className:"w-full mb-3 flex items-center justify-center",children:e.jsx("img",{src:l,alt:s,className:"rounded-lg bg-black",style:{maxWidth:"100%",height:"auto",width:"auto"}})}):null},EN=({src:r})=>{const s=m.useRef(null),l=String(r||"").trim(),[i,d]=m.useState(!1),[u,c]=m.useState(!1),[g,f]=m.useState(0),[v,b]=m.useState(0);if(m.useEffect(()=>{const T=s.current;if(!T)return;const A=()=>d(!0),S=()=>d(!1),y=()=>d(!1),p=()=>f(Number(T.currentTime||0)||0),j=()=>b(Number(T.duration||0)||0);return T.addEventListener("play",A),T.addEventListener("pause",S),T.addEventListener("ended",y),T.addEventListener("timeupdate",p),T.addEventListener("loadedmetadata",j),T.addEventListener("durationchange",j),()=>{T.removeEventListener("play",A),T.removeEventListener("pause",S),T.removeEventListener("ended",y),T.removeEventListener("timeupdate",p),T.removeEventListener("loadedmetadata",j),T.removeEventListener("durationchange",j)}},[l]),m.useEffect(()=>{const T=s.current;if(T)try{T.muted=!!u}catch(A){}},[u]),!l)return null;const w=Number.isFinite(v)&&v>0?v:0,N=Number.isFinite(g)&&g>=0?g:0,k=w>0?Math.max(0,Math.min(1,N/w)):0,_=async()=>{const T=s.current;if(T)try{T.paused?await T.play():T.pause()}catch(A){}},M=T=>{const A=s.current;if(!A)return;const S=Number(A.duration||0);if(!(!Number.isFinite(S)||S<=0))try{A.currentTime=Math.max(0,Math.min(S,S*T))}catch(y){}};return e.jsx("div",{className:"rounded-2xl overflow-hidden border border-gray-200 bg-gradient-to-br from-slate-900 via-slate-900 to-primary-blue/70",children:e.jsxs("div",{className:"relative p-6 sm:p-8",children:[e.jsxs("div",{className:"absolute inset-0 opacity-20",children:[e.jsx("div",{className:"absolute -right-10 -top-10 w-64 h-64 rounded-full bg-white/20 blur-2xl"}),e.jsx("div",{className:"absolute -left-10 -bottom-10 w-64 h-64 rounded-full bg-white/10 blur-2xl"})]}),e.jsxs("div",{className:"relative flex items-center gap-4",children:[e.jsx("button",{type:"button",onClick:_,className:"w-16 h-16 sm:w-20 sm:h-20 rounded-2xl bg-white/10 hover:bg-white/15 border border-white/15 flex items-center justify-center flex-shrink-0",title:i?"Duraklat":"Oynat","aria-label":i?"Duraklat":"Oynat",children:i?e.jsx(fd,{className:"w-10 h-10 text-white"}):e.jsx(xi,{className:"w-10 h-10 text-white ml-1"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(yo,{className:"w-5 h-5 text-white/90 flex-shrink-0"}),e.jsx("div",{className:"text-sm sm:text-base font-black text-white truncate",children:"Sesli Polit"})]}),e.jsx("button",{type:"button",onClick:()=>c(T=>!T),className:"p-2 rounded-xl bg-white/10 hover:bg-white/15 border border-white/15 text-white flex-shrink-0",title:u?"Sesi a":"Sesi kapat","aria-label":u?"Sesi a":"Sesi kapat",children:u?e.jsx(oh,{className:"w-5 h-5"}):e.jsx(ch,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"relative h-2 rounded-full bg-white/15 overflow-hidden",children:[e.jsx("div",{className:"h-full bg-white/70",style:{width:"".concat(Math.round(k*100),"%")}}),e.jsx("input",{type:"range",min:0,max:1e3,value:Math.round(k*1e3),onChange:T=>M(Number(T.target.value||0)/1e3),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Ses ilerletme"})]}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-xs text-white/80 font-semibold tabular-nums",children:[e.jsx("span",{children:mi(N)}),e.jsx("span",{children:w?mi(w):""})]})]})]})]}),e.jsx("audio",{ref:s,src:l,preload:"metadata"})]})})},TN=()=>{var Da,pa,yt,Wt,gs,Pr,Cs,Rs,_r,Os,Sr,xr,ar,Dr,zs;const{postId:r}=Bn(),s=Qt(),l=tr(),i=zr(),{user:d,isAuthenticated:u}=Pa(),{allowComments:c}=Eo(),[g,f]=m.useState(null),[v,b]=m.useState([]),[w,N]=m.useState(!1),[k,_]=m.useState(""),[M,T]=m.useState(""),[A,S]=m.useState(""),[y,p]=m.useState(!1),[j,E]=m.useState(null),[C,O]=m.useState(!0),[P,L]=m.useState(!1),[ce,Z]=m.useState(""),[ie,le]=m.useState(null),[ye,z]=m.useState(""),[X,G]=m.useState(null),[D,$]=m.useState("spam"),[B,Y]=m.useState(""),[Q,q]=m.useState(!1),[I,V]=m.useState(!1),[Te,Ke]=m.useState(!1),[oe,je]=m.useState(0),[fe,ke]=m.useState(!1),[$e,Le]=m.useState("spam"),[St,Qe]=m.useState(""),[It,$t]=m.useState(!1),Zt=m.useRef(null),Xt=m.useRef(null),[ya,kt]=m.useState(!1),[de,Ie]=m.useState(""),[Pe,F]=m.useState(!1),[nt,ee]=m.useState(!1),[Re,De]=m.useState(0),[We,Ye]=m.useState(1),ct=m.useRef(null),[Ne,Xe]=m.useState(0),ut=m.useRef(null),[ue,rt]=m.useState(0),[st,et]=m.useState(!1),[Ut,Ot]=m.useState(""),[Se,gt]=m.useState(""),[Bt,jt]=m.useState(null),Vt=m.useMemo(()=>"post:".concat(String(r||"").trim()||"-"),[r]),ia=m.useMemo(()=>wr(Vt,{maxAgeMs:10*6e4}),[Vt]);m.useEffect(()=>{if(ia)try{ia.post&&f(ia.post),Array.isArray(ia.comments)&&b(ia.comments),ia.activeImageIdx!==void 0&&De(Number(ia.activeImageIdx||0)||0),O(!1),L(!0);const he=new URLSearchParams(l.search||"");i==="POP"&&he.get("comment")!=="1"&&typeof ia.scrollY=="number"&&setTimeout(()=>{try{window.scrollTo(0,Math.max(0,Number(ia.scrollY)||0))}catch(Ge){}},0)}catch(he){}},[Vt]),m.useEffect(()=>{(async()=>{var tt;!!ia?L(!0):O(!0),Z("");try{const it=await Ma.getById(r),Pt=it!=null&&it.data?it.data:it;f(Pt);const Ft=await Ma.getComments(r).catch(()=>null),ba=((tt=Ft==null?void 0:Ft.data)==null?void 0:tt.data)||(Ft==null?void 0:Ft.data)||Ft||[];b(Array.isArray(ba)?ba:[])}catch(it){console.error(it),Z((it==null?void 0:it.message)||"Paylam yklenemedi."),f(null),b([])}finally{O(!1),L(!1)}})()},[r,ia]),m.useEffect(()=>{const he=()=>{cn(Vt,{post:g,comments:v,activeImageIdx:Re,scrollY:typeof window<"u"?window.scrollY:0})};return()=>he()},[Vt,g,v,Re]),m.useEffect(()=>{if(new URLSearchParams(l.search||"").get("comment")!=="1")try{window.scrollTo(0,0)}catch(Ge){}},[r,l.search]),m.useEffect(()=>{De(0)},[r]),m.useEffect(()=>{const he=ct.current;if(!he)return;const Ge=()=>{try{const it=he.getBoundingClientRect();Xe(Math.max(0,Number((it==null?void 0:it.width)||0)||0))}catch(it){}};Ge();let tt=null;try{tt=new ResizeObserver(()=>Ge()),tt.observe(he)}catch(it){window.addEventListener("resize",Ge)}return()=>{var it;try{(it=tt==null?void 0:tt.disconnect)==null||it.call(tt)}catch(Pt){}try{window.removeEventListener("resize",Ge)}catch(Pt){}}},[r]),m.useEffect(()=>{const he=ut.current;if(!he)return;const Ge=()=>{try{const it=he.getBoundingClientRect();rt(Math.max(0,Number((it==null?void 0:it.width)||0)||0))}catch(it){}};Ge();let tt=null;try{tt=new ResizeObserver(()=>Ge()),tt.observe(he)}catch(it){window.addEventListener("resize",Ge)}return()=>{var it;try{(it=tt==null?void 0:tt.disconnect)==null||it.call(tt)}catch(Pt){}try{window.removeEventListener("resize",Ge)}catch(Pt){}}},[r]);const K=!C&&!ce&&!!g,se=g||{},ae={post_id:(pa=(Da=se.post_id)!=null?Da:se.id)!=null?pa:null,user_id:(yt=se.user_id)!=null?yt:null,content_type:se.content_type||(Array.isArray(se.media_urls)&&se.media_urls.length>0?"image":"text"),content_text:(gs=(Wt=se.content_text)!=null?Wt:se.content)!=null?gs:"",media_url:(Cs=(Pr=se.media_url)!=null?Pr:se.media_urls)!=null?Cs:[],thumbnail_url:se.thumbnail_url,media_duration:se.media_duration,agenda_tag:se.agenda_tag,polit_score:se.polit_score,view_count:se.view_count,like_count:se.like_count,comment_count:se.comment_count,share_count:se.share_count,created_at:se.created_at,source_url:se.source_url,user:se.user||null},Je=m.useMemo(()=>ae.user?as(ae.user):ae.user_id?"/profile/".concat(ae.user_id):"",[ae.user_id,ae.user]),Nt=m.useMemo(()=>{try{const he=new Date(ae.created_at||0);if(!Number.isFinite(he.getTime()))return td(ae.created_at);const Ge=new Intl.DateTimeFormat("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric"}).format(he),tt=new Intl.DateTimeFormat("tr-TR",{hour:"2-digit",minute:"2-digit"}).format(he);return"".concat(Ge," ").concat(tt)}catch(he){return td(ae.created_at)}},[ae.created_at]),Ve=m.useMemo(()=>ae.agenda_tag?String(ae.agenda_tag).toLowerCase().replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):"",[ae.agenda_tag]);m.useEffect(()=>{var Ge;!K||new URLSearchParams(l.search||"").get("comment")!=="1"||((Ge=Zt.current)==null||Ge.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{var tt,it;return(it=(tt=Xt.current)==null?void 0:tt.focus)==null?void 0:it.call(tt)},250))},[K,l.search]);const Be=u&&(d==null?void 0:d.id)&&String(ae.user_id)===String(d.id),mt=ae.content_type!=="image"?[]:(Array.isArray(ae.media_url)?ae.media_url:ae.media_url?[ae.media_url]:[]).map(he=>String(he||"").trim()).filter(Boolean),bt=Math.max(0,Math.min(Re,Math.max(0,mt.length-1))),lt=mt[bt]||mt[0]||"",At=m.useMemo(()=>{const he=new URLSearchParams(l.search||"");return{openEdit:he.get("edit")==="1",openDelete:he.get("delete")==="1"}},[l.search]),H=m.useMemo(()=>{const he=Number(ae.view_count||0),Ge=Number(ae.like_count||0),tt=Number(ae.comment_count||0),it=Number(ae.share_count||0),Pt=Number(ae.polit_score||0),Ft={views:{title:"Grntleme Puanlar",icon:e.jsx(cs,{className:"w-5 h-5"}),total:Math.floor(he*.1),details:[{label:"ye Olmayanlarn Grntlemesi",count:Math.floor(he*.4),unitPoint:"0,05 P.",points:Math.floor(he*.4*.05)},{label:"Parti yelerinin Grntlemesi",count:Math.floor(he*.3),unitPoint:"0,1 P.",points:Math.floor(he*.3*.1)},{label:"Rakip Parti yelerinin Grntlemesi",count:Math.floor(he*.2),unitPoint:"0,15 P.",points:Math.floor(he*.2*.15)},{label:"Siyasetilerin Grntlemesi",count:Math.floor(he*.1),unitPoint:"0,5 P.",points:Math.floor(he*.1*.5)}]},likes:{title:"Beeni Puanlar",icon:e.jsx(Or,{className:"w-5 h-5"}),total:Math.floor(Ge*2),details:[{label:"ye Olmayanlarn Beenisi",count:Math.floor(Ge*.3),unitPoint:"1 P.",points:Math.floor(Ge*.3*1)},{label:"Parti yelerinin Beenisi",count:Math.floor(Ge*.35),unitPoint:"2 P.",points:Math.floor(Ge*.35*2)},{label:"Rakip Parti yelerinin Beenisi",count:Math.floor(Ge*.25),unitPoint:"3 P.",points:Math.floor(Ge*.25*3)},{label:"Siyasetilerin Beenisi",count:Math.floor(Ge*.1),unitPoint:"10 P.",points:Math.floor(Ge*.1*10)}]},comments:{title:"Yorum Puanlar",icon:e.jsx(Dn,{className:"w-5 h-5"}),total:Math.floor(tt*5),details:[{label:"ye Olmayanlarn Yorumu",count:Math.floor(tt*.2),unitPoint:"2 P.",points:Math.floor(tt*.2*2)},{label:"Parti yelerinin Yorumu",count:Math.floor(tt*.4),unitPoint:"5 P.",points:Math.floor(tt*.4*5)},{label:"Rakip Parti yelerinin Yorumu",count:Math.floor(tt*.3),unitPoint:"8 P.",points:Math.floor(tt*.3*8)},{label:"Siyasetilerin Yorumu",count:Math.floor(tt*.1),unitPoint:"20 P.",points:Math.floor(tt*.1*20)}]},shares:{title:"Paylam Puanlar",icon:e.jsx(oi,{className:"w-5 h-5"}),total:Math.floor(it*50),details:[{label:"D Paylamlar (Sosyal Medya)",count:Math.floor(it*.7),unitPoint:"50 P.",points:Math.floor(it*.7*50)},{label:"Platform i Paylamlar",count:Math.floor(it*.3),unitPoint:"25 P.",points:Math.floor(it*.3*25)}]}},ba=Object.values(Ft).reduce((te,be)=>te+(Number(be.total)||0),0),Gt=Math.floor(ba*.1);Ft.engagement={title:"Etkileim Bonusu",icon:e.jsx(er,{className:"w-5 h-5"}),total:Gt,details:[{label:"Gndem Oluturma Bonusu",count:1,unitPoint:"".concat(Math.floor(Gt*.5)," P."),points:Math.floor(Gt*.5)},{label:"Hzl Etkileim Bonusu",count:1,unitPoint:"".concat(Math.floor(Gt*.3)," P."),points:Math.floor(Gt*.3)},{label:"eitli Kitleden Etkileim",count:1,unitPoint:"".concat(Math.floor(Gt*.2)," P."),points:Math.floor(Gt*.2)}]};const Ta=ba+Gt;return{breakdown:Ft,totalCalculated:Ta,storedScore:Pt}},[ae.view_count,ae.like_count,ae.comment_count,ae.share_count,ae.polit_score]);m.useEffect(()=>{!K||!Be||(At.openEdit&&!ya&&(Ie(ae.content_text||""),kt(!0)),At.openDelete&&!nt&&ee(!0))},[K,Be,At.openEdit,At.openDelete]);const J=async()=>{if(ae.post_id){if(!u){s("/login-new");return}je(he=>he+1);try{const he=await Ma.like(ae.post_id);if(he!=null&&he.success){const Ge=await Ma.getById(ae.post_id);f(Ge!=null&&Ge.data?Ge.data:Ge)}}catch(he){console.error(he)}}},xe=async()=>{var Ge;if(!ae.post_id)return;if(!u){s("/login-new");return}if(!c){T("Yorumlar u anda kapal.");return}if(y)return;const he=k.trim();if(he){if(he.length>300){T("Yorum en fazla 300 karakter olabilir.");return}try{T(""),S(""),p(!0);const tt=await Ma.addComment(ae.post_id,he);_("");const it=await Ma.getComments(ae.post_id).catch(()=>null),Pt=((Ge=it==null?void 0:it.data)==null?void 0:Ge.data)||(it==null?void 0:it.data)||it||[];b(Array.isArray(Pt)?Pt:[]),tt!=null&&tt.message&&S(String(tt.message))}catch(tt){console.error(tt),T((tt==null?void 0:tt.message)||"Yorum gnderilemedi.")}finally{p(!1)}}},qe=Date.now(),ot=m.useMemo(()=>d!=null&&d.id?(v||[]).filter(he=>{var Ge;return String(he.user_id||((Ge=he.user)==null?void 0:Ge.id))===String(d.id)}).length:0,[v,d==null?void 0:d.id]),dt=he=>{var tt;if(!(d!=null&&d.id)||String(he.user_id||((tt=he.user)==null?void 0:tt.id))!==String(d.id))return!1;const Ge=new Date(he.created_at||0).getTime();return Number.isFinite(Ge)?qe-Ge<=600*1e3:!1},Et=he=>!!(he!=null&&he.is_deleted),Ct=(()=>{try{return"".concat(window.location.origin,"/post/").concat(ae.post_id)}catch(he){return"/post/".concat(ae.post_id)}})(),oa=async he=>{var tt;const Ge=String(he||"");if(!Ge)return!1;try{if((tt=navigator==null?void 0:navigator.clipboard)!=null&&tt.writeText)return await navigator.clipboard.writeText(Ge),!0}catch(it){}try{const it=document.createElement("textarea");it.value=Ge,it.setAttribute("readonly","true"),it.style.position="fixed",it.style.left="-9999px",document.body.appendChild(it),it.select();const Pt=document.execCommand("copy");return document.body.removeChild(it),Pt}catch(it){return!1}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"container-main py-8",children:C?e.jsx("div",{className:"text-center",children:"Ykleniyor..."}):ce||!g?e.jsx("div",{className:"text-center text-gray-700",children:ce||"Paylam bulunamad."}):e.jsxs("div",{ref:ut,className:"mx-auto w-full max-w-[410px]",children:[e.jsxs("div",{className:"card mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsxs("button",{type:"button",onClick:()=>{Je&&s(Je)},className:"flex items-center gap-4 flex-1 min-w-0 text-left",title:"Profili grntle",children:[e.jsx(Yt,{src:((Rs=ae.user)==null?void 0:Rs.avatar_url)||((_r=ae.user)==null?void 0:_r.profile_image),size:"60px",verified:za(ae.user)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"font-bold text-lg break-words",children:(Os=ae.user)==null?void 0:Os.full_name}),(Sr=ae.user)!=null&&Sr.party_id&&((ar=(xr=ae.user)==null?void 0:xr.party)!=null&&ar.short_name||(zs=(Dr=ae.user)==null?void 0:Dr.party)!=null&&zs.party_short_name)?e.jsx("button",{type:"button",onClick:he=>{he.stopPropagation(),s("/party/".concat(ae.user.party_id))},className:"inline-flex",title:"Parti sayfasna git",children:e.jsx(ln,{variant:"secondary",size:"small",children:ae.user.party.short_name||ae.user.party.party_short_name})}):null,(()=>{var Ge,tt;const he=((Ge=ae.user)==null?void 0:Ge.city_code)||_N((tt=ae.user)==null?void 0:tt.province)||null;return he?e.jsx("button",{type:"button",onClick:it=>{it.stopPropagation(),s("/city/".concat(he))},className:"inline-flex items-center justify-center px-2 py-1 bg-gray-900 hover:bg-primary-blue text-white text-[11px] font-black rounded-full transition-colors",title:"ehir sayfasna git",children:he}):null})()]}),e.jsx("p",{className:"text-sm text-gray-500 break-words",children:Nt})]})]}),ae.user_id?e.jsx(No,{targetUserId:ae.user_id,size:"md"}):e.jsx(Va,{variant:"outline",onClick:()=>{Je&&s(Je)},children:"Takip Et"})]}),e.jsxs("div",{className:"mb-4",children:[ae.content_type==="text"&&e.jsxs("div",{className:"border-t border-gray-300 pt-6",children:[e.jsx("div",{ref:ct,className:"rounded-xl border border-gray-200 bg-white p-4 text-gray-900 whitespace-pre-wrap",style:{maxHeight:Ne>0?"".concat(Math.round(Ne*2),"px"):void 0,overflowY:"auto",fontSize:"".concat(Math.round(24*Math.max(.75,Math.min(1.6,Number(We)||1))),"px"),lineHeight:1.5},children:ae.content_text}),e.jsx("div",{className:"mt-3 rounded-xl border border-gray-200 bg-white px-3 py-2",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",className:"w-11 h-11 rounded-lg border border-gray-200 hover:bg-gray-50 flex items-center justify-center text-gray-900",title:"Yazy klt","aria-label":"Yazy klt",onClick:()=>Ye(he=>Math.max(.75,Number(he||1)-.1)),children:e.jsx(yj,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",className:"w-11 h-11 rounded-lg border border-gray-200 hover:bg-gray-50 flex items-center justify-center text-gray-900",title:"Yazy byt","aria-label":"Yazy byt",onClick:()=>Ye(he=>Math.min(1.6,Number(he||1)+.1)),children:e.jsx(As,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",className:"w-11 h-11 rounded-lg border border-gray-200 hover:bg-gray-50 flex items-center justify-center text-gray-900",title:"Yazdr","aria-label":"Yazdr",onClick:()=>{var he;try{const Ge=String(ae.content_text||"").trim(),tt=ba=>String(ba||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),it='<!doctype html><html><head><meta charset="utf-8"><title>Polithane</title><style>body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;white-space:pre-wrap;line-height:1.5;padding:24px}</style></head><body>'.concat(tt(Ge),"</body></html>"),Pt=document.createElement("iframe");Pt.style.position="fixed",Pt.style.right="0",Pt.style.bottom="0",Pt.style.width="0",Pt.style.height="0",Pt.style.border="0",Pt.setAttribute("aria-hidden","true"),document.body.appendChild(Pt);const Ft=(he=Pt.contentWindow)==null?void 0:he.document;if(!Ft)return;Ft.open(),Ft.write(it),Ft.close(),setTimeout(()=>{var ba,Gt,Ta,te;try{(Gt=(ba=Pt.contentWindow)==null?void 0:ba.focus)==null||Gt.call(ba),(te=(Ta=Pt.contentWindow)==null?void 0:Ta.print)==null||te.call(Ta)}catch(be){}setTimeout(()=>{var be;try{(be=Pt.remove)==null||be.call(Pt)}catch(Ae){}},600)},120)}catch(Ge){}},children:e.jsx(pj,{className:"w-5 h-5"})})]})})]}),ae.content_type==="image"&&e.jsxs("div",{children:[lt?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative",children:[e.jsx(kN,{src:lt,alt:""}),e.jsx("button",{type:"button",className:"absolute bottom-2 right-2 w-16 h-16 rounded-full bg-black/55 border border-white/20 backdrop-blur-sm flex items-center justify-center text-white hover:bg-black/70",title:"Byt","aria-label":"Byt",onClick:he=>{he.stopPropagation(),gt("image"),Ot(lt),et(!0)},children:e.jsx(Wg,{className:"w-9 h-9"})})]}),mt.length>1&&e.jsx("div",{className:"mb-3 overflow-x-auto",children:e.jsx("div",{className:"flex gap-2 w-max",children:mt.map((he,Ge)=>e.jsx("button",{type:"button",onClick:()=>De(Ge),className:"rounded-lg border ".concat(Ge===bt?"border-primary-blue ring-2 ring-primary-blue/30":"border-gray-200"," flex-shrink-0"),style:{width:88,height:88},title:"Resim ".concat(Ge+1),children:e.jsx("img",{src:he,alt:"",className:"w-full h-full object-cover rounded-lg"})},"".concat(he,"_").concat(Ge)))})})]}):e.jsx("div",{className:"text-gray-500 text-sm mb-3",children:"Resim bulunamad."}),ae.content_text&&e.jsx("p",{className:"text-gray-800",children:ae.content_text})]}),ae.content_type==="video"&&e.jsxs("div",{children:[e.jsx("div",{className:"relative",children:e.jsx(SN,{src:Array.isArray(ae.media_url)?ae.media_url[0]:ae.media_url,autoPlay:!0,overlay:e.jsx("div",{className:"w-full h-full relative",children:e.jsx("button",{type:"button",className:"pointer-events-auto absolute bottom-3 right-3 w-16 h-16 rounded-full bg-black/55 border border-white/20 backdrop-blur-sm flex items-center justify-center text-white hover:bg-black/70",title:"Byt","aria-label":"Byt",onClick:he=>{he.stopPropagation();const Ge=Array.isArray(ae.media_url)?ae.media_url[0]:ae.media_url;gt("video"),Ot(String(Ge||"").trim()),et(!0)},children:e.jsx(Wg,{className:"w-9 h-9"})})})})}),ae.content_text&&e.jsx("p",{className:"text-gray-800 mt-3",children:ae.content_text})]}),ae.content_type==="audio"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(EN,{src:Array.isArray(ae.media_url)?ae.media_url[0]:ae.media_url}),ae.content_text&&e.jsx("p",{className:"text-gray-800 mt-3",children:ae.content_text})]})]}),ae.agenda_tag&&e.jsx("button",{type:"button",className:"mb-4 inline-block",onClick:()=>{Ve&&s("/agenda/".concat(Ve))},title:"Gndem sayfasna git",children:e.jsx(ln,{variant:"primary",children:ae.agenda_tag})}),ae.source_url&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 leading-snug",children:["Bu paylam ",e.jsx("span",{className:"font-semibold",children:mh(ae.source_url)})," adresinden alnm olup otomatik olarak paylalmtr."]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 pt-4 border-t",children:[e.jsxs("button",{onClick:J,className:"relative flex items-center justify-center gap-2 bg-gradient-to-br from-red-500 via-pink-500 to-red-600 hover:from-red-600 hover:via-pink-600 hover:to-red-700 text-white py-2.5 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(xd,{trigger:oe,sizeClass:"w-12 h-12"}),e.jsx(Or,{className:"w-7 h-7 md:w-6 md:h-6",fill:"currentColor"}),e.jsxs("span",{className:"text-base md:text-sm font-black tracking-tight",children:["BEEN (",hs(ae.like_count),")"]})]}),e.jsxs("button",{onClick:()=>{var he;(he=Zt.current)==null||he.scrollIntoView({behavior:"smooth",block:"start"}),setTimeout(()=>{var Ge,tt;return(tt=(Ge=Xt.current)==null?void 0:Ge.focus)==null?void 0:tt.call(Ge)},250)},className:"flex items-center justify-center gap-2 bg-gradient-to-br from-primary-blue to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-2.5 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(Dn,{className:"w-7 h-7 md:w-6 md:h-6"}),e.jsxs("span",{className:"text-base md:text-sm font-black tracking-tight",children:["YORUM (",hs(ae.comment_count),")"]})]}),e.jsxs("button",{onClick:async()=>{Ke(!1);try{u&&ae.post_id&&await Ma.share(ae.post_id)}catch(he){}V(!0)},className:"flex items-center justify-center gap-2 bg-gradient-to-br from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-2.5 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:[e.jsx(oi,{className:"w-7 h-7 md:w-6 md:h-6"}),e.jsxs("span",{className:"text-base md:text-sm font-black tracking-tight",children:["PAYLA (",hs(ae.share_count||0),")"]})]})]}),e.jsx("div",{className:"flex justify-end mt-3",children:e.jsxs("button",{type:"button",onClick:()=>{ke(!0),Le("spam"),Qe(""),$t(!1)},className:"inline-flex items-center gap-2 px-3 py-2 rounded-xl text-gray-500 hover:text-red-600 hover:bg-red-50 text-sm font-black transition-colors",children:[e.jsx(sn,{className:"w-7 h-7 md:w-6 md:h-6"}),e.jsx("span",{className:"tracking-tight",children:"ikayet Et"})]})}),Be&&e.jsxs("div",{className:"flex justify-end gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>{Ie(String(ae.content_text||"")),kt(!0)},className:"px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-800 font-bold",children:"Dzenle"}),e.jsx("button",{type:"button",onClick:()=>ee(!0),className:"px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-bold",children:"Sil"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("div",{className:"text-3xl font-bold text-primary-blue",children:Ra(ae.polit_score)})}),e.jsx(Va,{variant:"outline",onClick:()=>N(!0),children:"Detayl Hesaplama"})]})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Yorumlar (",v.length,")"]}),e.jsx("div",{ref:Zt,className:"mb-6 pb-6 border-b scroll-mt-24",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Yt,{src:(d==null?void 0:d.avatar_url)||(d==null?void 0:d.profile_image),size:"40px"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("textarea",{ref:Xt,value:k,onChange:he=>_(he.target.value),placeholder:"Yorumunuzu yazn...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue",rows:"3",maxLength:300}),e.jsxs("div",{className:"mt-2 flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[300-((k==null?void 0:k.length)||0)," karakter kald  ",ot,"/3 yorum"]}),e.jsx(Va,{className:"mt-0",onClick:xe,disabled:y||!k.trim(),children:y?"Kaydediliyor":"Gnder"})]}),A&&e.jsx("div",{className:"mt-2 text-sm text-gray-700 font-semibold",children:A}),M&&e.jsx("div",{className:"mt-2 text-sm text-red-600 font-semibold",children:M})]})]})}),e.jsx("div",{className:"space-y-4",children:v.map(he=>{var Ge,tt,it;return e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Yt,{src:((Ge=he.user)==null?void 0:Ge.avatar_url)||((tt=he.user)==null?void 0:tt.profile_image),size:"40px",verified:za(he.user)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 pr-9",children:[e.jsx("span",{className:"font-semibold",children:(it=he.user)==null?void 0:it.full_name}),e.jsx("span",{className:"text-sm text-gray-500",children:ui(he.created_at)})]}),e.jsx("button",{type:"button",className:"absolute right-0 top-0 text-gray-400 hover:text-red-600 transition-colors",onClick:()=>{G(he),$("spam"),Y(""),q(!1)},title:"Bildir",children:e.jsx(sn,{className:"w-7 h-7"})})]}),ie===(he.id||he.comment_id)?e.jsxs("div",{className:"mb-2",children:[e.jsx("textarea",{value:ye,onChange:Pt=>z(Pt.target.value),maxLength:300,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue"}),e.jsxs("div",{className:"mt-2 flex items-center justify-end gap-2",children:[e.jsx("button",{className:"px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 font-semibold",onClick:()=>{le(null),z("")},type:"button",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Vazge"]})}),e.jsx("button",{className:"px-3 py-2 rounded-lg bg-gray-900 hover:bg-black text-white font-black",onClick:async()=>{var Ft;const Pt=ye.trim();if(Pt)try{T(""),S("");const ba=he.id||he.comment_id;E(ba);const Gt=await Ma.updateComment(ba,Pt);le(null),z("");const Ta=await Ma.getComments(ae.post_id).catch(()=>null),te=((Ft=Ta==null?void 0:Ta.data)==null?void 0:Ft.data)||(Ta==null?void 0:Ta.data)||Ta||[];b(Array.isArray(te)?te:[]),Gt!=null&&Gt.message&&S(String(Gt.message))}catch(ba){T((ba==null?void 0:ba.message)||"Yorum gncellenemedi.")}finally{E(null)}},type:"button",disabled:j===(he.id||he.comment_id),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ri,{className:"w-6 h-6 sm:w-5 sm:h-5"}),j===(he.id||he.comment_id)?"Kaydediliyor":"Kaydet"]})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-2 ".concat(Et(he)?"text-gray-400 italic":"text-gray-800"),children:he.content||he.comment_text}),Et(he)&&e.jsx("div",{className:"mb-2 text-xs text-gray-500",children:"Bu mesaj gvenlik nlemleri nedeniyle sistem tarafndan onaylanana kadar dier kullanclara gsterilmez."})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[dt(he)&&ie!==(he.id||he.comment_id)&&e.jsx("button",{type:"button",className:"px-3 py-2 rounded-xl border border-gray-200 bg-white hover:bg-gray-50 text-sm font-black text-gray-800",onClick:()=>{T(""),le(he.id||he.comment_id),z(String(he.content||he.comment_text||""))},title:"Dzenle (10 dk)",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bj,{className:"w-5 h-5"}),"Dzenle"]})}),e.jsxs("button",{className:"flex items-center gap-1.5 disabled:opacity-50 ".concat(he.liked_by_me?"text-red-600 hover:text-red-700":"text-red-600/80 hover:text-red-600"),type:"button",disabled:Et(he),onClick:async()=>{try{if(T(""),!u){s("/login-new");return}const Pt=he.id||he.comment_id;if(!Pt)return;const Ft=await Ma.likeComment(Pt);b(ba=>ba.map(Gt=>{var be;if((Gt.id||Gt.comment_id)!==Pt)return Gt;const te=(Ft==null?void 0:Ft.action)==="liked"?!0:(Ft==null?void 0:Ft.action)==="unliked"?!1:!Gt.liked_by_me;return{...Gt,like_count:(be=Ft==null?void 0:Ft.like_count)!=null?be:Gt.like_count,liked_by_me:te}}))}catch(Pt){T((Pt==null?void 0:Pt.message)||"Beeni ilemi baarsz.")}},title:Et(he)?"Bu yorum incelemede":"Been",children:[e.jsx(Or,{className:"w-7 h-7",fill:he.liked_by_me?"currentColor":"none"}),e.jsx("span",{className:"text-lg font-black text-gray-800",children:hs(he.like_count)})]})]})]})]},he.id||he.comment_id)})})]})]})}),e.jsx(qs,{isOpen:w,onClose:()=>N(!1),title:"Polit Puan Detayl Hesaplama",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-blue to-blue-600 text-white p-5 rounded-2xl",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs font-black tracking-widest opacity-90",children:"TOPLAM POLT PUAN"}),e.jsx("div",{className:"text-4xl font-black mt-2",children:Ra(H.storedScore)}),e.jsxs("div",{className:"text-xs opacity-90 mt-2",children:["Kalem kalem hesaplanan (yaklak): ",Ra(H.totalCalculated)]})]})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-4 flex items-start gap-3",children:[e.jsx("div",{className:"bg-primary-blue rounded-full p-2 flex-shrink-0",children:e.jsx(ts,{className:"w-6 h-6 sm:w-5 sm:h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:"effaflk"}),e.jsx("div",{className:"text-xs text-gray-700 leading-relaxed mt-1",children:"Aadaki liste, puann hangi kalemlerden olutuunu anlalr ekilde gsterir. (Dalm, ekranda effaf anlatm amaldr; nihai skor sunucuda hesaplanp saklanr.)"})]})]}),e.jsx("div",{className:"space-y-3",children:Object.entries(H.breakdown).map(([he,Ge])=>e.jsxs("div",{className:"border border-gray-200 rounded-2xl overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>jt(Bt===he?null:he),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-primary-blue",children:Ge.icon}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-black text-gray-900",children:Ge.title}),e.jsx("div",{className:"text-xs text-gray-500",children:"Toplam katk"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-black text-primary-blue",children:Ra(Ge.total)}),e.jsx("div",{className:"text-xs text-gray-500",children:Bt===he?"Gizle ":"Detay "})]})]}),Bt===he&&e.jsx("div",{className:"bg-white p-4 space-y-2 border-t border-gray-200",children:Ge.details.map((tt,it)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-blue-50 border border-blue-100",children:[e.jsxs("div",{className:"min-w-0 pr-3",children:[e.jsx("div",{className:"text-sm font-bold text-gray-900 truncate",children:tt.label}),e.jsxs("div",{className:"text-xs text-gray-600",children:[hs(tt.count)," adet  ",tt.unitPoint]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsx("div",{className:"text-base font-black text-primary-blue",children:Ra(tt.points)})})]},it))})]},he))})]})}),X&&e.jsx(qs,{isOpen:!0,onClose:()=>G(null),title:"Yorumu Bildir",children:Q?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-800 font-semibold",children:"Bildiriminiz alnd. nceleme sonras gerekli ilem yaplacaktr."}),e.jsx(Va,{onClick:()=>G(null),children:"Kapat"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Neden bildirmek istiyorsunuz?"}),e.jsxs("select",{value:D,onChange:he=>$(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"spam",children:"Spam"}),e.jsx("option",{value:"hakaret",children:"Hakaret / Kfr"}),e.jsx("option",{value:"taciz",children:"Taciz / Nefret"}),e.jsx("option",{value:"yaniltici",children:"Yanltc bilgi"}),e.jsx("option",{value:"zararli_link",children:"Zararl link"}),e.jsx("option",{value:"diger",children:"Dier"})]}),e.jsx("textarea",{value:B,onChange:he=>Y(he.target.value),rows:3,placeholder:"sterseniz ksa bir aklama ekleyin (opsiyonel)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Va,{variant:"outline",onClick:()=>G(null),children:"Vazge"}),e.jsx(Va,{onClick:async()=>{try{T("");const he=X.id||X.comment_id;await Ma.reportComment(he,D,B),q(!0)}catch(he){T((he==null?void 0:he.message)||"ikayet gnderilemedi."),G(null)}},children:"Gnder"})]})]})}),e.jsx(qs,{isOpen:I,onClose:()=>V(!1),title:"Payla",children:e.jsxs("div",{className:"space-y-4",children:[(()=>{var Gt;const he=String(((Gt=ae==null?void 0:ae.user)==null?void 0:Gt.full_name)||"").trim(),Ge=String((ae==null?void 0:ae.agenda_tag)||"").trim(),tt=Ra((ae==null?void 0:ae.polit_score)||0),it=String((ae==null?void 0:ae.content_text)||(ae==null?void 0:ae.content)||"").trim(),Pt=it?it.length>160?"".concat(it.slice(0,160),""):it:"Bir polit paylald.",Ft=[he?"".concat(he):null,Ge?"Gndem: ".concat(Ge):null,"Polit Puan: ".concat(tt),"",Pt,"","Polithane'de gr: ".concat(Ct)].filter(Ta=>Ta!==null).join("\n"),ba=encodeURIComponent(Ft);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Paylam metni:",e.jsx("div",{className:"mt-2 p-3 rounded-lg bg-gray-50 border border-gray-200 break-all text-xs text-gray-800",children:Ft})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("a",{href:"https://wa.me/?text=".concat(ba),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#25D366] text-white font-black text-center hover:opacity-90",children:"WhatsApp"}),e.jsx("a",{href:"https://t.me/share/url?url=".concat(encodeURIComponent(Ct),"&text=").concat(ba),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#229ED9] text-white font-black text-center hover:opacity-90",children:"Telegram"}),e.jsx("a",{href:"https://twitter.com/intent/tweet?text=".concat(ba),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-black text-white font-black text-center hover:bg-gray-900",children:"X"}),e.jsx("a",{href:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(Ct)),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#1877F2] text-white font-black text-center hover:opacity-90",children:"Facebook"}),e.jsx("a",{href:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(Ct)),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#0A66C2] text-white font-black text-center hover:opacity-90",children:"LinkedIn"}),e.jsx("button",{type:"button",onClick:async()=>{try{u&&ae.post_id&&await Ma.share(ae.post_id)}catch(te){}const Ta=await oa(Ct);Ke(Ta)},className:"px-4 py-3 rounded-xl border border-gray-300 text-gray-900 font-black hover:bg-gray-50",children:Te?"Link Kopyaland":"Linki Kopyala"}),e.jsx("button",{type:"button",onClick:async()=>{const Ta=await oa(Ft);Ke(Ta)},className:"px-4 py-3 rounded-xl border border-gray-300 text-gray-900 font-black hover:bg-gray-50",children:"Metni Kopyala"})]})]})})(),e.jsx("div",{className:"text-xs text-gray-500",children:"Instagram web zerinden direkt paylam desteklemez; linki kopyalayp Instagramda paylaabilirsiniz."})]})}),fe&&e.jsx(qs,{isOpen:!0,onClose:()=>ke(!1),title:"Paylam ikayet Et",children:It?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-gray-800 font-semibold",children:"Bildiriminiz alnd. nceleme sonras gerekli ilem yaplacaktr."}),e.jsx(Va,{onClick:()=>ke(!1),children:"Kapat"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Neden ikayet etmek istiyorsunuz?"}),e.jsxs("select",{value:$e,onChange:he=>Le(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"spam",children:"Spam"}),e.jsx("option",{value:"hakaret",children:"Hakaret / Kfr"}),e.jsx("option",{value:"taciz",children:"Taciz / Nefret"}),e.jsx("option",{value:"yaniltici",children:"Yanltc bilgi"}),e.jsx("option",{value:"zararli_link",children:"Zararl link"}),e.jsx("option",{value:"diger",children:"Dier"})]}),e.jsx("textarea",{value:St,onChange:he=>Qe(he.target.value),rows:3,placeholder:"sterseniz ksa bir aklama ekleyin (opsiyonel)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Va,{variant:"outline",onClick:()=>ke(!1),children:"Vazge"}),e.jsx(Va,{onClick:async()=>{try{T(""),await Ma.reportPost(ae.post_id,$e,St),$t(!0)}catch(he){T((he==null?void 0:he.message)||"ikayet gnderilemedi."),ke(!1)}},children:"Gnder"})]})]})}),e.jsx(qs,{isOpen:ya,onClose:()=>kt(!1),title:"Paylam Dzenle",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("textarea",{value:de,onChange:he=>Ie(he.target.value),rows:6,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue",maxLength:5e3}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[5e3-((de==null?void 0:de.length)||0)," karakter kald"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Va,{variant:"outline",onClick:()=>kt(!1),disabled:Pe,children:"Vazge"}),e.jsx(Va,{onClick:async()=>{const he=String(de||"").trim();if(!he){T("erik bo olamaz.");return}F(!0);try{T("");const Ge=await Ma.update(ae.post_id,{content_text:he});if(Ge!=null&&Ge.success&&(Ge!=null&&Ge.data))f(Ge.data);else{const tt=await Ma.getById(ae.post_id);f(tt!=null&&tt.data?tt.data:tt)}kt(!1)}catch(Ge){T((Ge==null?void 0:Ge.message)||"Paylam gncellenemedi.")}finally{F(!1)}},disabled:Pe,children:Pe?"Kaydediliyor":"Kaydet"})]})]})]})}),e.jsx(qs,{isOpen:nt,onClose:()=>ee(!1),title:"Paylam Sil",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-800",children:"Bu paylam silmek istediinize emin misiniz? Bu ilem geri alnamaz."}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(Va,{variant:"outline",onClick:()=>ee(!1),children:"Vazge"}),e.jsx(Va,{onClick:async()=>{try{T(""),await Ma.delete(ae.post_id),ee(!1),s("/")}catch(he){T((he==null?void 0:he.message)||"Paylam silinemedi."),ee(!1)}},children:"Sil"})]})]})}),st&&(Se==="image"||Se==="video")?e.jsx("div",{className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>{et(!1),Ot(""),gt("")},children:e.jsxs("div",{className:"relative bg-black rounded-2xl border border-white/15 overflow-hidden",style:{width:"100%",maxWidth:typeof window<"u"?Math.min(window.innerWidth-24,Math.max(320,(ue||410)*2.5)):Math.max(320,(ue||410)*2.5),maxHeight:typeof window<"u"?window.innerHeight-40:void 0},onClick:he=>he.stopPropagation(),children:[e.jsx("div",{className:"absolute top-3 right-3 z-20",children:e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 px-3 py-2 rounded-full bg-black/55 border border-white/20 text-white font-black hover:bg-black/70",onClick:()=>{et(!1),Ot(""),gt("")},children:["Kapat ",e.jsx(xs,{className:"w-5 h-5"})]})}),e.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:Se==="image"?e.jsx("img",{src:Ut,alt:"",className:"max-w-full max-h-[85vh] w-auto h-auto object-contain"}):e.jsx("video",{src:Ut,className:"max-w-full max-h-[85vh] w-auto h-auto object-contain",controls:!0,playsInline:!0,autoPlay:!0})})]})}):null]})},AN=({isOpen:r,onClose:s,userId:l,tab:i="followers"})=>{const d=Qt(),{user:u}=Pa(),[c,g]=m.useState(i),[f,v]=m.useState(!1),[b,w]=m.useState([]),[N,k]=m.useState([]),[_,M]=m.useState({}),T=(()=>{const S=String(l||"").trim();return S?S==="me"||S==="currentUser"?String((u==null?void 0:u.id)||""):S:""})();m.useEffect(()=>{r&&g(i)},[r,i]),m.useEffect(()=>{!r||!T||(async()=>{var S;v(!0);try{const y=c==="followers"?await us.getFollowers(T,{limit:200,offset:0}):await us.getFollowing(T,{limit:200,offset:0}),p=(y==null?void 0:y.data)||((S=y==null?void 0:y.data)==null?void 0:S.data)||y||[];c==="followers"?w(Array.isArray(p)?p:[]):k(Array.isArray(p)?p:[])}catch(y){c==="followers"?w([]):k([])}finally{v(!1)}})()},[r,T,c]);const A=c==="followers"?b:N;return m.useEffect(()=>{if(!r||!(u!=null&&u.id))return;const S=Array.isArray(A)?A:[];if(S.length===0)return;let y=!1;return(async()=>{try{const p=S.slice(0,30),j={};for(const E of p){const C=String((E==null?void 0:E.user_id)||(E==null?void 0:E.id)||"").trim();if(!C)continue;const O=await us.getFollowedByFriends(C,{limit:3}).catch(()=>null),P=O!=null&&O.data&&typeof O.data=="object"?O.data:null,L=Number((P==null?void 0:P.count)||0)||0,ce=Array.isArray(P==null?void 0:P.friends)?P.friends:[];j[C]={count:L,friends:ce}}y||M(j)}catch(p){y||M({})}})(),()=>{y=!0}},[A,r,u==null?void 0:u.id]),r?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[600px] flex flex-col",onClick:S=>S.stopPropagation(),children:[e.jsxs("div",{className:"border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:c==="followers"?"Takipiler":"Takip Edilenler"}),e.jsx("button",{onClick:s,className:"hover:bg-gray-100 rounded-full p-2 transition-colors",children:e.jsx(xs,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex border-t border-gray-200",children:[e.jsx("button",{onClick:()=>g("followers"),className:"flex-1 px-4 py-3 text-sm font-semibold transition-colors ".concat(c==="followers"?"border-b-2 border-primary-blue text-primary-blue":"text-gray-600 hover:bg-gray-50"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(ts,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Takipiler (",b.length,")"]})}),e.jsx("button",{onClick:()=>g("following"),className:"flex-1 px-4 py-3 text-sm font-semibold transition-colors ".concat(c==="following"?"border-b-2 border-primary-blue text-primary-blue":"text-gray-600 hover:bg-gray-50"),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Wc,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Takip (",N.length,")"]})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:f?e.jsx("div",{className:"text-sm text-gray-600",children:"Ykleniyor"}):A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:c==="followers"?e.jsx(ts,{className:"w-10 h-10 text-gray-400"}):e.jsx(Wc,{className:"w-10 h-10 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium",children:c==="followers"?"Henz takipi yok":"Henz kimse takip edilmiyor"})]}):e.jsx("div",{className:"space-y-3",children:A.map(S=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{onClick:()=>{d(as(S)),s()},className:"cursor-pointer",children:e.jsx(Yt,{src:S.avatar_url||S.profile_image,size:"48px",verified:za(S)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{onClick:()=>{d(as(S)),s()},className:"font-semibold text-sm text-gray-900 hover:text-primary-blue cursor-pointer truncate",children:S.full_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:ms(S,!0)}),(()=>{const y=String((S==null?void 0:S.user_id)||(S==null?void 0:S.id)||"").trim(),p=y?_==null?void 0:_[y]:null,j=Array.isArray(p==null?void 0:p.friends)?p.friends:[],E=String(T||"").trim(),C=E?j.filter(Z=>String((Z==null?void 0:Z.id)||"").trim()!==E):j,O=E&&C.length!==j.length?1:0;j.map(Z=>String((Z==null?void 0:Z.full_name)||(Z==null?void 0:Z.username)||"").trim()).filter(Boolean).slice(0,2);const P=C.map(Z=>String((Z==null?void 0:Z.full_name)||(Z==null?void 0:Z.username)||"").trim()).filter(Boolean).slice(0,2),L=Math.max(0,(Number((p==null?void 0:p.count)||0)||0)-(O?1:0)),ce=Math.max(0,L-C.length);return!p||L<=0?null:e.jsx("div",{className:"text-[11px] text-gray-600 mt-0.5 line-clamp-1",children:P.length>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-semibold",children:P.join(", ")}),ce>0?e.jsxs("span",{className:"font-semibold",children:[" ve ",ce," kii daha"]}):null,e.jsx("span",{className:"font-semibold",children:" takip ediyor"})]}):e.jsxs("span",{className:"font-semibold",children:[L," kii takip ediyor"]})})})()]}),e.jsx("div",{className:"flex-shrink-0",children:String(S.user_id||S.id||"")===String((u==null?void 0:u.id)||"")?null:e.jsx(No,{targetUserId:S.user_id||S.id,size:"sm"})})]},S.user_id||S.id))})})]})}):null},CN=({isOpen:r,onClose:s,user:l,onConfirm:i})=>!r||!l?null:e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:s,children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md p-6",onClick:d=>d.stopPropagation(),children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(gi,{className:"w-8 h-8 text-red-600"})})}),e.jsxs("div",{className:"flex items-center gap-3 justify-center mb-6",children:[e.jsx(Yt,{src:l.avatar_url||l.profile_image,size:"48px",verified:za(l)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:l.full_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",l.username||l.user_id]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 text-center",children:"Bu kullancy engellemek istediinize emin misiniz?"}),e.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ti,{className:"w-6 h-6 sm:w-5 sm:h-5 mt-0.5 flex-shrink-0 text-red-500"}),e.jsx("span",{children:"Sizi takip edemeyecek ve paylamlarnz gremeyecek"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ti,{className:"w-6 h-6 sm:w-5 sm:h-5 mt-0.5 flex-shrink-0 text-red-500"}),e.jsx("span",{children:"Size mesaj gnderemeyecek"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ti,{className:"w-6 h-6 sm:w-5 sm:h-5 mt-0.5 flex-shrink-0 text-red-500"}),e.jsx("span",{children:"Paylamlarnza yorum yapamayacak"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:s,className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-700 py-3 rounded-lg font-semibold transition-colors",children:"ptal"}),e.jsxs("button",{onClick:()=>{const d=l.user_id||l.id;i(d),s()},className:"flex-1 bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[e.jsx(ti,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Engelle"]})]})]})}),wm=r=>r?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r):!1,g0=r=>{if(!r)return"";const s={:"c",:"c",:"g",:"g",:"i",:"i",:"o",:"o",:"s",:"s",:"u",:"u"};let l=r.trim().split("").map(i=>{var d;return(d=s[i])!=null?d:i}).join("").toLowerCase();return l=l.replace(/^@+/,""),l=l.replace(/[\s-]+/g,"_"),l=l.replace(/[^a-z0-9_]/g,""),l=l.replace(/_+/g,"_").replace(/^_+|_+$/g,""),l=l.slice(0,20),l.length>0&&l.length<3&&(l=(l+"___").slice(0,3)),l&&!/^[a-z]/.test(l)&&(l="u".concat(l).slice(0,20)),l},y0=r=>{if(!r)return!1;const s=r.replace(/\s/g,"");return/^05\d{9}$/.test(s)},Im=(r,s)=>!r||!s?!1:s.includes(r.type),qm=(r,s)=>{if(!r||!s)return!1;const l=s*1024*1024;return r.size<=l},Py=r=>String(r||"").trim().toLowerCase("tr-TR").replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/\s+/g," "),MN=(()=>{const r=new Map;return Object.entries(xl).forEach(([s,l])=>{r.set(Py(l),s)}),r})(),_m=()=>{var Ye,ct,Ne,Xe,ut;const{userId:r,username:s}=Bn(),l=Qt(),i=tr(),d=zr(),{user:u}=Pa(),[c,g]=m.useState(null),[f,v]=m.useState([]),[b,w]=m.useState("posts"),[N,k]=m.useState(!1),[_,M]=m.useState("followers"),[T,A]=m.useState(!1),[S,y]=m.useState(!1),[p,j]=m.useState({followers_count:0,following_count:0}),[E,C]=m.useState([]),[O,P]=m.useState(0),[L,ce]=m.useState(!0),[Z,ie]=m.useState(!1),[le,ye]=m.useState(""),[z,X]=m.useState(!1),[G,D]=m.useState(""),[$,B]=m.useState([]),[Y,Q]=m.useState(!1),[q,I]=m.useState(!1),[V,Te]=m.useState([]),[Ke,oe]=m.useState([]),[je,fe]=m.useState([]),[ke,$e]=m.useState(!1),[Le,St]=m.useState(!1),[Qe,It]=m.useState("spam"),[$t,Zt]=m.useState(""),[Xt,ya]=m.useState(!1),[kt,de]=m.useState(!1),Ie=m.useMemo(()=>{const ue=String(r||"").trim(),rt=String(s||"").trim();return"profile:".concat(ue||"-",":").concat(rt||"-")},[r,s]),Pe=m.useMemo(()=>wr(Ie,{maxAgeMs:10*6e4}),[Ie]),F=m.useMemo(()=>{if(!u)return!1;const ue=String(u.id||u.user_id||"").trim(),rt=(c==null?void 0:c.user_id)!=null?c.user_id:(c==null?void 0:c.id)!=null?c.id:r==="me"?ue:r,st=String(rt||"").trim();return ue&&st&&ue===st||r==="me"||ue&&String(r||"").trim()===ue?!0:g0(s||"")===g0(u.username||"")},[u,c==null?void 0:c.user_id,c==null?void 0:c.id,r,s]);m.useEffect(()=>{if(Pe)try{Pe.user&&g(Pe.user),Array.isArray(Pe.userPosts)&&v(Pe.userPosts),Pe.followStats&&j(Pe.followStats),Array.isArray(Pe.friendsFollowing)&&C(Pe.friendsFollowing),Pe.friendsFollowingCount!==void 0&&P(Number(Pe.friendsFollowingCount||0)||0),Pe.privacyBlocked!==void 0&&X(!!Pe.privacyBlocked),Pe.privacyMessage!==void 0&&D(String(Pe.privacyMessage||"")),Array.isArray(Pe.blockedIds)&&B(Pe.blockedIds),Pe.activeTab&&w(String(Pe.activeTab)),Pe.hasFast!==void 0&&$e(!!Pe.hasFast),ce(!1),ie(!0),d==="POP"&&typeof Pe.scrollY=="number"&&setTimeout(()=>{try{window.scrollTo(0,Math.max(0,Number(Pe.scrollY)||0))}catch(ue){}},0)}catch(ue){}},[Ie]),m.useEffect(()=>{if(d!=="POP")try{window.scrollTo({top:0,left:0,behavior:"auto"})}catch(ue){}},[r,s,d]);const nt=m.useMemo(()=>{if(F||!c)return!1;const ue=c&&typeof c.metadata=="object"&&c.metadata?c.metadata:{},rt=ue.privacy_settings&&typeof ue.privacy_settings=="object"?ue.privacy_settings:{},st=String(rt.allowMessages||"everyone");return st==="none"?!1:st==="everyone"?!0:st==="followers"?!!(p!=null&&p.is_following):st==="following"?!!(p!=null&&p.is_followed_by):!0},[c,F,p==null?void 0:p.is_following,p==null?void 0:p.is_followed_by]),ee=m.useMemo(()=>{if(!(c!=null&&c.id)&&!(c!=null&&c.user_id))return!1;const ue=String(c.user_id||c.id);return($||[]).map(String).includes(ue)},[$,c]);if(m.useEffect(()=>{(async()=>{var st,et,Ut,Ot,Se,gt,Bt;!!Pe?ie(!0):ce(!0),ye(""),X(!1),D("");try{let jt;const Vt=Be=>{var mt,bt,lt,At,H,J,xe,qe,ot;return Be?{...Be,user_id:(mt=Be.user_id)!=null?mt:Be.id,username:ol(Be),verification_badge:(lt=(bt=Be.verification_badge)!=null?bt:Be.is_verified)!=null?lt:!1,profile_image:(At=Be.profile_image)!=null?At:Be.avatar_url,party:Be.party?{party_id:(H=Be.party.party_id)!=null?H:Be.party.id,party_slug:(J=Be.party.party_slug)!=null?J:Be.party.slug,party_short_name:(xe=Be.party.party_short_name)!=null?xe:Be.party.short_name,party_logo:(qe=Be.party.party_logo)!=null?qe:Be.party.logo_url,party_color:(ot=Be.party.party_color)!=null?ot:Be.party.color}:null}:null},ia=Be=>{var mt,bt;return Be?{post_id:(mt=Be.post_id)!=null?mt:Be.id,user_id:Be.user_id,content_type:Be.content_type,content_text:Be.content_text,media_url:(bt=Be.media_url)!=null?bt:Be.media_urls,thumbnail_url:Be.thumbnail_url,media_duration:Be.media_duration,agenda_tag:Be.agenda_tag,polit_score:Be.polit_score,view_count:Be.view_count,like_count:Be.like_count,dislike_count:Be.dislike_count,comment_count:Be.comment_count,share_count:Be.share_count,is_featured:Be.is_featured,created_at:Be.created_at,source_url:Be.source_url,user:Be.user?Vt(Be.user):null}:null};if(s){try{jt=await us.getByUsername(s)}catch(Be){console.error("User fetch by username failed:",Be)}if(!jt){ye("Kullanc bulunamad"),ce(!1);return}}else if(r){try{jt=await us.getById(r)}catch(Be){console.error("User fetch by id failed:",Be)}if(!jt){ye("Kullanc bulunamad"),ce(!1);return}}const K=jt!=null&&jt.data?jt.data:jt,se=Vt(K);g(se),$e(!1),C([]),P(0);try{const Be=await us.getBlocks().catch(()=>null),mt=(Be==null?void 0:Be.data)||Be||[];B(Array.isArray(mt)?mt.map(bt=>String(bt)):[])}catch(Be){B([])}const ae=K!=null&&K.metadata&&typeof K.metadata=="object"?K.metadata.privacy_settings:null,Je=(ae==null?void 0:ae.profileVisibility)||"public";!F&&(Je==="private"||Je==="followers")&&(X(!0),D(Je==="private"?"Bu profil gizlidir.":"Bu profil sadece takipilere aktr."));const Nt=as(se),Ve=i.pathname.startsWith("/profile/")||i.pathname.startsWith("/@");if(Nt&&Ve&&i.pathname!==Nt&&l(Nt,{replace:!0}),z)v([]);else{const Be=(st=K==null?void 0:K.id)!=null?st:K==null?void 0:K.user_id;if(Be){const bt=(await Ma.getAll({user_id:Be,limit:50,order:"created_at.desc"})||[]).filter(lt=>!(lt!=null&&lt.is_trending));v(bt.map(ia).filter(Boolean))}else v([])}try{const Be=(Ut=(et=K==null?void 0:K.id)!=null?et:K==null?void 0:K.user_id)!=null?Ut:r;if(Be){const mt=await us.getFollowStats(Be).catch(()=>null),bt=(mt==null?void 0:mt.data)||mt;(bt==null?void 0:bt.followers_count)!==void 0&&j({followers_count:bt.followers_count||0,following_count:bt.following_count||0,is_following:!!bt.is_following,is_followed_by:!!bt.is_followed_by})}}catch(Be){}try{const Be=(Se=(Ot=K==null?void 0:K.id)!=null?Ot:K==null?void 0:K.user_id)!=null?Se:r;if(!F&&(u!=null&&u.id)&&Be){const mt=await re("/api/users/".concat(encodeURIComponent(Be),"/followed-by-friends?limit=3"),{method:"GET"}).catch(()=>null);if(mt!=null&&mt.success){const bt=(mt==null?void 0:mt.data)||{},lt=Array.isArray(bt==null?void 0:bt.friends)?bt.friends:[];C(lt),P(Number((bt==null?void 0:bt.count)||lt.length)||0)}}}catch(Be){}try{const Be=(Bt=(gt=K==null?void 0:K.id)!=null?gt:K==null?void 0:K.user_id)!=null?Bt:r;if(Be){const mt=await re("/api/fast/".concat(encodeURIComponent(Be))).catch(()=>null),bt=(mt==null?void 0:mt.data)||[];$e(Array.isArray(bt)&&bt.length>0)}}catch(Be){$e(!1)}}catch(jt){console.error("Profile load error:",jt),ye("Profil yklenirken bir hata olutu")}finally{ce(!1),ie(!1)}})()},[r,s,Pe]),m.useEffect(()=>{const ue=()=>{cn(Ie,{user:c,userPosts:f,followStats:p,friendsFollowing:E,friendsFollowingCount:O,privacyBlocked:z,privacyMessage:G,blockedIds:$,activeTab:b,hasFast:ke,scrollY:typeof window<"u"?window.scrollY:0})};return()=>ue()},[Ie,c,f,p,E,O,z,G,$,b,ke]),m.useEffect(()=>{var rt;if(!(c!=null&&c.user_id)&&!(c!=null&&c.id))return;const ue=(rt=c.user_id)!=null?rt:c.id;(async()=>{try{if(b==="comments"){I(!0);const st=await us.getComments(ue,{limit:50}).catch(()=>null),et=(st==null?void 0:st.data)||st||[];Te(Array.isArray(et)?et:[])}else if(b==="likes"){I(!0);const st=await us.getLikes(ue,{limit:50}).catch(()=>null),et=(st==null?void 0:st.data)||st||[];oe(Array.isArray(et)?et:[])}else if(b==="activity"){if(!F)return;I(!0);const st=await us.getActivity("me",{limit:80}).catch(()=>null),et=(st==null?void 0:st.data)||st||[];fe(Array.isArray(et)?et:[])}}finally{I(!1)}})()},[b,c==null?void 0:c.user_id,c==null?void 0:c.id,F]),L)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-blue mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Profil ykleniyor..."})]})});if(le||!c)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Kullanc Bulunamad"}),e.jsx("p",{className:"text-gray-600 mb-6",children:le||"Aradnz profil bulunamad."}),e.jsx(Tt,{to:"/",className:"text-primary-blue hover:underline font-semibold",children:"Ana Sayfaya Dn"})]})});const Re=ue=>{(async()=>{try{await us.block(ue),B(rt=>Array.from(new Set([...rt||[],String(ue)])))}catch(rt){console.error(rt),alert((rt==null?void 0:rt.message)||"Engelleme ilemi baarsz.")}})()},De=()=>{A(!1),It("spam"),Zt(""),ya(!1),de(!1),St(!0)},We=async()=>{const ue=String((c==null?void 0:c.user_id)||(c==null?void 0:c.id)||r||"").trim();if(ue){ya(!0);try{const rt=await us.report(ue,Qe,$t);rt!=null&&rt.success?de(!0):alert((rt==null?void 0:rt.error)||"ikayet gnderilemedi.")}catch(rt){alert((rt==null?void 0:rt.message)||"ikayet gnderilemedi.")}finally{ya(!1)}}};return c?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsxs("div",{className:"container-main py-6 md:py-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4 md:gap-6",children:[e.jsx(Yt,{src:c.avatar_url||c.profile_image,size:"96px",verified:za(c),ring:ke?"fast":null,onClick:()=>{if(ke){const ue=(c==null?void 0:c.username)||(c==null?void 0:c.user_id)||(c==null?void 0:c.id);ue&&l("/fast/".concat(encodeURIComponent(String(ue))));return}Q(!0)}}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("h1",{className:"text-xl md:text-3xl font-bold break-words",children:c.full_name}),c.party_id&&((Ye=c.party)==null?void 0:Ye.party_logo)&&e.jsx(Tt,{to:"/party/".concat(c.party.party_slug||c.party.party_id||c.party_id),className:"inline-flex items-center justify-center w-9 h-9 bg-white rounded-full border border-gray-200 shadow-sm",title:c.party.party_short_name||"Parti",children:e.jsx("img",{src:c.party.party_logo,alt:c.party.party_short_name||"Parti",className:"w-7 h-7 object-contain",onError:ue=>{ue.currentTarget.style.display="none"}})}),(()=>{const ue=c.city_code||(c.province?MN.get(Py(c.province)):null),rt=ue?String(parseInt(ue,10)):null;return ue?e.jsx(Tt,{to:"/city/".concat(ue),className:"w-9 h-9 rounded-full bg-gray-900 hover:bg-primary-blue text-white text-xs font-bold flex items-center justify-center transition-colors",title:c.province||"ehir",children:rt}):null})()]}),ms(c)&&e.jsx("p",{className:"text-primary-blue font-semibold text-base md:text-lg mb-2",children:ms(c)}),e.jsxs("p",{className:"text-gray-600 mb-2 break-words",children:["@",c.username]}),c.bio&&e.jsx("p",{className:"text-gray-800 mb-4 break-words",children:c.bio}),c.is_automated&&!F&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(fs,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-blue-900 mb-2",children:"Bu yelik sitemiz tarafndan otomatik olarak oluturulmutur ve paylamlar yapay zeka tarafndan yaplmaktadr."}),e.jsxs("p",{className:"text-sm text-blue-800 font-medium",children:["Bu profil size ait mi?"," ",e.jsx(Tt,{to:"/register-new?mode=claim&claimUserId=".concat(c.user_id),className:"text-primary-blue hover:underline font-semibold",children:"Buraya tklayn ve profilinizin sahipliini aln "})]})]})]})}),e.jsxs("div",{className:"flex flex-wrap gap-6 mt-4",children:[((Ne=(c==null?void 0:c.metadata)&&((ct=c.metadata.privacy_settings)==null?void 0:ct.showFollowers))!=null?Ne:!0)&&e.jsxs("div",{onClick:()=>{M("followers"),k(!0)},className:"cursor-pointer hover:opacity-80 transition-opacity",children:[e.jsx("div",{className:"text-xl font-bold",children:hs(p.followers_count)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Takipi"})]}),((ut=(c==null?void 0:c.metadata)&&((Xe=c.metadata.privacy_settings)==null?void 0:Xe.showFollowing))!=null?ut:!0)&&e.jsxs("div",{onClick:()=>{M("following"),k(!0)},className:"cursor-pointer hover:opacity-80 transition-opacity",children:[e.jsx("div",{className:"text-xl font-bold",children:hs(p.following_count)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Takip"})]}),e.jsxs("div",{onClick:()=>{w("posts")},className:"cursor-pointer hover:opacity-80 transition-opacity",title:"Paylamlar gr",children:[e.jsx("div",{className:"text-xl font-bold",children:hs(c.post_count)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Paylam"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-primary-blue",children:Ra(c.polit_score)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Polit Puan"})]})]}),!F&&O>0?e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-gray-600",children:[e.jsx("div",{className:"flex -space-x-2 flex-shrink-0",children:(E||[]).slice(0,3).map(ue=>e.jsx(Tt,{to:as(ue||{}),className:"rounded-full ring-2 ring-white hover:opacity-90",title:(ue==null?void 0:ue.full_name)||"",children:e.jsx(Yt,{src:ue==null?void 0:ue.avatar_url,size:"20px",verified:za(ue)})},String((ue==null?void 0:ue.id)||"")))}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("span",{className:"font-semibold",children:(E||[]).slice(0,3).map(ue=>ue==null?void 0:ue.full_name).filter(Boolean).join(", ")}),O>Math.min((E||[]).length,3)?e.jsxs("span",{className:"font-semibold",children:[" ve ",O-Math.min((E||[]).length,3)," kii daha"]}):null,e.jsx("span",{className:"font-semibold",children:" takip ediyor"})]})]}):null]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2 w-full md:w-auto md:justify-end",children:F?e.jsxs(e.Fragment,{children:[e.jsx(Tt,{to:"/settings/profile",children:e.jsxs(Va,{variant:"outline",size:"small",className:"w-full sm:w-auto",children:[e.jsx(yi,{className:"w-6 h-6 sm:w-5 sm:h-5 mr-2"}),"Profili Dzenle"]})}),e.jsx(Tt,{to:"/settings",children:e.jsxs(Va,{variant:"outline",size:"small",className:"w-full sm:w-auto",children:[e.jsx(md,{className:"w-6 h-6 sm:w-5 sm:h-5 mr-2"}),"Ayarlar"]})})]}):ee?e.jsx(Va,{variant:"outline",disabled:!0,children:"Engellenmi"}):e.jsxs(e.Fragment,{children:[e.jsx(No,{targetUserId:(c==null?void 0:c.user_id)||r,size:"md"}),nt&&e.jsx("button",{type:"button",className:"bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg p-2 transition-colors",title:"Mesaj Gnder",onClick:()=>{if(!(u!=null&&u.id)){l("/login-new");return}const ue=(c==null?void 0:c.user_id)||(c==null?void 0:c.id)||r;ue&&l("/messages?to=".concat(encodeURIComponent(ue),"&focus=1"))},children:e.jsx(Dn,{className:"w-6 h-6"})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>A(!T),className:"bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg p-2 transition-colors",children:e.jsx(yy,{className:"w-6 h-6"})}),T&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 bg-white rounded-lg shadow-xl border border-gray-200 py-2 min-w-[180px] z-20",children:[e.jsxs("button",{onClick:()=>{y(!0),A(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-red-600 font-medium flex items-center gap-2",children:[e.jsx(ti,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Engelle"]}),e.jsxs("button",{onClick:De,className:"w-full text-left px-4 py-2 hover:bg-gray-100 text-gray-700 font-medium flex items-center gap-2",children:[e.jsx(fs,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"ikayet Et"]})]})]})]})})]}),e.jsx(AN,{isOpen:N,onClose:()=>k(!1),userId:(c==null?void 0:c.user_id)||(c==null?void 0:c.id)||r,tab:_}),e.jsx(CN,{isOpen:S,onClose:()=>y(!1),user:c,onConfirm:Re})]})}),e.jsx(qs,{isOpen:Y,onClose:()=>Q(!1),title:"Profil Fotoraf",size:"medium",className:"overflow-hidden",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:(c==null?void 0:c.avatar_url)||(c==null?void 0:c.profile_image)||"/favicon.ico",alt:(c==null?void 0:c.full_name)||"Profil",className:"max-w-full max-h-[70vh] rounded-2xl object-contain bg-gray-50 border border-gray-200"})})}),e.jsx(qs,{isOpen:Le,onClose:()=>St(!1),title:"Kullancy ikayet Et",children:kt?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-lg font-black text-green-700",children:"Bildiriminiz alnd."}),e.jsx("div",{className:"text-sm text-gray-700",children:"nceleme sonras gerekli ilem yaplacaktr."}),e.jsx(Va,{onClick:()=>St(!1),children:"Kapat"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:"Neden"}),e.jsxs("select",{value:Qe,onChange:ue=>It(ue.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"spam",children:"Spam"}),e.jsx("option",{value:"harassment",children:"Taciz / Hakaret"}),e.jsx("option",{value:"scam",children:"Dolandrclk"}),e.jsx("option",{value:"impersonation",children:"Kimlie brnme"}),e.jsx("option",{value:"other",children:"Dier"})]}),e.jsx("div",{className:"text-sm font-black text-gray-900",children:"Not (opsiyonel)"}),e.jsx("textarea",{value:$t,onChange:ue=>Zt(ue.target.value.slice(0,200)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:4,placeholder:"En fazla 200 karakter"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[200-(($t==null?void 0:$t.length)||0)," karakter kald"]}),e.jsx(Va,{onClick:We,disabled:!Qe||Xt,children:"Gnder"})]})}),e.jsxs("div",{className:"container-main py-6",children:[z&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6 text-center mb-6",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900 mb-2",children:"Bu profil gizli"}),e.jsx("p",{className:"text-gray-600",children:G})]}),e.jsxs("div",{className:"flex gap-4 border-b mb-6",children:[e.jsx("button",{className:"pb-3 px-4 font-medium ".concat(b==="posts"?"text-primary-blue border-b-2 border-primary-blue":"text-gray-600 hover:text-gray-900"),onClick:()=>w("posts"),children:"Paylamlar"}),e.jsx("button",{className:"pb-3 px-4 font-medium ".concat(b==="comments"?"text-primary-blue border-b-2 border-primary-blue":"text-gray-600 hover:text-gray-900"),onClick:()=>w("comments"),children:"Yorumlar"}),e.jsx("button",{className:"pb-3 px-4 font-medium ".concat(b==="likes"?"text-primary-blue border-b-2 border-primary-blue":"text-gray-600 hover:text-gray-900"),onClick:()=>w("likes"),children:"Beendikleri"}),F&&e.jsx("button",{className:"pb-3 px-4 font-medium ".concat(b==="activity"?"text-primary-blue border-b-2 border-primary-blue":"text-gray-600 hover:text-gray-900"),onClick:()=>w("activity"),children:"Hareketlerim"})]}),b==="posts"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(ue=>{var st,et;const rt=(st=ue==null?void 0:ue.post_id)!=null?st:ue==null?void 0:ue.id;return e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ts,{post:ue,fullWidth:!0}),F&&rt&&!(ue!=null&&ue.is_deleted)&&e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>l("/post/".concat(rt,"?edit=1")),className:"px-3 py-2 rounded-lg text-sm font-semibold bg-gray-100 hover:bg-gray-200 text-gray-800",children:"Dzenle"}),e.jsx("button",{type:"button",onClick:()=>l("/post/".concat(rt,"?delete=1")),className:"px-3 py-2 rounded-lg text-sm font-semibold bg-red-50 hover:bg-red-100 text-red-700",children:"Sil"})]})]},(et=rt!=null?rt:ue.post_id)!=null?et:ue.id)})}),b==="comments"&&e.jsx("div",{className:"space-y-3",children:q?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Ykleniyor"}):V.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Henz yorum yok."}):V.map(ue=>{var et,Ut,Ot,Se,gt;const rt=((et=ue==null?void 0:ue.post)==null?void 0:et.id)||(ue==null?void 0:ue.post_id),st=String((gt=(Se=(Ut=ue==null?void 0:ue.post)==null?void 0:Ut.content_text)!=null?Se:(Ot=ue==null?void 0:ue.post)==null?void 0:Ot.content)!=null?gt:"").slice(0,120);return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm text-gray-900 font-semibold mb-2",children:ue.content}),rt&&e.jsxs("button",{type:"button",onClick:()=>l("/post/".concat(rt)),className:"text-xs text-primary-blue hover:underline",children:["Paylama git: ",st||"Paylam"]}),ue.is_deleted&&e.jsx("div",{className:"mt-2 text-xs text-gray-500",children:"Bu yorum onay srecinde olabilir; herkese ak grnmeyebilir."})]},ue.id)})}),b==="likes"&&e.jsx("div",{className:"space-y-3",children:q?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Ykleniyor"}):Ke.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Henz beeni yok."}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ke.map(ue=>{var rt;return e.jsx(Ts,{post:ue,fullWidth:!0},(rt=ue.post_id)!=null?rt:ue.id)})})}),b==="activity"&&F&&e.jsx("div",{className:"space-y-3",children:q?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Ykleniyor"}):je.length===0?e.jsx("div",{className:"text-center text-gray-500 py-8",children:"Henz hareket yok."}):je.map((ue,rt)=>{var Ut,Ot,Se,gt,Bt,jt,Vt,ia,K;const st=String((ue==null?void 0:ue.type)||""),et=ue!=null&&ue.created_at?new Date(ue.created_at).toLocaleString("tr-TR"):"";if(st==="follow")return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Takip ettin"}),e.jsx("button",{type:"button",onClick:()=>l(as((ue==null?void 0:ue.target_user)||{})),className:"text-sm text-primary-blue hover:underline",children:((Ut=ue==null?void 0:ue.target_user)==null?void 0:Ut.full_name)||((Ot=ue==null?void 0:ue.target_user)==null?void 0:Ot.username)||"Kullanc"}),et&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:et})]},"".concat(st,"_").concat(rt));if(st==="like"){const se=((Se=ue==null?void 0:ue.post)==null?void 0:Se.id)||((gt=ue==null?void 0:ue.post)==null?void 0:gt.post_id);return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Beendin"}),se&&e.jsx("button",{type:"button",onClick:()=>l("/post/".concat(se)),className:"text-sm text-primary-blue hover:underline",children:"Paylama git"}),et&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:et})]},"".concat(st,"_").concat(rt))}if(st==="comment"){const se=((Bt=ue==null?void 0:ue.post)==null?void 0:Bt.id)||((jt=ue==null?void 0:ue.post)==null?void 0:jt.post_id);return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Yorum yaptn"}),e.jsx("div",{className:"text-sm text-gray-700 mt-1",children:(Vt=ue==null?void 0:ue.comment)==null?void 0:Vt.content}),se&&e.jsx("button",{type:"button",onClick:()=>l("/post/".concat(se)),className:"text-sm text-primary-blue hover:underline mt-2",children:"Paylama git"}),et&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:et})]},"".concat(st,"_").concat(rt))}if(st==="post"){const se=((ia=ue==null?void 0:ue.post)==null?void 0:ia.id)||((K=ue==null?void 0:ue.post)==null?void 0:K.post_id);return e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:"Paylam yaptn"}),se&&e.jsx("button",{type:"button",onClick:()=>l("/post/".concat(se)),className:"text-sm text-primary-blue hover:underline",children:"Paylama git"}),et&&e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:et})]},"".concat(st,"_").concat(rt))}return null})})]})]}):e.jsx("div",{className:"container-main py-8",children:e.jsx("div",{className:"text-center",children:"Ykleniyor..."})})},RN=()=>{const{partyId:r}=Bn(),s=Qt(),l=tr(),i=zr(),[d,u]=m.useState(null),[c,g]=m.useState("mps"),[f,v]=m.useState("profiles"),[b,w]=m.useState("polit"),[N,k]=m.useState([]),[_,M]=m.useState([]),[T,A]=m.useState([]),[S,y]=m.useState([]),[p,j]=m.useState(""),[E,C]=m.useState(""),[O,P]=m.useState(""),[L,ce]=m.useState(!0),[Z,ie]=m.useState(!1),[le,ye]=m.useState(""),z=m.useMemo(()=>"party:".concat(String(r||"").trim()||"-"),[r]),X=m.useMemo(()=>wr(z,{maxAgeMs:10*6e4}),[z]);m.useEffect(()=>{if(X)try{X.party&&u(X.party),Array.isArray(X.partyPosts)&&y(X.partyPosts),X.mainTab&&g(String(X.mainTab)),X.subTab&&v(String(X.subTab)),X.postSortMode&&w(String(X.postSortMode)),X.filterProvince!==void 0&&j(String(X.filterProvince||"")),X.filterDistrict!==void 0&&C(String(X.filterDistrict||"")),X.filterRole!==void 0&&P(String(X.filterRole||"")),ce(!1),ie(!0),i==="POP"&&typeof X.scrollY=="number"&&setTimeout(()=>{try{window.scrollTo(0,Math.max(0,Number(X.scrollY)||0))}catch(de){}},0)}catch(de){}},[z]),m.useEffect(()=>{if(i!=="POP")try{window.scrollTo({top:0,left:0,behavior:"auto"})}catch(de){}},[r,i]),m.useEffect(()=>{(async()=>{!!X?ie(!0):ce(!0),ye("");const Pe=ee=>{var Re,De,We,Ye,ct,Ne,Xe;return ee?{...ee,party_id:(Re=ee.party_id)!=null?Re:ee.id,party_slug:(De=ee.party_slug)!=null?De:ee.slug,party_name:(We=ee.party_name)!=null?We:ee.name,party_short_name:(Ye=ee.party_short_name)!=null?Ye:ee.short_name,party_logo:(ct=ee.party_logo)!=null?ct:ee.logo_url,party_flag:(Ne=ee.party_flag)!=null?Ne:ee.flag_url,party_color:(Xe=ee.party_color)!=null?Xe:ee.color}:null},F=(ee,Re)=>{var De,We,Ye,ct,Ne,Xe;return ee?{...ee,user_id:(De=ee.user_id)!=null?De:ee.id,profile_image:(We=ee.profile_image)!=null?We:ee.avatar_url,verification_badge:(ct=(Ye=ee.verification_badge)!=null?Ye:ee.is_verified)!=null?ct:!1,party_id:(Xe=(Ne=ee.party_id)!=null?Ne:Re==null?void 0:Re.party_id)!=null?Xe:null,party:Re||null}:null},nt=ee=>{if(!ee)return null;const Re=ee.party?Pe(ee.party):d;return{post_id:ee.id,user_id:ee.user_id,content_type:ee.content_type,content_text:ee.content_text,media_url:ee.media_urls,thumbnail_url:ee.thumbnail_url,media_duration:ee.media_duration,agenda_tag:ee.agenda_tag,polit_score:ee.polit_score,view_count:ee.view_count,like_count:ee.like_count,dislike_count:ee.dislike_count,comment_count:ee.comment_count,share_count:ee.share_count,is_featured:ee.is_featured,created_at:ee.created_at,source_url:ee.source_url,user:ee.user?F(ee.user,Re):null}};try{const Re=(await ma.parties.getAll()||[]).find(et=>String(et.id)===String(r)||String(et.slug)===String(r)),De=Pe(Re);if(!De){ye("Parti bulunamad"),u(null);return}u(De);const We=async({party_id:et,user_type:Ut,order:Ot})=>{let Bt=[];for(let jt=0;jt<10;jt++){const Vt=await re("/api/users?party_id=".concat(et,"&user_type=").concat(encodeURIComponent(Ut),"&limit=1000&offset=").concat(jt*1e3,"&order=").concat(encodeURIComponent(Ot))).catch(()=>[]);if(Array.isArray(Vt)&&Vt.length>0&&(Bt=Bt.concat(Vt)),!Array.isArray(Vt)||Vt.length<1e3)break}return Bt},[Ye,ct,Ne]=await Promise.all([We({party_id:De.party_id,user_type:"mp",order:"full_name.asc"}),We({party_id:De.party_id,user_type:"party_official",order:"polit_score.desc"}),We({party_id:De.party_id,user_type:"party_member",order:"polit_score.desc"})]),Xe=(Ye||[]).map(et=>F(et,De)).filter(Boolean),ut=(ct||[]).map(et=>F(et,De)).filter(Boolean),ue=(Ne||[]).map(et=>F(et,De)).filter(Boolean);k(Xe),M(ut),A(ue);const st=(await ma.posts.getAll({party_id:De.party_id,limit:50,order:"polit_score.desc"}).catch(()=>[])||[]).filter(et=>!(et!=null&&et.is_trending));y(st.map(nt).filter(Boolean))}catch(ee){console.error(ee),ye("Parti verileri yklenirken hata olutu")}finally{ce(!1),ie(!1)}})()},[r,X]),m.useEffect(()=>{const de=()=>{cn(z,{party:d,partyPosts:S,mainTab:c,subTab:f,postSortMode:b,filterProvince:p,filterDistrict:E,filterRole:O,scrollY:typeof window<"u"?window.scrollY:0})};return()=>de()},[z,d,S,c,f,b,p,E,O]),m.useEffect(()=>{const de=new URLSearchParams(l.search||""),Ie=String(de.get("tab")||"").trim();if(!Ie)return;const F={mps:"mps",mp:"mps",org:"org",organization:"org",officials:"org",members:"members",member:"members",provincial:"provincial",district:"district",metropolitan:"metro_mayor",metro_mayor:"metro_mayor",district_mayor:"district_mayor"}[Ie]||null;F&&F!==c&&(g(F),v("profiles"))},[l.search]);const G=m.useMemo(()=>{const de=Pe=>String(Pe||"").trim().toLowerCase("tr-TR").replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/\s+/g," "),Ie=new Map;return Object.entries(xl).forEach(([Pe,F])=>{Ie.set(de(F),Pe)}),{normalizeCityName:de,map:Ie}},[]),D=de=>{const Ie=G.normalizeCityName(de);return G.map.get(Ie)||null},$=m.useMemo(()=>{const de=new Map;(N||[]).forEach(Pe=>{const F=(Pe.province||"Bilinmiyor").toString();de.has(F)||de.set(F,[]),de.get(F).push(Pe)});for(const[Pe,F]of de.entries())de.set(Pe,[...F].sort((nt,ee)=>(ee.polit_score||0)-(nt.polit_score||0)));const Ie=Array.from(de.entries());return Ie.sort((Pe,F)=>{const nt=D(Pe[0]),ee=D(F[0]);return nt&&ee?Number(nt)-Number(ee):nt?-1:ee?1:Pe[0].localeCompare(F[0],"tr-TR")}),Ie},[N,G]),B=(de=[])=>{const Ie=new Map;(de||[]).forEach(F=>{const nt=((F==null?void 0:F.province)||"Bilinmiyor").toString();Ie.has(nt)||Ie.set(nt,[]),Ie.get(nt).push(F)});const Pe=Array.from(Ie.entries());return Pe.sort((F,nt)=>{const ee=D(F[0]),Re=D(nt[0]);return ee&&Re?Number(ee)-Number(Re):ee?-1:Re?1:F[0].localeCompare(nt[0],"tr-TR")}),Pe.map(([F,nt])=>[F,[...nt].sort((ee,Re)=>((Re==null?void 0:Re.polit_score)||0)-((ee==null?void 0:ee.polit_score)||0))])},Y=m.useMemo(()=>(_||[]).filter(de=>(de==null?void 0:de.politician_type)==="provincial_chair"),[_]),Q=m.useMemo(()=>(_||[]).filter(de=>(de==null?void 0:de.politician_type)==="district_chair"),[_]),q=m.useMemo(()=>(_||[]).filter(de=>(de==null?void 0:de.politician_type)==="metropolitan_mayor"),[_]),I=m.useMemo(()=>(_||[]).filter(de=>(de==null?void 0:de.politician_type)==="district_mayor"),[_]),Te=c==="mps"?N:c==="org"?_:c==="members"?T:c==="provincial"?Y:c==="district"?Q:c==="metro_mayor"?q:c==="district_mayor"?I:[];m.useEffect(()=>{j(""),C(""),P("")},[c]);const Ke=de=>String((de==null?void 0:de.district_name)||(de==null?void 0:de.district)||"").trim(),oe=m.useMemo(()=>{let de=Array.isArray(Te)?Te:[];if(p){const Ie=String(p||"").trim();de=de.filter(Pe=>String((Pe==null?void 0:Pe.province)||"").trim()===Ie)}if((c==="members"||c==="district"||c==="district_mayor")&&E){const Ie=String(E||"").trim();de=de.filter(Pe=>Ke(Pe)===Ie)}if(c==="org"&&O){const Ie=String(O||"").trim();de=de.filter(Pe=>String((Pe==null?void 0:Pe.politician_type)||"").trim()===Ie)}return de},[Te,p,E,O,c]),je=new Set((oe||[]).map(de=>de.user_id)),fe=(S||[]).filter(de=>je.has(de.user_id)),ke=de=>{const Ie=Number(de.like_count||0),Pe=Number(de.comment_count||0),F=Number(de.share_count||0),nt=Number(de.view_count||0);return Ie*5+Pe*10+F*20+nt*.1},$e=[...fe].sort((de,Ie)=>b==="daily"?ke(Ie)-ke(de):(Ie.polit_score||0)-(de.polit_score||0)),Le=m.useMemo(()=>{if(c==="mps"){if(!p)return $;const de=String(p||"").trim();return($||[]).filter(([Ie])=>String(Ie||"").trim()===de)}return B(oe)},[c,oe,$,p]),St=m.useMemo(()=>{const de=new Set;(Te||[]).forEach(Pe=>{const F=String((Pe==null?void 0:Pe.province)||"").trim();F&&de.add(F)});const Ie=Array.from(de.values());return Ie.sort((Pe,F)=>{const nt=D(Pe),ee=D(F);return nt&&ee?Number(nt)-Number(ee):nt?-1:ee?1:Pe.localeCompare(F,"tr-TR")}),Ie},[Te,G]),Qe=m.useMemo(()=>{if(!(c==="members"||c==="district"||c==="district_mayor"))return[];const de=Array.isArray(Te)?Te:[],Ie=p?de.filter(F=>String((F==null?void 0:F.province)||"").trim()===String(p||"").trim()):de,Pe=new Set;return Ie.forEach(F=>{const nt=Ke(F);nt&&Pe.add(nt)}),Array.from(Pe.values()).sort((F,nt)=>F.localeCompare(nt,"tr-TR"))},[Te,c,p]),It=m.useMemo(()=>{if(c!=="org")return[];const de=new Set;(Te||[]).forEach(Pe=>{const F=String((Pe==null?void 0:Pe.politician_type)||"").trim();F&&de.add(F)});const Ie=Array.from(de.values());return Ie.sort((Pe,F)=>Pe.localeCompare(F,"tr-TR")),Ie.map(Pe=>({code:Pe,label:Lm(Pe,null,null,!0)||Pe}))},[Te,c]),$t=m.useMemo(()=>{const de=new Map;[...N,..._,...T].forEach(F=>{F!=null&&F.user_id&&de.set(F.user_id,F.province||null)});const Ie=new Map;($e||[]).forEach(F=>{var ee;const nt=(((ee=F==null?void 0:F.user)==null?void 0:ee.province)||de.get(F.user_id)||"Bilinmiyor").toString();Ie.has(nt)||Ie.set(nt,[]),Ie.get(nt).push(F)});const Pe=Array.from(Ie.entries());return Pe.sort((F,nt)=>{const ee=D(F[0]),Re=D(nt[0]);return ee&&Re?Number(ee)-Number(Re):ee?-1:Re?1:F[0].localeCompare(nt[0],"tr-TR")}),Pe},[$e,N,_,T,G]);if(L)return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-white border-b",children:[e.jsx("div",{className:"h-32 bg-gray-200 animate-pulse"}),e.jsx("div",{className:"container-main py-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-52 h-52 bg-white rounded-xl border-2 border-gray-200 shadow-md flex items-center justify-center p-4 flex-shrink-0",children:e.jsx("div",{className:"w-full h-full bg-gray-100 rounded-lg animate-pulse"})}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx("div",{className:"h-10 bg-gray-100 rounded-xl w-2/3 animate-pulse"}),e.jsx("div",{className:"h-5 bg-gray-100 rounded-full w-1/2 animate-pulse"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mt-4",children:[e.jsx("div",{className:"h-20 bg-gray-100 rounded-2xl animate-pulse"}),e.jsx("div",{className:"h-20 bg-gray-100 rounded-2xl animate-pulse"}),e.jsx("div",{className:"h-20 bg-gray-100 rounded-2xl animate-pulse"}),e.jsx("div",{className:"h-20 bg-gray-100 rounded-2xl animate-pulse"})]})]})]})})]}),e.jsx("div",{className:"container-main py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto bg-white border border-gray-200 rounded-2xl p-6",children:[e.jsx("div",{className:"h-5 bg-gray-100 rounded-full w-1/3 animate-pulse"}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsx("div",{className:"h-24 bg-gray-100 rounded-2xl animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-100 rounded-2xl animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-100 rounded-2xl animate-pulse"})]})]})})]});if(le||!d)return e.jsx("div",{className:"container-main py-8",children:e.jsx("div",{className:"text-center text-gray-700",children:le||"Parti bulunamad"})});const Zt=(d.parliament_seats/600*100).toFixed(1),Xt=N.length,ya=_.length,kt=T.length;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-white border-b",children:[e.jsx("div",{className:"h-32",style:{backgroundColor:d.party_color}}),e.jsx("div",{className:"container-main py-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-52 h-52 bg-white rounded-xl border-2 border-gray-200 shadow-md flex items-center justify-center p-4 flex-shrink-0",children:e.jsx("img",{src:d.party_logo,alt:d.party_name,className:"w-full h-full object-contain",onError:de=>{de.target.style.display="none",de.target.parentElement.innerHTML='<div class="text-gray-400 text-center text-sm">Logo yklenemedi</div>'}})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-3",children:d.party_name}),e.jsxs("p",{className:"text-gray-600 mb-6 text-2xl md:text-3xl font-semibold",children:["(",d.party_short_name,")"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-lg text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Kurulu:"})," ",td(d.foundation_date)]}),e.jsxs("p",{className:"text-lg text-gray-600",children:[e.jsx("span",{className:"font-semibold",children:"Meclis Sandalyesi:"})," ",d.parliament_seats]})]})]})]})})]}),e.jsxs("div",{className:"container-main py-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-blue",children:d.parliament_seats}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Meclis Sandalyesi"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[Zt,"%"]})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:Xt}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Milletvekili"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:ya}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"Tekilat Grevlisi"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:hs(kt)}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:"ye"})]})]}),e.jsx("div",{className:"border-b mb-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide max-w-full pb-3",children:[{id:"mps",label:"Milletvekili (".concat(N.length,")")},{id:"org",label:"Tekilat Grevlisi (".concat(_.length,")")},{id:"members",label:"ye (".concat(T.length,")")},{id:"provincial",label:"l Bakanlar (".concat(Y.length,")")},{id:"district",label:"le Bakanlar (".concat(Q.length,")")},{id:"metro_mayor",label:"l Belediye Bk. (".concat(q.length,")")},{id:"district_mayor",label:"le Belediye Bk. (".concat(I.length,")")}].map(de=>e.jsx("button",{onClick:()=>{g(de.id),v("profiles")},className:"flex-shrink-0 px-4 py-2 rounded-full font-semibold text-sm transition-all ".concat(c===de.id?"bg-primary-blue text-white":"bg-white border border-gray-300 text-gray-700"),children:de.label},de.id))})})}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide max-w-full",children:[e.jsx("button",{onClick:()=>v("profiles"),className:"px-4 py-2 rounded-lg font-semibold text-sm border transition-colors ".concat(f==="profiles"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-900 border-gray-900 hover:bg-gray-50"),children:"Profiller"}),e.jsx("button",{onClick:()=>v("posts"),className:"px-4 py-2 rounded-lg font-semibold text-sm border transition-colors ".concat(f==="posts"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-900 border-gray-900 hover:bg-gray-50"),children:"Paylamlar"})]})}),f==="profiles"&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-3",children:[e.jsx("div",{className:"text-sm font-black text-gray-900 whitespace-nowrap",children:"Filtre"}),["mps","org","members","provincial","district","metro_mayor","district_mayor"].includes(c)&&e.jsxs("select",{value:p,onChange:de=>j(de.target.value),className:"w-full md:w-[260px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none text-sm",children:[e.jsx("option",{value:"",children:"l (Tm)"}),St.map(de=>e.jsx("option",{value:de,children:de},de))]}),(c==="members"||c==="district"||c==="district_mayor")&&e.jsxs("select",{value:E,onChange:de=>C(de.target.value),className:"w-full md:w-[260px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none text-sm",children:[e.jsx("option",{value:"",children:"le (Tm)"}),Qe.map(de=>e.jsx("option",{value:de,children:de},de))]}),c==="org"&&e.jsxs("select",{value:O,onChange:de=>P(de.target.value),className:"w-full md:w-[260px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none text-sm",children:[e.jsx("option",{value:"",children:"Grev (Tm)"}),It.map(de=>e.jsx("option",{value:de.code,children:de.label},de.code))]}),(p||E||O)&&e.jsx("button",{type:"button",onClick:()=>{j(""),C(""),P("")},className:"md:ml-auto px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-900 font-semibold text-sm",children:"Temizle"})]})})}),!1,c!=="distribution"&&f==="profiles"&&e.jsx("div",{className:"space-y-6",children:Le.map(([de,Ie])=>{const Pe=D(de),F=Pe?String(parseInt(Pe,10)):null;return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Pe&&e.jsx(Tt,{to:"/city/".concat(Pe),className:"w-7 h-7 rounded-full bg-gray-900 hover:bg-primary-blue text-white text-xs font-bold flex items-center justify-center transition-colors flex-shrink-0",children:F}),e.jsx("div",{className:"font-black text-gray-900 truncate",children:de}),e.jsx("div",{className:"text-xs text-gray-500",children:Ie.length})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ie.map(nt=>e.jsxs("div",{className:"card cursor-pointer hover:shadow-md transition-shadow flex items-center gap-3",onClick:()=>s(as(nt)),children:[e.jsx(Yt,{src:nt.avatar_url||nt.profile_image,size:"56px",verified:za(nt)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-bold truncate",children:nt.full_name}),e.jsxs("div",{className:"text-xs text-gray-600 truncate",children:["@",ol(nt)||"-"]}),ms(nt)&&e.jsx("div",{className:"text-[11px] font-semibold text-primary-blue mt-0.5 truncate",children:ms(nt)})]}),e.jsx("div",{className:"text-xs font-bold text-primary-blue",children:Ra(nt.polit_score)})]},nt.user_id))})]},de)})}),c!=="distribution"&&f==="posts"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("button",{onClick:()=>w("polit"),className:"px-4 py-2 rounded-lg text-sm font-semibold border ".concat(b==="polit"?"bg-primary-blue text-white border-primary-blue":"bg-white text-gray-700 border-gray-300"),children:"Polit Puan"}),e.jsx("button",{onClick:()=>w("daily"),className:"px-4 py-2 rounded-lg text-sm font-semibold border ".concat(b==="daily"?"bg-primary-blue text-white border-primary-blue":"bg-white text-gray-700 border-gray-300"),children:"Gnlk Etkileim"})]}),e.jsx("div",{className:"space-y-6",children:$t.map(([de,Ie])=>{const Pe=D(de),F=Pe?String(parseInt(Pe,10)):null;return e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[Pe&&e.jsx(Tt,{to:"/city/".concat(Pe),className:"w-7 h-7 rounded-full bg-gray-900 hover:bg-primary-blue text-white text-xs font-bold flex items-center justify-center transition-colors flex-shrink-0",children:F}),e.jsx("div",{className:"font-black text-gray-900 truncate",children:de}),e.jsx("div",{className:"text-xs text-gray-500",children:Ie.length})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Ie.map(nt=>{var ee;return e.jsx(Ts,{post:nt,fullWidth:!0},(ee=nt.post_id)!=null?ee:nt.id)})})]},de)})})]})]})]})},ON=()=>{var z,X,G,D;const{agendaSlug:r}=Bn(),s=Qt(),l=zr(),[i,d]=m.useState(null),[u,c]=m.useState([]),[g,f]=m.useState("all"),[v,b]=m.useState(!1),[w,N]=m.useState(!1),[k,_]=m.useState(!1),[M,T]=m.useState(!0),[A,S]=m.useState(0),[y,p]=m.useState(""),j=m.useRef(null),E=m.useRef(null),C=m.useRef(!1),O=24,P=m.useMemo(()=>"agenda:".concat(String(r||"").trim()||"-"),[r]),L=m.useMemo(()=>wr(P,{maxAgeMs:10*6e4}),[P]),ce=String((i==null?void 0:i.title)||(i==null?void 0:i.agenda_title)||"").trim(),Z=Number((X=(z=i==null?void 0:i.total_polit_score)!=null?z:i==null?void 0:i.polit_score)!=null?X:0),ie=Number((G=i==null?void 0:i.post_count)!=null?G:0),le=Number((D=i==null?void 0:i.participant_count)!=null?D:0);m.useEffect(()=>{if(L)try{L.agenda&&d(L.agenda),Array.isArray(L.agendaPosts)&&c(L.agendaPosts),L.category&&f(String(L.category)),typeof L.offset=="number"&&S(Number(L.offset||0)||0),typeof L.hasMore=="boolean"&&T(!!L.hasMore),L.resolvedAgendaTitle!==void 0&&p(String(L.resolvedAgendaTitle||"")),b(!1),N(!0),l==="POP"&&typeof L.scrollY=="number"&&setTimeout(()=>{try{window.scrollTo(0,Math.max(0,Number(L.scrollY)||0))}catch($){}},0)}catch($){}},[P]),m.useEffect(()=>{if(l!=="POP")try{window.scrollTo({top:0,left:0,behavior:"auto"})}catch($){}},[r,l]),m.useEffect(()=>{(async()=>{const $=await re("/api/agendas?limit=200").catch(()=>null),B=($==null?void 0:$.data)||[],Y=(Array.isArray(B)?B:[]).find(q=>String((q==null?void 0:q.slug)||"")===String(r||""))||(Array.isArray(B)?B:[]).find(q=>String((q==null?void 0:q.title)||"").toLowerCase().replace(/\s+/g,"-")===String(r||""));d(Y||null);const Q=String((Y==null?void 0:Y.title)||(Y==null?void 0:Y.agenda_title)||"").trim();p(Q)})()},[r]);const ye=async({nextOffset:$,replace:B})=>{const Y=String(y||"").trim();if(!Y){c([]),T(!1);return}const Q={agenda_tag:Y,limit:O,offset:$,order:"polit_score.desc"};g&&g!=="all"&&(Q.category=g);const q=await ma.posts.getAll(Q).catch(()=>[]),I=(Array.isArray(q)?q:[]).filter(V=>!(V!=null&&V.is_trending));c(V=>B?I:[...V||[],...I]),T(I.length>=O),S($+I.length)};return m.useEffect(()=>{let $=!1;return(async()=>{if(!String(y||"").trim())return;!!L?N(!0):b(!0),T(!0),S(0);try{$||await ye({nextOffset:0,replace:!0})}finally{$||b(!1),$||N(!1)}})(),()=>{$=!0}},[y,g]),m.useEffect(()=>{if(j.current)return E.current&&E.current.disconnect(),E.current=new IntersectionObserver($=>{const B=$==null?void 0:$[0];B!=null&&B.isIntersecting&&(C.current||v||k||M&&(async()=>{C.current=!0,_(!0);try{await ye({nextOffset:A,replace:!1})}finally{_(!1),C.current=!1}})())},{root:null,rootMargin:"250px",threshold:.01}),E.current.observe(j.current),()=>{var $,B;return(B=($=E.current)==null?void 0:$.disconnect)==null?void 0:B.call($)}},[A,M,v,k,y,g]),m.useEffect(()=>{const $=()=>{cn(P,{agenda:i,agendaPosts:u,category:g,offset:A,hasMore:M,resolvedAgendaTitle:y,scrollY:typeof window<"u"?window.scrollY:0})};return()=>$()},[P,i,u,g,A,M,y]),i?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-8",children:[e.jsxs("div",{className:"card mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"md:col-span-2 min-w-0",children:[e.jsx("h1",{className:"text-3xl font-bold break-words",children:ce}),e.jsx("div",{className:"mt-3 flex items-center gap-2",children:e.jsx(Va,{variant:"outline",children:"Takip Et"})})]}),e.jsx("button",{type:"button",onClick:()=>s("/gundem-disi"),className:"md:col-span-1 w-full h-full min-h-[52px] rounded-2xl bg-gray-900 hover:bg-black text-white font-black px-4 py-3 transition-colors",title:"Gndem d tm politlere git",children:"Gndem D Politler"})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:hs(ie)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Paylam"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-primary-blue",children:Ra(Z)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Toplam Polit Puan"})]}),le>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:hs(le)}),e.jsx("div",{className:"text-sm text-gray-500",children:"Katlmc"})]})]})]}),e.jsx("div",{className:"flex gap-4 border-b mb-6",children:["all","mps","organization","citizens","experience","media"].map($=>e.jsx("button",{className:"pb-3 px-4 font-medium capitalize ".concat(g===$?"text-primary-blue border-b-2 border-primary-blue":"text-gray-600 hover:text-gray-900"),onClick:()=>f($),children:$==="all"?"Tm":$==="mps"?"Vekiller":$==="organization"?"Tekilat":$==="citizens"?"Vatanda":$==="experience"?"Deneyim":"Medya"},$))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:u.map($=>{var B;return e.jsx(Ts,{post:$,fullWidth:!0},(B=$.post_id)!=null?B:$.id)})}),v&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Ykleniyor"}),!v&&u.length===0&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Bu gndemde henz paylam yok."}),e.jsx("div",{ref:j,className:"h-8"}),k&&e.jsx("div",{className:"mt-2 text-center text-sm text-gray-600",children:"Daha fazla ykleniyor"}),!v&&!k&&!M&&u.length>0&&e.jsx("div",{className:"mt-6 text-center text-xs text-gray-500",children:"Hepsi bu kadar."})]})}):e.jsx("div",{className:"container-main py-8",children:e.jsx("div",{className:"text-center",children:"Ykleniyor..."})})},zN=()=>{const r=Qt(),s=zr(),[l,i]=m.useState([]),[d,u]=m.useState([]),[c,g]=m.useState(!0),[f,v]=m.useState(!1),b=m.useMemo(()=>"agendas",[]),w=m.useMemo(()=>wr(b,{maxAgeMs:10*6e4}),[b]);m.useEffect(()=>{if(w)try{Array.isArray(w.agendas)&&u(w.agendas),Array.isArray(w.posts)&&i(w.posts),g(!1),v(!0),s==="POP"&&typeof w.scrollY=="number"&&setTimeout(()=>{try{window.scrollTo(0,Math.max(0,Number(w.scrollY)||0))}catch(_){}},0)}catch(_){}},[b]),m.useEffect(()=>{(async()=>{!!w?v(!0):g(!0);const M=await re("/api/agendas?limit=120").catch(()=>null),T=(M==null?void 0:M.data)||[];u(Array.isArray(T)?T:[]);const A=await ma.posts.getAll({limit:250,order:"polit_score.desc"}).catch(()=>[]),S=(Array.isArray(A)?A:[]).filter(y=>!(y!=null&&y.is_trending));i(S),g(!1),v(!1)})()},[]),m.useEffect(()=>{const _=()=>{cn(b,{agendas:d,posts:l,scrollY:typeof window<"u"?window.scrollY:0})};return()=>_()},[b,d,l]);const N=m.useMemo(()=>{const _=new Map;for(const M of l||[]){const T=(M.agenda_tag||"").toString().trim();T&&(_.has(T)||_.set(T,[]),_.get(T).push(M))}for(const[M,T]of _.entries())_.set(M,[...T].sort((A,S)=>(S.polit_score||0)-(A.polit_score||0)));return _},[l]),k=m.useMemo(()=>{const _=new Set,M=[];for(const T of d||[]){const A=(T==null?void 0:T.title)||"";if(!A||_.has(A))continue;const S=N.get(A)||[];M.push({title:A,slug:(T==null?void 0:T.slug)||String(A).toLowerCase().replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,""),posts:S.slice(0,12)}),_.add(A)}return M.filter(T=>(T.posts||[]).length>0)},[N,d]);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-black text-gray-900",children:"Tm Gndem"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Gndem balklar ve seme politler"})]}),e.jsx("button",{onClick:()=>r(-1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 font-semibold hover:bg-gray-50",children:"Geri"})]}),e.jsxs("div",{className:"space-y-8",children:[f?e.jsx("div",{className:"text-xs text-gray-500",children:"Gncelleniyor"}):null,k.map((_,M)=>e.jsxs("div",{className:"card",children:[e.jsxs("button",{onClick:()=>r("/agenda/".concat(_.slug)),className:"w-full flex items-center justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(mr,{className:"w-5 h-5 text-orange-500 flex-shrink-0",fill:"currentColor"}),e.jsx("div",{className:"text-lg font-black text-gray-900 truncate",children:_.title})]}),e.jsx("div",{className:"text-xs font-semibold text-primary-blue hover:underline flex-shrink-0",children:"Detay gr"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:_.posts.map(T=>e.jsx(Ts,{post:T,fullWidth:!0},T.post_id||T.id))})]},_.slug||_.title)),k.length===0&&e.jsx("div",{className:"card text-sm text-gray-600",children:"Henz gndem ierii bulunmuyor."}),c?e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Ykleniyor"}):null]})]})})},PN=()=>{const{cityCode:r}=Bn(),s=Qt(),[l,i]=m.useState("mps"),[d,u]=m.useState(null),[c,g]=m.useState(""),[f,v]=m.useState(null);m.useEffect(()=>{try{window.scrollTo(0,0)}catch(_){}},[r]),m.useEffect(()=>{(async()=>{const M=xl[r]||r,T=String(M||"").toLocaleUpperCase("tr-TR"),A=z=>{var X,G,D,$;return z?{...z,party_id:(X=z.party_id)!=null?X:z.id,party_short_name:(G=z.party_short_name)!=null?G:z.short_name,party_logo:(D=z.party_logo)!=null?D:z.logo_url,party_color:($=z.party_color)!=null?$:z.color}:null},S=z=>{var G,D,$,B,Y;if(!z)return null;const X=z.party?A(z.party):null;return{...z,user_id:(G=z.user_id)!=null?G:z.id,profile_image:(D=z.profile_image)!=null?D:z.avatar_url,verification_badge:(B=($=z.verification_badge)!=null?$:z.is_verified)!=null?B:!1,party_id:(Y=z.party_id)!=null?Y:null,party:X}},y=z=>z?{post_id:z.id,user_id:z.user_id,content_type:z.content_type,content_text:z.content_text,media_url:z.media_urls,thumbnail_url:z.thumbnail_url,media_duration:z.media_duration,agenda_tag:z.agenda_tag,polit_score:z.polit_score,view_count:z.view_count,like_count:z.like_count,dislike_count:z.dislike_count,comment_count:z.comment_count,share_count:z.share_count,is_featured:z.is_featured,created_at:z.created_at,user:z.user?S(z.user):null}:null,j=(await re("/api/users?province=".concat(encodeURIComponent(T),"&limit=2000")).catch(()=>[])||[]).map(S).filter(Boolean),E=j.filter(z=>z.user_type==="mp").sort((z,X)=>(X.polit_score||0)-(z.polit_score||0)),C=j.filter(z=>z.user_type==="party_official"&&z.politician_type==="provincial_chair").sort((z,X)=>(X.polit_score||0)-(z.polit_score||0)),O=j.filter(z=>z.user_type==="party_official"&&z.politician_type==="district_chair").sort((z,X)=>(X.polit_score||0)-(z.polit_score||0)),P=j.filter(z=>z.user_type==="party_official"&&z.politician_type==="metropolitan_mayor").sort((z,X)=>(X.polit_score||0)-(z.polit_score||0)),L=j.filter(z=>z.user_type==="party_official"&&z.politician_type==="district_mayor").sort((z,X)=>(X.polit_score||0)-(z.polit_score||0)),ce=j.filter(z=>z.user_type==="party_member"||z.user_type==="normal").sort((z,X)=>(X.polit_score||0)-(z.polit_score||0)),Z=j.map(z=>z.user_id).filter(Boolean).slice(0,2e3);let ie=[];if(Z.length>0){const z=await re("/api/posts?user_ids=".concat(encodeURIComponent(Z.join(",")),"&limit=20&order=polit_score.desc")).catch(()=>[]);z&&z.length>0&&(ie=z.map(y).filter(Boolean))}const le=[...new Set(j.map(z=>z.party_id).filter(Boolean))],ye=le.map(z=>{var B;const X=A(((B=j.find(Y=>Y.party_id===z))==null?void 0:B.party)||null),G=E.filter(Y=>Y.party_id===z),D=C.find(Y=>Y.party_id===z),$=P.find(Y=>Y.party_id===z);return{party:X,mps:G,leader:D,mayor:$,totalPolit:G.reduce((Y,Q)=>Y+(Q.polit_score||0),0)+((D==null?void 0:D.polit_score)||0)+(($==null?void 0:$.polit_score)||0)}}).sort((z,X)=>X.totalPolit-z.totalPolit);v({cityName:M,cityCode:r,mps:E,provincialChairs:C,districtChairs:O,metroMayors:P,districtMayors:L,members:ce,posts:ie,partyData:ye,stats:{totalMps:E.length,totalProvincialChairs:C.length,totalDistrictChairs:O.length,totalMetroMayors:P.length,totalDistrictMayors:L.length,totalMembers:ce.length,totalParties:le.length}})})()},[r]);const b=m.useMemo(()=>f?l==="mps"?f.mps||[]:l==="provincial_chairs"?f.provincialChairs||[]:l==="district_chairs"?f.districtChairs||[]:l==="metropolitan_mayors"?f.metroMayors||[]:l==="district_mayors"?f.districtMayors||[]:l==="members"?f.members||[]:[]:[],[f,l]),w=m.useMemo(()=>{if(!f)return[];const _=new Map;return(b||[]).forEach(T=>{if(!(T!=null&&T.party_id))return;const A=String(T.party_id),S=_.get(A)||{partyId:A,party:T.party||null,count:0};_.set(A,{...S,party:S.party||T.party||null,count:S.count+1})}),Array.from(_.values()).filter(T=>{var A;return(A=T.party)==null?void 0:A.party_logo}).sort((T,A)=>A.count-T.count)},[f,b]);m.useEffect(()=>{var _;u(((_=w[0])==null?void 0:_.partyId)||null)},[l,w]),m.useEffect(()=>{l!=="district_chairs"&&l!=="district_mayors"&&g("")},[l]);const N=m.useMemo(()=>{if(!f)return[];if(l!=="district_chairs"&&l!=="district_mayors")return[];const _=d?String(d):null,M=l==="district_chairs"?f.districtChairs||[]:f.districtMayors||[],T=_?(M||[]).filter(S=>String(S.party_id||"")===_):M||[],A=new Set;return(T||[]).forEach(S=>{const y=String((S==null?void 0:S.district_name)||"").trim();y&&A.add(y)}),Array.from(A.values()).sort((S,y)=>S.localeCompare(y,"tr-TR"))},[f,l,d]);if(!f)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md bg-white border border-gray-200 rounded-2xl p-8 shadow-sm text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-100 animate-pulse"})}),e.jsx("div",{className:"text-xl font-black text-gray-900",children:"Ykleniyor"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"ehir verileri hazrlanyor, ltfen bekleyin."}),e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-100 rounded-full w-4/5 mx-auto animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-100 rounded-full w-3/5 mx-auto animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-100 rounded-2xl w-full animate-pulse"})]})]})});const k=()=>{const _=d?String(d):null,M=(y=[])=>_?(y||[]).filter(p=>String(p.party_id||"")===_):y,T=(y=[])=>{if(!c)return y;const p=String(c||"").trim();return p?(y||[]).filter(j=>String((j==null?void 0:j.district_name)||"").trim()===p):y},A=(y=[])=>{const p=new Map;(y||[]).forEach(E=>{const C=E.party_id||"no_party";p.has(C)||p.set(C,{partyId:C,party:E.party||null,list:[]}),p.get(C).list.push(E)});const j=Array.from(p.values()).map(E=>({...E,totalPolit:(E.list||[]).reduce((C,O)=>C+((O==null?void 0:O.polit_score)||0),0)}));return j.sort((E,C)=>(C.totalPolit||0)-(E.totalPolit||0)),j.forEach(E=>E.list.sort((C,O)=>(O.polit_score||0)-(C.polit_score||0))),j};if(l==="mps"){const y=_?(f.partyData||[]).filter(p=>{var j,E;return String(((j=p.party)==null?void 0:j.party_id)||((E=p.party)==null?void 0:E.id)||"")===_}):f.partyData;return e.jsxs("div",{className:"space-y-6",children:[y.map(({party:p,mps:j})=>j.length===0?null:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-200",children:[e.jsx("img",{src:p.party_logo,alt:p.party_short_name,className:"w-12 h-12 object-contain"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:p.party_short_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[j.length," Milletvekili"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(E=>e.jsxs(Tt,{to:as(E),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors group",children:[e.jsx(Yt,{src:E.profile_image,size:"56px",verified:za(E),className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-primary-blue transition-colors truncate",children:E.full_name}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mt-1",children:[e.jsx("span",{className:"font-medium text-primary-blue",children:ms(E)}),e.jsx("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 bg-gray-900 text-white text-[10px] font-bold rounded-full",children:E.city_code})]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(er,{className:"w-5 h-5 sm:w-4 sm:h-4 text-green-600"}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:Ra(E.polit_score)})]})]})]},E.user_id))})]},p.party_id)),f.mps.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ts,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Bu ehirden milletvekili bulunamad"})]})]})}const S=(y,p,j,E={})=>{const{showDistrictGroups:C=!1}=E;if(!y||y.length===0){const O=p;return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:j})]})}return e.jsx("div",{className:"space-y-6",children:y.map(O=>{const P=O.party,L=O.partyId||(P==null?void 0:P.party_id)||(P==null?void 0:P.id)||"no_party";if(!C)return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-200",children:[(P==null?void 0:P.party_logo)&&e.jsx("img",{src:P.party_logo,alt:P.party_short_name||"Parti",className:"w-12 h-12 object-contain"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:(P==null?void 0:P.party_short_name)||"Partisiz"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[O.list.length," profil"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.list.map(ie=>e.jsxs(Tt,{to:as(ie),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors group",children:[e.jsx(Yt,{src:ie.avatar_url||ie.profile_image,size:"56px",verified:za(ie),className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-primary-blue transition-colors truncate",children:ie.full_name}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mt-1",children:[ms(ie)&&e.jsx("span",{className:"font-medium text-primary-blue",children:ms(ie)}),ie.city_code&&e.jsx("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 bg-gray-900 text-white text-[10px] font-bold rounded-full",children:ie.city_code})]})]}),e.jsx("div",{className:"text-xs font-bold text-primary-blue whitespace-nowrap",children:Ra(ie.polit_score)})]},ie.user_id))})]},L);const ce=new Map;(O.list||[]).forEach(ie=>{const le=(ie.district_name||"Bilinmiyor").toString();ce.has(le)||ce.set(le,[]),ce.get(le).push(ie)});const Z=Array.from(ce.entries()).sort((ie,le)=>ie[0].localeCompare(le[0],"tr-TR"));return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-200",children:[(P==null?void 0:P.party_logo)&&e.jsx("img",{src:P.party_logo,alt:P.party_short_name||"Parti",className:"w-12 h-12 object-contain"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:(P==null?void 0:P.party_short_name)||"Partisiz"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[O.list.length," ile bakan"]})]})]}),e.jsx("div",{className:"space-y-6",children:Z.map(([ie,le])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:ie}),e.jsx("div",{className:"text-xs text-gray-500",children:le.length})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:le.slice().sort((ye,z)=>(z.polit_score||0)-(ye.polit_score||0)).map(ye=>e.jsxs(Tt,{to:as(ye),className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors group",children:[e.jsx(Yt,{src:ye.avatar_url||ye.profile_image,size:"56px",verified:za(ye),className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 group-hover:text-primary-blue transition-colors truncate",children:ye.full_name}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600 mt-1",children:[ms(ye)&&e.jsx("span",{className:"font-medium text-primary-blue",children:ms(ye)}),ye.city_code&&e.jsx("span",{className:"inline-flex items-center justify-center px-1.5 py-0.5 bg-gray-900 text-white text-[10px] font-bold rounded-full",children:ye.city_code})]})]}),e.jsx("div",{className:"text-xs font-bold text-primary-blue whitespace-nowrap",children:Ra(ye.polit_score)})]},ye.user_id))})]},ie))})]},L)})})};if(l==="provincial_chairs")return S(A(M(f.provincialChairs)),no,"Bu ehirden il bakan bulunamad");if(l==="district_chairs")return S(A(T(M(f.districtChairs))),no,"Bu ehirden ile bakan bulunamad",{showDistrictGroups:!0});if(l==="metropolitan_mayors")return S(A(M(f.metroMayors)),Rr,"Bu ehirden il belediye bakan bulunamad");if(l==="district_mayors")return S(A(T(M(f.districtMayors))),Rr,"Bu ehirden ile belediye bakan bulunamad");if(l==="members")return S(A(M(f.members)),ts,"Bu ehirden ye bulunamad")};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-gradient-to-r from-primary-blue to-[#0088bb] text-white",children:e.jsxs("div",{className:"container-main py-8 md:py-12",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center gap-2 text-white/90 hover:text-white mb-6 transition-colors",children:[e.jsx(dl,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Geri Dn"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx(ii,{className:"w-10 h-10 md:w-12 md:h-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold mb-2",children:f.cityName}),e.jsxs("p",{className:"text-white/80 text-sm md:text-base",children:["l Kodu: ",f.cityCode]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:[e.jsx(ts,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:f.stats.totalMps}),e.jsx("div",{className:"text-xs text-white/80",children:"Milletvekili"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:[e.jsx(no,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:f.stats.totalProvincialChairs}),e.jsx("div",{className:"text-xs text-white/80",children:"l Bakan"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:[e.jsx(Rr,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:f.stats.totalMetroMayors}),e.jsx("div",{className:"text-xs text-white/80",children:"l Bel. Bk."})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 text-center",children:[e.jsx(ii,{className:"w-6 h-6 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:f.stats.totalMembers}),e.jsx("div",{className:"text-xs text-white/80",children:"ye"})]})]})]})]})}),e.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm",children:e.jsxs("div",{className:"container-main",children:[e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide py-3",children:[{id:"mps",label:"Milletvekilleri (".concat(f.stats.totalMps,")"),Icon:ts},{id:"provincial_chairs",label:"l Bakanlar (".concat(f.stats.totalProvincialChairs,")"),Icon:no},{id:"district_chairs",label:"le Bakanlar (".concat(f.stats.totalDistrictChairs,")"),Icon:no},{id:"metropolitan_mayors",label:"l Bel. Bk. (".concat(f.stats.totalMetroMayors,")"),Icon:Rr},{id:"district_mayors",label:"le Bel. Bk. (".concat(f.stats.totalDistrictMayors,")"),Icon:Rr},{id:"members",label:"yeler (".concat(f.stats.totalMembers,")"),Icon:ts}].map(({id:_,label:M,Icon:T})=>e.jsx("button",{onClick:()=>i(_),className:"flex-shrink-0 px-4 py-2 rounded-full font-semibold text-sm border transition-colors ".concat(l===_?"bg-primary-blue text-white border-primary-blue":"bg-white text-gray-900 border-gray-300 hover:bg-gray-50"),children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:"w-6 h-6 sm:w-5 sm:h-5"}),e.jsx("span",{className:"whitespace-nowrap",children:M})]})},_))}),w.length>0&&e.jsx("div",{className:"pb-3 -mt-1",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:w.map(_=>{var T;const M=String(d||"")===String(_.partyId);return e.jsxs("button",{type:"button",onClick:()=>u(_.partyId),className:"flex-shrink-0 flex items-center gap-2 px-3 py-2 rounded-full border transition-colors ".concat(M?"bg-gray-900 border-gray-900":"bg-white border-gray-300 hover:bg-gray-50"),title:"".concat(((T=_.party)==null?void 0:T.party_short_name)||""," (").concat(_.count,")"),children:[e.jsx("img",{src:_.party.party_logo,alt:_.party.party_short_name||"Parti",className:"w-6 h-6 object-contain",onError:A=>{A.currentTarget.style.display="none"}}),e.jsx("span",{className:"text-xs font-bold ".concat(M?"text-white":"text-gray-900"),children:_.count})]},_.partyId)})})})]})}),e.jsx("div",{className:"container-main py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[(l==="district_chairs"||l==="district_mayors")&&N.length>0&&e.jsx("div",{className:"mb-4 bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-sm font-bold text-gray-900 whitespace-nowrap",children:"le Filtresi"}),e.jsxs("select",{value:c,onChange:_=>g(_.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none text-sm",children:[e.jsx("option",{value:"",children:"Tm"}),N.map(_=>e.jsx("option",{value:_,children:_},_))]})]})}),k()]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 sticky top-24",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5 text-primary-blue"}),f.cityName,"'den Son Paylamlar"]}),e.jsxs("div",{className:"space-y-4",children:[f.posts.slice(0,5).map(_=>{var M;return e.jsx(Ts,{post:_,showCity:!1,showPartyLogo:!0,fullWidth:!0},(M=_.post_id)!=null?M:_.id)}),f.posts.length===0&&e.jsx("p",{className:"text-center text-gray-500 py-8",children:"Henz paylam bulunmuyor"})]})]})})]})})]})},DN=()=>{const r=Qt();return m.useEffect(()=>{r("/login-new",{replace:!0})},[r]),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-blue mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Ynlendiriliyor..."})]})})},BN=()=>{const r=Qt();return m.useEffect(()=>{r("/register-new",{replace:!0})},[r]),e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-blue mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Ynlendiriliyor..."})]})})},UN=({label:r,error:s,className:l="",...i})=>e.jsxs("div",{className:"w-full",children:[r&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),e.jsx("input",{className:di("w-full px-4 py-2 border border-gray-300 rounded-lg","focus:outline-none focus:ring-2 focus:ring-primary-blue focus:border-transparent","disabled:bg-gray-100 disabled:cursor-not-allowed",s&&"border-red-500",l),...i}),s&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s})]});var en={},Bc={},Ym=function(r,s){return Ym=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,i){l.__proto__=i}||function(l,i){for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(l[d]=i[d])},Ym(r,s)};function Dy(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");Ym(r,s);function l(){this.constructor=r}r.prototype=s===null?Object.create(s):(l.prototype=s.prototype,new l)}var ad=function(){return ad=Object.assign||function(s){for(var l,i=1,d=arguments.length;i<d;i++){l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(s[u]=l[u])}return s},ad.apply(this,arguments)};function pi(r,s){var l={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&s.indexOf(i)<0&&(l[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var d=0,i=Object.getOwnPropertySymbols(r);d<i.length;d++)s.indexOf(i[d])<0&&Object.prototype.propertyIsEnumerable.call(r,i[d])&&(l[i[d]]=r[i[d]]);return l}function By(r,s,l,i){var d=arguments.length,u=d<3?s:i===null?i=Object.getOwnPropertyDescriptor(s,l):i,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(r,s,l,i);else for(var g=r.length-1;g>=0;g--)(c=r[g])&&(u=(d<3?c(u):d>3?c(s,l,u):c(s,l))||u);return d>3&&u&&Object.defineProperty(s,l,u),u}function Uy(r,s){return function(l,i){s(l,i,r)}}function Ly(r,s,l,i,d,u){function c(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var g=i.kind,f=g==="getter"?"get":g==="setter"?"set":"value",v=!s&&r?i.static?r:r.prototype:null,b=s||(v?Object.getOwnPropertyDescriptor(v,i.name):{}),w,N=!1,k=l.length-1;k>=0;k--){var _={};for(var M in i)_[M]=M==="access"?{}:i[M];for(var M in i.access)_.access[M]=i.access[M];_.addInitializer=function(A){if(N)throw new TypeError("Cannot add initializers after decoration has completed");u.push(c(A||null))};var T=(0,l[k])(g==="accessor"?{get:b.get,set:b.set}:b[f],_);if(g==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(w=c(T.get))&&(b.get=w),(w=c(T.set))&&(b.set=w),(w=c(T.init))&&d.unshift(w)}else(w=c(T))&&(g==="field"?d.unshift(w):b[f]=w)}v&&Object.defineProperty(v,i.name,b),N=!0}function $y(r,s,l){for(var i=arguments.length>2,d=0;d<s.length;d++)l=i?s[d].call(r,l):s[d].call(r);return i?l:void 0}function Iy(r){return typeof r=="symbol"?r:"".concat(r)}function qy(r,s,l){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(r,"name",{configurable:!0,value:l?"".concat(l," ",s):s})}function Yy(r,s){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,s)}function ht(r,s,l,i){function d(u){return u instanceof l?u:new l(function(c){c(u)})}return new(l||(l=Promise))(function(u,c){function g(b){try{v(i.next(b))}catch(w){c(w)}}function f(b){try{v(i.throw(b))}catch(w){c(w)}}function v(b){b.done?u(b.value):d(b.value).then(g,f)}v((i=i.apply(r,s||[])).next())})}function Gy(r,s){var l={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,d,u,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=g(0),c.throw=g(1),c.return=g(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function g(v){return function(b){return f([v,b])}}function f(v){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,v[0]&&(l=0)),l;)try{if(i=1,d&&(u=v[0]&2?d.return:v[0]?d.throw||((u=d.return)&&u.call(d),0):d.next)&&!(u=u.call(d,v[1])).done)return u;switch(d=0,u&&(v=[v[0]&2,u.value]),v[0]){case 0:case 1:u=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,d=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(u=l.trys,!(u=u.length>0&&u[u.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!u||v[1]>u[0]&&v[1]<u[3])){l.label=v[1];break}if(v[0]===6&&l.label<u[1]){l.label=u[1],u=v;break}if(u&&l.label<u[2]){l.label=u[2],l.ops.push(v);break}u[2]&&l.ops.pop(),l.trys.pop();continue}v=s.call(r,l)}catch(b){v=[6,b],d=0}finally{i=u=0}if(v[0]&5)throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}}var gd=Object.create?(function(r,s,l,i){i===void 0&&(i=l);var d=Object.getOwnPropertyDescriptor(s,l);(!d||("get"in d?!s.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(r,i,d)}):(function(r,s,l,i){i===void 0&&(i=l),r[i]=s[l]});function Ky(r,s){for(var l in r)l!=="default"&&!Object.prototype.hasOwnProperty.call(s,l)&&gd(s,r,l)}function sd(r){var s=typeof Symbol=="function"&&Symbol.iterator,l=s&&r[s],i=0;if(l)return l.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function fh(r,s){var l=typeof Symbol=="function"&&r[Symbol.iterator];if(!l)return r;var i=l.call(r),d,u=[],c;try{for(;(s===void 0||s-- >0)&&!(d=i.next()).done;)u.push(d.value)}catch(g){c={error:g}}finally{try{d&&!d.done&&(l=i.return)&&l.call(i)}finally{if(c)throw c.error}}return u}function Hy(){for(var r=[],s=0;s<arguments.length;s++)r=r.concat(fh(arguments[s]));return r}function Vy(){for(var r=0,s=0,l=arguments.length;s<l;s++)r+=arguments[s].length;for(var i=Array(r),d=0,s=0;s<l;s++)for(var u=arguments[s],c=0,g=u.length;c<g;c++,d++)i[d]=u[c];return i}function Fy(r,s,l){if(l||arguments.length===2)for(var i=0,d=s.length,u;i<d;i++)(u||!(i in s))&&(u||(u=Array.prototype.slice.call(s,0,i)),u[i]=s[i]);return r.concat(u||Array.prototype.slice.call(s))}function hi(r){return this instanceof hi?(this.v=r,this):new hi(r)}function Xy(r,s,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=l.apply(r,s||[]),d,u=[];return d=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",c),d[Symbol.asyncIterator]=function(){return this},d;function c(k){return function(_){return Promise.resolve(_).then(k,w)}}function g(k,_){i[k]&&(d[k]=function(M){return new Promise(function(T,A){u.push([k,M,T,A])>1||f(k,M)})},_&&(d[k]=_(d[k])))}function f(k,_){try{v(i[k](_))}catch(M){N(u[0][3],M)}}function v(k){k.value instanceof hi?Promise.resolve(k.value.v).then(b,w):N(u[0][2],k)}function b(k){f("next",k)}function w(k){f("throw",k)}function N(k,_){k(_),u.shift(),u.length&&f(u[0][0],u[0][1])}}function Jy(r){var s,l;return s={},i("next"),i("throw",function(d){throw d}),i("return"),s[Symbol.iterator]=function(){return this},s;function i(d,u){s[d]=r[d]?function(c){return(l=!l)?{value:hi(r[d](c)),done:!1}:u?u(c):c}:u}}function Qy(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=r[Symbol.asyncIterator],l;return s?s.call(r):(r=typeof sd=="function"?sd(r):r[Symbol.iterator](),l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l);function i(u){l[u]=r[u]&&function(c){return new Promise(function(g,f){c=r[u](c),d(g,f,c.done,c.value)})}}function d(u,c,g,f){Promise.resolve(f).then(function(v){u({value:v,done:g})},c)}}function Zy(r,s){return Object.defineProperty?Object.defineProperty(r,"raw",{value:s}):r.raw=s,r}var LN=Object.create?(function(r,s){Object.defineProperty(r,"default",{enumerable:!0,value:s})}):function(r,s){r.default=s},Gm=function(r){return Gm=Object.getOwnPropertyNames||function(s){var l=[];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(l[l.length]=i);return l},Gm(r)};function Wy(r){if(r&&r.__esModule)return r;var s={};if(r!=null)for(var l=Gm(r),i=0;i<l.length;i++)l[i]!=="default"&&gd(s,r,l[i]);return LN(s,r),s}function ep(r){return r&&r.__esModule?r:{default:r}}function tp(r,s,l,i){if(l==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof s=="function"?r!==s||!i:!s.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l==="m"?i:l==="a"?i.call(r):i?i.value:s.get(r)}function ap(r,s,l,i,d){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!d)throw new TypeError("Private accessor was defined without a setter");if(typeof s=="function"?r!==s||!d:!s.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?d.call(r,l):d?d.value=l:s.set(r,l),l}function sp(r,s){if(s===null||typeof s!="object"&&typeof s!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof r=="function"?s===r:r.has(s)}function rp(r,s,l){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var i,d;if(l){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=s[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=s[Symbol.dispose],l&&(d=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");d&&(i=function(){try{d.call(this)}catch(u){return Promise.reject(u)}}),r.stack.push({value:s,dispose:i,async:l})}else l&&r.stack.push({async:!0});return s}var $N=typeof SuppressedError=="function"?SuppressedError:function(r,s,l){var i=new Error(l);return i.name="SuppressedError",i.error=r,i.suppressed=s,i};function np(r){function s(u){r.error=r.hasError?new $N(u,r.error,"An error was suppressed during disposal."):u,r.hasError=!0}var l,i=0;function d(){for(;l=r.stack.pop();)try{if(!l.async&&i===1)return i=0,r.stack.push(l),Promise.resolve().then(d);if(l.dispose){var u=l.dispose.call(l.value);if(l.async)return i|=2,Promise.resolve(u).then(d,function(c){return s(c),d()})}else i|=1}catch(c){s(c)}if(i===1)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error}return d()}function lp(r,s){return typeof r=="string"&&/^\.\.?\//.test(r)?r.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(l,i,d,u,c){return i?s?".jsx":".js":d&&(!u||!c)?l:d+u+"."+c.toLowerCase()+"js"}):r}const IN={__extends:Dy,__assign:ad,__rest:pi,__decorate:By,__param:Uy,__esDecorate:Ly,__runInitializers:$y,__propKey:Iy,__setFunctionName:qy,__metadata:Yy,__awaiter:ht,__generator:Gy,__createBinding:gd,__exportStar:Ky,__values:sd,__read:fh,__spread:Hy,__spreadArrays:Vy,__spreadArray:Fy,__await:hi,__asyncGenerator:Xy,__asyncDelegator:Jy,__asyncValues:Qy,__makeTemplateObject:Zy,__importStar:Wy,__importDefault:ep,__classPrivateFieldGet:tp,__classPrivateFieldSet:ap,__classPrivateFieldIn:sp,__addDisposableResource:rp,__disposeResources:np,__rewriteRelativeImportExtension:lp},qN=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:rp,get __assign(){return ad},__asyncDelegator:Jy,__asyncGenerator:Xy,__asyncValues:Qy,__await:hi,__awaiter:ht,__classPrivateFieldGet:tp,__classPrivateFieldIn:sp,__classPrivateFieldSet:ap,__createBinding:gd,__decorate:By,__disposeResources:np,__esDecorate:Ly,__exportStar:Ky,__extends:Dy,__generator:Gy,__importDefault:ep,__importStar:Wy,__makeTemplateObject:Zy,__metadata:Yy,__param:Uy,__propKey:Iy,__read:fh,__rest:pi,__rewriteRelativeImportExtension:lp,__runInitializers:$y,__setFunctionName:qy,__spread:Hy,__spreadArray:Fy,__spreadArrays:Vy,__values:sd,default:IN},Symbol.toStringTag,{value:"Module"})),YN=r=>r?(...s)=>r(...s):(...s)=>fetch(...s);let yd=class extends Error{constructor(s,l="FunctionsError",i){super(s),this.name=l,this.context=i}},ip=class extends yd{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}},Km=class extends yd{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}},Hm=class extends yd{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}};var rd;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(rd||(rd={}));class GN{constructor(s,{headers:l={},customFetch:i,region:d=rd.Any}={}){this.url=s,this.headers=l,this.region=d,this.fetch=YN(i)}setAuth(s){this.headers.Authorization="Bearer ".concat(s)}invoke(s){return ht(this,arguments,void 0,function*(l,i={}){var d;let u,c;try{const{headers:g,method:f,body:v,signal:b,timeout:w}=i;let N={},{region:k}=i;k||(k=this.region);const _=new URL("".concat(this.url,"/").concat(l));k&&k!=="any"&&(N["x-region"]=k,_.searchParams.set("forceFunctionRegion",k));let M;v&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)?typeof Blob<"u"&&v instanceof Blob||v instanceof ArrayBuffer?(N["Content-Type"]="application/octet-stream",M=v):typeof v=="string"?(N["Content-Type"]="text/plain",M=v):typeof FormData<"u"&&v instanceof FormData?M=v:(N["Content-Type"]="application/json",M=JSON.stringify(v)):M=v;let T=b;w&&(c=new AbortController,u=setTimeout(()=>c.abort(),w),b?(T=c.signal,b.addEventListener("abort",()=>c.abort())):T=c.signal);const A=yield this.fetch(_.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},N),this.headers),g),body:M,signal:T}).catch(j=>{throw new ip(j)}),S=A.headers.get("x-relay-error");if(S&&S==="true")throw new Km(A);if(!A.ok)throw new Hm(A);let y=((d=A.headers.get("Content-Type"))!==null&&d!==void 0?d:"text/plain").split(";")[0].trim(),p;return y==="application/json"?p=yield A.json():y==="application/octet-stream"||y==="application/pdf"?p=yield A.blob():y==="text/event-stream"?p=A:y==="multipart/form-data"?p=yield A.formData():p=yield A.text(),{data:p,error:null,response:A}}catch(g){return{data:null,error:g,response:g instanceof Hm||g instanceof Km?g.context:void 0}}finally{u&&clearTimeout(u)}})}}const KN=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return rd},FunctionsClient:GN,FunctionsError:yd,FunctionsFetchError:ip,FunctionsHttpError:Hm,FunctionsRelayError:Km},Symbol.toStringTag,{value:"Module"})),op=ko(KN);var Es={};const bi=ko(qN);var Uc={},Lc={},$c={},Ic={},qc={},Yc={},p0;function cp(){if(p0)return Yc;p0=1,Object.defineProperty(Yc,"__esModule",{value:!0});class r extends Error{constructor(l){super(l.message),this.name="PostgrestError",this.details=l.details,this.hint=l.hint,this.code=l.code}}return Yc.default=r,Yc}var b0;function dp(){if(b0)return qc;b0=1,Object.defineProperty(qc,"__esModule",{value:!0});const s=bi.__importDefault(cp());let l=class{constructor(d){var u,c;this.shouldThrowOnError=!1,this.method=d.method,this.url=d.url,this.headers=new Headers(d.headers),this.schema=d.schema,this.body=d.body,this.shouldThrowOnError=(u=d.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=d.signal,this.isMaybeSingle=(c=d.isMaybeSingle)!==null&&c!==void 0?c:!1,d.fetch?this.fetch=d.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(d,u){return this.headers=new Headers(this.headers),this.headers.set(d,u),this}then(d,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let g=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var v,b,w,N;let k=null,_=null,M=null,T=f.status,A=f.statusText;if(f.ok){if(this.method!=="HEAD"){const j=await f.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?_=j:_=JSON.parse(j))}const y=(b=this.headers.get("Prefer"))===null||b===void 0?void 0:b.match(/count=(exact|planned|estimated)/),p=(w=f.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");y&&p&&p.length>1&&(M=parseInt(p[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(k={code:"PGRST116",details:"Results contain ".concat(_.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,M=null,T=406,A="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const y=await f.text();try{k=JSON.parse(y),Array.isArray(k)&&f.status===404&&(_=[],k=null,T=200,A="OK")}catch(p){f.status===404&&y===""?(T=204,A="No Content"):k={message:y}}if(k&&this.isMaybeSingle&&(!((N=k==null?void 0:k.details)===null||N===void 0)&&N.includes("0 rows"))&&(k=null,T=200,A="OK"),k&&this.shouldThrowOnError)throw new s.default(k)}return{error:k,data:_,count:M,status:T,statusText:A}});return this.shouldThrowOnError||(g=g.catch(f=>{var v,b,w,N,k,_;let M="";const T=f==null?void 0:f.cause;if(T){const A=(v=T==null?void 0:T.message)!==null&&v!==void 0?v:"",S=(b=T==null?void 0:T.code)!==null&&b!==void 0?b:"";M="".concat((w=f==null?void 0:f.name)!==null&&w!==void 0?w:"FetchError",": ").concat(f==null?void 0:f.message),M+="\n\nCaused by: ".concat((N=T==null?void 0:T.name)!==null&&N!==void 0?N:"Error",": ").concat(A),S&&(M+=" (".concat(S,")")),T!=null&&T.stack&&(M+="\n".concat(T.stack))}else M=(k=f==null?void 0:f.stack)!==null&&k!==void 0?k:"";return{error:{message:"".concat((_=f==null?void 0:f.name)!==null&&_!==void 0?_:"FetchError",": ").concat(f==null?void 0:f.message),details:M,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),g.then(d,u)}returns(){return this}overrideTypes(){return this}};return qc.default=l,qc}var v0;function up(){if(v0)return Ic;v0=1,Object.defineProperty(Ic,"__esModule",{value:!0});const s=bi.__importDefault(dp());let l=class extends s.default{select(d){let u=!1;const c=(d!=null?d:"*").split("").map(g=>/\s/.test(g)&&!u?"":(g==='"'&&(u=!u),g)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(d,{ascending:u=!0,nullsFirst:c,foreignTable:g,referencedTable:f=g}={}){const v=f?"".concat(f,".order"):"order",b=this.url.searchParams.get(v);return this.url.searchParams.set(v,"".concat(b?"".concat(b,","):"").concat(d,".").concat(u?"asc":"desc").concat(c===void 0?"":c?".nullsfirst":".nullslast")),this}limit(d,{foreignTable:u,referencedTable:c=u}={}){const g=typeof c>"u"?"limit":"".concat(c,".limit");return this.url.searchParams.set(g,"".concat(d)),this}range(d,u,{foreignTable:c,referencedTable:g=c}={}){const f=typeof g>"u"?"offset":"".concat(g,".offset"),v=typeof g>"u"?"limit":"".concat(g,".limit");return this.url.searchParams.set(f,"".concat(d)),this.url.searchParams.set(v,"".concat(u-d+1)),this}abortSignal(d){return this.signal=d,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:d=!1,verbose:u=!1,settings:c=!1,buffers:g=!1,wal:f=!1,format:v="text"}={}){var b;const w=[d?"analyze":null,u?"verbose":null,c?"settings":null,g?"buffers":null,f?"wal":null].filter(Boolean).join("|"),N=(b=this.headers.get("Accept"))!==null&&b!==void 0?b:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(v,'; for="').concat(N,'"; options=').concat(w,";")),v==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(d){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(d)),this}};return Ic.default=l,Ic}var j0;function xh(){if(j0)return $c;j0=1,Object.defineProperty($c,"__esModule",{value:!0});const s=bi.__importDefault(up()),l=new RegExp("[,()]");let i=class extends s.default{eq(u,c){return this.url.searchParams.append(u,"eq.".concat(c)),this}neq(u,c){return this.url.searchParams.append(u,"neq.".concat(c)),this}gt(u,c){return this.url.searchParams.append(u,"gt.".concat(c)),this}gte(u,c){return this.url.searchParams.append(u,"gte.".concat(c)),this}lt(u,c){return this.url.searchParams.append(u,"lt.".concat(c)),this}lte(u,c){return this.url.searchParams.append(u,"lte.".concat(c)),this}like(u,c){return this.url.searchParams.append(u,"like.".concat(c)),this}likeAllOf(u,c){return this.url.searchParams.append(u,"like(all).{".concat(c.join(","),"}")),this}likeAnyOf(u,c){return this.url.searchParams.append(u,"like(any).{".concat(c.join(","),"}")),this}ilike(u,c){return this.url.searchParams.append(u,"ilike.".concat(c)),this}ilikeAllOf(u,c){return this.url.searchParams.append(u,"ilike(all).{".concat(c.join(","),"}")),this}ilikeAnyOf(u,c){return this.url.searchParams.append(u,"ilike(any).{".concat(c.join(","),"}")),this}regexMatch(u,c){return this.url.searchParams.append(u,"match.".concat(c)),this}regexIMatch(u,c){return this.url.searchParams.append(u,"imatch.".concat(c)),this}is(u,c){return this.url.searchParams.append(u,"is.".concat(c)),this}isDistinct(u,c){return this.url.searchParams.append(u,"isdistinct.".concat(c)),this}in(u,c){const g=Array.from(new Set(c)).map(f=>typeof f=="string"&&l.test(f)?'"'.concat(f,'"'):"".concat(f)).join(",");return this.url.searchParams.append(u,"in.(".concat(g,")")),this}contains(u,c){return typeof c=="string"?this.url.searchParams.append(u,"cs.".concat(c)):Array.isArray(c)?this.url.searchParams.append(u,"cs.{".concat(c.join(","),"}")):this.url.searchParams.append(u,"cs.".concat(JSON.stringify(c))),this}containedBy(u,c){return typeof c=="string"?this.url.searchParams.append(u,"cd.".concat(c)):Array.isArray(c)?this.url.searchParams.append(u,"cd.{".concat(c.join(","),"}")):this.url.searchParams.append(u,"cd.".concat(JSON.stringify(c))),this}rangeGt(u,c){return this.url.searchParams.append(u,"sr.".concat(c)),this}rangeGte(u,c){return this.url.searchParams.append(u,"nxl.".concat(c)),this}rangeLt(u,c){return this.url.searchParams.append(u,"sl.".concat(c)),this}rangeLte(u,c){return this.url.searchParams.append(u,"nxr.".concat(c)),this}rangeAdjacent(u,c){return this.url.searchParams.append(u,"adj.".concat(c)),this}overlaps(u,c){return typeof c=="string"?this.url.searchParams.append(u,"ov.".concat(c)):this.url.searchParams.append(u,"ov.{".concat(c.join(","),"}")),this}textSearch(u,c,{config:g,type:f}={}){let v="";f==="plain"?v="pl":f==="phrase"?v="ph":f==="websearch"&&(v="w");const b=g===void 0?"":"(".concat(g,")");return this.url.searchParams.append(u,"".concat(v,"fts").concat(b,".").concat(c)),this}match(u){return Object.entries(u).forEach(([c,g])=>{this.url.searchParams.append(c,"eq.".concat(g))}),this}not(u,c,g){return this.url.searchParams.append(u,"not.".concat(c,".").concat(g)),this}or(u,{foreignTable:c,referencedTable:g=c}={}){const f=g?"".concat(g,".or"):"or";return this.url.searchParams.append(f,"(".concat(u,")")),this}filter(u,c,g){return this.url.searchParams.append(u,"".concat(c,".").concat(g)),this}};return $c.default=i,$c}var N0;function mp(){if(N0)return Lc;N0=1,Object.defineProperty(Lc,"__esModule",{value:!0});const s=bi.__importDefault(xh());let l=class{constructor(d,{headers:u={},schema:c,fetch:g}){this.url=d,this.headers=new Headers(u),this.schema=c,this.fetch=g}select(d,u){const{head:c=!1,count:g}=u!=null?u:{},f=c?"HEAD":"GET";let v=!1;const b=(d!=null?d:"*").split("").map(w=>/\s/.test(w)&&!v?"":(w==='"'&&(v=!v),w)).join("");return this.url.searchParams.set("select",b),g&&this.headers.append("Prefer","count=".concat(g)),new s.default({method:f,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(d,{count:u,defaultToNull:c=!0}={}){var g;const f="POST";if(u&&this.headers.append("Prefer","count=".concat(u)),c||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const v=d.reduce((b,w)=>b.concat(Object.keys(w)),[]);if(v.length>0){const b=[...new Set(v)].map(w=>'"'.concat(w,'"'));this.url.searchParams.set("columns",b.join(","))}}return new s.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(g=this.fetch)!==null&&g!==void 0?g:fetch})}upsert(d,{onConflict:u,ignoreDuplicates:c=!1,count:g,defaultToNull:f=!0}={}){var v;const b="POST";if(this.headers.append("Prefer","resolution=".concat(c?"ignore":"merge","-duplicates")),u!==void 0&&this.url.searchParams.set("on_conflict",u),g&&this.headers.append("Prefer","count=".concat(g)),f||this.headers.append("Prefer","missing=default"),Array.isArray(d)){const w=d.reduce((N,k)=>N.concat(Object.keys(k)),[]);if(w.length>0){const N=[...new Set(w)].map(k=>'"'.concat(k,'"'));this.url.searchParams.set("columns",N.join(","))}}return new s.default({method:b,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}update(d,{count:u}={}){var c;const g="PATCH";return u&&this.headers.append("Prefer","count=".concat(u)),new s.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:d,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:d}={}){var u;const c="DELETE";return d&&this.headers.append("Prefer","count=".concat(d)),new s.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return Lc.default=l,Lc}var w0;function HN(){if(w0)return Uc;w0=1,Object.defineProperty(Uc,"__esModule",{value:!0});const r=bi,s=r.__importDefault(mp()),l=r.__importDefault(xh());let i=class hp{constructor(u,{headers:c={},schema:g,fetch:f}={}){this.url=u,this.headers=new Headers(c),this.schemaName=g,this.fetch=f}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL("".concat(this.url,"/").concat(u));return new s.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new hp(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,c={},{head:g=!1,get:f=!1,count:v}={}){var b;let w;const N=new URL("".concat(this.url,"/rpc/").concat(u));let k;g||f?(w=g?"HEAD":"GET",Object.entries(c).filter(([M,T])=>T!==void 0).map(([M,T])=>[M,Array.isArray(T)?"{".concat(T.join(","),"}"):"".concat(T)]).forEach(([M,T])=>{N.searchParams.append(M,T)})):(w="POST",k=c);const _=new Headers(this.headers);return v&&_.set("Prefer","count=".concat(v)),new l.default({method:w,url:N,headers:_,schema:this.schemaName,body:k,fetch:(b=this.fetch)!==null&&b!==void 0?b:fetch})}};return Uc.default=i,Uc}var _0;function fp(){if(_0)return Es;_0=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.PostgrestError=Es.PostgrestBuilder=Es.PostgrestTransformBuilder=Es.PostgrestFilterBuilder=Es.PostgrestQueryBuilder=Es.PostgrestClient=void 0;const r=bi,s=r.__importDefault(HN());Es.PostgrestClient=s.default;const l=r.__importDefault(mp());Es.PostgrestQueryBuilder=l.default;const i=r.__importDefault(xh());Es.PostgrestFilterBuilder=i.default;const d=r.__importDefault(up());Es.PostgrestTransformBuilder=d.default;const u=r.__importDefault(dp());Es.PostgrestBuilder=u.default;const c=r.__importDefault(cp());return Es.PostgrestError=c.default,Es.default={PostgrestClient:s.default,PostgrestQueryBuilder:l.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:d.default,PostgrestBuilder:u.default,PostgrestError:c.default},Es}class xp{constructor(){}static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const l=process.versions;if(l&&l.node){const i=l.node,d=parseInt(i.replace(/^v/,"").split(".")[0]);return d>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(d," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(d," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let l=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(l+="\n\nSuggested solution: ".concat(s.workaround)),new Error(l)}static createWebSocket(s,l){const i=this.getWebSocketConstructor();return new i(s,l)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch(s){return!1}}}const VN="2.87.1",FN="realtime-js/".concat(VN),gp="1.0.0",XN="2.0.0",S0=gp,Vm=1e4,JN=1e3,QN=100;var ll;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ll||(ll={}));var is;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(is||(is={}));var jr;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(jr||(jr={}));var Fm;(function(r){r.websocket="websocket"})(Fm||(Fm={}));var il;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(il||(il={}));class ZN{constructor(s){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=s!=null?s:[]}encode(s,l){if(s.event===this.BROADCAST_EVENT&&!(s.payload instanceof ArrayBuffer)&&typeof s.payload.event=="string")return l(this._binaryEncodeUserBroadcastPush(s));let i=[s.join_ref,s.ref,s.topic,s.event,s.payload];return l(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(s){var l;return this._isArrayBuffer((l=s.payload)===null||l===void 0?void 0:l.payload)?this._encodeBinaryUserBroadcastPush(s):this._encodeJsonUserBroadcastPush(s)}_encodeBinaryUserBroadcastPush(s){var l,i;const d=(i=(l=s.payload)===null||l===void 0?void 0:l.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(s,this.BINARY_ENCODING,d)}_encodeJsonUserBroadcastPush(s){var l,i;const d=(i=(l=s.payload)===null||l===void 0?void 0:l.payload)!==null&&i!==void 0?i:{},c=new TextEncoder().encode(JSON.stringify(d)).buffer;return this._encodeUserBroadcastPush(s,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(s,l,i){var d,u;const c=s.topic,g=(d=s.ref)!==null&&d!==void 0?d:"",f=(u=s.join_ref)!==null&&u!==void 0?u:"",v=s.payload.event,b=this.allowedMetadataKeys?this._pick(s.payload,this.allowedMetadataKeys):{},w=Object.keys(b).length===0?"":JSON.stringify(b);if(f.length>255)throw new Error("joinRef length ".concat(f.length," exceeds maximum of 255"));if(g.length>255)throw new Error("ref length ".concat(g.length," exceeds maximum of 255"));if(c.length>255)throw new Error("topic length ".concat(c.length," exceeds maximum of 255"));if(v.length>255)throw new Error("userEvent length ".concat(v.length," exceeds maximum of 255"));if(w.length>255)throw new Error("metadata length ".concat(w.length," exceeds maximum of 255"));const N=this.USER_BROADCAST_PUSH_META_LENGTH+f.length+g.length+c.length+v.length+w.length,k=new ArrayBuffer(this.HEADER_LENGTH+N);let _=new DataView(k),M=0;_.setUint8(M++,this.KINDS.userBroadcastPush),_.setUint8(M++,f.length),_.setUint8(M++,g.length),_.setUint8(M++,c.length),_.setUint8(M++,v.length),_.setUint8(M++,w.length),_.setUint8(M++,l),Array.from(f,A=>_.setUint8(M++,A.charCodeAt(0))),Array.from(g,A=>_.setUint8(M++,A.charCodeAt(0))),Array.from(c,A=>_.setUint8(M++,A.charCodeAt(0))),Array.from(v,A=>_.setUint8(M++,A.charCodeAt(0))),Array.from(w,A=>_.setUint8(M++,A.charCodeAt(0)));var T=new Uint8Array(k.byteLength+i.byteLength);return T.set(new Uint8Array(k),0),T.set(new Uint8Array(i),k.byteLength),T.buffer}decode(s,l){if(this._isArrayBuffer(s)){let i=this._binaryDecode(s);return l(i)}if(typeof s=="string"){const i=JSON.parse(s),[d,u,c,g,f]=i;return l({join_ref:d,ref:u,topic:c,event:g,payload:f})}return l({})}_binaryDecode(s){const l=new DataView(s),i=l.getUint8(0),d=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(s,l,d)}}_decodeUserBroadcast(s,l,i){const d=l.getUint8(1),u=l.getUint8(2),c=l.getUint8(3),g=l.getUint8(4);let f=this.HEADER_LENGTH+4;const v=i.decode(s.slice(f,f+d));f=f+d;const b=i.decode(s.slice(f,f+u));f=f+u;const w=i.decode(s.slice(f,f+c));f=f+c;const N=s.slice(f,s.byteLength),k=g===this.JSON_ENCODING?JSON.parse(i.decode(N)):N,_={type:this.BROADCAST_EVENT,event:b,payload:k};return c>0&&(_.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:v,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(s){var l;return s instanceof ArrayBuffer||((l=s==null?void 0:s.constructor)===null||l===void 0?void 0:l.name)==="ArrayBuffer"}_pick(s,l){return!s||typeof s!="object"?{}:Object.fromEntries(Object.entries(s).filter(([i])=>l.includes(i)))}}class yp{constructor(s,l){this.callback=s,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Oa;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Oa||(Oa={}));const k0=(r,s,l={})=>{var i;const d=(i=l.skipTypes)!==null&&i!==void 0?i:[];return s?Object.keys(s).reduce((u,c)=>(u[c]=WN(c,r,s,d),u),{}):{}},WN=(r,s,l,i)=>{const d=s.find(g=>g.name===r),u=d==null?void 0:d.type,c=l[r];return u&&!i.includes(u)?pp(u,c):Xm(c)},pp=(r,s)=>{if(r.charAt(0)==="_"){const l=r.slice(1,r.length);return sw(s,l)}switch(r){case Oa.bool:return ew(s);case Oa.float4:case Oa.float8:case Oa.int2:case Oa.int4:case Oa.int8:case Oa.numeric:case Oa.oid:return tw(s);case Oa.json:case Oa.jsonb:return aw(s);case Oa.timestamp:return rw(s);case Oa.abstime:case Oa.date:case Oa.daterange:case Oa.int4range:case Oa.int8range:case Oa.money:case Oa.reltime:case Oa.text:case Oa.time:case Oa.timestamptz:case Oa.timetz:case Oa.tsrange:case Oa.tstzrange:return Xm(s);default:return Xm(s)}},Xm=r=>r,ew=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},tw=r=>{if(typeof r=="string"){const s=parseFloat(r);if(!Number.isNaN(s))return s}return r},aw=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(s){return console.log("JSON parse error: ".concat(s)),r}return r},sw=(r,s)=>{if(typeof r!="string")return r;const l=r.length-1,i=r[l];if(r[0]==="{"&&i==="}"){let u;const c=r.slice(1,l);try{u=JSON.parse("["+c+"]")}catch(g){u=c?c.split(","):[]}return u.map(g=>pp(s,g))}return r},rw=r=>typeof r=="string"?r.replace(" ","T"):r,bp=r=>{const s=new URL(r);return s.protocol=s.protocol.replace(/^ws/i,"http"),s.pathname=s.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),s.pathname===""||s.pathname==="/"?s.pathname="/api/broadcast":s.pathname=s.pathname+"/api/broadcast",s.href};class Sm{constructor(s,l,i={},d=Vm){this.channel=s,this.event=l,this.payload=i,this.timeout=d,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,l){var i;return this._hasReceived(s)&&l((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:s,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:l}){this.recHooks.filter(i=>i.status===s).forEach(i=>i.callback(l))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var Jm;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Jm||(Jm={}));let vp=class Fc{constructor(s,l){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(l==null?void 0:l.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},d=>{const{onJoin:u,onLeave:c,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Fc.syncState(this.state,d,u,c),this.pendingDiffs.forEach(f=>{this.state=Fc.syncDiff(this.state,f,u,c)}),this.pendingDiffs=[],g()}),this.channel._on(i.diff,{},d=>{const{onJoin:u,onLeave:c,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(d):(this.state=Fc.syncDiff(this.state,d,u,c),g())}),this.onJoin((d,u,c)=>{this.channel._trigger("presence",{event:"join",key:d,currentPresences:u,newPresences:c})}),this.onLeave((d,u,c)=>{this.channel._trigger("presence",{event:"leave",key:d,currentPresences:u,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,l,i,d){const u=this.cloneDeep(s),c=this.transformState(l),g={},f={};return this.map(u,(v,b)=>{c[v]||(f[v]=b)}),this.map(c,(v,b)=>{const w=u[v];if(w){const N=b.map(T=>T.presence_ref),k=w.map(T=>T.presence_ref),_=b.filter(T=>k.indexOf(T.presence_ref)<0),M=w.filter(T=>N.indexOf(T.presence_ref)<0);_.length>0&&(g[v]=_),M.length>0&&(f[v]=M)}else g[v]=b}),this.syncDiff(u,{joins:g,leaves:f},i,d)}static syncDiff(s,l,i,d){const{joins:u,leaves:c}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return i||(i=()=>{}),d||(d=()=>{}),this.map(u,(g,f)=>{var v;const b=(v=s[g])!==null&&v!==void 0?v:[];if(s[g]=this.cloneDeep(f),b.length>0){const w=s[g].map(k=>k.presence_ref),N=b.filter(k=>w.indexOf(k.presence_ref)<0);s[g].unshift(...N)}i(g,b,f)}),this.map(c,(g,f)=>{let v=s[g];if(!v)return;const b=f.map(w=>w.presence_ref);v=v.filter(w=>b.indexOf(w.presence_ref)<0),s[g]=v,d(g,v,f),v.length===0&&delete s[g]}),s}static map(s,l){return Object.getOwnPropertyNames(s).map(i=>l(i,s[i]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((l,i)=>{const d=s[i];return"metas"in d?l[i]=d.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):l[i]=d,l},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Qm;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Qm||(Qm={}));var ai;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ai||(ai={}));var Mr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Mr||(Mr={}));const nw=is;let jp=class fo{constructor(s,l={config:{}},i){var d,u;if(this.topic=s,this.params=l,this.socket=i,this.bindings={},this.state=is.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Sm(this,jr.join,this.params,this.timeout),this.rejoinTimer=new yp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=is.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=is.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),c),this.state=is.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=is.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),c),this.state=is.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jr.reply,{},(c,g)=>{this._trigger(this._replyEventName(g),c)}),this.presence=new vp(this),this.broadcastEndpointURL=bp(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(d=this.params.config)===null||d===void 0?void 0:d.broadcast)===null||u===void 0)&&u.replay))throw"tried to use replay on public channel '".concat(this.topic,"'. It must be a private channel.")}subscribe(s,l=this.timeout){var i,d,u;if(this.socket.isConnected()||this.socket.connect(),this.state==is.closed){const{config:{broadcast:c,presence:g,private:f}}=this.params,v=(d=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(k=>k.filter))!==null&&d!==void 0?d:[],b=!!this.bindings[ai.PRESENCE]&&this.bindings[ai.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},N={broadcast:c,presence:Object.assign(Object.assign({},g),{enabled:b}),postgres_changes:v,private:f};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(k=>s==null?void 0:s(Mr.CHANNEL_ERROR,k)),this._onClose(()=>s==null?void 0:s(Mr.CLOSED)),this.updateJoinPayload(Object.assign({config:N},w)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:k})=>{var _;if(this.socket._isManualToken()||this.socket.setAuth(),k===void 0){s==null||s(Mr.SUBSCRIBED);return}else{const M=this.bindings.postgres_changes,T=(_=M==null?void 0:M.length)!==null&&_!==void 0?_:0,A=[];for(let S=0;S<T;S++){const y=M[S],{filter:{event:p,schema:j,table:E,filter:C}}=y,O=k&&k[S];if(O&&O.event===p&&fo.isFilterValueEqual(O.schema,j)&&fo.isFilterValueEqual(O.table,E)&&fo.isFilterValueEqual(O.filter,C))A.push(Object.assign(Object.assign({},y),{id:O.id}));else{this.unsubscribe(),this.state=is.errored,s==null||s(Mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,s&&s(Mr.SUBSCRIBED);return}}).receive("error",k=>{this.state=is.errored,s==null||s(Mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(k).join(", ")||"error")))}).receive("timeout",()=>{s==null||s(Mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,l={}){return await this.send({type:"presence",event:"track",payload:s},l.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,l,i){return this.state===is.joined&&s===ai.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(async()=>await this.subscribe())),this._on(s,l,i)}async httpSend(s,l,i={}){var d;const u=this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"";if(l==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:l,private:this.private}]})},g=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(d=i.timeout)!==null&&d!==void 0?d:this.timeout);if(g.status===202)return{success:!0};let f=g.statusText;try{const v=await g.json();f=v.error||v.message||f}catch(v){}return Promise.reject(new Error(f))}async send(s,l={}){var i,d;if(!this._canPush()&&s.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:c}=s,f={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:c,private:this.private}]})};try{const v=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(i=l.timeout)!==null&&i!==void 0?i:this.timeout);return await((d=v.body)===null||d===void 0?void 0:d.cancel()),v.ok?"ok":"error"}catch(v){return v.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var c,g,f;const v=this._push(s.type,s,l.timeout||this.timeout);s.type==="broadcast"&&!(!((f=(g=(c=this.params)===null||c===void 0?void 0:c.config)===null||g===void 0?void 0:g.broadcast)===null||f===void 0)&&f.ack)&&u("ok"),v.receive("ok",()=>u("ok")),v.receive("error",()=>u("error")),v.receive("timeout",()=>u("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=is.leaving;const l=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(jr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(d=>{i=new Sm(this,jr.leave,{},s),i.receive("ok",()=>{l(),d("ok")}).receive("timeout",()=>{l(),d("timed out")}).receive("error",()=>{d("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=is.closed,this.bindings={}}async _fetchWithTimeout(s,l,i){const d=new AbortController,u=setTimeout(()=>d.abort(),i),c=await this.socket.fetch(s,Object.assign(Object.assign({},l),{signal:d.signal}));return clearTimeout(u),c}_push(s,l,i=this.timeout){if(!this.joinedOnce)throw"tried to push '".concat(s,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let d=new Sm(this,s,l,i);return this._canPush()?d.send():this._addToPushBuffer(d),d}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>QN){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(l.event),l.payload))}}_onMessage(s,l,i){return l}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,l,i){var d,u;const c=s.toLocaleLowerCase(),{close:g,error:f,leave:v,join:b}=jr;if(i&&[g,f,v,b].indexOf(c)>=0&&i!==this._joinRef())return;let N=this._onMessage(c,l,i);if(l&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(d=this.bindings.postgres_changes)===null||d===void 0||d.filter(k=>{var _,M,T;return((_=k.filter)===null||_===void 0?void 0:_.event)==="*"||((T=(M=k.filter)===null||M===void 0?void 0:M.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===c}).map(k=>k.callback(N,i)):(u=this.bindings[c])===null||u===void 0||u.filter(k=>{var _,M,T,A,S,y;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in k){const p=k.id,j=(_=k.filter)===null||_===void 0?void 0:_.event;return p&&((M=l.ids)===null||M===void 0?void 0:M.includes(p))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((T=l.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const p=(S=(A=k==null?void 0:k.filter)===null||A===void 0?void 0:A.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return p==="*"||p===((y=l==null?void 0:l.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return k.type.toLocaleLowerCase()===c}).map(k=>{if(typeof N=="object"&&"ids"in N){const _=N.data,{schema:M,table:T,commit_timestamp:A,type:S,errors:y}=_;N=Object.assign(Object.assign({},{schema:M,table:T,commit_timestamp:A,eventType:S,new:{},old:{},errors:y}),this._getPayloadRecords(_))}k.callback(N,i)})}_isClosed(){return this.state===is.closed}_isJoined(){return this.state===is.joined}_isJoining(){return this.state===is.joining}_isLeaving(){return this.state===is.leaving}_replyEventName(s){return"chan_reply_".concat(s)}_on(s,l,i){const d=s.toLocaleLowerCase(),u={type:d,filter:l,callback:i};return this.bindings[d]?this.bindings[d].push(u):this.bindings[d]=[u],this}_off(s,l){const i=s.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(d=>{var u;return!(((u=d.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===i&&fo.isEqual(d.filter,l))})),this}static isEqual(s,l){if(Object.keys(s).length!==Object.keys(l).length)return!1;for(const i in s)if(s[i]!==l[i])return!1;return!0}static isFilterValueEqual(s,l){const i=s!=null?s:void 0,d=l!=null?l:void 0;return i===d}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(jr.close,{},s)}_onError(s){this._on(jr.error,{},l=>s(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=is.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const l={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(l.new=k0(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(l.old=k0(s.columns,s.old_record)),l}};const km=()=>{},Gc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lw=[1e3,2e3,5e3,1e4],iw=1e4,ow='\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });';let cw=class{constructor(s,l){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Vm,this.transport=null,this.heartbeatIntervalMs=Gc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=km,this.ref=0,this.reconnectTimer=null,this.vsn=S0,this.logger=km,this.conn=null,this.sendBuffer=[],this.serializer=new ZN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=d=>d?(...u)=>d(...u):(...u)=>fetch(...u),!(!((i=l==null?void 0:l.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint="".concat(s,"/").concat(Fm.websocket),this.httpEndpoint=bp(s),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l==null?void 0:l.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xp.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const l=s.message;throw l.includes("Node.js")?new Error("".concat(l,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })'):new Error("WebSocket not available: ".concat(l))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(s,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(s?this.conn.close(s,l!=null?l:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const l=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const s=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,l,i){this.logger(s,l,i)}connectionState(){switch(this.conn&&this.conn.readyState){case ll.connecting:return il.Connecting;case ll.open:return il.Open;case ll.closing:return il.Closing;default:return il.Closed}}isConnected(){return this.connectionState()===il.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,l={config:{}}){const i="realtime:".concat(s),d=this.getChannels().find(u=>u.topic===i);if(d)return d;{const u=new jp("realtime:".concat(s),l,this);return this.channels.push(u),u}}push(s){const{topic:l,event:i,payload:d,ref:u}=s,c=()=>{this.encode(s,g=>{var f;(f=this.conn)===null||f===void 0||f.send(g)})};this.log("push","".concat(l," ").concat(i," (").concat(u,")"),d),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(JN,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},Gc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let l=this.channels.find(i=>i.topic===s&&(i._isJoined()||i._isJoining()));l&&(this.log("transport",'leaving duplicate topic "'.concat(s,'"')),l.unsubscribe())}_remove(s){this.channels=this.channels.filter(l=>l.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply")try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error")}catch(v){this.log("error","error in heartbeat callback",v)}l.ref&&l.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:d,payload:u,ref:c}=l,g=c?"(".concat(c,")"):"",f=u.status||"";this.log("receive","".concat(f," ").concat(i," ").concat(d," ").concat(g).trim(),u),this.channels.filter(v=>v._isMember(i)).forEach(v=>v._trigger(d,u,c)),this._triggerStateCallbacks("message",l)})}_clearTimer(s){var l;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ll.open||this.conn.readyState===ll.connecting)try{this.conn.close()}catch(s){this.log("error","Error closing connection",s)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(l=>{this.log("error","error waiting for auth on connect",l),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this.workerRef.terminate()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var l;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport","".concat(s)),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(jr.error))}_appendParams(s,l){if(Object.keys(l).length===0)return s;const i=s.match(/\?/)?"&":"?",d=new URLSearchParams(l);return"".concat(s).concat(i).concat(d)}_workerObjectUrl(s){let l;if(s)l=s;else{const i=new Blob([ow],{type:"application/javascript"});l=URL.createObjectURL(i)}return l}_setConnectionState(s,l=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(s=null){let l,i=!1;if(s)l=s,i=!0;else if(this.accessToken)try{l=await this.accessToken()}catch(d){this.log("error","Error fetching access token from callback",d),l=this.accessTokenValue}else l=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(d=>{const u={access_token:l,version:FN};l&&d.updateJoinPayload(u),d.joinedOnce&&d._isJoined()&&d._push(jr.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this._isManualToken()||this.setAuth().catch(l=>{this.log("error","Error setting auth in ".concat(s),l)})}_triggerStateCallbacks(s,l){try{this.stateChangeCallbacks[s].forEach(i=>{try{i(l)}catch(d){this.log("error","error in ".concat(s," callback"),d)}})}catch(i){this.log("error","error triggering ".concat(s," callbacks"),i)}}_setupReconnectionTimer(){this.reconnectTimer=new yp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var l,i,d,u,c,g,f,v,b,w,N,k;switch(this.transport=(l=s==null?void 0:s.transport)!==null&&l!==void 0?l:null,this.timeout=(i=s==null?void 0:s.timeout)!==null&&i!==void 0?i:Vm,this.heartbeatIntervalMs=(d=s==null?void 0:s.heartbeatIntervalMs)!==null&&d!==void 0?d:Gc.HEARTBEAT_INTERVAL,this.worker=(u=s==null?void 0:s.worker)!==null&&u!==void 0?u:!1,this.accessToken=(c=s==null?void 0:s.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(g=s==null?void 0:s.heartbeatCallback)!==null&&g!==void 0?g:km,this.vsn=(f=s==null?void 0:s.vsn)!==null&&f!==void 0?f:S0,s!=null&&s.params&&(this.params=s.params),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(v=s==null?void 0:s.reconnectAfterMs)!==null&&v!==void 0?v:(_=>lw[_-1]||iw),this.vsn){case gp:this.encode=(b=s==null?void 0:s.encode)!==null&&b!==void 0?b:((_,M)=>M(JSON.stringify(_))),this.decode=(w=s==null?void 0:s.decode)!==null&&w!==void 0?w:((_,M)=>M(JSON.parse(_)));break;case XN:this.encode=(N=s==null?void 0:s.encode)!==null&&N!==void 0?N:this.serializer.encode.bind(this.serializer),this.decode=(k=s==null?void 0:s.decode)!==null&&k!==void 0?k:this.serializer.decode.bind(this.serializer);break;default:throw new Error("Unsupported serializer version: ".concat(this.vsn))}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s==null?void 0:s.workerUrl}}};const dw=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:nw,get REALTIME_LISTEN_TYPES(){return ai},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return Qm},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Jm},get REALTIME_SUBSCRIBE_STATES(){return Mr},RealtimeChannel:jp,RealtimeClient:cw,RealtimePresence:vp,WebSocketFactory:xp},Symbol.toStringTag,{value:"Module"})),Np=ko(dw);class To extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function Ya(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class wp extends To{constructor(s,l,i){super(s),this.name="StorageApiError",this.status=l,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class nd extends To{constructor(s,l){super(s),this.name="StorageUnknownError",this.originalError=l}}const gh=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),uw=()=>Response,Zm=r=>{if(Array.isArray(r))return r.map(l=>Zm(l));if(typeof r=="function"||r!==Object(r))return r;const s={};return Object.entries(r).forEach(([l,i])=>{const d=l.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));s[d]=Zm(i)}),s},mw=r=>{if(typeof r!="object"||r===null)return!1;const s=Object.getPrototypeOf(r);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},hw=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r),Em=r=>{var s;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(s=r.error)===null||s===void 0?void 0:s.message)||JSON.stringify(r)},fw=(r,s,l)=>ht(void 0,void 0,void 0,function*(){const i=yield uw();r instanceof i&&!(l!=null&&l.noResolveJson)?r.json().then(d=>{const u=r.status||500,c=(d==null?void 0:d.statusCode)||u+"";s(new wp(Em(d),u,c))}).catch(d=>{s(new nd(Em(d),d))}):s(new nd(Em(r),r))}),xw=(r,s,l,i)=>{const d={method:r,headers:(s==null?void 0:s.headers)||{}};return r==="GET"||!i?d:(mw(i)?(d.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),d.body=JSON.stringify(i)):d.body=i,s!=null&&s.duplex&&(d.duplex=s.duplex),Object.assign(Object.assign({},d),l))};function Ao(r,s,l,i,d,u){return ht(this,void 0,void 0,function*(){return new Promise((c,g)=>{r(l,xw(s,i,d,u)).then(f=>{if(!f.ok)throw f;return i!=null&&i.noResolveJson?f:f.json()}).then(f=>c(f)).catch(f=>fw(f,g,i))})})}function _o(r,s,l,i){return ht(this,void 0,void 0,function*(){return Ao(r,"GET",s,l,i)})}function vr(r,s,l,i,d){return ht(this,void 0,void 0,function*(){return Ao(r,"POST",s,i,d,l)})}function Wm(r,s,l,i,d){return ht(this,void 0,void 0,function*(){return Ao(r,"PUT",s,i,d,l)})}function gw(r,s,l,i){return ht(this,void 0,void 0,function*(){return Ao(r,"HEAD",s,Object.assign(Object.assign({},l),{noResolveJson:!0}),i)})}function yh(r,s,l,i,d){return ht(this,void 0,void 0,function*(){return Ao(r,"DELETE",s,i,d,l)})}class yw{constructor(s,l){this.downloadFn=s,this.shouldThrowOnError=l}then(s,l){return this.execute().then(s,l)}execute(){return ht(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ya(s))return{data:null,error:s};throw s}})}}var _p;class pw{constructor(s,l){this.downloadFn=s,this.shouldThrowOnError=l,this[_p]="BlobDownloadBuilder",this.promise=null}asStream(){return new yw(this.downloadFn,this.shouldThrowOnError)}then(s,l){return this.getPromise().then(s,l)}catch(s){return this.getPromise().catch(s)}finally(s){return this.getPromise().finally(s)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ht(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Ya(s))return{data:null,error:s};throw s}})}}_p=Symbol.toStringTag;const bw={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},E0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class vw{constructor(s,l={},i,d){this.shouldThrowOnError=!1,this.url=s,this.headers=l,this.bucketId=i,this.fetch=gh(d)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,l,i,d){return ht(this,void 0,void 0,function*(){try{let u;const c=Object.assign(Object.assign({},E0),d);let g=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(c.upsert)});const f=c.metadata;typeof Blob<"u"&&i instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),f&&u.append("metadata",this.encodeMetadata(f)),u.append("",i)):typeof FormData<"u"&&i instanceof FormData?(u=i,u.has("cacheControl")||u.append("cacheControl",c.cacheControl),f&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(f))):(u=i,g["cache-control"]="max-age=".concat(c.cacheControl),g["content-type"]=c.contentType,f&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(f))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!c.duplex&&(c.duplex="half")),d!=null&&d.headers&&(g=Object.assign(Object.assign({},g),d.headers));const v=this._removeEmptyFolders(l),b=this._getFinalPath(v),w=yield(s=="PUT"?Wm:vr)(this.fetch,"".concat(this.url,"/object/").concat(b),u,Object.assign({headers:g},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:v,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(Ya(u))return{data:null,error:u};throw u}})}upload(s,l,i){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,l,i)})}uploadToSignedUrl(s,l,i,d){return ht(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(s),c=this._getFinalPath(u),g=new URL(this.url+"/object/upload/sign/".concat(c));g.searchParams.set("token",l);try{let f;const v=Object.assign({upsert:E0.upsert},d),b=Object.assign(Object.assign({},this.headers),{"x-upsert":String(v.upsert)});typeof Blob<"u"&&i instanceof Blob?(f=new FormData,f.append("cacheControl",v.cacheControl),f.append("",i)):typeof FormData<"u"&&i instanceof FormData?(f=i,f.append("cacheControl",v.cacheControl)):(f=i,b["cache-control"]="max-age=".concat(v.cacheControl),b["content-type"]=v.contentType);const w=yield Wm(this.fetch,g.toString(),f,{headers:b});return{data:{path:u,fullPath:w.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Ya(f))return{data:null,error:f};throw f}})}createSignedUploadUrl(s,l){return ht(this,void 0,void 0,function*(){try{let i=this._getFinalPath(s);const d=Object.assign({},this.headers);l!=null&&l.upsert&&(d["x-upsert"]="true");const u=yield vr(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(i),{},{headers:d}),c=new URL(this.url+u.url),g=c.searchParams.get("token");if(!g)throw new To("No token returned by API");return{data:{signedUrl:c.toString(),path:s,token:g},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ya(i))return{data:null,error:i};throw i}})}update(s,l,i){return ht(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,l,i)})}move(s,l,i){return ht(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:s,destinationKey:l,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ya(d))return{data:null,error:d};throw d}})}copy(s,l,i){return ht(this,void 0,void 0,function*(){try{return{data:{path:(yield vr(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:s,destinationKey:l,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ya(d))return{data:null,error:d};throw d}})}createSignedUrl(s,l,i){return ht(this,void 0,void 0,function*(){try{let d=this._getFinalPath(s),u=yield vr(this.fetch,"".concat(this.url,"/object/sign/").concat(d),Object.assign({expiresIn:l},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i!=null&&i.download?"&download=".concat(i.download===!0?"":i.download):"";return u={signedUrl:encodeURI("".concat(this.url).concat(u.signedURL).concat(c))},{data:u,error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ya(d))return{data:null,error:d};throw d}})}createSignedUrls(s,l,i){return ht(this,void 0,void 0,function*(){try{const d=yield vr(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:l,paths:s},{headers:this.headers}),u=i!=null&&i.download?"&download=".concat(i.download===!0?"":i.download):"";return{data:d.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI("".concat(this.url).concat(c.signedURL).concat(u)):null})),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ya(d))return{data:null,error:d};throw d}})}download(s,l){const d=typeof(l==null?void 0:l.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((l==null?void 0:l.transform)||{}),c=u?"?".concat(u):"",g=this._getFinalPath(s),f=()=>_o(this.fetch,"".concat(this.url,"/").concat(d,"/").concat(g).concat(c),{headers:this.headers,noResolveJson:!0});return new pw(f,this.shouldThrowOnError)}info(s){return ht(this,void 0,void 0,function*(){const l=this._getFinalPath(s);try{const i=yield _o(this.fetch,"".concat(this.url,"/object/info/").concat(l),{headers:this.headers});return{data:Zm(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ya(i))return{data:null,error:i};throw i}})}exists(s){return ht(this,void 0,void 0,function*(){const l=this._getFinalPath(s);try{return yield gw(this.fetch,"".concat(this.url,"/object/").concat(l),{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ya(i)&&i instanceof nd){const d=i.originalError;if([400,404].includes(d==null?void 0:d.status))return{data:!1,error:i}}throw i}})}getPublicUrl(s,l){const i=this._getFinalPath(s),d=[],u=l!=null&&l.download?"download=".concat(l.download===!0?"":l.download):"";u!==""&&d.push(u);const g=typeof(l==null?void 0:l.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((l==null?void 0:l.transform)||{});f!==""&&d.push(f);let v=d.join("&");return v!==""&&(v="?".concat(v)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(g,"/public/").concat(i).concat(v))}}}remove(s){return ht(this,void 0,void 0,function*(){try{return{data:yield yh(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ya(l))return{data:null,error:l};throw l}})}list(s,l,i){return ht(this,void 0,void 0,function*(){try{const d=Object.assign(Object.assign(Object.assign({},bw),l),{prefix:s||""});return{data:yield vr(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),d,{headers:this.headers},i),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ya(d))return{data:null,error:d};throw d}})}listV2(s,l){return ht(this,void 0,void 0,function*(){try{const i=Object.assign({},s);return{data:yield vr(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),i,{headers:this.headers},l),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ya(i))return{data:null,error:i};throw i}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return"".concat(this.bucketId,"/").concat(s.replace(/^\/+/,""))}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const l=[];return s.width&&l.push("width=".concat(s.width)),s.height&&l.push("height=".concat(s.height)),s.resize&&l.push("resize=".concat(s.resize)),s.format&&l.push("format=".concat(s.format)),s.quality&&l.push("quality=".concat(s.quality)),l.join("&")}}const Sp="2.87.1",kp={"X-Client-Info":"storage-js/".concat(Sp)};class jw{constructor(s,l={},i,d){this.shouldThrowOnError=!1;const u=new URL(s);d!=null&&d.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kp),l),this.fetch=gh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(s){return ht(this,void 0,void 0,function*(){try{const l=this.listBucketOptionsToQueryString(s);return{data:yield _o(this.fetch,"".concat(this.url,"/bucket").concat(l),{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ya(l))return{data:null,error:l};throw l}})}getBucket(s){return ht(this,void 0,void 0,function*(){try{return{data:yield _o(this.fetch,"".concat(this.url,"/bucket/").concat(s),{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ya(l))return{data:null,error:l};throw l}})}createBucket(s){return ht(this,arguments,void 0,function*(l,i={public:!1}){try{return{data:yield vr(this.fetch,"".concat(this.url,"/bucket"),{id:l,name:l,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Ya(d))return{data:null,error:d};throw d}})}updateBucket(s,l){return ht(this,void 0,void 0,function*(){try{return{data:yield Wm(this.fetch,"".concat(this.url,"/bucket/").concat(s),{id:s,name:s,public:l.public,file_size_limit:l.fileSizeLimit,allowed_mime_types:l.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ya(i))return{data:null,error:i};throw i}})}emptyBucket(s){return ht(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,"".concat(this.url,"/bucket/").concat(s,"/empty"),{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ya(l))return{data:null,error:l};throw l}})}deleteBucket(s){return ht(this,void 0,void 0,function*(){try{return{data:yield yh(this.fetch,"".concat(this.url,"/bucket/").concat(s),{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ya(l))return{data:null,error:l};throw l}})}listBucketOptionsToQueryString(s){const l={};return s&&("limit"in s&&(l.limit=String(s.limit)),"offset"in s&&(l.offset=String(s.offset)),s.search&&(l.search=s.search),s.sortColumn&&(l.sortColumn=s.sortColumn),s.sortOrder&&(l.sortOrder=s.sortOrder)),Object.keys(l).length>0?"?"+new URLSearchParams(l).toString():""}}var So=class extends Error{constructor(r,s){var l;super(r),this.name="IcebergError",this.status=s.status,this.icebergType=s.icebergType,this.icebergCode=s.icebergCode,this.details=s.details,this.isCommitStateUnknown=s.icebergType==="CommitStateUnknownException"||[500,502,504].includes(s.status)&&((l=s.icebergType)==null?void 0:l.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Nw(r,s,l){const i=new URL(s,r);if(l)for(const[d,u]of Object.entries(l))u!==void 0&&i.searchParams.set(d,u);return i.toString()}async function ww(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:"Bearer ".concat(r.token)}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function _w(r){var l;const s=(l=r.fetchImpl)!=null?l:globalThis.fetch;return{async request({method:i,path:d,query:u,body:c,headers:g}){var _;const f=Nw(r.baseUrl,d,u),v=await ww(r.auth),b=await s(f,{method:i,headers:{...c?{"Content-Type":"application/json"}:{},...v,...g},body:c?JSON.stringify(c):void 0}),w=await b.text(),N=(b.headers.get("content-type")||"").includes("application/json"),k=N&&w?JSON.parse(w):w;if(!b.ok){const M=N?k:void 0,T=M==null?void 0:M.error;throw new So((_=T==null?void 0:T.message)!=null?_:"Request failed with status ".concat(b.status),{status:b.status,icebergType:T==null?void 0:T.type,icebergCode:T==null?void 0:T.code,details:M})}return{status:b.status,headers:b.headers,data:k}}}}function Kc(r){return r.join("")}var Sw=class{constructor(r,s=""){this.client=r,this.prefix=s}async listNamespaces(r){const s=r?{parent:Kc(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces"),query:s})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(r,s){const l={namespace:r.namespace,properties:s==null?void 0:s.properties};return(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces"),body:l})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(Kc(r.namespace))})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(Kc(r.namespace))})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(Kc(r.namespace))}),!0}catch(s){if(s instanceof So&&s.status===404)return!1;throw s}}async createNamespaceIfNotExists(r,s){try{return await this.createNamespace(r,s)}catch(l){if(l instanceof So&&l.status===409)return;throw l}}};function Hl(r){return r.join("")}var kw=class{constructor(r,s="",l){this.client=r,this.prefix=s,this.accessDelegation=l}async listTables(r){return(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(Hl(r.namespace),"/tables")})).data.identifiers}async createTable(r,s){const l={};return this.accessDelegation&&(l["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(Hl(r.namespace),"/tables"),body:s,headers:l})).data.metadata}async updateTable(r,s){const l=await this.client.request({method:"POST",path:"".concat(this.prefix,"/namespaces/").concat(Hl(r.namespace),"/tables/").concat(r.name),body:s});return{"metadata-location":l.data["metadata-location"],metadata:l.data.metadata}}async dropTable(r,s){var l;await this.client.request({method:"DELETE",path:"".concat(this.prefix,"/namespaces/").concat(Hl(r.namespace),"/tables/").concat(r.name),query:{purgeRequested:String((l=s==null?void 0:s.purge)!=null?l:!1)}})}async loadTable(r){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:"".concat(this.prefix,"/namespaces/").concat(Hl(r.namespace),"/tables/").concat(r.name),headers:s})).data.metadata}async tableExists(r){const s={};this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:"".concat(this.prefix,"/namespaces/").concat(Hl(r.namespace),"/tables/").concat(r.name),headers:s}),!0}catch(l){if(l instanceof So&&l.status===404)return!1;throw l}}async createTableIfNotExists(r,s){try{return await this.createTable(r,s)}catch(l){if(l instanceof So&&l.status===409)return await this.loadTable({namespace:r.namespace,name:s.name});throw l}}},Ew=class{constructor(r){var i;let s="v1";r.catalogName&&(s+="/".concat(r.catalogName));const l=r.baseUrl.endsWith("/")?r.baseUrl:"".concat(r.baseUrl,"/");this.client=_w({baseUrl:l,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(i=r.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new Sw(this.client,s),this.tableOps=new kw(this.client,s,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,s){return this.namespaceOps.createNamespace(r,s)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,s){return this.tableOps.createTable(r,s)}async updateTable(r,s){return this.tableOps.updateTable(r,s)}async dropTable(r,s){await this.tableOps.dropTable(r,s)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,s){return this.namespaceOps.createNamespaceIfNotExists(r,s)}async createTableIfNotExists(r,s){return this.tableOps.createTableIfNotExists(r,s)}};class Ep{constructor(s,l={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kp),l),this.fetch=gh(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return ht(this,void 0,void 0,function*(){try{return{data:yield vr(this.fetch,"".concat(this.url,"/bucket"),{name:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ya(l))return{data:null,error:l};throw l}})}listBuckets(s){return ht(this,void 0,void 0,function*(){try{const l=new URLSearchParams;(s==null?void 0:s.limit)!==void 0&&l.set("limit",s.limit.toString()),(s==null?void 0:s.offset)!==void 0&&l.set("offset",s.offset.toString()),s!=null&&s.sortColumn&&l.set("sortColumn",s.sortColumn),s!=null&&s.sortOrder&&l.set("sortOrder",s.sortOrder),s!=null&&s.search&&l.set("search",s.search);const i=l.toString(),d=i?"".concat(this.url,"/bucket?").concat(i):"".concat(this.url,"/bucket");return{data:yield _o(this.fetch,d,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ya(l))return{data:null,error:l};throw l}})}deleteBucket(s){return ht(this,void 0,void 0,function*(){try{return{data:yield yh(this.fetch,"".concat(this.url,"/bucket/").concat(s),{},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ya(l))return{data:null,error:l};throw l}})}from(s){if(!hw(s))throw new To("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const l=new Ew({baseUrl:this.url,catalogName:s,auth:{type:"custom",getHeaders:()=>ht(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(l,{get(u,c){const g=u[c];return typeof g!="function"?g:(...f)=>ht(this,void 0,void 0,function*(){try{return{data:yield g.apply(u,f),error:null}}catch(v){if(i)throw v;return{data:null,error:v}}})}})}}const ph={"X-Client-Info":"storage-js/".concat(Sp),"Content-Type":"application/json"};class bh extends Error{constructor(s){super(s),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Ys(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class Xc extends bh{constructor(s,l,i){super(s),this.name="StorageVectorsApiError",this.status=l,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tp extends bh{constructor(s,l){super(s),this.name="StorageVectorsUnknownError",this.originalError=l}}var eh;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(eh||(eh={}));const pd=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),Tw=()=>Response,Ap=r=>{if(typeof r!="object"||r===null)return!1;const s=Object.getPrototypeOf(r);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Aw=r=>Array.from(new Float32Array(r)),Cw=(r,s)=>{if(s!==void 0&&r.float32.length!==s)throw new Error("Vector dimension mismatch: expected ".concat(s,", got ").concat(r.float32.length))},T0=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Mw=(r,s,l)=>ht(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(l!=null&&l.noResolveJson)){const d=r.status||500,u=r;if(typeof u.json=="function")u.json().then(c=>{const g=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||d+"";s(new Xc(T0(c),d,g))}).catch(()=>{const c=d+"",g=u.statusText||"HTTP ".concat(d," error");s(new Xc(g,d,c))});else{const c=d+"",g=u.statusText||"HTTP ".concat(d," error");s(new Xc(g,d,c))}}else s(new Tp(T0(r),r))}),Rw=(r,s,l,i)=>{const d={method:r,headers:(s==null?void 0:s.headers)||{}};return i?(Ap(i)?(d.headers=Object.assign({"Content-Type":"application/json"},s==null?void 0:s.headers),d.body=JSON.stringify(i)):d.body=i,Object.assign(Object.assign({},d),l)):d};function Ow(r,s,l,i,d,u){return ht(this,void 0,void 0,function*(){return new Promise((c,g)=>{r(l,Rw(s,i,d,u)).then(f=>{if(!f.ok)throw f;if(i!=null&&i.noResolveJson)return f;const v=f.headers.get("content-type");return!v||!v.includes("application/json")?{}:f.json()}).then(f=>c(f)).catch(f=>Mw(f,g,i))})})}function Ws(r,s,l,i,d){return ht(this,void 0,void 0,function*(){return Ow(r,"POST",s,i,d,l)})}class Cp{constructor(s,l={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ph),l),this.fetch=pd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(s){return ht(this,void 0,void 0,function*(){try{return{data:(yield Ws(this.fetch,"".concat(this.url,"/CreateIndex"),s,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}getIndex(s,l){return ht(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,"".concat(this.url,"/GetIndex"),{vectorBucketName:s,indexName:l},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ys(i))return{data:null,error:i};throw i}})}listIndexes(s){return ht(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,"".concat(this.url,"/ListIndexes"),s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}deleteIndex(s,l){return ht(this,void 0,void 0,function*(){try{return{data:(yield Ws(this.fetch,"".concat(this.url,"/DeleteIndex"),{vectorBucketName:s,indexName:l},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ys(i))return{data:null,error:i};throw i}})}}class Mp{constructor(s,l={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ph),l),this.fetch=pd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(s){return ht(this,void 0,void 0,function*(){try{if(s.vectors.length<1||s.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ws(this.fetch,"".concat(this.url,"/PutVectors"),s,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}getVectors(s){return ht(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,"".concat(this.url,"/GetVectors"),s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}listVectors(s){return ht(this,void 0,void 0,function*(){try{if(s.segmentCount!==void 0){if(s.segmentCount<1||s.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(s.segmentIndex!==void 0&&(s.segmentIndex<0||s.segmentIndex>=s.segmentCount))throw new Error("segmentIndex must be between 0 and ".concat(s.segmentCount-1))}return{data:yield Ws(this.fetch,"".concat(this.url,"/ListVectors"),s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}queryVectors(s){return ht(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,"".concat(this.url,"/QueryVectors"),s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}deleteVectors(s){return ht(this,void 0,void 0,function*(){try{if(s.keys.length<1||s.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ws(this.fetch,"".concat(this.url,"/DeleteVectors"),s,{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}}class Rp{constructor(s,l={},i){this.shouldThrowOnError=!1,this.url=s.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},ph),l),this.fetch=pd(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(s){return ht(this,void 0,void 0,function*(){try{return{data:(yield Ws(this.fetch,"".concat(this.url,"/CreateVectorBucket"),{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}getBucket(s){return ht(this,void 0,void 0,function*(){try{return{data:yield Ws(this.fetch,"".concat(this.url,"/GetVectorBucket"),{vectorBucketName:s},{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}listBuckets(){return ht(this,arguments,void 0,function*(s={}){try{return{data:yield Ws(this.fetch,"".concat(this.url,"/ListVectorBuckets"),s,{headers:this.headers}),error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}deleteBucket(s){return ht(this,void 0,void 0,function*(){try{return{data:(yield Ws(this.fetch,"".concat(this.url,"/DeleteVectorBucket"),{vectorBucketName:s},{headers:this.headers}))||{},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ys(l))return{data:null,error:l};throw l}})}}class Op extends Rp{constructor(s,l={}){super(s,l.headers||{},l.fetch)}from(s){return new zp(this.url,this.headers,s,this.fetch)}createBucket(s){const l=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ht(this,void 0,void 0,function*(){return l.createBucket.call(this,s)})}getBucket(s){const l=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ht(this,void 0,void 0,function*(){return l.getBucket.call(this,s)})}listBuckets(){const s=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ht(this,arguments,void 0,function*(l={}){return s.listBuckets.call(this,l)})}deleteBucket(s){const l=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ht(this,void 0,void 0,function*(){return l.deleteBucket.call(this,s)})}}class zp extends Cp{constructor(s,l,i,d){super(s,l,d),this.vectorBucketName=i}createIndex(s){const l=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ht(this,void 0,void 0,function*(){return l.createIndex.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const s=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ht(this,arguments,void 0,function*(l={}){return s.listIndexes.call(this,Object.assign(Object.assign({},l),{vectorBucketName:this.vectorBucketName}))})}getIndex(s){const l=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ht(this,void 0,void 0,function*(){return l.getIndex.call(this,this.vectorBucketName,s)})}deleteIndex(s){const l=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ht(this,void 0,void 0,function*(){return l.deleteIndex.call(this,this.vectorBucketName,s)})}index(s){return new Pp(this.url,this.headers,this.vectorBucketName,s,this.fetch)}}class Pp extends Mp{constructor(s,l,i,d,u){super(s,l,u),this.vectorBucketName=i,this.indexName=d}putVectors(s){const l=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ht(this,void 0,void 0,function*(){return l.putVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(s){const l=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ht(this,void 0,void 0,function*(){return l.getVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const s=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ht(this,arguments,void 0,function*(l={}){return s.listVectors.call(this,Object.assign(Object.assign({},l),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(s){const l=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ht(this,void 0,void 0,function*(){return l.queryVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(s){const l=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ht(this,void 0,void 0,function*(){return l.deleteVectors.call(this,Object.assign(Object.assign({},s),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class zw extends jw{constructor(s,l={},i,d){super(s,l,i,d)}from(s){return new vw(this.url,this.headers,s,this.fetch)}get vectors(){return new Op(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ep(this.url+"/iceberg",this.headers,this.fetch)}}const Pw=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:Ep,StorageApiError:wp,StorageClient:zw,StorageError:To,StorageUnknownError:nd,StorageVectorsApiError:Xc,StorageVectorsClient:Op,StorageVectorsError:bh,get StorageVectorsErrorCode(){return eh},StorageVectorsUnknownError:Tp,VectorBucketApi:Rp,VectorBucketScope:zp,VectorDataApi:Mp,VectorIndexApi:Cp,VectorIndexScope:Pp,isPlainObject:Ap,isStorageError:Ya,isStorageVectorsError:Ys,normalizeToFloat32:Aw,resolveFetch:pd,resolveResponse:Tw,validateVectorDimension:Cw},Symbol.toStringTag,{value:"Module"})),Dw=ko(Pw);var Tm={},oo={},A0;function Bw(){return A0||(A0=1,Object.defineProperty(oo,"__esModule",{value:!0}),oo.version=void 0,oo.version="2.87.1"),oo}var C0;function Uw(){return C0||(C0=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_REALTIME_OPTIONS=r.DEFAULT_AUTH_OPTIONS=r.DEFAULT_DB_OPTIONS=r.DEFAULT_GLOBAL_OPTIONS=r.DEFAULT_HEADERS=void 0;const s=Bw();let l="";typeof Deno<"u"?l="deno":typeof document<"u"?l="web":typeof navigator<"u"&&navigator.product==="ReactNative"?l="react-native":l="node",r.DEFAULT_HEADERS={"X-Client-Info":"supabase-js-".concat(l,"/").concat(s.version)},r.DEFAULT_GLOBAL_OPTIONS={headers:r.DEFAULT_HEADERS},r.DEFAULT_DB_OPTIONS={schema:"public"},r.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},r.DEFAULT_REALTIME_OPTIONS={}})(Tm)),Tm}var Am={},M0;function Lw(){return M0||(M0=1,(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.fetchWithAuth=r.resolveHeadersConstructor=r.resolveFetch=void 0;const s=d=>d?(...u)=>d(...u):(...u)=>fetch(...u);r.resolveFetch=s;const l=()=>Headers;r.resolveHeadersConstructor=l;const i=(d,u,c)=>{const g=(0,r.resolveFetch)(c),f=(0,r.resolveHeadersConstructor)();return async(v,b)=>{var w;const N=(w=await u())!==null&&w!==void 0?w:d;let k=new f(b==null?void 0:b.headers);return k.has("apikey")||k.set("apikey",d),k.has("Authorization")||k.set("Authorization","Bearer ".concat(N)),g(v,Object.assign(Object.assign({},b),{headers:k}))}};r.fetchWithAuth=i})(Am)),Am}var tn={},R0;function $w(){if(R0)return tn;R0=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.isBrowser=void 0,tn.uuid=r,tn.ensureTrailingSlash=s,tn.applySettingDefaults=i,tn.validateSupabaseUrl=d;function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var c=Math.random()*16|0,g=u=="x"?c:c&3|8;return g.toString(16)})}function s(u){return u.endsWith("/")?u:u+"/"}const l=()=>typeof window<"u";tn.isBrowser=l;function i(u,c){var g,f;const{db:v,auth:b,realtime:w,global:N}=u,{db:k,auth:_,realtime:M,global:T}=c,A={db:Object.assign(Object.assign({},k),v),auth:Object.assign(Object.assign({},_),b),realtime:Object.assign(Object.assign({},M),w),storage:{},global:Object.assign(Object.assign(Object.assign({},T),N),{headers:Object.assign(Object.assign({},(g=T==null?void 0:T.headers)!==null&&g!==void 0?g:{}),(f=N==null?void 0:N.headers)!==null&&f!==void 0?f:{})}),accessToken:async()=>""};return u.accessToken?A.accessToken=u.accessToken:delete A.accessToken,A}function d(u){const c=u==null?void 0:u.trim();if(!c)throw new Error("supabaseUrl is required.");if(!c.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(s(c))}catch(g){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return tn}var co={};const Dp="2.87.1",Wl=30*1e3,th=3,Cm=th*Wl,Iw="http://localhost:9999",qw="supabase.auth.token",Yw={"X-Client-Info":"gotrue-js/".concat(Dp)},ah="X-Supabase-Api-Version",Bp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Gw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Kw=600*1e3;let fi=class extends Error{constructor(s,l,i){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=i}};function _t(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}let Up=class extends fi{constructor(s,l,i){super(s,l,i),this.name="AuthApiError",this.status=l,this.code=i}};function Lp(r){return _t(r)&&r.name==="AuthApiError"}let zn=class extends fi{constructor(s,l){super(s),this.name="AuthUnknownError",this.originalError=l}},dn=class extends fi{constructor(s,l,i,d){super(s,i,d),this.name=l,this.status=i}},Is=class extends dn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function $p(r){return _t(r)&&r.name==="AuthSessionMissingError"}let sl=class extends dn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},xo=class extends dn{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}},go=class extends dn{constructor(s,l=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Ip(r){return _t(r)&&r.name==="AuthImplicitGrantRedirectError"}let sh=class extends dn{constructor(s,l=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},ld=class extends dn{constructor(s,l){super(s,"AuthRetryableFetchError",l,void 0)}};function Jc(r){return _t(r)&&r.name==="AuthRetryableFetchError"}let rh=class extends dn{constructor(s,l,i){super(s,"AuthWeakPasswordError",l,"weak_password"),this.reasons=i}};function Hw(r){return _t(r)&&r.name==="AuthWeakPasswordError"}let id=class extends dn{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}};const od="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),O0=" 	\n\r=".split(""),Vw=(()=>{const r=new Array(128);for(let s=0;s<r.length;s+=1)r[s]=-1;for(let s=0;s<O0.length;s+=1)r[O0[s].charCodeAt(0)]=-2;for(let s=0;s<od.length;s+=1)r[od[s].charCodeAt(0)]=s;return r})();function z0(r,s,l){if(r!==null)for(s.queue=s.queue<<8|r,s.queuedBits+=8;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;l(od[i]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const i=s.queue>>s.queuedBits-6&63;l(od[i]),s.queuedBits-=6}}function qp(r,s,l){const i=Vw[r];if(i>-1)for(s.queue=s.queue<<6|i,s.queuedBits+=6;s.queuedBits>=8;)l(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(i===-2)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(r),'"'))}}function P0(r){const s=[],l=c=>{s.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},d={queue:0,queuedBits:0},u=c=>{Jw(c,i,l)};for(let c=0;c<r.length;c+=1)qp(r.charCodeAt(c),d,u);return s.join("")}function Fw(r,s){if(r<=127){s(r);return}else if(r<=2047){s(192|r>>6),s(128|r&63);return}else if(r<=65535){s(224|r>>12),s(128|r>>6&63),s(128|r&63);return}else if(r<=1114111){s(240|r>>18),s(128|r>>12&63),s(128|r>>6&63),s(128|r&63);return}throw new Error("Unrecognized Unicode codepoint: ".concat(r.toString(16)))}function Xw(r,s){for(let l=0;l<r.length;l+=1){let i=r.charCodeAt(l);if(i>55295&&i<=56319){const d=(i-55296)*1024&65535;i=(r.charCodeAt(l+1)-56320&65535|d)+65536,l+=1}Fw(i,s)}}function Jw(r,s,l){if(s.utf8seq===0){if(r<=127){l(r);return}for(let i=1;i<6;i+=1)if((r>>7-i&1)===0){s.utf8seq=i;break}if(s.utf8seq===2)s.codepoint=r&31;else if(s.utf8seq===3)s.codepoint=r&15;else if(s.utf8seq===4)s.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|r&63,s.utf8seq-=1,s.utf8seq===0&&l(s.codepoint)}}function si(r){const s=[],l={queue:0,queuedBits:0},i=d=>{s.push(d)};for(let d=0;d<r.length;d+=1)qp(r.charCodeAt(d),l,i);return new Uint8Array(s)}function Qw(r){const s=[];return Xw(r,l=>s.push(l)),new Uint8Array(s)}function cl(r){const s=[],l={queue:0,queuedBits:0},i=d=>{s.push(d)};return r.forEach(d=>z0(d,l,i)),z0(null,l,i),s.join("")}function Zw(r){return Math.round(Date.now()/1e3)+r}function Ww(){return Symbol("auth-callback")}const Ss=()=>typeof window<"u"&&typeof document<"u",el={tested:!1,writable:!1},Yp=()=>{if(!Ss())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch(s){return!1}if(el.tested)return el.writable;const r="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),el.tested=!0,el.writable=!0}catch(s){el.tested=!0,el.writable=!1}return el.writable};function e_(r){const s={},l=new URL(r);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((d,u)=>{s[u]=d})}catch(i){}return l.searchParams.forEach((i,d)=>{s[d]=i}),s}const Gp=r=>r?(...s)=>r(...s):(...s)=>fetch(...s),t_=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",ei=async(r,s,l)=>{await r.setItem(s,JSON.stringify(l))},tl=async(r,s)=>{const l=await r.getItem(s);if(!l)return null;try{return JSON.parse(l)}catch(i){return l}},_s=async(r,s)=>{await r.removeItem(s)};class bd{constructor(){this.promise=new bd.promiseConstructor((s,l)=>{this.resolve=s,this.reject=l})}}bd.promiseConstructor=Promise;function Mm(r){const s=r.split(".");if(s.length!==3)throw new id("Invalid JWT structure");for(let i=0;i<s.length;i++)if(!Gw.test(s[i]))throw new id("JWT not in base64url format");return{header:JSON.parse(P0(s[0])),payload:JSON.parse(P0(s[1])),signature:si(s[2]),raw:{header:s[0],payload:s[1]}}}async function a_(r){return await new Promise(s=>{setTimeout(()=>s(null),r)})}function s_(r,s){return new Promise((i,d)=>{(async()=>{for(let u=0;u<1/0;u++)try{const c=await r(u);if(!s(u,null,c)){i(c);return}}catch(c){if(!s(u,c)){d(c);return}}})()})}function r_(r){return("0"+r.toString(16)).substr(-2)}function n_(){const s=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=l.length;let d="";for(let u=0;u<56;u++)d+=l.charAt(Math.floor(Math.random()*i));return d}return crypto.getRandomValues(s),Array.from(s,r_).join("")}async function l_(r){const l=new TextEncoder().encode(r),i=await crypto.subtle.digest("SHA-256",l),d=new Uint8Array(i);return Array.from(d).map(u=>String.fromCharCode(u)).join("")}async function i_(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const l=await l_(r);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vl(r,s,l=!1){const i=n_();let d=i;l&&(d+="/PASSWORD_RECOVERY"),await ei(r,"".concat(s,"-code-verifier"),d);const u=await i_(i);return[u,i===u?"plain":"s256"]}const o_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function c_(r){const s=r.headers.get(ah);if(!s||!s.match(o_))return null;try{return new Date("".concat(s,"T00:00:00.0Z"))}catch(l){return null}}function d_(r){if(!r)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(r<=s)throw new Error("JWT has expired")}function u_(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const m_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fl(r){if(!m_.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Rm(){const r={};return new Proxy(r,{get:(s,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const i=l.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(l,'" property of the session object is not supported. Please use getUser() instead.'))},set:(s,l)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(l,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(s,l)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(l,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function h_(r,s){return new Proxy(r,{get:(l,i,d)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const u=i.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,i,d)}return!s.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s.value=!0),Reflect.get(l,i,d)}})}function D0(r){return JSON.parse(JSON.stringify(r))}const rl=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),f_=[502,503,504];async function B0(r){var s;if(!t_(r))throw new ld(rl(r),0);if(f_.includes(r.status))throw new ld(rl(r),r.status);let l;try{l=await r.json()}catch(u){throw new zn(rl(u),u)}let i;const d=c_(r);if(d&&d.getTime()>=Bp["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?i=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(i=l.error_code),i){if(i==="weak_password")throw new rh(rl(l),r.status,((s=l.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(i==="session_not_found")throw new Is}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((u,c)=>u&&typeof c=="string",!0))throw new rh(rl(l),r.status,l.weak_password.reasons);throw new Up(rl(l),r.status||500,i)}const x_=(r,s,l,i)=>{const d={method:r,headers:(s==null?void 0:s.headers)||{}};return r==="GET"?d:(d.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s==null?void 0:s.headers),d.body=JSON.stringify(i),Object.assign(Object.assign({},d),l))};async function zt(r,s,l,i){var d;const u=Object.assign({},i==null?void 0:i.headers);u[ah]||(u[ah]=Bp["2024-01-01"].name),i!=null&&i.jwt&&(u.Authorization="Bearer ".concat(i.jwt));const c=(d=i==null?void 0:i.query)!==null&&d!==void 0?d:{};i!=null&&i.redirectTo&&(c.redirect_to=i.redirectTo);const g=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",f=await g_(r,s,l+g,{headers:u,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(f):{data:Object.assign({},f),error:null}}async function g_(r,s,l,i,d,u){const c=x_(s,i,d,u);let g;try{g=await r(l,Object.assign({},c))}catch(f){throw console.error(f),new ld(rl(f),0)}if(g.ok||await B0(g),i!=null&&i.noResolveJson)return g;try{return await g.json()}catch(f){await B0(f)}}function br(r){var s;let l=null;b_(r)&&(l=Object.assign({},r),r.expires_at||(l.expires_at=Zw(r.expires_in)));const i=(s=r.user)!==null&&s!==void 0?s:r;return{data:{session:l,user:i},error:null}}function U0(r){const s=br(r);return!s.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((l,i)=>l&&typeof i=="string",!0)&&(s.data.weak_password=r.weak_password),s}function Pn(r){var s;return{data:{user:(s=r.user)!==null&&s!==void 0?s:r},error:null}}function y_(r){return{data:r,error:null}}function p_(r){const{action_link:s,email_otp:l,hashed_token:i,redirect_to:d,verification_type:u}=r,c=pi(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:s,email_otp:l,hashed_token:i,redirect_to:d,verification_type:u},f=Object.assign({},c);return{data:{properties:g,user:f},error:null}}function L0(r){return r}function b_(r){return r.access_token&&r.refresh_token&&r.expires_in}const Qc=["global","local","others"];let vh=class{constructor({url:s="",headers:l={},fetch:i}){this.url=s,this.headers=l,this.fetch=Gp(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(s,l=Qc[0]){if(Qc.indexOf(l)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Qc.join(", ")));try{return await zt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(l),{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(i){if(_t(i))return{data:null,error:i};throw i}}async inviteUserByEmail(s,l={}){try{return await zt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:s,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:Pn})}catch(i){if(_t(i))return{data:{user:null},error:i};throw i}}async generateLink(s){try{const{options:l}=s,i=pi(s,["options"]),d=Object.assign(Object.assign({},i),l);return"newEmail"in i&&(d.new_email=i==null?void 0:i.newEmail,delete d.newEmail),await zt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:d,headers:this.headers,xform:p_,redirectTo:l==null?void 0:l.redirectTo})}catch(l){if(_t(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(s){try{return await zt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:s,headers:this.headers,xform:Pn})}catch(l){if(_t(l))return{data:{user:null},error:l};throw l}}async listUsers(s){var l,i,d,u,c,g,f;try{const v={nextPage:null,lastPage:0,total:0},b=await zt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=s==null?void 0:s.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(u=(d=s==null?void 0:s.perPage)===null||d===void 0?void 0:d.toString())!==null&&u!==void 0?u:""},xform:L0});if(b.error)throw b.error;const w=await b.json(),N=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,k=(f=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&f!==void 0?f:[];return k.length>0&&(k.forEach(_=>{const M=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(_.split(";")[1].split("=")[1]);v["".concat(T,"Page")]=M}),v.total=parseInt(N)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(_t(v))return{data:{users:[]},error:v};throw v}}async getUserById(s){Fl(s);try{return await zt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(s),{headers:this.headers,xform:Pn})}catch(l){if(_t(l))return{data:{user:null},error:l};throw l}}async updateUserById(s,l){Fl(s);try{return await zt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(s),{body:l,headers:this.headers,xform:Pn})}catch(i){if(_t(i))return{data:{user:null},error:i};throw i}}async deleteUser(s,l=!1){Fl(s);try{return await zt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(s),{headers:this.headers,body:{should_soft_delete:l},xform:Pn})}catch(i){if(_t(i))return{data:{user:null},error:i};throw i}}async _listFactors(s){Fl(s.userId);try{const{data:l,error:i}=await zt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(s.userId,"/factors"),{headers:this.headers,xform:d=>({data:{factors:d},error:null})});return{data:l,error:i}}catch(l){if(_t(l))return{data:null,error:l};throw l}}async _deleteFactor(s){Fl(s.userId),Fl(s.id);try{return{data:await zt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(s.userId,"/factors/").concat(s.id),{headers:this.headers}),error:null}}catch(l){if(_t(l))return{data:null,error:l};throw l}}async _listOAuthClients(s){var l,i,d,u,c,g,f;try{const v={nextPage:null,lastPage:0,total:0},b=await zt(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients"),{headers:this.headers,noResolveJson:!0,query:{page:(i=(l=s==null?void 0:s.page)===null||l===void 0?void 0:l.toString())!==null&&i!==void 0?i:"",per_page:(u=(d=s==null?void 0:s.perPage)===null||d===void 0?void 0:d.toString())!==null&&u!==void 0?u:""},xform:L0});if(b.error)throw b.error;const w=await b.json(),N=(c=b.headers.get("x-total-count"))!==null&&c!==void 0?c:0,k=(f=(g=b.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&f!==void 0?f:[];return k.length>0&&(k.forEach(_=>{const M=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(_.split(";")[1].split("=")[1]);v["".concat(T,"Page")]=M}),v.total=parseInt(N)),{data:Object.assign(Object.assign({},w),v),error:null}}catch(v){if(_t(v))return{data:{clients:[]},error:v};throw v}}async _createOAuthClient(s){try{return await zt(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients"),{body:s,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(_t(l))return{data:null,error:l};throw l}}async _getOAuthClient(s){try{return await zt(this.fetch,"GET","".concat(this.url,"/admin/oauth/clients/").concat(s),{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(_t(l))return{data:null,error:l};throw l}}async _updateOAuthClient(s,l){try{return await zt(this.fetch,"PUT","".concat(this.url,"/admin/oauth/clients/").concat(s),{body:l,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(_t(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(s){try{return await zt(this.fetch,"DELETE","".concat(this.url,"/admin/oauth/clients/").concat(s),{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(_t(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(s){try{return await zt(this.fetch,"POST","".concat(this.url,"/admin/oauth/clients/").concat(s,"/regenerate_secret"),{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(_t(l))return{data:null,error:l};throw l}}};function $0(r={}){return{getItem:s=>r[s]||null,setItem:(s,l)=>{r[s]=l},removeItem:s=>{delete r[s]}}}const nl={debug:!!(globalThis&&Yp()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jh extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}let Kp=class extends jh{};class v_ extends jh{}async function Hp(r,s,l){nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,s);const i=new globalThis.AbortController;return s>0&&setTimeout(()=>{i.abort(),nl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async d=>{if(d){nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,d.name);try{return await l()}finally{nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,d.name)}}else{if(s===0)throw nl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Kp('Acquiring an exclusive Navigator LockManager lock "'.concat(r,'" immediately failed'));if(nl.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}}))}const I0={};async function j_(r,s,l){var i;const d=(i=I0[r])!==null&&i!==void 0?i:Promise.resolve(),u=Promise.race([d.catch(()=>null),s>=0?new Promise((c,g)=>{setTimeout(()=>{g(new v_('Acquring process lock with name "'.concat(r,'" timed out')))},s)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await l());return I0[r]=u.catch(async c=>{if(c&&c.isAcquireTimeout)return await d,null;throw c}),await u}function N_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(r){typeof self<"u"&&(self.globalThis=self)}}function Vp(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error('@supabase/auth-js: Address "'.concat(r,'" is invalid.'));return r.toLowerCase()}function w_(r){return parseInt(r,16)}function __(r){const s=new TextEncoder().encode(r);return"0x"+Array.from(s,i=>i.toString(16).padStart(2,"0")).join("")}function S_(r){var s;const{chainId:l,domain:i,expirationTime:d,issuedAt:u=new Date,nonce:c,notBefore:g,requestId:f,resources:v,scheme:b,uri:w,version:N}=r;{if(!Number.isInteger(l))throw new Error('@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: '.concat(l));if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error('@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: '.concat(c));if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(N!=="1")throw new Error("@supabase/auth-js: Invalid SIWE message field \"version\". Version must be '1'. Provided value: ".concat(N));if(!((s=r.statement)===null||s===void 0)&&s.includes("\n"))throw new Error("@supabase/auth-js: Invalid SIWE message field \"statement\". Statement must not include '\\n'. Provided value: ".concat(r.statement))}const k=Vp(r.address),_=b?"".concat(b,"://").concat(i):i,M=r.statement?"".concat(r.statement,"\n"):"",T="".concat(_," wants you to sign in with your Ethereum account:\n").concat(k,"\n\n").concat(M);let A="URI: ".concat(w,"\nVersion: ").concat(N,"\nChain ID: ").concat(l).concat(c?"\nNonce: ".concat(c):"","\nIssued At: ").concat(u.toISOString());if(d&&(A+="\nExpiration Time: ".concat(d.toISOString())),g&&(A+="\nNot Before: ".concat(g.toISOString())),f&&(A+="\nRequest ID: ".concat(f)),v){let S="\nResources:";for(const y of v){if(!y||typeof y!="string")throw new Error('@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: '.concat(y));S+="\n- ".concat(y)}A+=S}return"".concat(T,"\n").concat(A)}class os extends Error{constructor({message:s,code:l,cause:i,name:d}){var u;super(s,{cause:i}),this.__isWebAuthnError=!0,this.name=(u=d!=null?d:i instanceof Error?i.name:void 0)!==null&&u!==void 0?u:"Unknown Error",this.code=l}}class cd extends os{constructor(s,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:s}),this.name="WebAuthnUnknownError",this.originalError=l}}function k_({error:r,options:s}){var l,i,d;const{publicKey:u}=s;if(!u)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(s.signal instanceof AbortSignal)return new os({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new os({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(s.mediation==="conditional"&&((i=u.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new os({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((d=u.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new os({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new os({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new os({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return u.pubKeyCredParams.filter(g=>g.type==="public-key").length===0?new os({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new os({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const c=window.location.hostname;if(Fp(c)){if(u.rp.id!==c)return new os({message:'The RP ID "'.concat(u.rp.id,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:r})}else return new os({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new os({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new os({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new os({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function E_({error:r,options:s}){const{publicKey:l}=s;if(!l)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(s.signal instanceof AbortSignal)return new os({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new os({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const i=window.location.hostname;if(Fp(i)){if(l.rpId!==i)return new os({message:'The RP ID "'.concat(l.rpId,'" is invalid for this domain'),code:"ERROR_INVALID_RP_ID",cause:r})}else return new os({message:"".concat(window.location.hostname," is an invalid domain"),code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new os({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new os({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class T_{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const s=new AbortController;return this.controller=s,s.signal}cancelCeremony(){if(this.controller){const s=new Error("Manually cancelling existing WebAuthn API call");s.name="AbortError",this.controller.abort(s),this.controller=void 0}}}const A_=new T_;function C_(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:s,user:l,excludeCredentials:i}=r,d=pi(r,["challenge","user","excludeCredentials"]),u=si(s).buffer,c=Object.assign(Object.assign({},l),{id:si(l.id).buffer}),g=Object.assign(Object.assign({},d),{challenge:u,user:c});if(i&&i.length>0){g.excludeCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const v=i[f];g.excludeCredentials[f]=Object.assign(Object.assign({},v),{id:si(v.id).buffer,type:v.type||"public-key",transports:v.transports})}}return g}function M_(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:s,allowCredentials:l}=r,i=pi(r,["challenge","allowCredentials"]),d=si(s).buffer,u=Object.assign(Object.assign({},i),{challenge:d});if(l&&l.length>0){u.allowCredentials=new Array(l.length);for(let c=0;c<l.length;c++){const g=l[c];u.allowCredentials[c]=Object.assign(Object.assign({},g),{id:si(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return u}function R_(r){var s;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const l=r;return{id:r.id,rawId:r.id,response:{attestationObject:cl(new Uint8Array(r.response.attestationObject)),clientDataJSON:cl(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(s=l.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function O_(r){var s;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const l=r,i=r.getClientExtensionResults(),d=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:cl(new Uint8Array(d.authenticatorData)),clientDataJSON:cl(new Uint8Array(d.clientDataJSON)),signature:cl(new Uint8Array(d.signature)),userHandle:d.userHandle?cl(new Uint8Array(d.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(s=l.authenticatorAttachment)!==null&&s!==void 0?s:void 0}}function Fp(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function q0(){var r,s;return!!(Ss()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((s=navigator==null?void 0:navigator.credentials)===null||s===void 0?void 0:s.get)=="function")}async function z_(r){try{const s=await navigator.credentials.create(r);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new cd("Browser returned unexpected credential type",s)}:{data:null,error:new cd("Empty credential response",s)}}catch(s){return{data:null,error:k_({error:s,options:r})}}}async function P_(r){try{const s=await navigator.credentials.get(r);return s?s instanceof PublicKeyCredential?{data:s,error:null}:{data:null,error:new cd("Browser returned unexpected credential type",s)}:{data:null,error:new cd("Empty credential response",s)}}catch(s){return{data:null,error:E_({error:s,options:r})}}}const D_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},B_={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function dd(...r){const s=d=>d!==null&&typeof d=="object"&&!Array.isArray(d),l=d=>d instanceof ArrayBuffer||ArrayBuffer.isView(d),i={};for(const d of r)if(d)for(const u in d){const c=d[u];if(c!==void 0)if(Array.isArray(c))i[u]=c;else if(l(c))i[u]=c;else if(s(c)){const g=i[u];s(g)?i[u]=dd(g,c):i[u]=dd(c)}else i[u]=c}return i}function U_(r,s){return dd(D_,r,s||{})}function L_(r,s){return dd(B_,r,s||{})}class $_{constructor(s){this.client=s,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(s){return this.client.mfa.enroll(Object.assign(Object.assign({},s),{factorType:"webauthn"}))}async _challenge({factorId:s,webauthn:l,friendlyName:i,signal:d},u){try{const{data:c,error:g}=await this.client.mfa.challenge({factorId:s,webauthn:l});if(!c)return{data:null,error:g};const f=d!=null?d:A_.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:v}=c.webauthn.credential_options.publicKey;v.name||(v.name="".concat(v.id,":").concat(i)),v.displayName||(v.displayName=v.name)}switch(c.webauthn.type){case"create":{const v=U_(c.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:b,error:w}=await z_({publicKey:v,signal:f});return b?{data:{factorId:s,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}case"request":{const v=L_(c.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:b,error:w}=await P_(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:v,signal:f}));return b?{data:{factorId:s,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:b}},error:null}:{data:null,error:w}}}}catch(c){return _t(c)?{data:null,error:c}:{data:null,error:new zn("Unexpected error in challenge",c)}}}async _verify({challengeId:s,factorId:l,webauthn:i}){return this.client.mfa.verify({factorId:l,challengeId:s,webauthn:i})}async _authenticate({factorId:s,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},u){if(!l)return{data:null,error:new fi("rpId is required for WebAuthn authentication")};try{if(!q0())return{data:null,error:new zn("Browser does not support WebAuthn",null)};const{data:c,error:g}=await this.challenge({factorId:s,webauthn:{rpId:l,rpOrigins:i},signal:d},{request:u});if(!c)return{data:null,error:g};const{webauthn:f}=c;return this._verify({factorId:s,challengeId:c.challengeId,webauthn:{type:f.type,rpId:l,rpOrigins:i,credential_response:f.credential_response}})}catch(c){return _t(c)?{data:null,error:c}:{data:null,error:new zn("Unexpected error in authenticate",c)}}}async _register({friendlyName:s,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:d}={}},u){if(!l)return{data:null,error:new fi("rpId is required for WebAuthn registration")};try{if(!q0())return{data:null,error:new zn("Browser does not support WebAuthn",null)};const{data:c,error:g}=await this._enroll({friendlyName:s});if(!c)return await this.client.mfa.listFactors().then(b=>{var w;return(w=b.data)===null||w===void 0?void 0:w.all.find(N=>N.factor_type==="webauthn"&&N.friendly_name===s&&N.status!=="unverified")}).then(b=>b?this.client.mfa.unenroll({factorId:b==null?void 0:b.id}):void 0),{data:null,error:g};const{data:f,error:v}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:l,rpOrigins:i},signal:d},{create:u});return f?this._verify({factorId:c.id,challengeId:f.challengeId,webauthn:{rpId:l,rpOrigins:i,type:f.webauthn.type,credential_response:f.webauthn.credential_response}}):{data:null,error:v}}catch(c){return _t(c)?{data:null,error:c}:{data:null,error:new zn("Unexpected error in register",c)}}}}N_();const I_={url:Iw,storageKey:qw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Y0(r,s,l){return await l()}const Xl={};let Nh=class nh{get jwks(){var s,l;return(l=(s=Xl[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(s){Xl[this.storageKey]=Object.assign(Object.assign({},Xl[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,l;return(l=(s=Xl[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){Xl[this.storageKey]=Object.assign(Object.assign({},Xl[this.storageKey]),{cachedAt:s})}constructor(s){var l,i,d;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},I_),s);if(this.storageKey=u.storageKey,this.instanceID=(l=nh.nextInstanceID[this.storageKey])!==null&&l!==void 0?l:0,nh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&Ss()){const c="".concat(this._logPrefix()," Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new vh({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Gp(u.fetch),this.lock=u.lock||Y0,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:this.persistSession&&Ss()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=Hp:this.lock=Y0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new $_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Yp()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$0(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=$0(this.memoryStorage)),Ss()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(d=this.broadcastChannel)===null||d===void 0||d.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(s){if(this.throwOnError&&s&&s.error)throw s.error;return s}_logPrefix(){return"GoTrueClient@"+"".concat(this.storageKey,":").concat(this.instanceID," (").concat(Dp,") ").concat(new Date().toISOString())}_debug(...s){return this.logDebugMessages&&this.logger(this._logPrefix(),...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{let l={},i="none";if(Ss()&&(l=e_(window.location.href),this._isImplicitGrantCallback(l)?i="implicit":await this._isPKCECallback(l)&&(i="pkce")),Ss()&&this.detectSessionInUrl&&i!=="none"){const{data:d,error:u}=await this._getSessionFromURL(l,i);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Ip(u)){const f=(s=u.details)===null||s===void 0?void 0:s.code;if(f==="identity_already_exists"||f==="identity_not_found"||f==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:c,redirectType:g}=d;return this._debug("#_initialize()","detected session in URL",c,"redirect type",g),await this._saveSession(c),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return _t(l)?this._returnResult({error:l}):this._returnResult({error:new zn("Unexpected error during initialization",l)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var l,i,d;try{const u=await zt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:(i=(l=s==null?void 0:s.options)===null||l===void 0?void 0:l.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(d=s==null?void 0:s.options)===null||d===void 0?void 0:d.captchaToken}},xform:br}),{data:c,error:g}=u;if(g||!c)return this._returnResult({data:{user:null,session:null},error:g});const f=c.session,v=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:v,session:f},error:null})}catch(u){if(_t(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(s){var l,i,d;try{let u;if("email"in s){const{email:b,password:w,options:N}=s;let k=null,_=null;this.flowType==="pkce"&&([k,_]=await Vl(this.storage,this.storageKey)),u=await zt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:b,password:w,data:(l=N==null?void 0:N.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:k,code_challenge_method:_},xform:br})}else if("phone"in s){const{phone:b,password:w,options:N}=s;u=await zt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:b,password:w,data:(i=N==null?void 0:N.data)!==null&&i!==void 0?i:{},channel:(d=N==null?void 0:N.channel)!==null&&d!==void 0?d:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:br})}else throw new xo("You must provide either an email or phone number and a password");const{data:c,error:g}=u;if(g||!c)return await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),this._returnResult({data:{user:null,session:null},error:g});const f=c.session,v=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",f)),this._returnResult({data:{user:v,session:f},error:null})}catch(u){if(await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),_t(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(s){try{let l;if("email"in s){const{email:u,password:c,options:g}=s;l=await zt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:u,password:c,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:U0})}else if("phone"in s){const{phone:u,password:c,options:g}=s;l=await zt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:u,password:c,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:U0})}else throw new xo("You must provide either an email or phone number and a password");const{data:i,error:d}=l;if(d)return this._returnResult({data:{user:null,session:null},error:d});if(!i||!i.session||!i.user){const u=new sl;return this._returnResult({data:{user:null,session:null},error:u})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:d})}catch(l){if(_t(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOAuth(s){var l,i,d,u;return await this._handleProviderSignIn(s.provider,{redirectTo:(l=s.options)===null||l===void 0?void 0:l.redirectTo,scopes:(i=s.options)===null||i===void 0?void 0:i.scopes,queryParams:(d=s.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:(u=s.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:l}=s;switch(l){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error('@supabase/auth-js: Unsupported chain "'.concat(l,'"'))}}async signInWithEthereum(s){var l,i,d,u,c,g,f,v,b,w,N;let k,_;if("message"in s)k=s.message,_=s.signature;else{const{chain:M,wallet:T,statement:A,options:S}=s;let y;if(Ss())if(typeof T=="object")y=T;else{const P=window;if("ethereum"in P&&typeof P.ethereum=="object"&&"request"in P.ethereum&&typeof P.ethereum.request=="function")y=P.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=T}const p=new URL((l=S==null?void 0:S.url)!==null&&l!==void 0?l:window.location.href),j=await y.request({method:"eth_requestAccounts"}).then(P=>P).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=Vp(j[0]);let C=(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!C){const P=await y.request({method:"eth_chainId"});C=w_(P)}const O={domain:p.host,address:E,statement:A,uri:p.href,version:"1",chainId:C,nonce:(d=S==null?void 0:S.signInWithEthereum)===null||d===void 0?void 0:d.nonce,issuedAt:(c=(u=S==null?void 0:S.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(g=S==null?void 0:S.signInWithEthereum)===null||g===void 0?void 0:g.expirationTime,notBefore:(f=S==null?void 0:S.signInWithEthereum)===null||f===void 0?void 0:f.notBefore,requestId:(v=S==null?void 0:S.signInWithEthereum)===null||v===void 0?void 0:v.requestId,resources:(b=S==null?void 0:S.signInWithEthereum)===null||b===void 0?void 0:b.resources};k=S_(O),_=await y.request({method:"personal_sign",params:[__(k),E]})}try{const{data:M,error:T}=await zt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"ethereum",message:k,signature:_},!((w=s.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(N=s.options)===null||N===void 0?void 0:N.captchaToken}}:null),xform:br});if(T)throw T;if(!M||!M.session||!M.user){const A=new sl;return this._returnResult({data:{user:null,session:null},error:A})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:T})}catch(M){if(_t(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async signInWithSolana(s){var l,i,d,u,c,g,f,v,b,w,N,k;let _,M;if("message"in s)_=s.message,M=s.signature;else{const{chain:T,wallet:A,statement:S,options:y}=s;let p;if(Ss())if(typeof A=="object")p=A;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))p=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");p=A}const j=new URL((l=y==null?void 0:y.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in p&&p.signIn){const E=await p.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),S?{statement:S}:null));let C;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")C=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)C=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)_=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),M=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in p)||typeof p.signMessage!="function"||!("publicKey"in p)||typeof p!="object"||!p.publicKey||!("toBase58"in p.publicKey)||typeof p.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=["".concat(j.host," wants you to sign in with your Solana account:"),p.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1","URI: ".concat(j.href),"Issued At: ".concat((d=(i=y==null?void 0:y.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&d!==void 0?d:new Date().toISOString()),...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.notBefore?["Not Before: ".concat(y.signInWithSolana.notBefore)]:[],...!((c=y==null?void 0:y.signInWithSolana)===null||c===void 0)&&c.expirationTime?["Expiration Time: ".concat(y.signInWithSolana.expirationTime)]:[],...!((g=y==null?void 0:y.signInWithSolana)===null||g===void 0)&&g.chainId?["Chain ID: ".concat(y.signInWithSolana.chainId)]:[],...!((f=y==null?void 0:y.signInWithSolana)===null||f===void 0)&&f.nonce?["Nonce: ".concat(y.signInWithSolana.nonce)]:[],...!((v=y==null?void 0:y.signInWithSolana)===null||v===void 0)&&v.requestId?["Request ID: ".concat(y.signInWithSolana.requestId)]:[],...!((w=(b=y==null?void 0:y.signInWithSolana)===null||b===void 0?void 0:b.resources)===null||w===void 0)&&w.length?["Resources",...y.signInWithSolana.resources.map(C=>"- ".concat(C))]:[]].join("\n");const E=await p.signMessage(new TextEncoder().encode(_),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");M=E}}try{const{data:T,error:A}=await zt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:cl(M)},!((N=s.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(k=s.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:br});if(A)throw A;if(!T||!T.session||!T.user){const S=new sl;return this._returnResult({data:{user:null,session:null},error:S})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:A})}catch(T){if(_t(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async _exchangeCodeForSession(s){const l=await tl(this.storage,"".concat(this.storageKey,"-code-verifier")),[i,d]=(l!=null?l:"").split("/");try{const{data:u,error:c}=await zt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:s,code_verifier:i},xform:br});if(await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),c)throw c;if(!u||!u.session||!u.user){const g=new sl;return this._returnResult({data:{user:null,session:null,redirectType:null},error:g})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:d!=null?d:null}),error:c})}catch(u){if(await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),_t(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(s){try{const{options:l,provider:i,token:d,access_token:u,nonce:c}=s,g=await zt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:i,id_token:d,access_token:u,nonce:c,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:br}),{data:f,error:v}=g;if(v)return this._returnResult({data:{user:null,session:null},error:v});if(!f||!f.session||!f.user){const b=new sl;return this._returnResult({data:{user:null,session:null},error:b})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:f,error:v})}catch(l){if(_t(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOtp(s){var l,i,d,u,c;try{if("email"in s){const{email:g,options:f}=s;let v=null,b=null;this.flowType==="pkce"&&([v,b]=await Vl(this.storage,this.storageKey));const{error:w}=await zt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:g,data:(l=f==null?void 0:f.data)!==null&&l!==void 0?l:{},create_user:(i=f==null?void 0:f.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:b},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in s){const{phone:g,options:f}=s,{data:v,error:b}=await zt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:g,data:(d=f==null?void 0:f.data)!==null&&d!==void 0?d:{},create_user:(u=f==null?void 0:f.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},channel:(c=f==null?void 0:f.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:v==null?void 0:v.message_id},error:b})}throw new xo("You must provide either an email or phone number.")}catch(g){if(await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),_t(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async verifyOtp(s){var l,i;try{let d,u;"options"in s&&(d=(l=s.options)===null||l===void 0?void 0:l.redirectTo,u=(i=s.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:g}=await zt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:u}}),redirectTo:d,xform:br});if(g)throw g;if(!c)throw new Error("An error occurred on token verification.");const f=c.session,v=c.user;return f!=null&&f.access_token&&(await this._saveSession(f),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",f)),this._returnResult({data:{user:v,session:f},error:null})}catch(d){if(_t(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async signInWithSSO(s){var l,i,d,u,c;try{let g=null,f=null;this.flowType==="pkce"&&([g,f]=await Vl(this.storage,this.storageKey));const v=await zt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(i=(l=s.options)===null||l===void 0?void 0:l.redirectTo)!==null&&i!==void 0?i:void 0}),!((d=s==null?void 0:s.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:g,code_challenge_method:f}),headers:this.headers,xform:y_});return!((u=v.data)===null||u===void 0)&&u.url&&Ss()&&!(!((c=s.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(v.data.url),this._returnResult(v)}catch(g){if(await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),_t(g))return this._returnResult({data:null,error:g});throw g}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:l},error:i}=s;if(i)throw i;if(!l)throw new Is;const{error:d}=await zt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:l.access_token});return this._returnResult({data:{user:null,session:null},error:d})})}catch(s){if(_t(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async resend(s){try{const l="".concat(this.url,"/resend");if("email"in s){const{email:i,type:d,options:u}=s,{error:c}=await zt(this.fetch,"POST",l,{headers:this.headers,body:{email:i,type:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in s){const{phone:i,type:d,options:u}=s,{data:c,error:g}=await zt(this.fetch,"POST",l,{headers:this.headers,body:{phone:i,type:d,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:g})}throw new xo("You must provide either an email or phone number and a type")}catch(l){if(_t(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async l=>l))}async _acquireLock(s,l){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),d=(async()=>(await i,await l()))();return this.pendingInLock.push((async()=>{try{await d}catch(u){}})()),d}return await this.lock("lock:".concat(this.storageKey),s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=l();for(this.pendingInLock.push((async()=>{try{await i}catch(d){}})()),await i;this.pendingInLock.length;){const d=[...this.pendingInLock];await Promise.all(d),this.pendingInLock.splice(0,d.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await s(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const l=await tl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?s=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const i=s.expires_at?s.expires_at*1e3-Date.now()<Cm:!1;if(this._debug("#__loadSession()","session has".concat(i?"":" not"," expired"),"expires_at",s.expires_at),!i){if(this.userStorage){const c=await tl(this.userStorage,this.storageKey+"-user");c!=null&&c.user?s.user=c.user:s.user=Rm()}if(this.storage.isServer&&s.user&&!s.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};s.user=h_(s.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:s},error:null}}const{data:d,error:u}=await this._callRefreshToken(s.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:d},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(s){if(s)return await this._getUser(s);await this.initializePromise;const l=await this._acquireLock(-1,async()=>await this._getUser());return l.data.user&&(this.suppressGetSessionWarning=!0),l}async _getUser(s){try{return s?await zt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:s,xform:Pn}):await this._useSession(async l=>{var i,d,u;const{data:c,error:g}=l;if(g)throw g;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Is}:await zt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:(u=(d=c.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0,xform:Pn})})}catch(l){if(_t(l))return $p(l)&&(await this._removeSession(),await _s(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({data:{user:null},error:l});throw l}}async updateUser(s,l={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,l))}async _updateUser(s,l={}){try{return await this._useSession(async i=>{const{data:d,error:u}=i;if(u)throw u;if(!d.session)throw new Is;const c=d.session;let g=null,f=null;this.flowType==="pkce"&&s.email!=null&&([g,f]=await Vl(this.storage,this.storageKey));const{data:v,error:b}=await zt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:l==null?void 0:l.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:g,code_challenge_method:f}),jwt:c.access_token,xform:Pn});if(b)throw b;return c.user=v.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(i){if(await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),_t(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Is;const l=Date.now()/1e3;let i=l,d=!0,u=null;const{payload:c}=Mm(s.access_token);if(c.exp&&(i=c.exp,d=i<=l),d){const{data:g,error:f}=await this._callRefreshToken(s.refresh_token);if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!g)return{data:{user:null,session:null},error:null};u=g}else{const{data:g,error:f}=await this._getUser(s.access_token);if(f)throw f;u={access_token:s.access_token,refresh_token:s.refresh_token,user:g.user,token_type:"bearer",expires_in:i-l,expires_at:i},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(l){if(_t(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async l=>{var i;if(!s){const{data:c,error:g}=l;if(g)throw g;s=(i=c.session)!==null&&i!==void 0?i:void 0}if(!(s!=null&&s.refresh_token))throw new Is;const{data:d,error:u}=await this._callRefreshToken(s.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):d?this._returnResult({data:{user:d.user,session:d},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(l){if(_t(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async _getSessionFromURL(s,l){try{if(!Ss())throw new go("No browser detected.");if(s.error||s.error_description||s.error_code)throw new go(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new sh("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new go("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new sh("No code detected.");const{data:S,error:y}=await this._exchangeCodeForSession(s.code);if(y)throw y;const p=new URL(window.location.href);return p.searchParams.delete("code"),window.history.replaceState(window.history.state,"",p.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:d,access_token:u,refresh_token:c,expires_in:g,expires_at:f,token_type:v}=s;if(!u||!g||!c||!v)throw new go("No session defined in URL");const b=Math.round(Date.now()/1e3),w=parseInt(g);let N=b+w;f&&(N=parseInt(f));const k=N-b;k*1e3<=Wl&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(k,"s, should have been closer to ").concat(w,"s"));const _=N-w;b-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,N,b):b-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,N,b);const{data:M,error:T}=await this._getUser(u);if(T)throw T;const A={provider_token:i,provider_refresh_token:d,access_token:u,expires_in:w,expires_at:N,refresh_token:c,token_type:v,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:s.type},error:null})}catch(i){if(_t(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const l=await tl(this.storage,"".concat(this.storageKey,"-code-verifier"));return!!(s.code&&l)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async l=>{var i;const{data:d,error:u}=l;if(u)return this._returnResult({error:u});const c=(i=d.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:g}=await this.admin.signOut(c,s);if(g&&!(Lp(g)&&(g.status===404||g.status===401||g.status===403)))return this._returnResult({error:g})}return s!=="others"&&(await this._removeSession(),await _s(this.storage,"".concat(this.storageKey,"-code-verifier"))),this._returnResult({error:null})})}onAuthStateChange(s){const l=Ww(),i={id:l,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:i}}}async _emitInitialSession(s){return await this._useSession(async l=>{var i,d;try{const{data:{session:u},error:c}=l;if(c)throw c;await((i=this.stateChangeEmitters.get(s))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",s,"session",u)}catch(u){await((d=this.stateChangeEmitters.get(s))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",u),console.error(u)}})}async resetPasswordForEmail(s,l={}){let i=null,d=null;this.flowType==="pkce"&&([i,d]=await Vl(this.storage,this.storageKey,!0));try{return await zt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:s,code_challenge:i,code_challenge_method:d,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(u){if(await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),_t(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var s;try{const{data:l,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(s=l.user.identities)!==null&&s!==void 0?s:[]},error:null})}catch(l){if(_t(l))return this._returnResult({data:null,error:l});throw l}}async linkIdentity(s){return"token"in s?this.linkIdentityIdToken(s):this.linkIdentityOAuth(s)}async linkIdentityOAuth(s){var l;try{const{data:i,error:d}=await this._useSession(async u=>{var c,g,f,v,b;const{data:w,error:N}=u;if(N)throw N;const k=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),s.provider,{redirectTo:(c=s.options)===null||c===void 0?void 0:c.redirectTo,scopes:(g=s.options)===null||g===void 0?void 0:g.scopes,queryParams:(f=s.options)===null||f===void 0?void 0:f.queryParams,skipBrowserRedirect:!0});return await zt(this.fetch,"GET",k,{headers:this.headers,jwt:(b=(v=w.session)===null||v===void 0?void 0:v.access_token)!==null&&b!==void 0?b:void 0})});if(d)throw d;return Ss()&&!(!((l=s.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:s.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(_t(i))return this._returnResult({data:{provider:s.provider,url:null},error:i});throw i}}async linkIdentityIdToken(s){return await this._useSession(async l=>{var i;try{const{error:d,data:{session:u}}=l;if(d)throw d;const{options:c,provider:g,token:f,access_token:v,nonce:b}=s,w=await zt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,jwt:(i=u==null?void 0:u.access_token)!==null&&i!==void 0?i:void 0,body:{provider:g,id_token:f,access_token:v,nonce:b,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:br}),{data:N,error:k}=w;return k?this._returnResult({data:{user:null,session:null},error:k}):!N||!N.session||!N.user?this._returnResult({data:{user:null,session:null},error:new sl}):(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("USER_UPDATED",N.session)),this._returnResult({data:N,error:k}))}catch(d){if(await _s(this.storage,"".concat(this.storageKey,"-code-verifier")),_t(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}})}async unlinkIdentity(s){try{return await this._useSession(async l=>{var i,d;const{data:u,error:c}=l;if(c)throw c;return await zt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(s.identity_id),{headers:this.headers,jwt:(d=(i=u.session)===null||i===void 0?void 0:i.access_token)!==null&&d!==void 0?d:void 0})})}catch(l){if(_t(l))return this._returnResult({data:null,error:l});throw l}}async _refreshAccessToken(s){const l="#_refreshAccessToken(".concat(s.substring(0,5),"...)");this._debug(l,"begin");try{const i=Date.now();return await s_(async d=>(d>0&&await a_(200*Math.pow(2,d-1)),this._debug(l,"refreshing attempt",d),await zt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:s},headers:this.headers,xform:br})),(d,u)=>{const c=200*Math.pow(2,d);return u&&Jc(u)&&Date.now()+c-i<Wl})}catch(i){if(this._debug(l,"error",i),_t(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(l,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,l){const i=await this._getUrlForProvider("".concat(this.url,"/authorize"),s,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",l,"url",i),Ss()&&!l.skipBrowserRedirect&&window.location.assign(i),{data:{provider:s,url:i},error:null}}async _recoverAndRefresh(){var s,l;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const d=await tl(this.storage,this.storageKey);if(d&&this.userStorage){let c=await tl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:d.user},await ei(this.userStorage,this.storageKey+"-user",c)),d.user=(s=c==null?void 0:c.user)!==null&&s!==void 0?s:Rm()}else if(d&&!d.user&&!d.user){const c=await tl(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(d.user=c.user,await _s(this.storage,this.storageKey+"-user"),await ei(this.storage,this.storageKey,d)):d.user=Rm()}if(this._debug(i,"session from storage",d),!this._isValidSession(d)){this._debug(i,"session is not valid"),d!==null&&await this._removeSession();return}const u=((l=d.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<Cm;if(this._debug(i,"session has".concat(u?"":" not"," expired with margin of ").concat(Cm,"s")),u){if(this.autoRefreshToken&&d.refresh_token){const{error:c}=await this._callRefreshToken(d.refresh_token);c&&(console.error(c),Jc(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(d.user&&d.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:g}=await this._getUser(d.access_token);!g&&(c!=null&&c.user)?(d.user=c.user,await this._saveSession(d),await this._notifyAllSubscribers("SIGNED_IN",d)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",d)}catch(d){this._debug(i,"error",d),console.error(d);return}finally{this._debug(i,"end")}}async _callRefreshToken(s){var l,i;if(!s)throw new Is;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const d="#_callRefreshToken(".concat(s.substring(0,5),"...)");this._debug(d,"begin");try{this.refreshingDeferred=new bd;const{data:u,error:c}=await this._refreshAccessToken(s);if(c)throw c;if(!u.session)throw new Is;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const g={data:u.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(u){if(this._debug(d,"error",u),_t(u)){const c={data:null,error:u};return Jc(u)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(u),u}finally{this.refreshingDeferred=null,this._debug(d,"end")}}async _notifyAllSubscribers(s,l,i=!0){const d="#_notifyAllSubscribers(".concat(s,")");this._debug(d,"begin",l,"broadcast = ".concat(i));try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:s,session:l});const u=[],c=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(s,l)}catch(f){u.push(f)}});if(await Promise.all(c),u.length>0){for(let g=0;g<u.length;g+=1)console.error(u[g]);throw u[0]}}finally{this._debug(d,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0,await _s(this.storage,"".concat(this.storageKey,"-code-verifier"));const l=Object.assign({},s),i=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&l.user&&await ei(this.userStorage,this.storageKey+"-user",{user:l.user});const d=Object.assign({},l);delete d.user;const u=D0(d);await ei(this.storage,this.storageKey,u)}else{const d=D0(l);await ei(this.storage,this.storageKey,d)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await _s(this.storage,this.storageKey),await _s(this.storage,this.storageKey+"-code-verifier"),await _s(this.storage,this.storageKey+"-user"),this.userStorage&&await _s(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Ss()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",s)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),Wl);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async l=>{const{data:{session:i}}=l;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const d=Math.floor((i.expires_at*1e3-s)/Wl);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(d," ticks, a tick lasts ").concat(Wl,"ms, refresh threshold is ").concat(th," ticks")),d<=th&&await this._callRefreshToken(i.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof jh)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ss()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const l="#_onVisibilityChanged(".concat(s,")");this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,l,i){const d=["provider=".concat(encodeURIComponent(l))];if(i!=null&&i.redirectTo&&d.push("redirect_to=".concat(encodeURIComponent(i.redirectTo))),i!=null&&i.scopes&&d.push("scopes=".concat(encodeURIComponent(i.scopes))),this.flowType==="pkce"){const[u,c]=await Vl(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(u)),code_challenge_method:"".concat(encodeURIComponent(c))});d.push(g.toString())}if(i!=null&&i.queryParams){const u=new URLSearchParams(i.queryParams);d.push(u.toString())}return i!=null&&i.skipBrowserRedirect&&d.push("skip_http_redirect=".concat(i.skipBrowserRedirect)),"".concat(s,"?").concat(d.join("&"))}async _unenroll(s){try{return await this._useSession(async l=>{var i;const{data:d,error:u}=l;return u?this._returnResult({data:null,error:u}):await zt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(s.factorId),{headers:this.headers,jwt:(i=d==null?void 0:d.session)===null||i===void 0?void 0:i.access_token})})}catch(l){if(_t(l))return this._returnResult({data:null,error:l});throw l}}async _enroll(s){try{return await this._useSession(async l=>{var i,d;const{data:u,error:c}=l;if(c)return this._returnResult({data:null,error:c});const g=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:s.factorType==="totp"?{issuer:s.issuer}:{}),{data:f,error:v}=await zt(this.fetch,"POST","".concat(this.url,"/factors"),{body:g,headers:this.headers,jwt:(i=u==null?void 0:u.session)===null||i===void 0?void 0:i.access_token});return v?this._returnResult({data:null,error:v}):(s.factorType==="totp"&&f.type==="totp"&&(!((d=f==null?void 0:f.totp)===null||d===void 0)&&d.qr_code)&&(f.totp.qr_code="data:image/svg+xml;utf-8,".concat(f.totp.qr_code)),this._returnResult({data:f,error:null}))})}catch(l){if(_t(l))return this._returnResult({data:null,error:l});throw l}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:d,error:u}=l;if(u)return this._returnResult({data:null,error:u});const c=Object.assign({challenge_id:s.challengeId},"webauthn"in s?{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_response:s.webauthn.type==="create"?R_(s.webauthn.credential_response):O_(s.webauthn.credential_response)})}:{code:s.code}),{data:g,error:f}=await zt(this.fetch,"POST","".concat(this.url,"/factors/").concat(s.factorId,"/verify"),{body:c,headers:this.headers,jwt:(i=d==null?void 0:d.session)===null||i===void 0?void 0:i.access_token});return f?this._returnResult({data:null,error:f}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+g.expires_in},g)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",g),this._returnResult({data:g,error:f}))})}catch(l){if(_t(l))return this._returnResult({data:null,error:l});throw l}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async l=>{var i;const{data:d,error:u}=l;if(u)return this._returnResult({data:null,error:u});const c=await zt(this.fetch,"POST","".concat(this.url,"/factors/").concat(s.factorId,"/challenge"),{body:s,headers:this.headers,jwt:(i=d==null?void 0:d.session)===null||i===void 0?void 0:i.access_token});if(c.error)return c;const{data:g}=c;if(g.type!=="webauthn")return{data:g,error:null};switch(g.webauthn.type){case"create":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:C_(g.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},g),{webauthn:Object.assign(Object.assign({},g.webauthn),{credential_options:Object.assign(Object.assign({},g.webauthn.credential_options),{publicKey:M_(g.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(_t(l))return this._returnResult({data:null,error:l});throw l}})}async _challengeAndVerify(s){const{data:l,error:i}=await this._challenge({factorId:s.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:s.factorId,challengeId:l.id,code:s.code})}async _listFactors(){var s;const{data:{user:l},error:i}=await this.getUser();if(i)return{data:null,error:i};const d={all:[],phone:[],totp:[],webauthn:[]};for(const u of(s=l==null?void 0:l.factors)!==null&&s!==void 0?s:[])d.all.push(u),u.status==="verified"&&d[u.factor_type].push(u);return{data:d,error:null}}async _getAuthenticatorAssuranceLevel(){var s,l;const{data:{session:i},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Mm(i.access_token);let c=null;u.aal&&(c=u.aal);let g=c;((l=(s=i.user.factors)===null||s===void 0?void 0:s.filter(b=>b.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(g="aal2");const v=u.amr||[];return{data:{currentLevel:c,nextLevel:g,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(s){try{return await this._useSession(async l=>{const{data:{session:i},error:d}=l;return d?this._returnResult({data:null,error:d}):i?await zt(this.fetch,"GET","".concat(this.url,"/oauth/authorizations/").concat(s),{headers:this.headers,jwt:i.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Is})})}catch(l){if(_t(l))return this._returnResult({data:null,error:l});throw l}}async _approveAuthorization(s,l){try{return await this._useSession(async i=>{const{data:{session:d},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!d)return this._returnResult({data:null,error:new Is});const c=await zt(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(s,"/consent"),{headers:this.headers,jwt:d.access_token,body:{action:"approve"},xform:g=>({data:g,error:null})});return c.data&&c.data.redirect_url&&Ss()&&!(l!=null&&l.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(i){if(_t(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(s,l){try{return await this._useSession(async i=>{const{data:{session:d},error:u}=i;if(u)return this._returnResult({data:null,error:u});if(!d)return this._returnResult({data:null,error:new Is});const c=await zt(this.fetch,"POST","".concat(this.url,"/oauth/authorizations/").concat(s,"/consent"),{headers:this.headers,jwt:d.access_token,body:{action:"deny"},xform:g=>({data:g,error:null})});return c.data&&c.data.redirect_url&&Ss()&&!(l!=null&&l.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(i){if(_t(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async s=>{const{data:{session:l},error:i}=s;return i?this._returnResult({data:null,error:i}):l?await zt(this.fetch,"GET","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:l.access_token,xform:d=>({data:d,error:null})}):this._returnResult({data:null,error:new Is})})}catch(s){if(_t(s))return this._returnResult({data:null,error:s});throw s}}async _revokeOAuthGrant(s){try{return await this._useSession(async l=>{const{data:{session:i},error:d}=l;return d?this._returnResult({data:null,error:d}):i?(await zt(this.fetch,"DELETE","".concat(this.url,"/user/oauth/grants"),{headers:this.headers,jwt:i.access_token,query:{client_id:s.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Is})})}catch(l){if(_t(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(s,l={keys:[]}){let i=l.keys.find(g=>g.kid===s);if(i)return i;const d=Date.now();if(i=this.jwks.keys.find(g=>g.kid===s),i&&this.jwks_cached_at+Kw>d)return i;const{data:u,error:c}=await zt(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(c)throw c;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=d,i=u.keys.find(g=>g.kid===s),!i)?null:i}async getClaims(s,l={}){try{let i=s;if(!i){const{data:k,error:_}=await this.getSession();if(_||!k.session)return this._returnResult({data:null,error:_});i=k.session.access_token}const{header:d,payload:u,signature:c,raw:{header:g,payload:f}}=Mm(i);l!=null&&l.allowExpired||d_(u.exp);const v=!d.alg||d.alg.startsWith("HS")||!d.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(d.kid,l!=null&&l.keys?{keys:l.keys}:l==null?void 0:l.jwks);if(!v){const{error:k}=await this.getUser(i);if(k)throw k;return{data:{claims:u,header:d,signature:c},error:null}}const b=u_(d.alg),w=await crypto.subtle.importKey("jwk",v,b,!0,["verify"]);if(!await crypto.subtle.verify(b,w,c,Qw("".concat(g,".").concat(f))))throw new id("Invalid JWT signature");return{data:{claims:u,header:d,signature:c},error:null}}catch(i){if(_t(i))return this._returnResult({data:null,error:i});throw i}}};Nh.nextInstanceID={};const q_=vh,Y_=Nh,G_=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:q_,AuthApiError:Up,AuthClient:Y_,AuthError:fi,AuthImplicitGrantRedirectError:go,AuthInvalidCredentialsError:xo,AuthInvalidJwtError:id,AuthInvalidTokenResponseError:sl,AuthPKCEGrantCodeExchangeError:sh,AuthRetryableFetchError:ld,AuthSessionMissingError:Is,AuthUnknownError:zn,AuthWeakPasswordError:rh,CustomAuthError:dn,GoTrueAdminApi:vh,GoTrueClient:Nh,NavigatorLockAcquireTimeoutError:Kp,SIGN_OUT_SCOPES:Qc,isAuthApiError:Lp,isAuthError:_t,isAuthImplicitGrantRedirectError:Ip,isAuthRetryableFetchError:Jc,isAuthSessionMissingError:$p,isAuthWeakPasswordError:Hw,lockInternals:nl,navigatorLock:Hp,processLock:j_},Symbol.toStringTag,{value:"Module"})),Xp=ko(G_);var G0;function K_(){if(G0)return co;G0=1,Object.defineProperty(co,"__esModule",{value:!0}),co.SupabaseAuthClient=void 0;const r=Xp;let s=class extends r.AuthClient{constructor(i){super(i)}};return co.SupabaseAuthClient=s,co}var K0;function H0(){if(K0)return Bc;K0=1,Object.defineProperty(Bc,"__esModule",{value:!0});const r=op,s=fp(),l=Np,i=Dw,d=Uw(),u=Lw(),c=$w(),g=K_();class f{constructor(b,w,N){var k,_,M;this.supabaseUrl=b,this.supabaseKey=w;const T=(0,c.validateSupabaseUrl)(b);if(!w)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",T),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",T),this.storageUrl=new URL("storage/v1",T),this.functionsUrl=new URL("functions/v1",T);const A="sb-".concat(T.hostname.split(".")[0],"-auth-token"),S={db:d.DEFAULT_DB_OPTIONS,realtime:d.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},d.DEFAULT_AUTH_OPTIONS),{storageKey:A}),global:d.DEFAULT_GLOBAL_OPTIONS},y=(0,c.applySettingDefaults)(N!=null?N:{},S);this.storageKey=(k=y.auth.storageKey)!==null&&k!==void 0?k:"",this.headers=(_=y.global.headers)!==null&&_!==void 0?_:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(p,j)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(j)," is not possible"))}})):this.auth=this._initSupabaseAuthClient((M=y.auth)!==null&&M!==void 0?M:{},this.headers,y.global.fetch),this.fetch=(0,u.fetchWithAuth)(w,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(p=>this.realtime.setAuth(p)).catch(p=>console.warn("Failed to set initial Realtime auth token:",p)),this.rest=new s.PostgrestClient(new URL("rest/v1",T).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new i.StorageClient(this.storageUrl.href,this.headers,this.fetch,N==null?void 0:N.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new r.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(b){return this.rest.from(b)}schema(b){return this.rest.schema(b)}rpc(b,w={},N={head:!1,get:!1,count:void 0}){return this.rest.rpc(b,w,N)}channel(b,w={config:{}}){return this.realtime.channel(b,w)}getChannels(){return this.realtime.getChannels()}removeChannel(b){return this.realtime.removeChannel(b)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var b,w;if(this.accessToken)return await this.accessToken();const{data:N}=await this.auth.getSession();return(w=(b=N.session)===null||b===void 0?void 0:b.access_token)!==null&&w!==void 0?w:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:b,persistSession:w,detectSessionInUrl:N,storage:k,userStorage:_,storageKey:M,flowType:T,lock:A,debug:S,throwOnError:y},p,j){const E={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new g.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),p),storageKey:M,autoRefreshToken:b,persistSession:w,detectSessionInUrl:N,storage:k,userStorage:_,flowType:T,lock:A,debug:S,throwOnError:y,fetch:j,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(b){return new l.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},b),{params:Object.assign({apikey:this.supabaseKey},b==null?void 0:b.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((w,N)=>{this._handleTokenChanged(w,"CLIENT",N==null?void 0:N.access_token)})}_handleTokenChanged(b,w,N){(b==="TOKEN_REFRESHED"||b==="SIGNED_IN")&&this.changedAccessToken!==N?(this.changedAccessToken=N,this.realtime.setAuth(N)):b==="SIGNED_OUT"&&(this.realtime.setAuth(),w=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Bc.default=f,Bc}var V0;function H_(){return V0||(V0=1,(function(r){var s=en&&en.__createBinding||(Object.create?(function(b,w,N,k){k===void 0&&(k=N);var _=Object.getOwnPropertyDescriptor(w,N);(!_||("get"in _?!w.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return w[N]}}),Object.defineProperty(b,k,_)}):(function(b,w,N,k){k===void 0&&(k=N),b[k]=w[N]})),l=en&&en.__exportStar||function(b,w){for(var N in b)N!=="default"&&!Object.prototype.hasOwnProperty.call(w,N)&&s(w,b,N)},i=en&&en.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(r,"__esModule",{value:!0}),r.createClient=r.SupabaseClient=r.FunctionRegion=r.FunctionsError=r.FunctionsRelayError=r.FunctionsFetchError=r.FunctionsHttpError=r.PostgrestError=void 0;const d=i(H0());l(Xp,r);var u=fp();Object.defineProperty(r,"PostgrestError",{enumerable:!0,get:function(){return u.PostgrestError}});var c=op;Object.defineProperty(r,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(r,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(r,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(r,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(r,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),l(Np,r);var g=H0();Object.defineProperty(r,"SupabaseClient",{enumerable:!0,get:function(){return i(g).default}});const f=(b,w,N)=>new d.default(b,w,N);r.createClient=f;function v(){if(typeof window<"u"||typeof process>"u")return!1;const b=process.version;if(b==null)return!1;const w=b.match(/^v(\d+)\./);return w?parseInt(w[1],10)<=18:!1}v()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(en)),en}var Jp=H_();const Qp=nj(Jp),V_=Xj({__proto__:null,default:Qp},[Jp]),{PostgrestError:Uk,FunctionsHttpError:Lk,FunctionsFetchError:$k,FunctionsRelayError:Ik,FunctionsError:qk,FunctionRegion:Yk,SupabaseClient:Gk,createClient:F_,GoTrueAdminApi:Kk,GoTrueClient:Hk,AuthAdminApi:Vk,AuthClient:Fk,navigatorLock:Xk,NavigatorLockAcquireTimeoutError:Jk,lockInternals:Qk,processLock:Zk,SIGN_OUT_SCOPES:Wk,AuthError:e2,AuthApiError:t2,AuthUnknownError:a2,CustomAuthError:s2,AuthSessionMissingError:r2,AuthInvalidTokenResponseError:n2,AuthInvalidCredentialsError:l2,AuthImplicitGrantRedirectError:i2,AuthPKCEGrantCodeExchangeError:o2,AuthRetryableFetchError:c2,AuthWeakPasswordError:d2,AuthInvalidJwtError:u2,isAuthError:m2,isAuthApiError:h2,isAuthSessionMissingError:f2,isAuthImplicitGrantRedirectError:x2,isAuthRetryableFetchError:g2,isAuthWeakPasswordError:y2,RealtimePresence:p2,RealtimeChannel:b2,RealtimeClient:v2,REALTIME_LISTEN_TYPES:j2,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:N2,REALTIME_PRESENCE_LISTEN_EVENTS:w2,REALTIME_SUBSCRIBE_STATES:_2,REALTIME_CHANNEL_STATES:S2}=Qp||V_,X_="https://eldoyqgzxgubkyohvquq.supabase.co",J_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsZG95cWd6eGd1Ymt5b2h2cXVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NDYxMDYsImV4cCI6MjA4MTAyMjEwNn0.m6Mar-3MBvTDYptexLhbLK3SEhQb9CiqlU7Vwe3xxaU",Zp=F_(X_,J_),Q_=()=>{var Bt,jt,Vt,ia;const{user:r,isAuthenticated:s,loading:l}=Pa(),{allowMessages:i}=Eo(),d=Qt(),u=tr(),[c,g]=m.useState(null),[f,v]=m.useState([]),[b,w]=m.useState(""),[N,k]=m.useState(""),[_,M]=m.useState("regular"),[T,A]=m.useState(!1),[S,y]=m.useState(null),[p,j]=m.useState(null),[E,C]=m.useState(""),[O,P]=m.useState(null),[L,ce]=m.useState("spam"),[Z,ie]=m.useState(""),[le,ye]=m.useState(!1),z=m.useRef(null),X=m.useRef(null),G=m.useRef(null),D=m.useRef(!1),$=m.useRef(!0),[B,Y]=m.useState(new Set),[Q,q]=m.useState(()=>{var K;try{return Number(((K=window==null?void 0:window.visualViewport)==null?void 0:K.height)||(window==null?void 0:window.innerHeight)||0)||0}catch(se){return 0}}),[I,V]=m.useState([]),Te=m.useRef(null),Ke=m.useRef(null),[oe,je]=m.useState(!1),[fe,ke]=m.useState([]),[$e,Le]=m.useState(!1),[St,Qe]=m.useState(""),[It,$t]=m.useState([]),[Zt,Xt]=m.useState([]),[ya,kt]=m.useState(new Set),[de,Ie]=m.useState(new Set),Pe=m.useRef(null),F=K=>{var Je,Nt,Ve;const se=(Ve=(Nt=K==null?void 0:K.participant_id)!=null?Nt:(Je=K==null?void 0:K.participant)==null?void 0:Je.id)!=null?Ve:null;return String(se!=null?se:"").trim()||""},nt=(K,{focus:se=!1}={})=>{const ae=String(K||"").trim();if(!ae)return;const Nt=(I||[]).find(Ve=>String(F(Ve))===ae)||null||{conversation_id:"".concat((r==null?void 0:r.id)||"me","-").concat(ae),participant_id:ae,last_message:"",last_message_time:null,unread_count:0,message_type:"regular",participant:null};ee(Nt,{focus:se})},ee=(K,{focus:se=!1}={})=>{try{if(!K||!F(K))return;D.current=!!se,M(String((K==null?void 0:K.message_type)||"")==="request"?"requests":"regular"),g(K),y(null)}catch(ae){console.error("Error selecting conversation:",ae),y("Konuma alamad")}};m.useEffect(()=>{l||s||d("/login-new",{replace:!0,state:{from:"".concat(u.pathname||"/messages").concat(u.search||"")}})},[l,s,d,u.pathname,u.search]),m.useEffect(()=>{var ae,Je;const K=()=>{var Nt;try{const Ve=Number(((Nt=window==null?void 0:window.visualViewport)==null?void 0:Nt.height)||(window==null?void 0:window.innerHeight)||0)||0;q(Ve)}catch(Ve){}};K();let se=null;try{se=window.visualViewport,(ae=se==null?void 0:se.addEventListener)==null||ae.call(se,"resize",K),(Je=se==null?void 0:se.addEventListener)==null||Je.call(se,"scroll",K)}catch(Nt){}return window.addEventListener("resize",K),window.addEventListener("orientationchange",K),()=>{var Nt,Ve;try{(Nt=se==null?void 0:se.removeEventListener)==null||Nt.call(se,"resize",K),(Ve=se==null?void 0:se.removeEventListener)==null||Ve.call(se,"scroll",K)}catch(Be){}window.removeEventListener("resize",K),window.removeEventListener("orientationchange",K)}},[]);const Re=m.useMemo(()=>{const K=(I||[]).filter(se=>_==="requests"?se.message_type==="request":se.message_type!=="request");return!N||String(N||"").trim().length<2?K:K.filter(se=>{const ae=se.participant;return((ae==null?void 0:ae.full_name)||"").toLowerCase().includes(N.toLowerCase())||((se==null?void 0:se.last_message)||"").toLowerCase().includes(N.toLowerCase())})},[I,_,N]),De=m.useMemo(()=>(I||[]).filter(K=>(K==null?void 0:K.message_type)==="request").length,[I]),We=(K="smooth")=>{const se=z.current;if(se)try{se.scrollTo({top:se.scrollHeight,behavior:K})}catch(ae){se.scrollTop=se.scrollHeight}},Ye=()=>{const K=z.current;return K?K.scrollHeight-K.scrollTop-K.clientHeight<140:!0},ct=()=>!1,Ne=K=>{const se=String(K||"").trim();if(!se)return"";try{if(se.startsWith("{")){const ae=JSON.parse(se);if(ae&&typeof ae=="object"&&ae.type==="image")return"Resim Gnderildi."}}catch(ae){}return/"type"\s*:\s*"image"/i.test(se)?"Resim Gnderildi.":se};m.useEffect(()=>{c&&(async()=>{A(!0),y(null);try{const se=F(c);if(!se){v([]);return}const ae=await $s.getMessages(se);ae!=null&&ae.success&&v(ae.data||[]),$.current=!0,setTimeout(()=>We("auto"),50)}catch(se){console.error("Error loading messages:",se),y("Mesajlar yklenirken bir hata olutu"),v([])}finally{A(!1)}})()},[c]),m.useEffect(()=>{c!=null&&c.participant_id&&V(K=>(K||[]).map(se=>String(se==null?void 0:se.participant_id)===String(c.participant_id)?{...se,unread_count:0}:se))},[c==null?void 0:c.participant_id]),m.useEffect(()=>{if(!(c!=null&&c.participant_id))return;Ke.current&&clearInterval(Ke.current);const K=String((c==null?void 0:c.participant_id)||"").trim();if(!K)return;const se=async()=>{try{if(document!=null&&document.hidden)return;const ae=$.current||Ye(),Je=await $s.getMessages(K);if(!(Je!=null&&Je.success))return;const Nt=Array.isArray(Je.data)?Je.data:[];v(Ve=>{const mt=(Array.isArray(Ve)?Ve:[]).slice(),bt=new Map(mt.map((lt,At)=>[String((lt==null?void 0:lt.id)||""),At]));for(const lt of Nt){const At=String((lt==null?void 0:lt.id)||"");if(!At)continue;const H=bt.get(At);H!==void 0?mt[H]={...mt[H],...lt}:(bt.set(At,mt.length),mt.push(lt))}return mt.sort((lt,At)=>new Date(lt.created_at||0).getTime()-new Date(At.created_at||0).getTime()),mt}),ae&&($.current=!0,setTimeout(()=>We("auto"),40))}catch(ae){}};return Ke.current=setInterval(se,8e3),()=>{Ke.current&&clearInterval(Ke.current),Ke.current=null}},[c==null?void 0:c.participant_id]),m.useEffect(()=>{(async()=>{if(r!=null&&r.id)try{const se=await $s.getConversations();se!=null&&se.success&&V(se.data||[])}catch(se){console.error(se)}})()},[r==null?void 0:r.id]),m.useEffect(()=>{(async()=>{if(r!=null&&r.id)try{const se=await us.getBlocks().catch(()=>null),ae=Array.isArray(se==null?void 0:se.data)?se.data:Array.isArray(se)?se:[];Y(new Set(ae.map(Je=>String((Je==null?void 0:Je.id)||"")).filter(Boolean)))}catch(se){Y(new Set)}})()},[r==null?void 0:r.id]),m.useEffect(()=>{if(!(r!=null&&r.id))return;Te.current&&clearInterval(Te.current);const K=async()=>{try{if(document!=null&&document.hidden)return;const se=await $s.getConversations();se!=null&&se.success&&V(se.data||[])}catch(se){}};return Te.current=setInterval(K,2e4),()=>{Te.current&&clearInterval(Te.current),Te.current=null}},[r==null?void 0:r.id]),m.useEffect(()=>{const K=new URLSearchParams(u.search||""),se=K.get("to");if(!se)return;const ae=String(se||"").trim();if(!ae||!(K.get("focus")==="1"||K.get("open")==="1")||(D.current=K.get("focus")==="1",c!=null&&c.participant_id&&String(c.participant_id)===ae))return;if((I||[]).find(Ve=>String(Ve==null?void 0:Ve.participant_id)===ae)){nt(ae,{focus:D.current}),d("/messages",{replace:!0});return}(async()=>{var Ve,Be,mt,bt;try{const lt=await re("/api/users?id=".concat(encodeURIComponent(ae))).catch(()=>null),At=(lt==null?void 0:lt.data)||((Ve=lt==null?void 0:lt.data)==null?void 0:Ve.data)||((Be=lt==null?void 0:lt.data)==null?void 0:Be.user)||((bt=(mt=lt==null?void 0:lt.data)==null?void 0:mt.user)==null?void 0:bt.data)||(lt==null?void 0:lt.data)||lt,H=At!=null&&At.id?At:lt==null?void 0:lt.data;if(!(H!=null&&H.id))return;const J={conversation_id:"".concat((r==null?void 0:r.id)||"me","-").concat(H.id),participant_id:H.id,last_message:"",last_message_time:null,unread_count:0,message_type:"regular",participant:H};ee(J,{focus:D.current}),d("/messages",{replace:!0})}catch(lt){}})()},[u.search,I,r==null?void 0:r.id]),m.useEffect(()=>{c!=null&&c.participant_id&&D.current&&(D.current=!1,setTimeout(()=>{var K,se;return(se=(K=G.current)==null?void 0:K.focus)==null?void 0:se.call(K)},50))},[c==null?void 0:c.participant_id]);const Xe=async()=>{var K,se,ae;je(!0),Qe(""),$t([]),Xt([]),Le(!0);try{const[Je,Nt,Ve]=await Promise.all([$s.getContacts({limit:80}).catch(()=>null),r!=null&&r.id?re("/api/users/".concat(encodeURIComponent(r.id),"/following?limit=200")).catch(()=>null):Promise.resolve(null),$s.getSuggestions({limit:24}).catch(()=>null)]),Be=(Je==null?void 0:Je.data)||((K=Je==null?void 0:Je.data)==null?void 0:K.data)||[],mt=Array.isArray(Be)?Be:[];ke(mt),Ie(new Set(mt.map(J=>String((J==null?void 0:J.id)||"")).filter(Boolean)));const bt=(Nt==null?void 0:Nt.data)||((se=Nt==null?void 0:Nt.data)==null?void 0:se.data)||Nt||[],lt=Array.isArray(bt)?bt:[];kt(new Set(lt.map(J=>String((J==null?void 0:J.id)||(J==null?void 0:J.user_id)||"")).filter(Boolean)));const At=(Ve==null?void 0:Ve.data)||((ae=Ve==null?void 0:Ve.data)==null?void 0:ae.data)||[],H=Array.isArray(At)?At:[];Xt(H)}catch(Je){ke([]),Xt([]),kt(new Set),Ie(new Set)}finally{Le(!1)}};m.useEffect(()=>{if(!oe)return;Pe.current&&clearTimeout(Pe.current);const K=String(St||"").trim(),se=K.startsWith("@")?K.slice(1).trim():K;if(se.length<2){$t([]);return}return Pe.current=setTimeout(async()=>{var ae,Je,Nt;try{const Ve=await $s.searchUsers(se);if(Ve!=null&&Ve.success){const Be=(Nt=(Je=(ae=Ve==null?void 0:Ve.data)==null?void 0:ae.data)!=null?Je:Ve==null?void 0:Ve.data)!=null?Nt:[];$t(Array.isArray(Be)?Be:[])}else $t([])}catch(Ve){$t([])}},250),()=>clearTimeout(Pe.current)},[St,oe]);const ut=m.useMemo(()=>{const K=Array.isArray(It)?It:[];if(K.length===0)return[];const se=de instanceof Set?de:new Set,ae=ya instanceof Set?ya:new Set,Je=Ve=>Number((Ve==null?void 0:Ve.polit_score)||0)||0,Nt=Ve=>{const Be=String((Ve==null?void 0:Ve.id)||"");return Be?se.has(Be)?0:ae.has(Be)?1:2:9};return K.slice().sort((Ve,Be)=>{const mt=Nt(Ve),bt=Nt(Be);return mt!==bt?mt-bt:Je(Be)-Je(Ve)})},[It,ya,de]),ue=K=>{const se=K==null?void 0:K.id;se&&(je(!1),Qe(""),$t([]),d("/messages?to=".concat(encodeURIComponent(se),"&open=1&focus=1")))},rt=async()=>{if(!(!b.trim()||!c)){if(!i){y("Mesajlama u anda kapal.");return}try{y(null);const K=F(c);if(!K){y("Geersiz alc.");return}if(B instanceof Set&&B.has(String(K))){y("Bu kullancy engellediniz. Mesaj gnderemezsiniz.");return}const se=await $s.send(K,b.trim());se!=null&&se.success&&(v(ae=>[...ae,se.data]),V(ae=>{var mt,bt;const Je=Array.isArray(ae)?ae.slice():[],Nt=String(K),Ve=Je.findIndex(lt=>String(lt==null?void 0:lt.participant_id)===Nt),Be={...Ve>=0?Je[Ve]:c,last_message:((mt=se.data)==null?void 0:mt.content)||b.trim(),last_message_time:((bt=se.data)==null?void 0:bt.created_at)||new Date().toISOString(),unread_count:0};return Ve>=0&&Je.splice(Ve,1),[Be,...Je]})),w(""),$.current=!0,setTimeout(()=>We("auto"),30)}catch(K){console.error("Error sending message:",K),y((K==null?void 0:K.message)||"Mesaj gnderilemedi")}}},st=K=>{const se=String((K==null?void 0:K.content)||"");try{const ae=JSON.parse(se);return ae&&typeof ae=="object"&&ae.type==="image"&&ae.url?ae:null}catch(ae){return null}},et=()=>{var K;if(y(null),!i){y("Mesajlama u anda kapal.");return}(K=X.current)==null||K.click()},Ut=async K=>{if(!(!K||!c)){if(!i){y("Mesajlama u anda kapal.");return}try{if(y(null),!new Set(["image/jpeg","image/png","image/webp"]).has(K.type))throw new Error("Sadece JPG / PNG / WEBP gnderebilirsiniz.");if(K.size>10*1024*1024)throw new Error("Resim ok byk (max 10MB).");const ae=F(c);if(B instanceof Set&&ae&&B.has(String(ae)))throw new Error("Bu kullancy engellediniz. Resim gnderemezsiniz.");const Je=await re("/api/storage/sign-upload",{method:"POST",body:JSON.stringify({bucket:"uploads",folder:"messages",contentType:K.type})});if(!(Je!=null&&Je.success))throw new Error((Je==null?void 0:Je.error)||"Ykleme hazrl baarsz.");const{bucket:Nt,path:Ve,token:Be,publicUrl:mt}=(Je==null?void 0:Je.data)||{};if(!Nt||!Ve||!Be||!mt)throw new Error("Ykleme anahtar alnamad.");const{error:bt}=await Zp.storage.from(Nt).uploadToSignedUrl(Ve,Be,K,{contentType:K.type});if(bt)throw new Error(String((bt==null?void 0:bt.message)||"Resim yklenemedi."));const lt=String(mt);if(!ae)throw new Error("Geersiz alc.");const At=await $s.send(ae,"",{kind:"image",url:lt});At!=null&&At.success&&(v(H=>[...H,At.data]),V(H=>{var dt;const J=Array.isArray(H)?H.slice():[],xe=String(ae),qe=J.findIndex(Et=>String(Et==null?void 0:Et.participant_id)===xe),ot={...qe>=0?J[qe]:c,last_message:" Fotoraf",last_message_time:((dt=At.data)==null?void 0:dt.created_at)||new Date().toISOString(),unread_count:0};return qe>=0&&J.splice(qe,1),[ot,...J]})),setTimeout(We,100)}catch(se){y((se==null?void 0:se.message)||"Resim gnderilemedi")}finally{X.current&&(X.current.value="")}}},Ot=async K=>{try{await $s.rejectRequest(K.participant_id),V(se=>(se||[]).filter(ae=>ae.participant_id!==K.participant_id)),(c==null?void 0:c.participant_id)===K.participant_id&&(g(null),v([]))}catch(se){y((se==null?void 0:se.message)||"stek reddedilemedi.")}},Se=async K=>{const se=String((K==null?void 0:K.participant_id)||"").trim();if(se&&window.confirm("Bu sohbeti silmek istiyor musunuz? Sohbet yalnzca sizin tarafnzda gizlenir. Kar tarafta sohbet gemii korunur.")){j(se);try{await $s.deleteConversation(se),V(ae=>(ae||[]).filter(Je=>String(Je==null?void 0:Je.participant_id)!==se)),String((c==null?void 0:c.participant_id)||"")===se&&(g(null),v([]))}catch(ae){y((ae==null?void 0:ae.message)||"Sohbet silinemedi.")}finally{j(null)}}},gt=async()=>{const K=String((O==null?void 0:O.participant_id)||"").trim();if(K){j(K);try{const se=await $s.reportConversation(K,{reason:L,details:Z});se!=null&&se.success?ye(!0):y((se==null?void 0:se.error)||"ikayet gnderilemedi.")}catch(se){y((se==null?void 0:se.message)||"ikayet gnderilemedi.")}finally{j(null)}}};return l?e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-10",children:e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 text-sm font-semibold text-gray-700",children:"Ykleniyor"})})}):s?e.jsxs("div",{className:["bg-gray-50 overflow-hidden","h-[calc(100dvh-96px-86px)]","lg:h-[calc(100dvh-16px)]"].join(" "),style:{height:Q>0?window.innerWidth>=1024?"".concat(Math.max(320,Q-16),"px"):"".concat(Math.max(320,Q-96-86),"px"):void 0},children:[e.jsx("div",{className:"container-main py-4 md:py-6 h-full flex flex-col min-h-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[320px_1fr] gap-4 flex-1 min-h-0 overflow-hidden",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden flex flex-col ".concat(c?"hidden md:flex":""),children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Mesajlar"}),e.jsxs("button",{type:"button",onClick:Xe,className:"px-3 py-2 rounded-lg bg-green-600 hover:bg-green-700 text-white text-sm font-black inline-flex items-center gap-2",children:[e.jsx(As,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Yeni Mesaj"]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{type:"button",onClick:()=>M("regular"),className:"flex-1 px-3 py-2 rounded-lg text-sm font-bold border ".concat(_==="regular"?"bg-blue-50 border-blue-200 text-primary-blue":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"),children:"Mesajlar"}),e.jsx("button",{type:"button",onClick:()=>M("requests"),className:"flex-1 px-3 py-2 rounded-lg text-sm font-bold border ".concat(_==="requests"?"bg-blue-50 border-blue-200 text-primary-blue":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"),children:e.jsxs("span",{className:"inline-flex items-center justify-center gap-2",children:["stekler",De>0?e.jsx(ln,{variant:"danger",size:"small",className:"animate-pulse",children:De>99?"99+":De}):null]})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-7 h-7 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Mesajlarda ara...",value:N,onChange:K=>k(K.target.value),className:"w-full pl-12 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-blue"})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[Re.map(K=>{try{if(!K||!K.conversation_id)return null;const se=K.participant;return se?e.jsx("div",{onClick:()=>nt(F(K)),className:"p-4 border-b cursor-pointer hover:bg-gray-50 transition-colors ".concat((c==null?void 0:c.conversation_id)===K.conversation_id?"bg-blue-50":""," ").concat(K.unread_count>0?"bg-blue-50/30":""),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Yt,{src:se.avatar_url||se.profile_image,size:"48px",verified:za(se)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-semibold truncate ".concat(K.unread_count>0?"text-gray-900":"text-gray-700"),children:se.full_name||"Bilinmeyen Kullanc"}),e.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0 ml-2",children:K.last_message_time?ui(K.last_message_time):""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm truncate ".concat(K.unread_count>0?"font-semibold text-gray-900":"text-gray-600"),children:Ne(K.last_message||"")||"Mesaj yok"}),K.unread_count>0&&e.jsx(ln,{variant:"danger",size:"small",className:"ml-2 flex-shrink-0",children:K.unread_count})]}),_==="requests"&&e.jsx("div",{className:"mt-2 flex justify-end",children:e.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-700 text-xs font-black",onClick:ae=>{ae.stopPropagation(),Ot(K)},children:"Reddet"})}),K.is_muted&&e.jsx("span",{className:"text-xs text-gray-400 mt-1",children:" Sessize alnd"})]}),e.jsxs("div",{className:"md:hidden relative flex-shrink-0",children:[e.jsx("button",{type:"button",className:"p-2 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 text-gray-700",title:"lemler",onClick:ae=>{ae.stopPropagation(),C(Je=>Je===String(K.conversation_id)?"":String(K.conversation_id))},children:e.jsx(yy,{className:"w-5 h-5"})}),E===String(K.conversation_id)?e.jsxs("div",{className:"absolute right-0 top-11 z-20 w-44 bg-white border border-gray-200 rounded-xl shadow-xl overflow-hidden",onClick:ae=>ae.stopPropagation(),children:[e.jsxs("button",{type:"button",className:"w-full px-3 py-3 text-left text-sm font-bold text-gray-800 hover:bg-gray-50 flex items-center gap-2",disabled:p===String((K==null?void 0:K.participant_id)||""),onClick:ae=>{ae.stopPropagation(),C(""),Se(K)},children:[e.jsx(Ka,{className:"w-5 h-5"}),"Sohbeti sil"]}),e.jsxs("button",{type:"button",className:"w-full px-3 py-3 text-left text-sm font-bold text-gray-800 hover:bg-gray-50 flex items-center gap-2",disabled:p===String((K==null?void 0:K.participant_id)||""),onClick:ae=>{ae.stopPropagation(),C(""),y(""),P(K),ce("spam"),ie(""),ye(!1)},children:[e.jsx(sn,{className:"w-5 h-5"}),"ikayet et"]})]}):null]}),e.jsxs("div",{className:"hidden md:flex flex-col gap-2 flex-shrink-0",children:[e.jsx("button",{type:"button",className:"p-2 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 text-gray-700",title:"Sohbeti sil",disabled:p===String((K==null?void 0:K.participant_id)||""),onClick:ae=>{ae.stopPropagation(),Se(K)},children:e.jsx(Ka,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",className:"p-2 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 text-gray-700",title:"ikayet et",disabled:p===String((K==null?void 0:K.participant_id)||""),onClick:ae=>{ae.stopPropagation(),y(""),P(K),ce("spam"),ie(""),ye(!1)},children:e.jsx(sn,{className:"w-5 h-5"})})]})]})},K.conversation_id):null}catch(se){return console.error("Error rendering conversation:",se),null}}),Re.length===0&&e.jsx("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center",children:e.jsx("p",{className:"text-gray-500",children:N?"Sonu bulunamad":_==="requests"?"Mesaj istei yok":"Henz mesaj yok"})})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 flex flex-col min-h-0 overflow-hidden ".concat(c?"":"hidden md:flex"),children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b bg-white sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{g(null),v([]),d("/messages",{replace:!0})},className:"md:hidden p-2 rounded-lg border border-gray-200 hover:bg-gray-50",title:"Mesaj listesi",children:e.jsx(dl,{className:"w-7 h-7 text-gray-700"})}),e.jsxs(Tt,{to:as(c.participant||{}),className:"inline-flex items-center gap-3 min-w-0 hover:opacity-90",title:"Profile git",children:[e.jsx(Yt,{src:((Bt=c.participant)==null?void 0:Bt.avatar_url)||((jt=c.participant)==null?void 0:jt.profile_image),size:"40px",verified:za(c.participant)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-semibold truncate",children:(Vt=c.participant)==null?void 0:Vt.full_name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:(ia=c.participant)!=null&&ia.username?"@".concat(c.participant.username):""})]})]}),c.message_type==="request"&&e.jsx("div",{className:"ml-auto text-xs font-black text-amber-700 bg-amber-50 border border-amber-200 px-3 py-2 rounded-lg",children:"Mesaj istei (cevap verirseniz sohbet alr)"})]})}),(()=>{const K=F(c);return(K&&B instanceof Set?B.has(String(K)):!1)?e.jsxs("div",{className:"px-4 py-3 border-b bg-red-50 text-red-800 text-sm flex items-center justify-between gap-3",children:[e.jsx("div",{className:"font-semibold",children:"Bu kullancy engellediniz. Mesaj gnderemezsiniz."}),e.jsx("button",{type:"button",className:"px-3 py-2 rounded-lg bg-white border border-red-200 text-red-800 font-black hover:bg-red-100",onClick:async()=>{try{await us.unblock(K),Y(ae=>{const Je=new Set(ae instanceof Set?Array.from(ae):[]);return Je.delete(String(K)),Je}),y(null)}catch(ae){y((ae==null?void 0:ae.message)||"Engel kaldrlamad.")}},children:"Engeli kaldr"})]}):null})(),e.jsxs("div",{ref:z,className:"flex-1 min-h-0 overflow-y-auto p-4 bg-gray-50 overscroll-contain",onScroll:()=>{$.current=Ye()},children:[S&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(fs,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:S}),e.jsx("button",{onClick:()=>y(null),className:"ml-auto text-red-500 hover:text-red-700",children:""})]}),i?null:e.jsxs("div",{className:"mb-4 p-3 bg-amber-50 border border-amber-200 rounded-lg text-amber-900",children:[e.jsx("div",{className:"font-black",children:"Mesajlama kapal"}),e.jsx("div",{className:"text-sm mt-1",children:"Site ayarlar zerinden mesajlama geici olarak kapatld."})]}),T?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-blue mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Mesajlar ykleniyor..."})]})}):e.jsxs("div",{className:"space-y-3",children:[f.map(K=>{try{if(!K||!K.id)return null;const se=K.sender_id===(r==null?void 0:r.id),ae=se?null:c==null?void 0:c.participant,Je=st(K);return e.jsxs("div",{className:"flex ".concat(se?"justify-end":"justify-start"),children:[!se&&e.jsx(Yt,{src:(ae==null?void 0:ae.avatar_url)||(ae==null?void 0:ae.profile_image),size:"28px",className:"mr-2 flex-shrink-0"}),e.jsxs("div",{className:"max-w-[70%] ".concat(se?"items-end":"items-start"," flex flex-col"),children:[e.jsx("div",{className:"rounded-2xl px-4 py-2 ".concat(se?"bg-primary-blue text-white rounded-br-sm":"bg-white text-gray-900 rounded-bl-sm border border-gray-200"),children:(Je==null?void 0:Je.type)==="image"?e.jsxs("div",{className:"space-y-2",children:[Je.text?e.jsx("div",{className:"text-sm break-words whitespace-pre-wrap",children:Je.text}):null,e.jsx("a",{href:Je.url,target:"_blank",rel:"noreferrer",children:e.jsx("img",{src:Je.url,alt:"Gnderilen resim",className:"rounded-xl max-w-full max-h-[260px] object-contain border border-white/20"})})]}):e.jsx("p",{className:"text-sm break-words whitespace-pre-wrap",children:K.content||""})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 px-1",children:[e.jsx("span",{className:"text-xs text-gray-400",children:K.created_at?ui(K.created_at):""}),se&&e.jsx("span",{className:"inline-flex items-center gap-1 text-gray-400",title:K.is_read?"Grld":"Gnderildi",children:K.is_read?e.jsx(my,{className:"w-6 h-6 sm:w-5 sm:h-5"}):e.jsx(ri,{className:"w-6 h-6 sm:w-5 sm:h-5"})}),se&&(ct(K)?e.jsx("button",{type:"button",className:"inline-flex items-center gap-1 text-gray-400 hover:text-red-600",title:"Mesaj sil",onClick:async()=>{try{await $s.delete(K.id),v(Nt=>Nt.filter(Ve=>Ve.id!==K.id))}catch(Nt){y((Nt==null?void 0:Nt.message)||"Mesaj silinemedi")}},children:e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5"})}):null)]})]})]},K.id)}catch(se){return console.error("Error rendering message:",se),null}}),e.jsx("div",{})]})]}),e.jsxs("div",{className:"p-4 border-t bg-white pb-[calc(env(safe-area-inset-bottom)+16px)]",children:[e.jsx("input",{ref:X,type:"file",accept:"image/jpeg,image/png,image/webp",className:"hidden",onChange:K=>{var se;return Ut((se=K.target.files)==null?void 0:se[0])}}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{ref:G,type:"text",value:b,onChange:K=>w(K.target.value),onKeyDown:K=>{K.key==="Enter"&&rt()},placeholder:(()=>{const K=F(c),se=K&&B instanceof Set?B.has(String(K)):!1;return i?se?"Engellediiniz kullancya mesaj gnderemezsiniz.":"Mesajnz yazn...":"Mesajlama u anda kapal."})(),disabled:(()=>{const K=F(c);return i?K&&B instanceof Set?B.has(String(K)):!1:!0})(),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-blue"}),e.jsx("button",{type:"button",onClick:et,disabled:(()=>{const K=F(c);return i?K&&B instanceof Set?B.has(String(K)):!1:!0})(),className:"bg-white border border-gray-300 text-gray-800 rounded-lg p-2 hover:bg-gray-50 transition-colors",title:"Resim gnder",children:e.jsx(ci,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:rt,disabled:!i||!b.trim()||(()=>{const K=F(c);return K&&B instanceof Set?B.has(String(K)):!1})(),className:"bg-primary-blue hover:bg-blue-600 disabled:bg-gray-300 text-white rounded-lg p-2 px-4 transition-colors flex items-center gap-2",children:[e.jsx(dh,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"Gnder"})]})]})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold mb-2",children:"Bir konuma sein"}),e.jsx("p",{className:"text-sm",children:"Mesajlarnz grntlemek iin sol taraftan bir konuma sein"})]})})})]})}),e.jsx(qs,{isOpen:!!O,onClose:()=>P(null),title:"ikayet Et",children:le?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-lg font-black text-green-700",children:"Bildiriminiz alnd."}),e.jsx("div",{className:"text-sm text-gray-700",children:"nceleme sonras gerekli ilem yaplacaktr."}),e.jsx(Va,{onClick:()=>{P(null)},children:"Kapat"})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:"Neden"}),e.jsxs("select",{value:L,onChange:K=>ce(K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"spam",children:"Spam"}),e.jsx("option",{value:"harassment",children:"Taciz / Hakaret"}),e.jsx("option",{value:"scam",children:"Dolandrclk"}),e.jsx("option",{value:"other",children:"Dier"})]}),e.jsx("div",{className:"text-sm font-black text-gray-900",children:"Not (opsiyonel)"}),e.jsx("textarea",{value:Z,onChange:K=>ie(K.target.value.slice(0,200)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:4,placeholder:"En fazla 200 karakter"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[200-((Z==null?void 0:Z.length)||0)," karakter kald"]}),e.jsx(Va,{onClick:gt,disabled:!L||p===String((O==null?void 0:O.participant_id)||""),children:"Gnder"})]})}),e.jsx(qs,{isOpen:oe,onClose:()=>je(!1),title:"Yeni Mesaj",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Kime?"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-7 h-7 text-gray-400"}),e.jsx("input",{value:St,onChange:K=>Qe(K.target.value),placeholder:"sim veya kullanc ad ara",className:"w-full pl-12 pr-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-blue"})]})]}),$e&&e.jsx("div",{className:"text-sm text-gray-600",children:"Kiiler ykleniyor"}),!$e&&St.trim().length<2&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2 min-w-0",children:[e.jsx("div",{className:"text-xs font-black text-gray-500 uppercase",children:"Takipletiklerin"}),e.jsx("div",{className:"max-h-[320px] overflow-y-auto space-y-2 pr-1",children:fe.map(K=>e.jsxs("button",{type:"button",className:"w-full flex items-center gap-3 p-2 rounded-xl hover:bg-gray-50 text-left",onClick:()=>ue(K),children:[e.jsx(Yt,{src:K.avatar_url,size:"40px",verified:za(K)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:K.full_name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",K.username]})]})]},K.id))})]}),e.jsxs("div",{className:"space-y-2 min-w-0",children:[e.jsx("div",{className:"text-xs font-black text-gray-500 uppercase",children:"neriler"}),e.jsx("div",{className:"max-h-[320px] overflow-y-auto space-y-2 pr-1",children:Zt.map(K=>{const se=Number((K==null?void 0:K.friend_count)||0)||0,ae=Array.isArray(K==null?void 0:K.friend_names)?K.friend_names:[];return e.jsxs("button",{type:"button",className:"w-full flex items-center gap-3 p-2 rounded-xl hover:bg-gray-50 text-left",onClick:()=>ue(K),children:[e.jsx(Yt,{src:K.avatar_url,size:"40px",verified:za(K)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:K.full_name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",K.username]}),se>0?e.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5 leading-4",children:[e.jsx("span",{className:"font-black",children:ae.join(", ")}),se>ae.length?e.jsxs("span",{className:"font-semibold",children:[" ve ",se-ae.length," kii daha"]}):null,e.jsx("span",{className:"font-semibold",children:" takip ediyor"})]}):null]})]},K.id)})})]})]}),!$e&&St.trim().length>=2&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-xs font-black text-gray-500 uppercase",children:"Arama Sonular"}),ut.length===0&&e.jsx("div",{className:"text-sm text-gray-600",children:"Sonu bulunamad."}),e.jsx("div",{className:"max-h-[320px] overflow-y-auto space-y-2",children:ut.map(K=>e.jsxs("button",{type:"button",className:"w-full flex items-center gap-3 p-2 rounded-xl hover:bg-gray-50 text-left",onClick:()=>ue(K),children:[e.jsx(Yt,{src:K.avatar_url,size:"40px",verified:za(K)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:K.full_name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",K.username]}),Number((K==null?void 0:K.friend_count)||0)>0?e.jsxs("div",{className:"text-[11px] text-gray-600 mt-0.5 leading-4",children:[e.jsx("span",{className:"font-black",children:Array.isArray(K==null?void 0:K.friend_names)?K.friend_names.filter(Boolean).join(", "):""}),Number((K==null?void 0:K.friend_count)||0)>(Array.isArray(K==null?void 0:K.friend_names)?K.friend_names.filter(Boolean).length:0)?e.jsxs("span",{className:"font-semibold",children:[" ","ve ",Number((K==null?void 0:K.friend_count)||0)-(Array.isArray(K==null?void 0:K.friend_names)?K.friend_names.filter(Boolean).length:0)," kii daha"]}):null,e.jsx("span",{className:"font-semibold",children:" takip ediyor"})]}):null]})]},K.id))})]})]})})]}):null},Z_=({post:r,showCity:s=!1,showPartyLogo:l=!1,showPosition:i=!1})=>{var L,ce,Z,ie,le,ye,z,X,G;const d=Qt(),[u,c]=m.useState(!1),{isAuthenticated:g}=Pa(),f=(L=r==null?void 0:r.post_id)!=null?L:r==null?void 0:r.id,[v,b]=m.useState(!1),[w,N]=m.useState(!1),[k,_]=m.useState(!1),[M,T]=m.useState(Number((r==null?void 0:r.like_count)||0)),[A,S]=m.useState(!!(r!=null&&r.is_liked)),[y,p]=m.useState(0),j=m.useMemo(()=>{try{return"".concat(window.location.origin,"/api/og/post?id=").concat(encodeURIComponent(f))}catch(D){return"/api/og/post?id=".concat(encodeURIComponent(f))}},[f]),E=m.useMemo(()=>{var I;const D=String(((I=r==null?void 0:r.user)==null?void 0:I.full_name)||"").trim(),$=String((r==null?void 0:r.agenda_tag)||"").trim(),B=Ra((r==null?void 0:r.polit_score)||0),Y=String((r==null?void 0:r.content_text)||(r==null?void 0:r.content)||"").trim(),Q=Y?$m(Y,160):"Bir polit paylald.";return[D?"".concat(D):null,$?"Gndem: ".concat($):null,"Polit Puan: ".concat(B),"",Q,"","Polithane'de gr: ".concat(j)].filter(V=>V!==null).join("\n")},[(ce=r==null?void 0:r.user)==null?void 0:ce.full_name,r==null?void 0:r.agenda_tag,r==null?void 0:r.polit_score,r==null?void 0:r.content_text,r==null?void 0:r.content,j]),C=m.useMemo(()=>encodeURIComponent(E),[E]),O=async D=>{var B;const $=String(D||"");if(!$)return!1;try{if((B=navigator==null?void 0:navigator.clipboard)!=null&&B.writeText)return await navigator.clipboard.writeText($),!0}catch(Y){}try{const Y=document.createElement("textarea");Y.value=$,Y.setAttribute("readonly","true"),Y.style.position="fixed",Y.style.left="-9999px",document.body.appendChild(Y),Y.select();const Q=document.execCommand("copy");return document.body.removeChild(Y),Q}catch(Y){return!1}},P=async D=>{var Q;if((Q=D==null?void 0:D.stopPropagation)==null||Q.call(D),!f)return;if(!g){d("/login-new");return}const $=!!A,B=Number(M||0)||0,Y=!$;S(Y),T(Math.max(0,B+(Y?1:-1))),Y&&p(q=>q+1);try{const q=await Ma.like(f);if(q!=null&&q.success){const I=String((q==null?void 0:q.action)||"").toLowerCase();I==="liked"?(Y||p(V=>V+1),S(!0),T(Math.max(0,B+1))):I==="unliked"&&(S(!1),T(Math.max(0,B-1)))}}catch(q){S($),T(Math.max(0,B))}};return e.jsxs("div",{className:"card-hover p-4 mb-4 w-full relative",onClick:()=>{f&&d("/post/".concat(f))},children:[((Z=r.user)==null?void 0:Z.party_id)&&((le=(ie=r.user)==null?void 0:ie.party)==null?void 0:le.party_logo)&&e.jsx("div",{className:"absolute top-4 right-4 z-10 cursor-pointer hover:scale-110 transition-transform",onClick:D=>{D.stopPropagation(),d("/party/".concat(r.user.party_id))},title:"".concat(r.user.party.party_short_name," detayn gr"),children:e.jsx("img",{src:r.user.party.party_logo,alt:r.user.party.party_short_name,className:"w-5 h-5 sm:w-6 sm:h-6 md:w-[25px] md:h-[25px] object-contain drop-shadow-md",onError:D=>{D.target.style.display="none"}})}),e.jsxs("div",{className:"flex items-start justify-between mb-3 pr-10",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("div",{onClick:D=>{D.stopPropagation(),d(as(r.user))},className:"cursor-pointer hover:opacity-80 transition-opacity flex-shrink-0",children:e.jsx(Yt,{src:((ye=r.user)==null?void 0:ye.avatar_url)||((z=r.user)==null?void 0:z.profile_image),size:"40px",verified:za(r.user)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-base text-gray-900 cursor-pointer hover:text-primary-blue transition-colors line-clamp-2 leading-5 mb-1",onClick:D=>{D.stopPropagation(),d(as(r.user))},children:(X=r.user)==null?void 0:X.full_name}),e.jsx("div",{className:"flex items-center gap-2 mb-1",children:ms(r.user,!0)&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium text-primary-blue cursor-pointer hover:underline text-xs whitespace-nowrap",onClick:D=>{var $,B,Y,Q,q;D.stopPropagation(),(($=r.user)==null?void 0:$.user_type)==="politician"&&((B=r.user)==null?void 0:B.politician_type)==="mp"?d("/category/mps"):((Y=r.user)==null?void 0:Y.user_type)==="politician"?d("/category/organization"):((Q=r.user)==null?void 0:Q.user_type)==="ex_politician"?d("/category/experience"):((q=r.user)==null?void 0:q.user_type)==="media"?d("/category/media"):d("/category/citizens")},children:ms(r.user,!0)}),((G=r.user)==null?void 0:G.city_code)&&e.jsx(Tt,{to:"/city/".concat(r.user.city_code),className:"inline-flex items-center justify-center px-2 py-0.5 bg-gray-900 hover:bg-primary-blue text-white text-xs font-semibold rounded-full transition-colors",onClick:D=>D.stopPropagation(),children:r.user.city_code})]})}),e.jsx("div",{className:"text-xs text-gray-500",children:ui(r.created_at)})]})]}),e.jsx("div",{className:"text-right ml-2 cursor-pointer hover:scale-105 transition-transform",onClick:D=>{D.stopPropagation(),c(!0)},title:"Polit Puan detaylarn gr",children:e.jsx("div",{className:"text-lg font-bold text-primary-blue hover:text-blue-700",children:Ra(r.polit_score)})})]}),e.jsxs("div",{className:"mb-3",children:[r.content_type===ur.TEXT&&e.jsx("div",{className:"rounded-lg border border-gray-200 overflow-hidden",style:{backgroundColor:"#fff7dc",backgroundImage:"linear-gradient(to right, rgba(220,38,38,0.18) 0, rgba(220,38,38,0.18) 2px, transparent 2px),repeating-linear-gradient(to bottom, rgba(0,0,0,0) 0, rgba(0,0,0,0) 22px, rgba(59,130,246,0.18) 23px, rgba(59,130,246,0.18) 24px)"},children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-white/80 border border-black/10 flex items-center justify-center",children:e.jsx(lh,{className:"w-5 h-5 text-amber-700"})}),e.jsx("div",{className:"text-xs font-black text-gray-900",children:"Yaz"})]}),e.jsx("div",{className:"text-gray-900 text-sm leading-relaxed whitespace-pre-wrap",children:$m(String(r.content_text||r.content||"").trim(),180)})]})}),r.content_type===ur.IMAGE&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.media_url,alt:"",className:"w-full rounded-lg object-cover max-h-96"}),r.content_text&&e.jsx("p",{className:"mt-2 text-gray-800",children:r.content_text})]}),r.content_type===ur.VIDEO&&e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:r.thumbnail_url||r.media_url,alt:"",className:"w-full rounded-lg object-cover max-h-96"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 rounded-lg",children:e.jsx("div",{className:"bg-white rounded-full p-2 md:p-3",children:e.jsx(po,{className:"w-5 h-5 md:w-8 md:h-8 text-primary-blue"})})}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-70 text-white px-2 py-1 rounded text-sm",children:mi(r.media_duration)}),r.content_text&&e.jsx("p",{className:"mt-2 text-gray-800",children:r.content_text})]}),r.content_type===ur.AUDIO&&e.jsx("div",{className:"rounded-lg border border-gray-200 overflow-hidden",style:{background:"radial-gradient(circle at 25% 20%, rgba(14,165,233,0.25), transparent 55%),radial-gradient(circle at 85% 35%, rgba(99,102,241,0.22), transparent 60%),linear-gradient(135deg, rgba(17,24,39,1), rgba(2,6,23,1))"},children:e.jsxs("div",{className:"p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-white/10 border border-white/15 flex items-center justify-center shadow-sm",children:e.jsx(yo,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"text-sm font-black text-white/95 truncate",children:"Sesli paylam"}),e.jsx("div",{className:"text-xs font-mono text-white/75 whitespace-nowrap",children:mi(r.media_duration)})]}),e.jsx("div",{className:"mt-2 h-2 rounded-full bg-white/10 overflow-hidden",children:e.jsx("div",{className:"h-full w-[55%] bg-gradient-to-r from-sky-400 to-indigo-400"})})]})]})})]}),r.agenda_tag&&e.jsx("div",{className:"mb-3 cursor-pointer inline-block",onClick:D=>{D.stopPropagation();const $=r.agenda_tag.toLowerCase().replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");d("/agenda/".concat($))},children:e.jsx(ln,{variant:"primary",size:"small",children:r.agenda_tag})}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4 sm:gap-6",children:[e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-0.5 text-primary-blue hover:text-blue-700",onClick:D=>{D.stopPropagation(),f&&d("/post/".concat(f))},title:"Detay a",children:[e.jsx(cs,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black text-gray-800 leading-4",children:hs(r.view_count)})]}),e.jsxs("button",{type:"button",className:"relative flex flex-col items-center gap-0.5 text-red-600 hover:text-red-700",onClick:P,title:A?"Beeniyi geri al":"Been",children:[e.jsx(xd,{trigger:y,sizeClass:"w-8 h-8"}),e.jsx(Or,{className:"w-5 h-5",fill:A?"currentColor":"none"}),e.jsx("span",{className:"text-xs font-black text-gray-800 leading-4",children:hs(M)})]}),e.jsxs("button",{type:"button",className:"flex flex-col items-center gap-0.5 text-amber-600 hover:text-amber-700",onClick:D=>{D.stopPropagation(),f&&d("/post/".concat(f,"?comment=1"))},title:"Yorum yap",children:[e.jsx(Dn,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black text-gray-800 leading-4",children:hs(r.comment_count)})]})]}),e.jsxs("button",{type:"button",className:"text-emerald-600 hover:text-emerald-700 flex flex-col items-center gap-0.5",onClick:D=>{D.stopPropagation(),N(!1),_(!1);try{g&&f&&Ma.share(f).catch(()=>null)}catch($){}b(!0)},title:"Payla",children:[e.jsx(oi,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-black text-gray-800 leading-4",children:hs(r.share_count)})]})]}),r.source_url&&e.jsxs("div",{className:"mt-3 text-[11px] text-gray-500 leading-snug",onClick:D=>D.stopPropagation(),children:["Bu paylam ",e.jsx("span",{className:"font-semibold",children:mh(r.source_url)})," adresinden alnm olup otomatik olarak paylalmtr."]}),u&&e.jsx(My,{post:r,onClose:()=>c(!1)}),e.jsx(qs,{isOpen:v,onClose:()=>b(!1),title:"Payla",children:e.jsxs("div",{className:"space-y-4",onClick:D=>D.stopPropagation(),children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Paylam metni:",e.jsx("div",{className:"mt-2 p-3 rounded-lg bg-gray-50 border border-gray-200 break-all text-xs text-gray-800",children:E})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("a",{href:"https://wa.me/?text=".concat(C),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#25D366] text-white font-black text-center hover:opacity-90",onClick:D=>D.stopPropagation(),children:"WhatsApp"}),e.jsx("a",{href:"https://t.me/share/url?url=".concat(encodeURIComponent(j),"&text=").concat(C),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#229ED9] text-white font-black text-center hover:opacity-90",onClick:D=>D.stopPropagation(),children:"Telegram"}),e.jsx("a",{href:"https://twitter.com/intent/tweet?text=".concat(C),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-black text-white font-black text-center hover:bg-gray-900",onClick:D=>D.stopPropagation(),children:"X"}),e.jsx("a",{href:"https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(j)),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#1877F2] text-white font-black text-center hover:opacity-90",onClick:D=>D.stopPropagation(),children:"Facebook"}),e.jsx("a",{href:"https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(j)),target:"_blank",rel:"noreferrer",className:"px-4 py-3 rounded-xl bg-[#0A66C2] text-white font-black text-center hover:opacity-90",onClick:D=>D.stopPropagation(),children:"LinkedIn"}),e.jsx("button",{type:"button",onClick:async D=>{D.stopPropagation();const $=await O(j);N($)},className:"px-4 py-3 rounded-xl border border-gray-300 text-gray-900 font-black hover:bg-gray-50",children:w?"Link Kopyaland":"Linki Kopyala"}),e.jsx("button",{type:"button",onClick:async D=>{D.stopPropagation();const $=await O(E);_($)},className:"px-4 py-3 rounded-xl border border-gray-300 text-gray-900 font-black hover:bg-gray-50",children:k?"Metin Kopyaland":"Metni Kopyala"})]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Instagram web zerinden direkt paylam desteklemez; linki kopyalayp Instagramda paylaabilirsiniz."})]})})]})},W_=()=>{const[r,s]=m.useState(""),[l,i]=m.useState("all"),[d,u]=m.useState(!1),[c,g]=m.useState([]),[f,v]=m.useState([]),[b,w]=m.useState([]),N=m.useRef(null);return m.useEffect(()=>{N.current&&clearTimeout(N.current);const k=String(r||"").trim();return k.length<2?(g([]),v([]),w([]),u(!1),()=>{}):(u(!0),N.current=setTimeout(async()=>{var _,M;try{const[T,A]=await Promise.all([re("/api/search?q=".concat(encodeURIComponent(k))).catch(()=>null),re("/api/agendas?limit=30&search=".concat(encodeURIComponent(k))).catch(()=>null)]),S=(T==null?void 0:T.data)||((_=T==null?void 0:T.data)==null?void 0:_.data)||T||{},y=Array.isArray(S==null?void 0:S.users)?S.users:[],p=Array.isArray(S==null?void 0:S.posts)?S.posts:[],j=Array.isArray(A==null?void 0:A.data)?A.data:Array.isArray((M=A==null?void 0:A.data)==null?void 0:M.data)?A.data.data:[];g(y),v(p),w(j)}finally{u(!1)}},250),()=>{N.current&&clearTimeout(N.current)})},[r]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx(UN,{placeholder:"Kullanc, paylam, gndem ara...",value:r,onChange:k=>s(k.target.value),className:"text-lg"})}),e.jsx("div",{className:"flex gap-2 mb-6",children:["all","posts","users","agendas"].map(k=>e.jsx("button",{onClick:()=>i(k),className:"px-4 py-2 rounded-lg font-medium ".concat(l===k?"bg-primary-blue text-white":"bg-white text-gray-700 hover:bg-gray-100"),children:k==="all"?"Tm":k==="posts"?"Paylamlar":k==="users"?"Kullanclar":"Gndemler"},k))}),(l==="all"||l==="users")&&c.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Kullanclar"}),e.jsx("div",{className:"space-y-3",children:c.map(k=>e.jsxs("div",{className:"card flex items-center gap-4",children:[e.jsx(Yt,{src:k.avatar_url||k.profile_image,size:"48px",verified:za(k)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:k.full_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",k.username]}),e.jsx("p",{className:"text-xs text-gray-500",children:ms(k,!0)||"ye"})]}),e.jsx(ln,{variant:"primary",children:"Takip Et"})]},k.id||k.user_id))})]}),(l==="all"||l==="posts")&&f.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Paylamlar"}),e.jsx("div",{className:"space-y-4",children:f.map(k=>{var _;return e.jsx(Z_,{post:k},(_=k.post_id)!=null?_:k.id)})})]}),(l==="all"||l==="agendas")&&b.length>0&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Gndemler"}),e.jsx("div",{className:"space-y-3",children:b.map(k=>{var _,M;return e.jsxs("div",{className:"card",children:[e.jsx("h3",{className:"font-semibold text-lg",children:k.title}),e.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-500",children:[e.jsxs("span",{children:[(_=k.post_count)!=null?_:0," paylam"]}),e.jsxs("span",{children:[(M=k.total_polit_score)!=null?M:0," polit puan"]})]})]},k.id||k.slug||k.title)})})]}),d&&e.jsx("div",{className:"text-center py-10 text-gray-600",children:"Aranyor"}),r&&!d&&c.length===0&&f.length===0&&b.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gs,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Sonu bulunamad"})]})]})})})},Om={BASE_URL:"/",DEV:!1,LEGACY:!1,MODE:"production",PROD:!0,SSR:!1,VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsZG95cWd6eGd1Ymt5b2h2cXVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NDYxMDYsImV4cCI6MjA4MTAyMjEwNn0.m6Mar-3MBvTDYptexLhbLK3SEhQb9CiqlU7Vwe3xxaU",VITE_SUPABASE_URL:"https://eldoyqgzxgubkyohvquq.supabase.co",VITE_VERCEL_BRANCH_URL:"polithane-git-main-polithane.vercel.app",VITE_VERCEL_DEPLOYMENT_ID:"dpl_UL4soDQSrQ9apmxg5Zqjkdz9X9Ay",VITE_VERCEL_ENV:"production",VITE_VERCEL_GIT_COMMIT_AUTHOR_LOGIN:"cursoragent",VITE_VERCEL_GIT_COMMIT_AUTHOR_NAME:"Cursor Agent",VITE_VERCEL_GIT_COMMIT_MESSAGE:"Chore: Trigger production redeploy",VITE_VERCEL_GIT_COMMIT_REF:"main",VITE_VERCEL_GIT_COMMIT_SHA:"e4ad8abcc57535b369f1bb80db6d682010be8ccd",VITE_VERCEL_GIT_PREVIOUS_SHA:"",VITE_VERCEL_GIT_PROVIDER:"github",VITE_VERCEL_GIT_PULL_REQUEST_ID:"",VITE_VERCEL_GIT_REPO_ID:"1096465373",VITE_VERCEL_GIT_REPO_OWNER:"polithane",VITE_VERCEL_GIT_REPO_SLUG:"polithane",VITE_VERCEL_PROJECT_ID:"prj_d7U0cJivrv9vsuyzOWFiKghswUMw",VITE_VERCEL_PROJECT_PRODUCTION_URL:"www.polithane.com",VITE_VERCEL_TARGET_ENV:"production",VITE_VERCEL_URL:"polithane-jbbzfy435-polithane.vercel.app"},F0=()=>{const r=Qt(),s=tr(),{isAuthenticated:l,user:i}=Pa(),d=m.useMemo(()=>String((s==null?void 0:s.pathname)||"")==="/fast-at",[s==null?void 0:s.pathname]),[u,c]=m.useState("type"),[g,f]=m.useState("primary"),v=m.useMemo(()=>u==="success"||g==="cross"?!d:d,[g,d,u]),[b,w]=m.useState(""),[N,k]=m.useState(""),[_,M]=m.useState([]),[T,A]=m.useState(10),S=m.useMemo(()=>{try{const te=String((Om==null?void 0:Om.VITE_ICON_BASE_URL)||"").trim(),be="https://eldoyqgzxgubkyohvquq.supabase.co".trim().replace(/\/+$/g,""),Ae=[];return te&&Ae.push(te.replace(/\/+$/,"")),be&&(Ae.push("".concat(be,"/storage/v1/object/public/uploads/ikons")),Ae.push("".concat(be,"/storage/v1/object/public/ikons"))),Array.from(new Set(Ae)).filter(Boolean)}catch(te){return[]}},[]),y=m.useMemo(()=>{const te=(ze,vt)=>"".concat(String(ze).replace(/\/+$/,""),"/").concat(vt),be={video:["videoikon.png","video.png","videoikon.webp","video.webp","videoikon.jpg","video.jpg"],image:["resimikon.png","resim.png","resimikon.webp","resim.webp","resimikon.jpg","resim.jpg"],audio:["sesikon.png","ses.png","sesikon.webp","ses.webp","sesikon.jpg","ses.jpg"],text:["yaziikon.png","yazi.png","yaziikon.webp","yazi.webp","yaziikon.jpg","yazi.jpg"]},Ae={};return["video","image","audio","text"].forEach(ze=>{const vt=[];ze==="video"&&vt.push("/icons/videoikon.png"),ze==="image"&&vt.push("/icons/resimikon.png"),ze==="audio"&&vt.push("/icons/sesikon.png"),ze==="text"&&vt.push("/icons/yaziikon.png");for(const Ue of S||[])for(const _e of be[ze]||[])vt.push(te(Ue,_e));ze==="video"&&vt.push("/icons/videoikon.svg"),ze==="image"&&vt.push("/icons/resimikon.svg"),ze==="audio"&&vt.push("/icons/sesikon.svg"),ze==="text"&&vt.push("/icons/yaziikon.svg"),Ae[ze]=Array.from(new Set(vt))}),Ae},[S]);m.useEffect(()=>{try{["video","image","audio","text"].forEach(te=>{((y==null?void 0:y[te])||[]).slice(0,3).forEach(Ae=>{const ze=new Image;ze.src=Ae})})}catch(te){}},[y]);const[p,j]=m.useState({}),[E,C]=m.useState({}),O=m.useMemo(()=>({primary:"#E11D48",borderClass:"border-rose-600",btnClass:"bg-rose-600 hover:bg-rose-700",btnAltClass:"border-rose-300 text-rose-700",ringClass:"ring-rose-500/20"}),[]),P=m.useMemo(()=>({primary:"var(--primary-color)",borderClass:"border-primary-blue",btnClass:"bg-primary-blue hover:opacity-90",btnAltClass:"border-primary-blue text-primary-blue",ringClass:"ring-primary-blue/20"}),[]),L=m.useMemo(()=>d?O:P,[d,O,P]),ce=m.useMemo(()=>d?P:O,[d,O,P]),Z=m.useMemo(()=>u==="success"||g==="cross"?ce:L,[L,g,ce,u]),ie=m.useMemo(()=>!l||i!=null&&i.is_admin?!1:String((i==null?void 0:i.user_type)||"citizen")!=="citizen"&&!(i!=null&&i.is_verified),[l,i==null?void 0:i.is_admin,i==null?void 0:i.user_type,i==null?void 0:i.is_verified]),[le,ye]=m.useState([]),[z,X]=m.useState(""),[G,D]=m.useState(!1),[$,B]=m.useState(!1),[Y,Q]=m.useState([]),[q,I]=m.useState(0),[V,Te]=m.useState([]),[Ke,oe]=m.useState(0),[je,fe]=m.useState(0),[ke,$e]=m.useState(0),[Le,St]=m.useState(""),[Qe,It]=m.useState(!1),[$t,Zt]=m.useState(0),[Xt,ya]=m.useState(""),kt=m.useRef(!1),[de,Ie]=m.useState(null),[Pe,F]=m.useState(!1),[nt,ee]=m.useState(()=>{var te,be;try{return typeof window<"u"&&(((be=(te=window.matchMedia)==null?void 0:te.call(window,"(pointer: coarse)"))==null?void 0:be.matches)||window.innerWidth<768)||!1}catch(Ae){return!1}});m.useEffect(()=>{const te=()=>{var be,Ae;try{ee(((Ae=(be=window.matchMedia)==null?void 0:be.call(window,"(pointer: coarse)"))==null?void 0:Ae.matches)||window.innerWidth<768)}catch(ze){ee(!1)}};return window.addEventListener("resize",te),()=>window.removeEventListener("resize",te)},[]);const Re=m.useRef(null),De=m.useRef(null),We=m.useRef([]),Ye=m.useRef(null),ct=m.useRef(null),Ne=m.useRef(null),Xe=m.useRef(null),ut=m.useRef(null),ue=m.useRef(""),[rt,st]=m.useState("contain"),[et,Ut]=m.useState(""),Ot=m.useRef(null),Se=m.useRef(null),gt=m.useRef(0),Bt=m.useRef(!1),jt=m.useRef(!1),Vt=60,[ia,K]=m.useState(60),[se,ae]=m.useState("user"),[Je,Nt]=m.useState(!1),Ve=m.useRef(null),Be=m.useRef(null),mt=m.useRef(null),bt=m.useRef(null),lt=m.useRef(null),At=m.useRef(null),H=m.useRef(null),J=m.useRef(null),xe=10,qe=300,ot=te=>{var ze,vt,Ue,_e,He,Ce,Dt,Jt;const be=(Jt=(Dt=(Ce=(He=(_e=(Ue=(vt=(ze=te==null?void 0:te.total_polit_score)!=null?ze:te==null?void 0:te.polit_score)!=null?vt:te==null?void 0:te.trending_score)!=null?Ue:te==null?void 0:te.trend_score)!=null?_e:te==null?void 0:te.trend_skoru)!=null?He:te==null?void 0:te.score)!=null?Ce:te==null?void 0:te.politPuan)!=null?Dt:te==null?void 0:te.polit_puan)!=null?Jt:0,Ae=Number(be);return Number.isFinite(Ae)?Ae:0},dt=m.useMemo(()=>(Array.isArray(_)?_:[]).filter(be=>(be==null?void 0:be.is_active)!==!1&&((be==null?void 0:be.title)||(be==null?void 0:be.name))).slice().sort((be,Ae)=>ot(Ae)-ot(be)||String((be==null?void 0:be.title)||"").localeCompare(String((Ae==null?void 0:Ae.title)||""),"tr-TR")),[_]),Et=m.useMemo(()=>le.length>0||!!z,[le.length,z]),Ct=m.useMemo(()=>!1,[]),oa=m.useMemo(()=>u!=="media"||G||$?!1:Et,[Et,G,$,u]);m.useEffect(()=>{var be;if(b!=="video"||!z||G||!Ct)return;const te=Ye.current;if(te)try{(be=te.pause)==null||be.call(te),te.currentTime=0}catch(Ae){}},[b,z,Ct,G]);const Da=async te=>{var be;try{if(!String((te==null?void 0:te.type)||"").toLowerCase().startsWith("image/"))return te;const ze=Number((te==null?void 0:te.size)||0)||0;if(ze>0&&ze<350*1024)return te;const vt=te instanceof Blob?te:new Blob([te]);let Ue=null;try{Ue=await createImageBitmap(vt)}catch(ea){Ue=null}if(!Ue)return te;const _e=1440,He=1440,Ce=Number(Ue.width||0)||0,Dt=Number(Ue.height||0)||0;if(!Ce||!Dt)return te;const Jt=Math.min(1,_e/Ce,He/Dt),da=Math.max(1,Math.round(Ce*Jt)),pt=Math.max(1,Math.round(Dt*Jt)),Fe=document.createElement("canvas");Fe.width=da,Fe.height=pt;const ha=Fe.getContext("2d");if(!ha)return te;ha.drawImage(Ue,0,0,da,pt);try{(be=Ue.close)==null||be.call(Ue)}catch(ea){}const xt=await new Promise(ea=>{try{Fe.toBlob(Ha=>ea(Ha),"image/webp",.82)}catch(Ha){ea(null)}});if(!xt)return te;const Kt=Number(xt.size||0)||0;if(ze&&Kt&&Kt>ze*.92)return te;const Lt=String((te==null?void 0:te.name)||"image").trim(),Ba=Lt.includes(".")?Lt.split(".").slice(0,-1).join("."):Lt;return new File([xt],"".concat(Ba||"image",".webp"),{type:"image/webp"})}catch(Ae){return te}},pa=async te=>{const be=(Array.isArray(te)?te:[]).slice(0,10);if(be.length===0)return[];B(!0),ya("Resimler optimize ediliyor");try{const Ae=[];for(const ze of be)Ae.push(await Da(ze));return Ae}finally{B(!1),ya("")}},yt=async()=>{var be;const te={};try{const Ae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsZG95cWd6eGd1Ymt5b2h2cXVxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NDYxMDYsImV4cCI6MjA4MTAyMjEwNn0.m6Mar-3MBvTDYptexLhbLK3SEhQb9CiqlU7Vwe3xxaU".trim();Ae&&(te.apikey=Ae)}catch(Ae){}try{const{data:Ae}=await Zp.auth.getSession(),ze=((be=Ae==null?void 0:Ae.session)==null?void 0:be.access_token)||"";ze&&(te.Authorization="Bearer ".concat(ze))}catch(Ae){}return te},Wt=async({url:te,body:be,headers:Ae,onProgress:ze})=>new Promise((vt,Ue)=>{try{const _e=new XMLHttpRequest;_e.open("PUT",te,!0);try{Object.entries(Ae||{}).forEach(([He,Ce])=>{!He||!Ce||_e.setRequestHeader(He,String(Ce))})}catch(He){}_e.upload.onprogress=He=>{try{if(!He.lengthComputable)return;const Ce=He.total>0?He.loaded/He.total:0;ze==null||ze(Math.max(0,Math.min(1,Ce)))}catch(Ce){}},_e.onerror=()=>Ue(new Error("Ykleme srasnda balant hatas.")),_e.onabort=()=>Ue(new Error("Ykleme iptal edildi.")),_e.onload=()=>{if(_e.status>=200&&_e.status<300)return vt(!0);const He=String(_e.responseText||"").trim();return Ue(new Error(He||"Ykleme baarsz (HTTP ".concat(_e.status,").")))},_e.send(be)}catch(_e){Ue(_e)}}),gs=()=>{var te,be,Ae,ze,vt;ye([]);try{(V||[]).forEach(Ue=>{Ue!=null&&Ue.previewUrl&&URL.revokeObjectURL(Ue.previewUrl)})}catch(Ue){}if(Te([]),oe(0),fe(0),$e(0),z)try{URL.revokeObjectURL(z)}catch(Ue){}if(X(""),Nt(!1),K(Vt),Bt.current=!1,Se.current&&clearInterval(Se.current),Se.current=null,B(!1),Zt(0),ya(""),We.current=[],D(!1),Ot.current&&clearTimeout(Ot.current),Ot.current=null,H.current){try{cancelAnimationFrame(H.current)}catch(Ue){}H.current=null}if(lt.current){try{lt.current.close()}catch(Ue){}lt.current=null}At.current=null;try{Ne.current&&cancelAnimationFrame(Ne.current),Ne.current=null}catch(Ue){}try{const Ue=Xe.current;(te=Ue==null?void 0:Ue.stop)==null||te.call(Ue);const _e=Ue==null?void 0:Ue.canvasStream;(ze=(Ae=(be=_e==null?void 0:_e.getTracks)==null?void 0:be.call(_e))==null?void 0:Ae.forEach)==null||ze.call(Ae,Ce=>Ce.stop());const He=Ue==null?void 0:Ue.sourceEl;try{(vt=He==null?void 0:He.pause)==null||vt.call(He),He&&(He.srcObject=null)}catch(Ce){}}catch(Ue){}Xe.current=null;try{mt.current&&(mt.current.value=""),bt.current&&(bt.current.value=""),Ve.current&&(Ve.current.value=""),Be.current&&(Be.current.value="")}catch(Ue){}try{De.current&&De.current.state!=="inactive"&&De.current.stop()}catch(Ue){}if(Re.current){try{Re.current.getTracks().forEach(Ue=>Ue.stop())}catch(Ue){}Re.current=null}if(Ye.current)try{Ye.current.srcObject=null}catch(Ue){}},Pr=()=>{c("type"),w(""),k(""),St(""),Ie(null),gs()};m.useEffect(()=>{Pr()},[d]),m.useEffect(()=>{let te=!0;return(async()=>{try{const be=await re("/api/agendas?limit=200"),Ae=Array.isArray(be)?be:(be==null?void 0:be.data)||[];if(!te)return;M(Array.isArray(Ae)?Ae:[])}catch(be){te&&M([])}})(),()=>{te=!1}},[]),m.useEffect(()=>{if(b!=="image"){Q([]);return}const te=(le||[]).slice(0,10).map(be=>URL.createObjectURL(be));return Q(te),()=>{te.forEach(be=>{try{URL.revokeObjectURL(be)}catch(Ae){}})}},[b,le]),m.useEffect(()=>{let te=!1;const be=_e=>{try{(_e||[]).forEach(He=>{He!=null&&He.previewUrl&&URL.revokeObjectURL(He.previewUrl)})}catch(He){}};if(b!=="video"){be(V),Te([]),oe(0);return}if(G)return;const Ae=String(z||"").trim();if(!Ae){be(V),Te([]),oe(0);return}const ze=(_e,He,Ce)=>Math.min(Ce,Math.max(He,_e)),vt=_e=>new Promise(He=>{try{if(typeof(_e==null?void 0:_e.requestVideoFrameCallback)=="function")return _e.requestVideoFrameCallback((Ce,Dt)=>He(!0))}catch(Ce){}try{requestAnimationFrame(()=>requestAnimationFrame(()=>He(!0)));return}catch(Ce){}setTimeout(()=>He(!0),220)}),Ue=(_e,He,Ce)=>new Promise(Dt=>{var Jt;try{const da=Number(_e.duration||0),pt=Number.isFinite(da)&&da>0?da:Math.max(.4,Number(Ce||0)||.4),Fe=Math.max(.05,pt-.12);let ha=ze(Number(He||0),.05,Fe),xt=!1;const Kt=Ba=>{xt||(xt=!0,Dt(Ba))},Lt=async()=>{var Ba,ea;try{_e.removeEventListener("seeked",Lt)}catch(Ha){}try{try{await((Ba=_e.play)==null?void 0:Ba.call(_e)),(ea=_e.pause)==null||ea.call(_e)}catch(ta){}Number(_e.readyState||0)<2&&await new Promise(ta=>{let Qa=!1;const ys=()=>{if(!Qa){Qa=!0;try{_e.removeEventListener("loadeddata",ys),_e.removeEventListener("canplay",ys),_e.removeEventListener("timeupdate",ys)}catch(Br){}ta(!0)}};try{_e.addEventListener("loadeddata",ys,{once:!0}),_e.addEventListener("canplay",ys,{once:!0}),_e.addEventListener("timeupdate",ys,{once:!0})}catch(Br){}setTimeout(ys,380)}),await vt(_e);const Ha=Number(_e.videoWidth||0),bs=Number(_e.videoHeight||0);if(!Ha||!bs)return Kt(null);const Ua=document.createElement("canvas");Ua.width=Ha,Ua.height=bs;const ua=Ua.getContext("2d");if(!ua)return Kt(null);ua.drawImage(_e,0,0,Ha,bs),Ua.toBlob(ta=>{if(!ta)return Kt(null);const Qa=URL.createObjectURL(ta);Kt({timeSec:ha,previewUrl:Qa,blob:ta})},"image/jpeg",.86)}catch(Ha){Kt(null)}};_e.addEventListener("seeked",Lt);try{_e.readyState<2&&((Jt=_e.load)==null||Jt.call(_e))}catch(Ba){}try{if(Math.abs(Number(_e.currentTime||0)-ha)<.02){const Ba=ze(ha+.06,.05,Fe);Math.abs(Ba-ha)>=.02&&(ha=Ba)}}catch(Ba){}_e.currentTime=ha,setTimeout(()=>{try{_e.removeEventListener("seeked",Lt)}catch(Ba){}Kt(null)},2600)}catch(da){Dt(null)}});return(async()=>{var He,Ce,Dt,Jt,da,pt;be(V),Te([]),oe(0);try{const Fe=document.createElement("video");Fe.preload="auto",Fe.src=Ae,Fe.muted=!0,Fe.playsInline=!0;try{Fe.style.position="fixed",Fe.style.left="-9999px",Fe.style.top="0",Fe.style.width="1px",Fe.style.height="1px",Fe.style.opacity="0",document.body.appendChild(Fe)}catch(ua){}try{Fe.setAttribute("playsinline","true"),Fe.setAttribute("webkit-playsinline","true")}catch(ua){}await new Promise(ua=>{const ta=()=>ua();Fe.onloadedmetadata=ta,Fe.onloadeddata=ta,Fe.onerror=ta,setTimeout(ta,1200)});try{await((He=Fe.play)==null?void 0:He.call(Fe)),(Ce=Fe.pause)==null||Ce.call(Fe)}catch(ua){}try{Fe.currentTime=.1,await vt(Fe)}catch(ua){}const ha=Number(Fe.duration||0),xt=Number.isFinite(ha)&&ha>0?ha:Math.max(1,Number(q||0)||1),Kt=Math.max(.05,xt-.12),Lt=Number(ke||0)%7*.07,Ba=[Math.min(.12+Lt,Kt),xt*.45+Lt,xt*.82+Lt].map(ua=>ze(ua,.05,Kt)),ea=[];for(const ua of Ba){const ta=Number(ua.toFixed(2));if(!ea.some(ys=>Math.abs(ys-ta)<.02)){ea.push(ta);continue}const Qa=ze(ta+.08,.05,Kt);ea.some(ys=>Math.abs(ys-Qa)<.02)||ea.push(Number(Qa.toFixed(2)))}for(;ea.length<3;){const ua=ea.length?ea[ea.length-1]:.05,ta=ze(ua+.12,.05,Kt);if(Math.abs(ta-ua)<.02)break;ea.push(Number(ta.toFixed(2)))}ea.splice(3);const Ha=[],bs=ea.slice();for(const ua of[.18,.28,.6,.72,.9])bs.push(ze(xt*ua+Lt,.05,Kt));const Ua=[];for(const ua of bs){const ta=Number(Number(ua).toFixed(2));Ua.some(Qa=>Math.abs(Qa-ta)<.02)||Ua.push(ta)}for(const ua of Ua){if(te)break;const ta=await Ue(Fe,ua,xt);if(ta&&Ha.push(ta),Ha.length>=3)break}if(te){be(Ha);return}Te(Ha.slice(0,3)),oe(0);try{(Dt=Fe.pause)==null||Dt.call(Fe),(Jt=Fe.removeAttribute)==null||Jt.call(Fe,"src"),(da=Fe.load)==null||da.call(Fe),(pt=Fe.remove)==null||pt.call(Fe)}catch(ua){}}catch(Fe){}})(),()=>{te=!0}},[b,z,G,ke]),m.useEffect(()=>{let te=!1;const be=le==null?void 0:le[0];if(!be){I(0);return}if(b!=="audio"&&b!=="video"){I(0);return}const Ae=()=>new Promise(ze=>{try{const vt=URL.createObjectURL(be),Ue=document.createElement(b==="audio"?"audio":"video");let _e=!1;const He=()=>{if(!_e){_e=!0;try{URL.revokeObjectURL(vt)}catch(Dt){}}},Ce=Dt=>{He(),ze(Number.isFinite(Dt)&&Dt>0?Dt:0)};Ue.preload="metadata",Ue.onloadedmetadata=()=>{const Dt=Number(Ue.duration);if(Number.isFinite(Dt)&&Dt>0)return Ce(Dt);const Jt=()=>{Ue.removeEventListener("timeupdate",Jt);const da=Number(Ue.duration);Ce(da)};Ue.addEventListener("timeupdate",Jt);try{Ue.currentTime=1e101}catch(da){Ue.removeEventListener("timeupdate",Jt),Ce(0)}setTimeout(()=>{try{Ue.removeEventListener("timeupdate",Jt)}catch(da){}Ce(Number(Ue.duration))},1200)},Ue.onerror=()=>Ce(0),Ue.src=vt}catch(vt){ze(0)}});return(async()=>{const ze=await Ae();te||I(Math.max(0,Math.floor(ze||0)))})(),()=>{te=!0}},[le,b]),m.useEffect(()=>()=>{gs()},[]),m.useEffect(()=>{var Ae;if(!G||b!=="video")return;const te=Re.current,be=Ye.current;if(!(!te||!be))try{be.srcObject=te,be.muted=!0,be.playsInline=!0,be.setAttribute("playsinline","true"),be.setAttribute("webkit-playsinline","true"),(Ae=be.play)==null||Ae.call(be).catch(()=>null),setTimeout(()=>{var ze;try{(ze=be.play)==null||ze.call(be).catch(()=>null)}catch(vt){}},250)}catch(ze){}},[G,b]);const Cs=te=>{w(te),k(""),St(""),Ie(null),A(10),gs(),c("agenda")},Rs=()=>c(u==="agenda"?"type":u==="media"?"agenda":u==="desc"?b==="text"?"agenda":"media":"type"),_r=te=>{k(String(te||"")),c(b==="text"?"desc":"media")},Os=te=>new Promise(be=>{try{const Ae=URL.createObjectURL(te),ze=document.createElement("video");let vt=!1;const Ue=()=>{if(!vt){vt=!0;try{URL.revokeObjectURL(Ae)}catch(He){}}},_e=He=>{Ue(),be(Number.isFinite(He)&&He>0?He:0)};ze.preload="metadata",ze.onloadedmetadata=()=>{const He=Number(ze.duration);if(Number.isFinite(He)&&He>0)return _e(He);const Ce=()=>{ze.removeEventListener("timeupdate",Ce),_e(Number(ze.duration))};ze.addEventListener("timeupdate",Ce);try{ze.currentTime=1e101}catch(Dt){ze.removeEventListener("timeupdate",Ce),_e(0)}setTimeout(()=>{try{ze.removeEventListener("timeupdate",Ce)}catch(Dt){}_e(Number(ze.duration))},1200)},ze.onerror=()=>_e(0),ze.src=Ae}catch(Ae){be(0)}}),Sr=te=>new Promise(be=>{try{const Ae=URL.createObjectURL(te),ze=document.createElement("audio");let vt=!1;const Ue=()=>{if(!vt){vt=!0;try{URL.revokeObjectURL(Ae)}catch(He){}}},_e=He=>{Ue(),be(Number.isFinite(He)&&He>0?He:0)};ze.preload="metadata",ze.onloadedmetadata=()=>{const He=Number(ze.duration);if(Number.isFinite(He)&&He>0)return _e(He);const Ce=()=>{ze.removeEventListener("timeupdate",Ce),_e(Number(ze.duration))};ze.addEventListener("timeupdate",Ce);try{ze.currentTime=1e101}catch(Dt){ze.removeEventListener("timeupdate",Ce),_e(0)}setTimeout(()=>{try{ze.removeEventListener("timeupdate",Ce)}catch(Dt){}_e(Number(ze.duration))},1200)},ze.onerror=()=>_e(0),ze.src=Ae}catch(Ae){be(0)}}),xr=async(te={})=>{var be,Ae,ze;if(!G)try{te!=null&&te.skipReset||gs(),Nt(!1),ut.current=null;const vt=String((te==null?void 0:te.facingMode)||se||"user"),Ue={video:b==="video"?{facingMode:{ideal:vt},width:{ideal:720},height:{ideal:1280},aspectRatio:{ideal:9/16}}:!1,audio:!0},_e=(te==null?void 0:te.stream)||await navigator.mediaDevices.getUserMedia(Ue);Re.current=_e;try{const pt=((Ae=(be=_e.getVideoTracks)==null?void 0:be.call(_e))==null?void 0:Ae[0])||null,Fe=((ze=pt==null?void 0:pt.getSettings)==null?void 0:ze.call(pt))||{},ha=String((Fe==null?void 0:Fe.deviceId)||"");ha&&(ue.current=ha);const xt=String((Fe==null?void 0:Fe.facingMode)||"");!(te!=null&&te.facingMode)&&(xt==="user"||xt==="environment")&&ae(xt)}catch(pt){}if(b==="audio")try{const pt=new(window.AudioContext||window.webkitAudioContext),Fe=pt.createAnalyser();pt.createMediaStreamSource(_e).connect(Fe),Fe.fftSize=256,lt.current=pt,At.current=Fe;const xt=J.current;if(xt){const Kt=xt.getContext("2d"),Lt=Fe.frequencyBinCount,Ba=new Uint8Array(Lt),ea=()=>{if(!At.current)return;H.current=requestAnimationFrame(ea),Fe.getByteFrequencyData(Ba),Kt.fillStyle="rgb(17, 24, 39)",Kt.fillRect(0,0,xt.width,xt.height);const Ha=xt.width/Lt*2.5;let bs,Ua=0;const ua=Kt.createLinearGradient(0,0,0,xt.height);ua.addColorStop(0,"#3b82f6"),ua.addColorStop(.5,"#8b5cf6"),ua.addColorStop(1,"#ec4899"),Kt.fillStyle=ua;for(let ta=0;ta<Lt;ta++)bs=Ba[ta]/255*xt.height*.8,Kt.fillRect(Ua,xt.height-bs,Ha,bs),Ua+=Ha+1};ea()}}catch(pt){console.error("Audio visualization setup failed:",pt)}const Ce=(pt=>pt==="audio"?MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":MediaRecorder.isTypeSupported("audio/webm")?"audio/webm":"audio/wav":MediaRecorder.isTypeSupported("video/webm;codecs=vp9")?"video/webm;codecs=vp9":"video/webm")(b),Jt=b==="video"?(await(async pt=>{var ua,ta,Qa,ys,Br;const Fe=ct.current||document.createElement("canvas"),ha=720,xt=1280;Fe.width=ha,Fe.height=xt,ct.current||(ct.current=Fe);const Kt=Fe.getContext("2d");if(!Kt)return{outStream:pt};const Lt=Ye.current||document.createElement("video");if(!Ye.current){Lt.muted=!0,Lt.playsInline=!0;try{Lt.setAttribute("playsinline","true"),Lt.setAttribute("webkit-playsinline","true")}catch(Za){}Lt.srcObject=pt;try{await Lt.play()}catch(Za){}}const ea=(ua=Fe.captureStream)==null?void 0:ua.call(Fe,30),Ha=new MediaStream;try{const Za=(Qa=(ta=ea==null?void 0:ea.getVideoTracks)==null?void 0:ta.call(ea))==null?void 0:Qa[0];Za&&Ha.addTrack(Za)}catch(Za){}try{const Za=(Br=(ys=pt==null?void 0:pt.getAudioTracks)==null?void 0:ys.call(pt))==null?void 0:Br[0];Za&&Ha.addTrack(Za)}catch(Za){}const bs="cover",Ua=()=>{try{Kt.fillStyle="#000000",Kt.fillRect(0,0,ha,xt);const Za=Number(Lt.videoWidth||0)||0,Ks=Number(Lt.videoHeight||0)||0;if(!Za||!Ks){Ne.current=requestAnimationFrame(Ua);return}const kr=Math.max(ha/Za,xt/Ks),un=Za*kr,Fa=Ks*kr,Ur=(ha-un)/2,gl=(xt-Fa)/2;Kt.drawImage(Lt,Ur,gl,un,Fa)}catch(Za){}Ne.current=requestAnimationFrame(Ua)};if(Ne.current)try{cancelAnimationFrame(Ne.current)}catch(Za){}return Ne.current=requestAnimationFrame(Ua),Xe.current={canvasStream:ea,sourceEl:Lt,stop:()=>{var Za,Ks,kr,un;try{Ne.current&&cancelAnimationFrame(Ne.current)}catch(Fa){}Ne.current=null;try{(kr=(Ks=(Za=ea==null?void 0:ea.getTracks)==null?void 0:Za.call(ea))==null?void 0:Ks.forEach)==null||kr.call(Ks,Fa=>Fa.stop())}catch(Fa){}try{(un=Lt.pause)==null||un.call(Lt),Lt.srcObject=null}catch(Fa){}}},{outStream:Ha}})(_e)).outStream:_e,da=new MediaRecorder(Jt,{mimeType:Ce});De.current=da,We.current=[],da.ondataavailable=pt=>{pt.data.size>0&&We.current.push(pt.data)},da.onstop=()=>{if(jt.current){jt.current=!1,We.current=[];return}const pt=new Blob(We.current,{type:da.mimeType}),Fe=URL.createObjectURL(pt);X(Fe);const xt=((Lt,Ba)=>Lt.includes("webm")?"webm":Lt.includes("mp4")?"mp4":Lt.includes("wav")?"wav":Ba==="audio"?"mp3":"mp4")(da.mimeType,b),Kt=b==="audio"?"polit-audio.".concat(xt):"polit-video.".concat(xt);ye([new File([pt],Kt,{type:pt.type})])},da.start(),Nt(!1),D(!0),gt.current=Date.now(),K(Vt),Se.current=setInterval(()=>{const pt=Vt-Math.floor((Date.now()-gt.current)/1e3);K(Math.max(0,pt)),pt<=0&&ar()},200)}catch(vt){ra.error(b==="audio"?"Mikrofon izni alnamad.":"Kamera izni alnamad.")}},ar=()=>{var te,be;if(Se.current&&clearInterval(Se.current),Se.current=null,H.current&&(cancelAnimationFrame(H.current),H.current=null),lt.current){try{lt.current.close()}catch(Ae){}lt.current=null}At.current=null,De.current&&De.current.state!=="inactive"&&De.current.stop();try{(be=(te=Xe.current)==null?void 0:te.stop)==null||be.call(te)}catch(Ae){}Xe.current=null;try{Ne.current&&cancelAnimationFrame(Ne.current)}catch(Ae){}Ne.current=null,Re.current&&(Re.current.getTracks().forEach(Ae=>Ae.stop()),Re.current=null),D(!1)},Dr=()=>{Nt(te=>!te)},zs=async()=>{var ze,vt,Ue;const be=se==="user"?"environment":"user";if(!G){ae(be);return}let Ae=null;try{Ae=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:be},width:{ideal:720},height:{ideal:1280},aspectRatio:{ideal:9/16}},audio:!0})}catch(_e){ra.error("Kamera deitirilemedi.");return}try{const _e=((vt=(ze=Ae.getVideoTracks)==null?void 0:ze.call(Ae))==null?void 0:vt[0])||null,He=((Ue=_e==null?void 0:_e.getSettings)==null?void 0:Ue.call(_e))||{},Ce=String((He==null?void 0:He.deviceId)||""),Dt=String(ue.current||""),Jt=String((He==null?void 0:He.facingMode)||"");if(!(Jt?Jt===be:!0)||!(Ce&&Dt?Ce!==Dt:!0)){try{Ae.getTracks().forEach(Fe=>Fe.stop())}catch(Fe){}ra.error("Bu cihazda dier kamera kullanlamyor.");return}}catch(_e){}jt.current=!0,ar(),setTimeout(()=>{try{xr({stream:Ae,skipReset:!0,facingMode:be}),ae(be)}catch(_e){try{Ae.getTracks().forEach(He=>He.stop())}catch(He){}}},180)},he=async(te,be)=>{const Ae=Number((te==null?void 0:te.size)||0)||0,ze=b==="video"?80*1024*1024:b==="audio"?40*1024*1024:15*1024*1024;if(Ae>ze){const pt=Math.round(ze/1024/1024);throw new Error("Dosya ok byk. imdilik maksimum ".concat(pt,"MB ykleyebilirsiniz."))}const Ue=(pt=>{const Fe=String((pt==null?void 0:pt.type)||"").trim();if(Fe)return Fe.split(";")[0].trim();const ha=String((pt==null?void 0:pt.name)||"").trim().toLowerCase(),xt=ha.includes(".")?ha.split(".").pop():"";return xt?xt==="jpg"||xt==="jpeg"?"image/jpeg":xt==="jpg"?"image/jpg":xt==="png"?"image/png":xt==="webp"?"image/webp":xt==="gif"?"image/gif":xt==="mp4"?"video/mp4":xt==="m4v"?"video/x-m4v":xt==="mov"?"video/quicktime":xt==="webm"?"video/webm":xt==="3gp"?"video/3gpp":xt==="3g2"?"video/3gpp2":xt==="mp3"?"audio/mpeg":xt==="m4a"?"audio/mp4":xt==="aac"?"audio/aac":"":""})(te);if(!Ue)throw new Error("Dosya tr bulunamad. Ltfen farkl bir dosya sein.");const _e=await re("/api/storage/sign-upload",{method:"POST",body:JSON.stringify({bucket:"uploads",folder:(te==null?void 0:te.__uploadFolder)||"posts",contentType:Ue})});if(!(_e!=null&&_e.success))throw new Error((_e==null?void 0:_e.error)||"Ykleme hazrl baarsz.");const{publicUrl:He,signedUrl:Ce}=(_e==null?void 0:_e.data)||{};if(!He||!Ce)throw new Error("Ykleme anahtar alnamad.");const Dt=String(Ce).trim(),Jt=new FormData;Jt.append("cacheControl","3600"),Jt.append("",te);const da=await yt();return await Wt({url:Dt,body:Jt,headers:da,onProgress:pt=>be==null?void 0:be(pt)}),String(He)},Ge=async()=>{var vt;if(kt.current||Qe)return;if(!l){ra.error("Paylam yapmak iin giri yapmalsnz."),r("/login-new");return}if(!b)return;if(ie){ra.error("yeliiniz onay bekliyor. Onay gelene kadar paylam yapamazsnz.");return}const te=b==="text",be=te||!d;let Ae=String(Le||"").trim();if(be){if(Ae.length<xe)return ra.error("Metin en az ".concat(xe," karakter olmal."));if(Ae.length>qe)return ra.error("Metin en fazla ".concat(qe," karakter olabilir."))}if(!te&&!Et)return ra.error(b==="image"?"nce resim ekleyin.":b==="audio"?"nce ses ekleyin.":"nce video ekleyin.");!be&&!Ae&&Et&&(Ae=b==="video"?"":b==="audio"?"":b==="image"?"":"");const ze=Ue=>{const _e=String((Ue==null?void 0:Ue.type)||"").trim().toLowerCase();if(_e.startsWith("video/"))return"video";if(_e.startsWith("audio/"))return"audio";if(_e.startsWith("image/"))return"image";const He=String((Ue==null?void 0:Ue.name)||"").trim().toLowerCase(),Ce=He.includes(".")?He.split(".").pop():"";return Ce?["mp4","m4v","mov","webm","3gp","3g2"].includes(Ce)?"video":["mp3","m4a","aac","wav","ogg","webm"].includes(Ce)?"audio":["jpg","jpeg","png","gif","webp"].includes(Ce)?"image":"":""};if(b==="video"&&le.some(Ue=>ze(Ue)!=="video"))return ra.error("Sadece video dosyas (mp4/mov/m4v/webm/3gp).");if(b==="audio"&&le.some(Ue=>ze(Ue)!=="audio"))return ra.error("Sadece ses dosyas (mp3/m4a/aac/wav/ogg).");if(b==="image"&&le.some(Ue=>ze(Ue)!=="image"))return ra.error("Sadece resim dosyas (jpg/png/webp/gif).");kt.current=!0,It(!0),Zt(0),ya("");try{let Ue=[];if(le.length>0){const Jt=le.slice(0,b==="image"?10:1),da=Jt.reduce((xt,Kt)=>xt+(Number((Kt==null?void 0:Kt.size)||0)||0),0)||0;let pt=0;const Fe=[];let ha=0;for(const xt of Jt){ha+=1,ya("Ykleniyor (".concat(ha,"/").concat(Jt.length,")"));const Kt=await he(xt,Lt=>{const Ba=da>0?(pt+(Number((xt==null?void 0:xt.size)||0)||0)*Lt)/da:Lt;Zt(Math.max(0,Math.min(1,Ba)))});Fe.push(Kt),pt+=Number((xt==null?void 0:xt.size)||0)||0,Zt(da>0?Math.min(1,pt/da):1)}Ue=Fe}let _e=null;if(b==="video"&&(V==null?void 0:V.length)>0){const Jt=V[Math.min(Math.max(0,Ke),V.length-1)]||null;if(Jt!=null&&Jt.blob){const da=new File([Jt.blob],"thumb.jpg",{type:"image/jpeg"});da.__uploadFolder="posts/thumbnails",ya("Kapak ykleniyor"),_e=await he(da,pt=>Zt(Math.max(0,Math.min(1,pt))))}}ya(d?"Fast kaydediliyor":"Polit kaydediliyor"),Zt(Jt=>Math.max(Number(Jt||0)||0,.92));const He={content:Ae,content_text:Ae,content_type:b,category:"general",agenda_tag:N||null,media_urls:Ue,..._e?{thumbnail_url:_e}:{},...q>0?{media_duration:q}:{},...d?{is_trending:!0}:{}},Ce=await Ma.create(He);if(!!!(Ce!=null&&Ce.success&&((vt=Ce==null?void 0:Ce.data)!=null&&vt.id)))throw new Error((Ce==null?void 0:Ce.error)||"Paylam oluturulamad.");Zt(1),Ie(Ce.data),c("success")}catch(Ue){ra.error(String((Ue==null?void 0:Ue.message)||"Paylam oluturulurken hata olutu."))}finally{It(!1),kt.current=!1}},tt=async()=>{var te,be,Ae,ze,vt,Ue,_e;if(de&&!Pe&&!kt.current){kt.current=!0,F(!0);try{const Ce={...{content:String((Ae=(be=(te=de==null?void 0:de.content_text)!=null?te:de==null?void 0:de.content)!=null?be:Le)!=null?Ae:"").trim(),content_text:String((Ue=(vt=(ze=de==null?void 0:de.content_text)!=null?ze:de==null?void 0:de.content)!=null?vt:Le)!=null?Ue:"").trim(),content_type:String((de==null?void 0:de.content_type)||b||"text").trim(),category:String((de==null?void 0:de.category)||"general"),agenda_tag:N||null,media_urls:Array.isArray(de==null?void 0:de.media_urls)?de.media_urls:[],thumbnail_url:(de==null?void 0:de.thumbnail_url)||null},...d?{is_trending:!1}:{is_trending:!0}},Dt=await Ma.create(Ce).catch(()=>null);!!(Dt!=null&&Dt.success&&((_e=Dt==null?void 0:Dt.data)!=null&&_e.id))||ra.error("apraz paylam oluturulamad. Ltfen tekrar deneyin.")}finally{F(!1),kt.current=!1}}},it=async()=>{var be,Ae,ze;if(!de||!d||Pe||kt.current)return;const te=String(Le||"").trim();if(te.length<xe)return ra.error("Metin en az ".concat(xe," karakter olmal."));if(te.length>qe)return ra.error("Metin en fazla ".concat(qe," karakter olabilir."));kt.current=!0,F(!0);try{const Ue={...{content:te,content_text:te,content_type:String((de==null?void 0:de.content_type)||b||"text").trim(),category:String((de==null?void 0:de.category)||"general"),agenda_tag:(Ae=(be=de==null?void 0:de.agenda_tag)!=null?be:N)!=null?Ae:null,media_urls:Array.isArray(de==null?void 0:de.media_urls)?de.media_urls:[],thumbnail_url:(de==null?void 0:de.thumbnail_url)||null,...de!=null&&de.media_duration?{media_duration:de.media_duration}:{}},is_trending:!1},_e=await Ma.create(Ue).catch(()=>null),He=(ze=_e==null?void 0:_e.data)==null?void 0:ze.id;if(!!!(_e!=null&&_e.success&&He))return ra.error("Polit yaynlanamad. Ltfen tekrar deneyin.");ra.success("Polit yaynland."),r("/post/".concat(encodeURIComponent(He)))}finally{F(!1),kt.current=!1}},Pt=async()=>{const te=(i==null?void 0:i.id)||(i==null?void 0:i.user_id)||null,be=String(te||(i==null?void 0:i.username)||"").trim();if(!be)return r("/");try{const Ae=await re("/api/fast?limit=24").catch(()=>null),vt=((Array.isArray(Ae==null?void 0:Ae.data)?Ae.data:Array.isArray(Ae)?Ae:[])||[]).map(Ce=>{var Dt;return{key:String((Ce==null?void 0:Ce.user_id)||(Ce==null?void 0:Ce.id)||(Ce==null?void 0:Ce.username)||"").trim(),user_id:(Dt=Ce==null?void 0:Ce.user_id)!=null?Dt:Ce==null?void 0:Ce.id,username:Ce==null?void 0:Ce.username,full_name:Ce==null?void 0:Ce.full_name,avatar_url:(Ce==null?void 0:Ce.avatar_url)||(Ce==null?void 0:Ce.profile_image),profile_image:(Ce==null?void 0:Ce.profile_image)||(Ce==null?void 0:Ce.avatar_url),story_count:Ce==null?void 0:Ce.story_count,latest_created_at:Ce==null?void 0:Ce.latest_created_at}}).filter(Ce=>Ce.key);vt.some(Ce=>String(Ce.key)===String(te||be))||vt.unshift({key:String(te||be),user_id:te,username:i==null?void 0:i.username,full_name:i==null?void 0:i.full_name,avatar_url:(i==null?void 0:i.avatar_url)||(i==null?void 0:i.profile_image),profile_image:(i==null?void 0:i.profile_image)||(i==null?void 0:i.avatar_url),story_count:1,latest_created_at:new Date().toISOString()});const _e=String(te||be),He=Math.max(0,vt.findIndex(Ce=>String(Ce.key)===_e));try{sessionStorage.setItem("fast_queue_v1",JSON.stringify({ts:Date.now(),queue:vt,startKey:_e,startIndex:He}))}catch(Ce){}return r("/fast/".concat(encodeURIComponent(_e)),{state:{fastQueue:vt,fastStartKey:_e,fastStartIndex:He}})}catch(Ae){return r("/fast/".concat(encodeURIComponent(be)))}},Ft=()=>{d?Pt():r(de!=null&&de.id?"/post/".concat(de.id):"/")},ba=async()=>{Pe||(await tt(),d?Pt():r(de!=null&&de.id?"/post/".concat(de.id):"/"))},Gt=m.useMemo(()=>[{key:"video",label:"Video",Icon:po},{key:"image",label:"Resim",Icon:ci},{key:"audio",label:"Ses",Icon:yo},{key:"text",label:"Yaz",Icon:lh}],[]),Ta=m.useMemo(()=>{const te=String(Le||"").trim();return te.length>=xe&&te.length<=qe},[Le]);return e.jsx("div",{className:"min-h-screen bg-gray-50 pb-24 lg:pb-0",children:e.jsx("div",{className:"container-main py-6",children:e.jsx("div",{className:"max-w-md mx-auto scale-[0.85] lg:scale-[0.80] origin-top",children:e.jsxs("div",{className:["bg-white rounded-2xl border-2 overflow-hidden shadow-sm",Z.borderClass].join(" "),children:[e.jsxs("div",{className:"px-5 py-4 border-b border-white/15 flex items-center justify-between gap-3",style:{backgroundColor:Z.primary},children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(Yt,{src:(i==null?void 0:i.avatar_url)||(i==null?void 0:i.profile_image),size:"46px",verified:za(i),className:"border border-white/20 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-black text-white truncate",children:(i==null?void 0:i.full_name)||"Misafir"}),e.jsxs("div",{className:"text-xs text-white/80 truncate",children:["@",(i==null?void 0:i.username)||"-"]})]})]}),u!=="success"?e.jsx("button",{type:"button",onClick:u==="type"?()=>r(-1):Rs,className:"px-4 py-2 rounded-2xl border border-white/30 font-black bg-white/95 hover:bg-white text-gray-900",children:"Geri Dn"}):null]}),e.jsxs("div",{className:"p-5 space-y-4",children:[u==="type"?e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Gt.map(({key:te,label:be,Icon:Ae})=>e.jsxs("button",{type:"button",onClick:()=>Cs(te),className:"rounded-3xl p-2 bg-transparent hover:bg-gray-50 transition-colors flex flex-col items-center justify-center gap-2",children:[(()=>{const ze=(y==null?void 0:y[te])||[],vt=Number((E==null?void 0:E[te])||0),Ue=ze[vt]||"";return!!Ue&&!p[te]?e.jsx("img",{src:Ue,alt:be,className:"w-[104px] h-[104px] sm:w-[120px] sm:h-[120px] object-contain",loading:"eager",fetchpriority:"high",onError:()=>{const He=vt+1;He<ze.length?C(Ce=>({...Ce,[te]:He})):j(Ce=>({...Ce,[te]:!0}))}}):e.jsx(Ae,{className:"w-16 h-16",style:{color:Z.primary}})})(),e.jsx("div",{className:"text-sm font-black text-gray-900",children:be})]},te))}):null,u==="agenda"?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:"Gndem Sein"}),e.jsxs("div",{className:"space-y-2 max-h-[360px] overflow-auto pr-1",children:[dt.slice(0,T).map(te=>{const be=String((te==null?void 0:te.title)||(te==null?void 0:te.name)||"").trim();if(!be)return null;const Ae=ot(te);return e.jsxs("button",{type:"button",onClick:()=>_r(be),className:"w-full rounded-2xl border border-gray-200 bg-white hover:bg-gray-50 px-4 py-3 flex items-center justify-between gap-3",children:[e.jsx("span",{className:"font-black text-gray-900 truncate",children:be}),e.jsx("span",{className:"font-black text-gray-700 flex-shrink-0",children:Ae})]},(te==null?void 0:te.id)||(te==null?void 0:te.slug)||be)}),dt.length>T?e.jsx("button",{type:"button",onClick:()=>A(te=>Math.min(dt.length,te+10)),className:"w-full py-4 rounded-2xl border-2 border-gray-300 bg-white hover:bg-gray-50 text-gray-900 font-black",children:"+ DER GNDEMLER YKLE"}):null,dt.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Gndem listesi bo."}):null]}),e.jsx("button",{type:"button",onClick:()=>_r(""),className:["w-full py-4 rounded-2xl text-white font-black",Z.btnClass].join(" "),children:"Gndem D Paylam"})]}):null,u==="media"?e.jsxs("div",{className:"space-y-4",children:[b==="video"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative rounded-xl border border-gray-200 bg-black overflow-hidden flex items-center justify-center mx-auto w-full max-w-[420px]",style:{aspectRatio:"9 / 16",height:"52dvh",maxHeight:"420px"},children:[G&&e.jsx("div",{className:"absolute top-2 right-2 z-30 inline-flex items-center gap-2 px-2 py-1 rounded-full bg-red-600/80 text-white text-[10px] font-bold animate-pulse",children:"KAYITTA"}),e.jsx("video",{ref:Ye,src:G?void 0:z||void 0,className:"w-full h-full object-contain bg-black",style:Je?{transform:"rotate(90deg)",transformOrigin:"center center"}:void 0,playsInline:!0,muted:G,autoPlay:!G&&!!z&&!Ct,controls:!G&&!!z&&!Ct,onEnded:te=>{te.target.pause()}}),G&&e.jsx("div",{className:"absolute bottom-4 left-0 right-0 z-40 px-4",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsx("button",{type:"button",onClick:Dr,className:"w-14 h-14 rounded-full bg-black/55 border-4 border-white/30 backdrop-blur-md flex items-center justify-center text-white hover:bg-black/65 active:scale-95 transition-all","aria-label":"Yatay/Dikey",children:e.jsx(py,{className:["w-7 h-7 transition-transform",Je?"rotate-90":"rotate-0"].join(" ")})}),e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsxs("div",{className:"px-3 py-1 rounded-full bg-black/60 text-sky-300 font-black text-sm tabular-nums backdrop-blur-md",children:["00:",String(ia).padStart(2,"0")]}),e.jsx("button",{type:"button",onClick:ar,className:"w-14 h-14 rounded-full bg-red-600 border-4 border-white/30 flex items-center justify-center shadow-xl hover:scale-105 active:scale-95 transition-all",children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-sm"})})]}),e.jsx("button",{type:"button",onClick:zs,className:"w-14 h-14 rounded-full bg-black/55 border-4 border-white/30 backdrop-blur-md flex items-center justify-center text-white hover:bg-black/65 active:scale-95 transition-all","aria-label":"n/Arka Kamera",children:e.jsx(Nj,{className:"w-7 h-7"})})]})})]}),!G&&!z&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{type:"button",onClick:xr,className:["rounded-2xl py-3 flex flex-col items-center justify-center gap-1 text-white font-black text-[10px] active:scale-95",Z.btnClass].join(" "),children:[e.jsx(po,{className:"w-6 h-6"})," Bala"]}),e.jsxs("button",{type:"button",onClick:()=>{var te;return(te=mt.current)==null?void 0:te.click()},className:"rounded-2xl py-3 flex flex-col items-center justify-center gap-1 border-2 border-gray-300 bg-white font-black text-[10px] text-gray-700 active:scale-95",children:[e.jsx(pm,{className:"w-6 h-6",style:{color:Z.primary}})," Ykle"]})]}),z&&!G&&(Ct?e.jsxs("div",{className:"py-6 rounded-2xl border border-dashed border-gray-200 bg-gray-50 flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"text-xs font-black text-gray-600",children:"Kapak resimleri hazrlanyor, ltfen bekleyin!"}),e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 border-t-gray-700 rounded-full animate-spin"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsx("span",{className:"text-[10px] font-black text-gray-400 uppercase tracking-tighter",children:"Kapak Se"}),V.length>0&&e.jsxs("button",{type:"button",onClick:()=>$e(te=>te+1),className:"text-primary-blue text-[9px] font-bold flex items-center gap-1",children:[e.jsx(by,{className:"w-3 h-3"})," Yenile"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5",children:V.map((te,be)=>e.jsx("button",{type:"button",onClick:()=>oe(be),className:["rounded-lg overflow-hidden border-2 transition-all",Ke===be?Z.borderClass:"border-transparent opacity-40"].join(" "),children:e.jsx("img",{src:te.previewUrl,className:"w-full aspect-video object-cover"})},be))})]})),oa&&e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:()=>d?Ge():c("desc"),className:"w-full py-3.5 rounded-2xl bg-emerald-600 text-white font-black text-sm shadow-md active:scale-[0.98] transition-all uppercase tracking-tight",children:Qe?"YKLENYOR %".concat(Math.round($t*100)):"GNDER"})})]}):b==="image"?e.jsx("div",{className:"rounded-2xl border border-gray-200 bg-white p-4",children:Y.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"rounded-3xl border border-gray-200 bg-gray-50 overflow-hidden",children:e.jsx("img",{src:Y[0],alt:"Seilen resim",className:"w-full aspect-square object-cover"})}),Y.length>1?e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-1",children:Y.slice(1).map(te=>e.jsx("img",{src:te,alt:"",className:"w-20 h-20 rounded-xl object-cover border border-gray-200"},te))}):null]}):e.jsx("div",{className:"text-sm text-gray-600",children:"Resim nizleme burada grnecek."})}):b==="audio"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative rounded-xl border border-gray-200 bg-gray-900 overflow-hidden flex items-center justify-center",style:{height:"360px"},children:[G&&e.jsx("div",{className:"absolute top-2 right-2 z-30 inline-flex items-center gap-2 px-2 py-1 rounded-full bg-red-600/80 text-white text-[10px] font-bold animate-pulse",children:"KAYITTA"}),e.jsx("canvas",{ref:J,width:400,height:360,className:"w-full h-full",style:{display:G?"block":"none"}}),!G&&z&&e.jsx("div",{className:"w-full h-full flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full space-y-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(yo,{className:"w-24 h-24 text-blue-400"})}),e.jsx("audio",{src:z,controls:!0,className:"w-full",style:{filter:"invert(1) hue-rotate(180deg)"}}),e.jsx("div",{className:"text-center text-gray-300 text-sm",children:"Ses kayd hazr"})]})}),!G&&!z&&e.jsxs("div",{className:"text-gray-500 text-center p-8",children:[e.jsx(yo,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Ses kaydetmek iin balayn"})]}),G&&e.jsx("div",{className:"absolute bottom-4 left-0 right-0 z-40 px-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsxs("div",{className:"px-3 py-1 rounded-full bg-black/60 text-sky-300 font-black text-sm tabular-nums backdrop-blur-md",children:["00:",String(ia).padStart(2,"0")]}),e.jsx("button",{type:"button",onClick:ar,className:"w-14 h-14 rounded-full bg-red-600 border-4 border-white/30 flex items-center justify-center shadow-xl hover:scale-105 active:scale-95 transition-all","aria-label":"Kayd Durdur",children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-sm"})})]})})})]}),!G&&!z&&e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{type:"button",onClick:xr,className:["rounded-2xl py-3 flex flex-col items-center justify-center gap-1 text-white font-black text-[10px] active:scale-95",Z.btnClass].join(" "),children:[e.jsx(uh,{className:"w-6 h-6"})," Bala"]}),e.jsxs("button",{type:"button",onClick:()=>{var te;return(te=bt.current)==null?void 0:te.click()},className:"rounded-2xl py-3 flex flex-col items-center justify-center gap-1 border-2 border-gray-300 bg-white font-black text-[10px] text-gray-700 active:scale-95",children:[e.jsx(pm,{className:"w-6 h-6",style:{color:Z.primary}})," Ykle"]})]}),Et&&!G&&e.jsxs("button",{type:"button",onClick:gs,className:"w-full py-3 rounded-2xl border border-gray-300 bg-white hover:bg-gray-50 text-gray-900 font-black flex items-center justify-center gap-2",children:[e.jsx(Ka,{className:"w-7 h-7"}),"Temizle"]}),oa&&e.jsx("div",{className:"pt-2",children:e.jsx("button",{onClick:()=>d?Ge():c("desc"),className:"w-full py-3.5 rounded-2xl bg-emerald-600 text-white font-black text-sm shadow-md active:scale-[0.98] transition-all uppercase tracking-tight",children:Qe?"YKLENYOR %".concat(Math.round($t*100)):"GNDER"})})]}):null,e.jsx("canvas",{ref:ct,className:"hidden"}),!Et&&!G&&b==="image"?e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>{var te;return(te=Be.current)==null?void 0:te.click()},className:["rounded-3xl aspect-square flex flex-col items-center justify-center gap-2 text-white font-black",Z.btnClass].join(" "),children:[e.jsx(vy,{className:"w-14 h-14"}),e.jsx("div",{children:"Resim ek"})]}),e.jsxs("button",{type:"button",onClick:()=>{var te;return(te=Ve.current)==null?void 0:te.click()},className:"rounded-3xl aspect-square flex flex-col items-center justify-center gap-2 border-2 border-gray-300 bg-white hover:bg-gray-50 text-gray-900 font-black",children:[e.jsx(pm,{className:"w-14 h-14",style:{color:Z.primary}}),e.jsx("div",{children:nt?"Telefondan Ykle":"Bilgisayardan Ykle"})]})]}):null,e.jsx("input",{ref:mt,type:"file",accept:"video/*",className:"hidden",onChange:async te=>{var Ae;const be=(Ae=te.target.files)==null?void 0:Ae[0];if(be){try{const ze=await Os(be).catch(()=>0);if(ze&&ze>60.5){ra.error("Video maksimum 1 dakika olmal."),te.target.value="";return}}catch(ze){}gs(),ye([be]);try{X(URL.createObjectURL(be))}catch(ze){}}}}),e.jsx("input",{ref:bt,type:"file",accept:"audio/*",className:"hidden",onChange:async te=>{var Ae;const be=(Ae=te.target.files)==null?void 0:Ae[0];if(be){try{const ze=await Sr(be).catch(()=>0);if(ze&&ze>60.5){ra.error("Ses maksimum 1 dakika olmal."),te.target.value="";return}}catch(ze){}gs(),ye([be]);try{X(URL.createObjectURL(be))}catch(ze){}}}}),e.jsx("input",{ref:Ve,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:async te=>{const be=Array.from(te.target.files||[]).slice(0,10);if(be.length===0)return;gs();const Ae=await pa(be);ye(Ae)}}),e.jsx("input",{ref:Be,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:async te=>{const be=Array.from(te.target.files||[]).slice(0,10);if(be.length===0)return;gs();const Ae=await pa(be);ye(Ae)}}),Et&&!Ct&&b==="image"?e.jsxs("button",{type:"button",onClick:gs,className:"w-full py-3 rounded-2xl border border-gray-300 bg-white hover:bg-gray-50 text-gray-900 font-black flex items-center justify-center gap-2",children:[e.jsx(Ka,{className:"w-7 h-7"}),"Temizle"]}):null,b!=="video"&&b!=="audio"&&oa?d?e.jsxs("button",{type:"button",disabled:Qe,onClick:Ge,className:["w-full rounded-3xl text-white font-black disabled:opacity-60","bg-emerald-600 hover:bg-emerald-700","py-5"].join(" "),children:[e.jsx("div",{className:"text-lg leading-none",children:$?"Hazrlanyor":Qe?"Ykleniyor %".concat(Math.round($t*100)):"Gnder"}),e.jsx("div",{className:"text-xs font-semibold opacity-90 mt-1",children:Xt||(d?"Fast paylam":"Polit paylam")}),Qe?e.jsx("div",{className:"mt-3 w-full h-2 rounded-full bg-white/20 overflow-hidden",children:e.jsx("div",{className:"h-full bg-white/90",style:{width:"".concat(Math.round($t*100),"%")}})}):null]}):e.jsxs("button",{type:"button",disabled:Qe,onClick:()=>{f("primary"),c("desc")},className:["w-full rounded-3xl text-white font-black disabled:opacity-60","bg-emerald-600 hover:bg-emerald-700","py-5"].join(" "),children:[e.jsx("div",{className:"text-lg leading-none",children:"Gnder"}),e.jsx("div",{className:"text-xs font-semibold opacity-90 mt-1",children:"Aklama ekleyip payla"})]}):null]}):null,u==="desc"?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-lg font-black text-gray-900",children:g==="cross"?"Polit iin ksa bir balk yada aklama giriniz!":"Ksa bir balk yada aklama giriniz!"}),e.jsx("textarea",{value:Le,onChange:te=>St(te.target.value),rows:6,maxLength:qe,className:["w-full px-4 py-3 border-2 rounded-2xl outline-none resize-none",v?"border-rose-200 focus:border-rose-500":"border-primary-blue focus:border-primary-blue"].join(" "),placeholder:"En az 10, en fazla 300 karakter"}),e.jsxs("div",{className:"text-xs text-gray-600 flex items-center justify-between",children:[e.jsxs("span",{children:["Minimum ",e.jsx("span",{className:"font-black",children:xe})," / Maksimum ",e.jsx("span",{className:"font-black",children:qe})]}),e.jsxs("span",{className:"font-black",children:[String(Le||"").trim().length,"/",qe]})]}),e.jsxs("button",{type:"button",disabled:Qe||!Ta,onClick:g==="cross"?it:Ge,className:["w-full py-4 rounded-2xl text-white font-black disabled:opacity-60",Z.btnClass].join(" "),children:[e.jsx("div",{className:"text-lg leading-none",children:$?"Hazrlanyor":Qe?"Ykleniyor %".concat(Math.round($t*100)):g==="cross"?"Polit At":d?"Fast At":"Polit At"}),e.jsx("div",{className:"text-xs font-semibold opacity-90 mt-1",children:Xt||(d?"Fast paylam":"Polit paylam")}),Qe?e.jsx("div",{className:"mt-3 w-full h-2 rounded-full bg-white/20 overflow-hidden",children:e.jsx("div",{className:"h-full bg-white/90",style:{width:"".concat(Math.round($t*100),"%")}})}):null]})]}):null,u==="success"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-black text-gray-900",children:d?"Baaryla Fast attnz!":"Baaryla Polit attnz!"}),e.jsx("div",{className:"text-sm text-gray-700 mt-2",children:d?"sterseniz bu Fasti Polit olarak da yaynlayabilirsiniz!":"sterseniz bu Politi Fast olarak da yaynlayabilirsiniz!"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",disabled:Pe,onClick:()=>{if(d&&b!=="text"){f("cross"),c("desc");return}ba()},className:["rounded-3xl aspect-square flex flex-col items-center justify-center gap-2 text-white font-black",Z.btnClass].join(" "),children:[e.jsx("div",{className:"text-2xl",children:"EVET"}),e.jsx("div",{className:"text-sm font-black",children:d?"Polit At":"Fast At"})]}),e.jsx("button",{type:"button",disabled:Pe,onClick:Ft,className:"rounded-3xl aspect-square flex flex-col items-center justify-center gap-2 border-2 border-gray-300 bg-white hover:bg-gray-50 text-gray-900 font-black",children:e.jsx("div",{className:"text-2xl",children:"HAYIR"})})]})]}):null]})]})})})})},Hc=r=>JSON.stringify(r,null,2);async function Vc(r){const s=await fetch(r),l=await s.text().catch(()=>"");let i=null;try{i=l?JSON.parse(l):null}catch(d){i=null}return{ok:s.ok,status:s.status,statusText:s.statusText,text:l,json:i}}const eS=()=>{const[r,s]=m.useState(null),[l,i]=m.useState(null),[d,u]=m.useState(null),[c,g]=m.useState(null);m.useEffect(()=>{(async()=>(s(await Vc("/api/health")),i(await Vc("/api/parties")),u(await Vc("/api/users?limit=5")),g(await Vc("/api/posts?limit=5"))))()},[]);const f=Array.isArray(d==null?void 0:d.json)?d.json[0]:null;return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-6",children:[e.jsxs("div",{className:"card mb-4",children:[e.jsx("div",{className:"text-lg font-black text-gray-900 mb-1",children:"/test"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Bu sayfa, Vercel zerindeki /api endpointleri DBden veri ekebiliyor mu diye test eder."}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Origin: ",e.jsx("span",{className:"font-mono",children:typeof window<"u"?window.location.origin:"-"})]})]}),f&&e.jsxs("div",{className:"card mb-4 flex items-center gap-3",children:[e.jsx(Yt,{src:f.avatar_url,size:"56px",verified:za(f)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-bold truncate",children:f.full_name}),e.jsxs("div",{className:"text-xs text-gray-600 truncate",children:["@",f.username]}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:ms(f,!0)||"ye"})]}),f.avatar_url&&e.jsx("a",{className:"text-xs text-primary-blue hover:underline",href:f.avatar_url,target:"_blank",rel:"noreferrer",children:"Avatar linki"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-bold mb-2",children:"GET /api/health"}),e.jsx("pre",{className:"text-[11px] whitespace-pre-wrap break-words",children:Hc(r)})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-bold mb-2",children:"GET /api/parties"}),e.jsx("pre",{className:"text-[11px] whitespace-pre-wrap break-words",children:Hc(l)})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-bold mb-2",children:"GET /api/users?limit=5"}),e.jsx("pre",{className:"text-[11px] whitespace-pre-wrap break-words",children:Hc(d)})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"font-bold mb-2",children:"GET /api/posts?limit=5"}),e.jsx("pre",{className:"text-[11px] whitespace-pre-wrap break-words",children:Hc(c)})]})]})]})})},X0=()=>{const r=Qt(),[s,l]=m.useState([]),[i,d]=m.useState([]),[u,c]=m.useState([]),[g,f]=m.useState(0),[v,b]=m.useState(!1),[w,N]=m.useState(!0),k=m.useRef(null);m.useEffect(()=>{(async()=>{const A=(await re("/api/users?user_type=mp,party_official,media&limit=80&order=polit_score.desc").catch(()=>[])||[]).map(S=>({user_id:S.id,username:S.username,full_name:S.full_name,profile_image:S.avatar_url,story_count:Math.max(1,Math.min(6,Math.floor((S.post_count||1)/3)||1))}));l(A),d(A.map(S=>S.user_id).filter(Boolean))})()},[]);const _=m.useMemo(()=>(i||[]).slice(0,500).map(String).filter(Boolean).join(","),[i]),M=async(T=!1)=>{if(_&&!v&&!(!T&&!w)){b(!0);try{const A=T?0:g,S=await re("/api/posts?user_ids=".concat(encodeURIComponent(_),"&limit=20&offset=").concat(encodeURIComponent(A),"&order=created_at.desc")).catch(()=>[]),y=Array.isArray(S)?S:(S==null?void 0:S.data)||[],p=Array.isArray(y)?y:[];c(j=>T?p:[...j||[],...p]),f(A+p.length),N(p.length>=20)}finally{b(!1)}}};return m.useEffect(()=>{_&&(c([]),f(0),N(!0),M(!0))},[_]),m.useEffect(()=>{if(!k.current||!w)return;const T=k.current,A=new IntersectionObserver(S=>{S.some(y=>y.isIntersecting)&&M(!1)},{root:null,rootMargin:"600px",threshold:0});return A.observe(T),()=>A.disconnect()},[w,_,g,v]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-black text-gray-900",children:"PoliFest"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ksa ve hzl politik ierikler."})]}),e.jsx("button",{onClick:()=>r(-1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 font-semibold hover:bg-gray-50",children:"Geri"})]}),e.jsx("div",{className:"card",children:e.jsx(hh,{stories:s})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Ak"}),e.jsx("button",{type:"button",onClick:()=>M(!0),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-800 font-semibold hover:bg-gray-50",disabled:v,children:"Yenile"})]}),e.jsx("div",{className:"flex flex-col gap-3",children:u.map(T=>{var A;return e.jsx(Ts,{post:T,fullWidth:!0},(A=T.post_id)!=null?A:T.id)})}),v&&e.jsx("div",{className:"mt-4 text-center text-sm text-gray-600",children:"Ykleniyor"}),!v&&u.length===0&&e.jsx("div",{className:"mt-6 card text-sm text-gray-600",children:"Henz ak ierii bulunmuyor."}),!v&&!w&&u.length>0&&e.jsx("div",{className:"mt-4 text-center text-xs text-gray-500",children:"Hepsi bu kadar."}),e.jsx("div",{ref:k,className:"h-1"})]})]})})},J0=5e3,Q0=()=>{const r=Qt(),{usernameOrId:s}=Bn(),[l,i]=m.useState(null),[d,u]=m.useState([]),[c,g]=m.useState(0),f=m.useRef(null),v=m.useCallback(()=>r("/polifest"),[r]),b=d[c]||null,w=Math.max(d.length,1),N=_=>{g(M=>{const T=M+_;return T<0?0:T>=d.length?M:T})},k=m.useMemo(()=>b&&b.content_type==="video"&&b.media_duration?Math.max(2e3,b.media_duration*1e3):J0,[b]);return m.useEffect(()=>{(async()=>{const _=String(s||"").trim(),M=/^\d+$/.test(_)||/^[0-9a-fA-F-]{36}$/.test(_),T=M?await re("/api/users?id=".concat(encodeURIComponent(_))).catch(()=>null):await re("/api/users?username=".concat(encodeURIComponent(_))).catch(()=>null),A=T!=null&&T.data?T.data:T;i(A||null);const S=(A==null?void 0:A.id)||(M?_:null);if(!S)return;const y=await re("/api/posts?user_id=".concat(encodeURIComponent(S),"&limit=20&order=created_at.desc")).catch(()=>[]);u(Array.isArray(y)?y:[]),g(0)})()},[s]),m.useEffect(()=>{if(f.current&&clearTimeout(f.current),!!d.length)return f.current=setTimeout(()=>{c<d.length-1?g(c+1):v()},k),()=>{f.current&&clearTimeout(f.current)}},[c,d.length,k,v]),e.jsxs("div",{className:"fixed inset-0 bg-black text-white z-50",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 px-3 pt-3",children:e.jsx("div",{className:"flex gap-1",children:Array.from({length:w}).map((_,M)=>e.jsx("div",{className:"h-1 flex-1 bg-white/25 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-white ".concat(M<c?"w-full":M===c?"w-1/2":"w-0")})},M))})}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 px-3 pt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(Yt,{src:l==null?void 0:l.avatar_url,size:"36px",verified:za(l)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-bold truncate",children:(l==null?void 0:l.full_name)||"PoliFest"}),e.jsxs("div",{className:"text-xs text-white/70 truncate",children:["@",(l==null?void 0:l.username)||"-"]})]})]}),e.jsx("button",{onClick:v,className:"p-2 rounded-full bg-white/10 hover:bg-white/20",children:e.jsx(xs,{className:"w-8 h-8"})})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center px-4 pt-20 pb-16",children:b?b.content_type==="image"?e.jsx("img",{src:Array.isArray(b.media_urls)?b.media_urls[0]:b.media_urls,alt:"",className:"max-h-full max-w-full object-contain"}):b.content_type==="video"?e.jsx("img",{src:b.thumbnail_url||(Array.isArray(b.media_urls)?b.media_urls[0]:b.media_urls),alt:"",className:"max-h-full max-w-full object-contain"}):e.jsx("div",{className:"max-w-xl w-full",children:e.jsx("div",{className:"text-lg leading-relaxed whitespace-pre-wrap",children:b.content_text||b.content})}):e.jsx("div",{className:"text-white/70",children:"erik bulunamad."})}),e.jsx("button",{onClick:()=>N(-1),className:"absolute left-0 top-0 bottom-0 w-1/3 flex items-center justify-start px-2 text-white/60 hover:text-white","aria-label":"nceki",children:e.jsx("span",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-black/25 backdrop-blur-sm border border-white/20",children:e.jsx(ih,{className:"w-14 h-14"})})}),e.jsx("button",{onClick:()=>N(1),className:"absolute right-0 top-0 bottom-0 w-1/3 flex items-center justify-end px-2 text-white/60 hover:text-white","aria-label":"Sonraki",children:e.jsx("span",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-black/25 backdrop-blur-sm border border-white/20",children:e.jsx(Nr,{className:"w-14 h-14"})})})]})},Z0={all:{title:"HT PAYLAIMLAR",subtitle:"Tm kategorilerden (Polit Puana gre)",queryCategory:null},mps:{title:"VEKLLER GNDEM",subtitle:"Milletvekilleri (Polit Puana gre)",queryCategory:"mps"},organization:{title:"TEKLAT GNDEM",subtitle:"Tekilat (Polit Puana gre)",queryCategory:"organization"},citizens:{title:"VATANDA GNDEM",subtitle:"Vatanda (Polit Puana gre)",queryCategory:"citizens"},media:{title:"MEDYA GNDEM",subtitle:"Medya (Polit Puana gre)",queryCategory:"media"},experience:{title:"DENEYM",subtitle:"Deneyim (Polit Puana gre)",queryCategory:"experience"}},tS=()=>{const{categoryId:r}=Bn(),s=Qt(),l=zr(),i=Z0[String(r||"all")]||Z0.all,[d,u]=m.useState([]),[c,g]=m.useState(!0),[f,v]=m.useState(!1),[b,w]=m.useState(!1),[N,k]=m.useState(!0),[_,M]=m.useState(0),T=m.useRef(null),A=m.useRef(null),S=m.useRef(!1),y=24,p=m.useMemo(()=>"cat:".concat(String(r||"all")),[r]),j=m.useMemo(()=>wr(p,{maxAgeMs:10*6e4}),[p]);m.useEffect(()=>{if(j)try{Array.isArray(j.posts)&&u(j.posts),typeof j.offset=="number"&&M(Number(j.offset||0)||0),typeof j.hasMore=="boolean"&&k(!!j.hasMore),g(!1),v(!0),l==="POP"&&typeof j.scrollY=="number"&&setTimeout(()=>{try{window.scrollTo(0,Math.max(0,Number(j.scrollY)||0))}catch(O){}},0)}catch(O){}},[p]);const E=m.useMemo(()=>{const O={limit:y,offset:0,order:"polit_score.desc"};return i.queryCategory&&(O.category=i.queryCategory),O},[i.queryCategory]),C=async({nextOffset:O,replace:P})=>{const L={...E,offset:O},ce=await ma.posts.getAll(L).catch(()=>[]),Z=(Array.isArray(ce)?ce:[]).filter(ie=>!(ie!=null&&ie.is_trending));u(ie=>P?Z:[...ie||[],...Z]),k(Z.length>=y),M(O+Z.length)};return m.useEffect(()=>{let O=!1;return(async()=>{!!j?v(!0):g(!0),u([]),k(!0),M(0);try{O||await C({nextOffset:0,replace:!0})}finally{O||g(!1),O||v(!1)}})(),()=>{O=!0}},[E,r]),m.useEffect(()=>{const O=()=>{cn(p,{posts:d,offset:_,hasMore:N,scrollY:typeof window<"u"?window.scrollY:0})};return()=>O()},[p,d,_,N]),m.useEffect(()=>{if(T.current)return A.current&&A.current.disconnect(),A.current=new IntersectionObserver(O=>{const P=O==null?void 0:O[0];P!=null&&P.isIntersecting&&(S.current||c||b||N&&(async()=>{S.current=!0,w(!0);try{await C({nextOffset:_,replace:!1})}finally{w(!1),S.current=!1}})())},{root:null,rootMargin:"250px",threshold:.01}),A.current.observe(T.current),()=>{var O,P;return(P=(O=A.current)==null?void 0:O.disconnect)==null?void 0:P.call(O)}},[_,N,c,b]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-8",children:[e.jsxs("div",{className:"hidden sm:flex items-center justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-black text-gray-900 break-words",children:i.title}),i.subtitle?e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:i.subtitle}):null]}),e.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-900 font-black",onClick:()=>s("/"),children:"Ana Sayfa"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(O=>{var P;return e.jsx(Ts,{post:O,fullWidth:!0},(P=O.post_id)!=null?P:O.id)})}),c&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Ykleniyor"}),!c&&d.length===0&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Henz paylam yok."}),e.jsx("div",{ref:T,className:"h-8"}),b&&e.jsx("div",{className:"mt-2 text-center text-sm text-gray-600",children:"Daha fazla ykleniyor"}),!c&&!b&&!N&&d.length>0&&e.jsx("div",{className:"mt-6 text-center text-xs text-gray-500",children:"Hepsi bu kadar."})]})})},aS=()=>{const r=Qt(),s=zr(),[l,i]=m.useState([]),[d,u]=m.useState(!0),[c,g]=m.useState(!1),[f,v]=m.useState(!1),[b,w]=m.useState(!0),[N,k]=m.useState(0),_=m.useRef(null),M=m.useRef(null),T=m.useRef(!1),A=24,S=m.useMemo(()=>"noagenda",[]),y=m.useMemo(()=>wr(S,{maxAgeMs:10*6e4}),[S]);m.useEffect(()=>{if(y)try{Array.isArray(y.posts)&&i(y.posts),typeof y.offset=="number"&&k(Number(y.offset||0)||0),typeof y.hasMore=="boolean"&&w(!!y.hasMore),u(!1),g(!0),s==="POP"&&typeof y.scrollY=="number"&&setTimeout(()=>{try{window.scrollTo(0,Math.max(0,Number(y.scrollY)||0))}catch(j){}},0)}catch(j){}},[S]);const p=async({nextOffset:j,replace:E})=>{const C=await ma.posts.getAll({agenda_tag:"__null__",limit:A,offset:j,order:"polit_score.desc"}).catch(()=>[]),O=Array.isArray(C)?C:[];i(P=>E?O:[...P||[],...O]),w(O.length>=A),k(j+O.length)};return m.useEffect(()=>{let j=!1;return(async()=>{!!y?g(!0):(u(!0),i([]),w(!0),k(0));try{j||await p({nextOffset:0,replace:!0})}finally{j||u(!1),j||g(!1)}})(),()=>{j=!0}},[]),m.useEffect(()=>{if(_.current)return M.current&&M.current.disconnect(),M.current=new IntersectionObserver(j=>{const E=j==null?void 0:j[0];E!=null&&E.isIntersecting&&(T.current||d||f||b&&(async()=>{T.current=!0,v(!0);try{await p({nextOffset:N,replace:!1})}finally{v(!1),T.current=!1}})())},{root:null,rootMargin:"250px",threshold:.01}),M.current.observe(_.current),()=>{var j,E;return(E=(j=M.current)==null?void 0:j.disconnect)==null?void 0:E.call(j)}},[N,b,d,f]),m.useEffect(()=>{const j=()=>{cn(S,{posts:l,offset:N,hasMore:b,scrollY:typeof window<"u"?window.scrollY:0})};return()=>j()},[S,l,N,b]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-black text-gray-900 break-words",children:"GNDEM DII POLTLER"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Gndem eklenmemi paylamlar (Polit Puana gre)"})]}),e.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-900 font-black",onClick:()=>r("/"),children:"Ana Sayfa"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(j=>{var E;return e.jsx(Ts,{post:j,fullWidth:!0},(E=j.post_id)!=null?E:j.id)})}),d&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Ykleniyor"}),!d&&l.length===0&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Henz paylam yok."}),e.jsx("div",{ref:_,className:"h-8"}),f&&e.jsx("div",{className:"mt-2 text-center text-sm text-gray-600",children:"Daha fazla ykleniyor"}),!d&&!f&&!b&&l.length>0&&e.jsx("div",{className:"mt-6 text-center text-xs text-gray-500",children:"Hepsi bu kadar."})]})})},sS=()=>{const r=Qt(),s=tr(),l=zr(),[i,d]=m.useState([]),[u,c]=m.useState([]),[g,f]=m.useState([]),[v,b]=m.useState(!0),[w,N]=m.useState(!1),[k,_]=m.useState(!1),[M,T]=m.useState(!0),[A,S]=m.useState(0),y=m.useRef(null),p=m.useRef(null),j=m.useRef(!1),E=120,C=m.useMemo(()=>{const G=new URLSearchParams(s.search||"");return String(G.get("mode")||"").trim()},[s.search]),O=C==="profiles",P=m.useMemo(()=>"hit:".concat(C||"posts"),[C]),L=m.useMemo(()=>wr(P,{maxAgeMs:10*6e4}),[P]);m.useEffect(()=>{if(L)try{Array.isArray(L.parties)&&d(L.parties),Array.isArray(L.pool)&&c(L.pool),Array.isArray(L.profiles)&&f(L.profiles),typeof L.offset=="number"&&S(Number(L.offset||0)||0),typeof L.hasMore=="boolean"&&T(!!L.hasMore),b(!1),N(!0),l==="POP"&&typeof L.scrollY=="number"&&setTimeout(()=>{try{window.scrollTo(0,Math.max(0,Number(L.scrollY)||0))}catch(G){}},0)}catch(G){}},[P]);const ce=m.useMemo(()=>new Map((i||[]).map(G=>[G.id,G])),[i]),Z=G=>{const D=Array.isArray(G)?G:G?[G]:[],$=B=>B.startsWith("/assets/posts/")||B==="/assets/default/post_image.jpg"||B==="/assets/default/post.jpg";return D.map(B=>String(B||"").trim()).filter(B=>B&&!$(B))},ie=(G,D=ce)=>{var $,B,Y,Q,q,I,V,Te,Ke,oe,je,fe;return{post_id:G.id,user_id:G.user_id,content_type:G.content_type||"text",content_text:(B=($=G.content_text)!=null?$:G.content)!=null?B:"",media_url:Z(G.media_urls),thumbnail_url:(Y=G.thumbnail_url)!=null?Y:null,media_duration:(Q=G.media_duration)!=null?Q:null,agenda_tag:(q=G.agenda_tag)!=null?q:null,polit_score:(I=G.polit_score)!=null?I:0,view_count:(V=G.view_count)!=null?V:0,like_count:(Te=G.like_count)!=null?Te:0,dislike_count:(Ke=G.dislike_count)!=null?Ke:0,comment_count:(oe=G.comment_count)!=null?oe:0,share_count:(je=G.share_count)!=null?je:0,is_featured:(fe=G.is_featured)!=null?fe:!1,created_at:G.created_at,source_url:G.source_url,category:G.category,user:G.user?{...G.user,user_id:G.user.id,profile_image:G.user.avatar_url,verification_badge:!1,party_id:G.user.party_id,party:G.user.party_id&&D.get(G.user.party_id)?{party_id:D.get(G.user.party_id).id,party_slug:D.get(G.user.party_id).slug,party_short_name:D.get(G.user.party_id).short_name,party_logo:D.get(G.user.party_id).logo_url,party_color:D.get(G.user.party_id).color}:null}:null}},le=(G=[],D=72)=>{var Te,Ke,oe,je,fe,ke;const $=Date.now(),B=(Array.isArray(G)?G:[]).filter($e=>{var Le;return $e&&((Le=$e.post_id)!=null?Le:$e.id)}).map($e=>{const Le=new Date($e.created_at||0).getTime(),Qe=1/(1+Math.max(0,($-(Number.isFinite(Le)?Le:$))/36e5)/12),It=(Number($e.like_count||0)||0)+(Number($e.comment_count||0)||0)*2+(Number($e.share_count||0)||0)*5+(Number($e.view_count||0)||0)*.05,$t=Math.log1p(Math.max(0,It)),Xt=(Number($e.polit_score||0)||0)*(.75+.25*Qe)+$t*12;return{p:$e,score:Xt,recency:Qe}}).sort(($e,Le)=>Le.score-$e.score||Le.recency-$e.recency),Y=[],Q=new Map,q=new Map;let I="";const V=3;for(const $e of B){if(Y.length>=D)break;const Le=$e.p,St=String(Le.content_type||"text"),Qe=String(((Te=Le==null?void 0:Le.user)==null?void 0:Te.user_type)||""),It=String((ke=(fe=(oe=Le.user_id)!=null?oe:(Ke=Le==null?void 0:Le.user)==null?void 0:Ke.user_id)!=null?fe:(je=Le==null?void 0:Le.user)==null?void 0:je.id)!=null?ke:"");It&&(Q.get(It)||0)>=V||Qe&&(q.get(Qe)||0)>=Math.ceil(D*.5)||(St==="text"||St==="audio")&&St===I||(Y.push(Le),I=St,It&&Q.set(It,(Q.get(It)||0)+1),Qe&&q.set(Qe,(q.get(Qe)||0)+1))}return ho(Y,!0).slice(0,D)},ye=m.useMemo(()=>le(u,Math.max(36,u.length>0?72:0)),[u]),z=async({nextOffset:G,replace:D}={})=>{const B=await ma.users.getAll({limit:60,offset:G!=null?G:0,order:"polit_score.desc"}).catch(()=>[]),Y=Array.isArray(B)?B:Array.isArray(B==null?void 0:B.data)?B.data:[];f(Q=>{var Te,Ke;const q=D?[]:Array.isArray(Q)?Q:[],I=new Set(q.map(oe=>{var je,fe;return String((fe=(je=oe==null?void 0:oe.id)!=null?je:oe==null?void 0:oe.user_id)!=null?fe:"")})),V=q.slice();for(const oe of Y){const je=String((Ke=(Te=oe==null?void 0:oe.id)!=null?Te:oe==null?void 0:oe.user_id)!=null?Ke:"");!je||I.has(je)||(I.add(je),V.push(oe))}return V}),T(Y.length>=60),S((G!=null?G:0)+Y.length)},X=async({nextOffset:G,replace:D,pm:$})=>{const B=await ma.posts.getAll({limit:E,offset:G,order:"created_at.desc"}).catch(()=>[]),Y=(Array.isArray(B)?B:[]).filter(I=>!(I!=null&&I.is_trending)),Q=$ instanceof Map?$:ce,q=Y.map(I=>ie(I,Q));c(I=>{var oe,je;const V=D?[]:Array.isArray(I)?I:[],Te=new Set(V.map(fe=>{var ke,$e;return String(($e=(ke=fe==null?void 0:fe.post_id)!=null?ke:fe==null?void 0:fe.id)!=null?$e:"")})),Ke=V.slice();for(const fe of q){const ke=String((je=(oe=fe==null?void 0:fe.post_id)!=null?oe:fe==null?void 0:fe.id)!=null?je:"");!ke||Te.has(ke)||(Te.add(ke),Ke.push(fe))}return Ke}),T(Y.length>=E),S(G+Y.length)};return m.useEffect(()=>{let G=!1;return(async()=>{!!L?N(!0):b(!0),c([]),f([]),T(!0),S(0);try{if(O)G||await z({nextOffset:0,replace:!0});else{const $=await ma.parties.getAll().catch(()=>[]),B=Array.isArray($)?$:[],Y=new Map((B||[]).map(Q=>[Q.id,Q]));G||d(B),G||await X({nextOffset:0,replace:!0,pm:Y})}}catch($){G||d([]),O?G||await z({nextOffset:0,replace:!0}):G||await X({nextOffset:0,replace:!0,pm:new Map})}finally{G||b(!1),G||N(!1)}})(),()=>{G=!0}},[O]),m.useEffect(()=>{const G=()=>{cn(P,{parties:i,pool:u,profiles:g,offset:A,hasMore:M,scrollY:typeof window<"u"?window.scrollY:0})};return()=>G()},[P,i,u,g,A,M]),m.useEffect(()=>{if(y.current)return p.current&&p.current.disconnect(),p.current=new IntersectionObserver(G=>{const D=G==null?void 0:G[0];D!=null&&D.isIntersecting&&(j.current||v||k||M&&(async()=>{j.current=!0,_(!0);try{O?await z({nextOffset:A,replace:!1}):await X({nextOffset:A,replace:!1})}finally{_(!1),j.current=!1}})())},{root:null,rootMargin:"350px",threshold:.01}),p.current.observe(y.current),()=>{var G,D;return(D=(G=p.current)==null?void 0:G.disconnect)==null?void 0:D.call(G)}},[A,M,v,k,O]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-8",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-6",children:[e.jsx("div",{className:"min-w-0",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-black text-gray-900 break-words",children:"KEFET PROFLLER"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"En yksek Polit Puanl profiller"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-black text-gray-900 break-words",children:"HT PAYLAIMLAR"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Algoritmik seim (Polit Puan + etkileim + tazelik)"})]})}),O?e.jsx(Tt,{to:"/hit",className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-900 font-black",children:"Hit Politler"}):e.jsx(Tt,{to:"/hit?mode=profiles",className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-900 font-black",children:"Profilleri Kefet"})]}),O?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:(g||[]).map(G=>{var Q,q;const D=String((q=(Q=G==null?void 0:G.id)!=null?Q:G==null?void 0:G.user_id)!=null?q:"");if(!D)return null;const $=String((G==null?void 0:G.full_name)||(G==null?void 0:G.username)||"Kullanc").trim(),B=G!=null&&G.username?"@".concat(G.username):null,Y=as({...G||{},user_id:D});return e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yt,{src:(G==null?void 0:G.avatar_url)||(G==null?void 0:G.profile_image),size:"56px",verified:za(G)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-black text-gray-900 truncate",children:$}),B?e.jsx("div",{className:"text-sm text-gray-600 truncate",children:B}):null,e.jsxs("div",{className:"mt-2 text-sm text-gray-700 font-semibold",children:["Polit Puan:"," ",e.jsx("span",{className:"font-black text-primary-blue",children:Ra((G==null?void 0:G.polit_score)||0)})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl bg-primary-blue text-white font-black hover:opacity-90",onClick:()=>r(Y),children:"Profil"})})]})},D)})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ye.map(G=>{var D;return e.jsx(Ts,{post:G,fullWidth:!0},(D=G.post_id)!=null?D:G.id)})}),v&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Ykleniyor"}),!v&&O&&g.length===0&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Henz profil yok."}),!v&&!O&&ye.length===0&&e.jsx("div",{className:"mt-6 text-center text-sm text-gray-600",children:"Henz paylam yok."}),e.jsx("div",{ref:y,className:"h-8"}),k&&e.jsx("div",{className:"mt-2 text-center text-sm text-gray-600",children:"Daha fazla ykleniyor"}),!v&&!k&&!M&&(O?g.length>0:ye.length>0)&&e.jsx("div",{className:"mt-6 text-center text-xs text-gray-500",children:"Hepsi bu kadar."})]})})},rS=()=>{const r=Qt(),[s,l]=m.useState([]),[i,d]=m.useState(!0),u=1440*60*1e3,c=g=>{const f=Date.now();return(Array.isArray(g)?g:[]).filter(v=>{const b=new Date((v==null?void 0:v.latest_created_at)||0).getTime();return!Number.isFinite(b)||b<=0?!1:f-b<u})};return m.useEffect(()=>{let g=!1;return(async()=>{d(!0);try{const f=await re("/api/fast?limit=80").catch(()=>null),v=(f==null?void 0:f.data)||[];g||l(c(v))}finally{g||d(!1)}})(),()=>{g=!0}},[]),m.useEffect(()=>{let g=!1;const f=async()=>{try{if(document!=null&&document.hidden)return;const b=await re("/api/fast?limit=80").catch(()=>null),w=(b==null?void 0:b.data)||[];g||l(c(w))}catch(b){}};f();const v=setInterval(f,6e4);return()=>{g=!0,clearInterval(v)}},[]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-white to-red-50",children:e.jsxs("div",{className:"container-main py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-black text-gray-900",children:"Fast"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Takip ettiklerinin 24 saatlik hzl paylamlar."})]}),e.jsx("button",{onClick:()=>r(-1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 font-semibold hover:bg-gray-50",children:"Geri"})]}),e.jsx("div",{className:"card",children:e.jsx(hh,{stories:s,mode:"fast"})}),i?e.jsx("div",{className:"mt-4 text-center text-sm text-gray-600",children:"Ykleniyor"}):null,!i&&s.length===0?e.jsxs("div",{className:"mt-6 card text-sm text-gray-700",children:["u an takip ettiin kiilerden aktif Fast yok. ",e.jsx("button",{className:"text-rose-600 font-black hover:underline",onClick:()=>r("/fast-at"),children:"Hemen Fast At"})]}):null]})})},W0=3e3,zm=120,uo=50,Pm=80,nS=()=>{const r=Qt(),s=tr(),{usernameOrId:l}=Bn(),{user:i}=Pa(),[d,u]=m.useState([]),[c,g]=m.useState(0),[f,v]=m.useState(null),[b,w]=m.useState([]),[N,k]=m.useState(0),[_,M]=m.useState({}),[T,A]=m.useState({}),[S,y]=m.useState({}),[p,j]=m.useState([]),[E,C]=m.useState(!1),[O,P]=m.useState(""),L=m.useRef(null),ce=m.useRef(null),Z=m.useRef(null),ie=m.useRef(null),le=m.useRef({active:!1,pointerId:null,startX:0,startY:0,lastX:0,lastY:0,moved:!1,zoneDir:0,pausedByHold:!1}),[ye,z]=m.useState(!1),[X,G]=m.useState(0),[D,$]=m.useState(!1),[B,Y]=m.useState(()=>{try{return localStorage.getItem("fast_sound_muted")==="true"}catch(H){return!1}}),[Q,q]=m.useState(0),[I,V]=m.useState(0),[Te,Ke]=m.useState({w:0,h:0}),oe=m.useRef(null),je=m.useRef(0),fe=m.useRef(new Map),ke=m.useRef(new Map),$e=m.useRef(null),[Le,St]=m.useState(!1),[Qe,It]=m.useState(!1),[$t,Zt]=m.useState({x:0,o:1}),[Xt,ya]=m.useState({w:0,h:0}),[kt,de]=m.useState({w:0,h:0}),Ie=m.useCallback(()=>r("/"),[r]),Pe=m.useCallback(()=>{try{ie.current&&clearTimeout(ie.current)}catch(H){}r(as(f||{}))},[r,f]),F=b[N]||null,nt=m.useMemo(()=>c>0?d[c-1]:null,[c,d]),ee=m.useMemo(()=>c<d.length-1?d[c+1]:null,[c,d.length,d]),Re=m.useMemo(()=>{const H=String((i==null?void 0:i.id)||""),J=String((f==null?void 0:f.id)||(f==null?void 0:f.user_id)||"");return!!H&&!!J&&H===J},[i==null?void 0:i.id,f==null?void 0:f.id,f==null?void 0:f.user_id]),De=m.useMemo(()=>{const H=(F==null?void 0:F.id)!=null?String(F.id):"";return H?_&&Object.prototype.hasOwnProperty.call(_,H)?!!_[H]:!!(F!=null&&F.liked_by_me):!1},[F,_]),We=m.useMemo(()=>{const H=(F==null?void 0:F.id)!=null?String(F.id):"";return H?T&&Object.prototype.hasOwnProperty.call(T,H)?Number(T[H]||0)||0:Number((F==null?void 0:F.like_count)||0)||0:0},[F,T]),Ye=Math.max(b.length,1),ct=m.useRef(null),Ne=m.useRef(null),Xe=m.useMemo(()=>String(l||"").trim(),[l]);m.useEffect(()=>{const H=$e.current;if(!H)return;const J=()=>{try{const qe=H.getBoundingClientRect();ya({w:Math.max(0,qe.width||0),h:Math.max(0,qe.height||0)})}catch(qe){}};J();let xe=null;try{xe=new ResizeObserver(()=>J()),xe.observe(H)}catch(qe){window.addEventListener("resize",J)}return()=>{try{xe&&xe.disconnect()}catch(qe){}try{window.removeEventListener("resize",J)}catch(qe){}}},[]);const ut=H=>({id:(H==null?void 0:H.id)||(H==null?void 0:H.user_id),user_id:(H==null?void 0:H.user_id)||(H==null?void 0:H.id),username:H==null?void 0:H.username,full_name:H==null?void 0:H.full_name,avatar_url:(H==null?void 0:H.avatar_url)||(H==null?void 0:H.profile_image),profile_image:(H==null?void 0:H.profile_image)||(H==null?void 0:H.avatar_url),story_count:H==null?void 0:H.story_count,latest_created_at:H==null?void 0:H.latest_created_at}),ue=m.useCallback(async H=>{const J=String(H||"").trim();if(!J)return{user:null,items:[]};const xe=fe.current.get(J);if(xe&&Date.now()-Number(xe.ts||0)<6e4)return{user:xe.user,items:xe.items};if(ke.current.has(J))try{return await ke.current.get(J)}catch(ot){}const qe=(async()=>{var yt;const ot=await re("/api/fast/".concat(encodeURIComponent(J))).catch(()=>null),dt=(ot==null?void 0:ot.data)||[],Ct=(Array.isArray(dt)?dt:[]).filter(Wt=>Wt&&(Wt.id!=null||Wt.post_id!=null)).filter((Wt,gs,Pr)=>{var Rs,_r;const Cs=String((_r=(Rs=Wt==null?void 0:Wt.id)!=null?Rs:Wt==null?void 0:Wt.post_id)!=null?_r:"").trim();return Cs?Pr.findIndex(Os=>{var Sr,xr;return String((xr=(Sr=Os==null?void 0:Os.id)!=null?Sr:Os==null?void 0:Os.post_id)!=null?xr:"").trim()===Cs})===gs:!1}),oa=ut((d==null?void 0:d.find(Wt=>String((Wt==null?void 0:Wt.key)||"")===J))||{})||null,pa=((yt=Ct==null?void 0:Ct[0])==null?void 0:yt.user)||null||oa||null;return fe.current.set(J,{ts:Date.now(),items:Ct,user:pa}),{user:pa,items:Ct}})();ke.current.set(J,qe);try{return await qe}finally{ke.current.delete(J)}},[d]),rt=m.useCallback(H=>{const J=String(H||"").trim();J&&ue(J).catch(()=>null)},[ue]),st=m.useCallback((H,{replace:J=!0}={})=>{var dt;const xe=Array.isArray(d)?d:[],qe=Math.max(0,Math.min(xe.length-1,Number(H)||0)),ot=String(((dt=xe==null?void 0:xe[qe])==null?void 0:dt.key)||"").trim();ot&&(r("/fast/".concat(encodeURIComponent(ot)),{replace:J,state:{fastQueue:xe,fastStartIndex:qe,fastStartKey:ot}}),g(qe))},[r,d]),et=m.useCallback(H=>{const J=c+H;if(J<0){Ie();return}if(J>=(d||[]).length){Ie();return}oe.current=H<0?"last":"first",je.current=H,st(J,{replace:!0})},[Ie,st,d,c]),Ut=m.useCallback(H=>{k(J=>{const xe=J+H;return xe<0?c>0?(oe.current="last",je.current=-1,st(c-1,{replace:!0}),J):(Ie(),J):xe>=b.length?c<(d||[]).length-1?(oe.current="first",je.current=1,st(c+1,{replace:!0}),J):(Ie(),J):xe})},[Ie,b.length,st,d,c]),Ot=m.useCallback(async(H,J)=>{if(Qe||Le)return;const xe=Number(H||0);xe&&(It(!0),Zt({x:-xe*28,o:.25}),await new Promise(qe=>setTimeout(qe,90)),J==null||J(),Zt({x:xe*28,o:.25}),requestAnimationFrame(()=>Zt({x:0,o:1})),await new Promise(qe=>setTimeout(qe,180)),It(!1))},[Le,Qe]),Se=m.useMemo(()=>F&&(F.content_type==="audio"||F.content_type==="video")?0:W0,[F]);m.useEffect(()=>{var Ct,oa,Da;const H=(Ct=s==null?void 0:s.state)==null?void 0:Ct.fastQueue,J=(oa=s==null?void 0:s.state)==null?void 0:oa.fastStartIndex,xe=(Da=s==null?void 0:s.state)==null?void 0:Da.fastStartKey,qe=pa=>(Array.isArray(pa)?pa:[]).map(yt=>({key:String((yt==null?void 0:yt.key)||(yt==null?void 0:yt.username)||(yt==null?void 0:yt.user_id)||"").trim(),user_id:yt==null?void 0:yt.user_id,username:yt==null?void 0:yt.username,full_name:yt==null?void 0:yt.full_name,avatar_url:(yt==null?void 0:yt.avatar_url)||(yt==null?void 0:yt.profile_image),profile_image:(yt==null?void 0:yt.profile_image)||(yt==null?void 0:yt.avatar_url),story_count:yt==null?void 0:yt.story_count,latest_created_at:yt==null?void 0:yt.latest_created_at})).filter(yt=>yt.key);let ot=qe(H);if(!ot.length)try{const pa=sessionStorage.getItem("fast_queue_v1"),yt=pa?JSON.parse(pa):null;yt&&Date.now()-Number(yt.ts||0)<30*6e4&&(ot=qe(yt.queue))}catch(pa){}!ot.length&&Xe&&(ot=[{key:Xe}]);const dt=ot.findIndex(pa=>pa.key===Xe||xe&&pa.key===xe),Et=Number.isFinite(Number(J))?Math.max(0,Number(J)):dt>=0?dt:0;u(ot),g(Math.min(Math.max(0,Et),Math.max(ot.length-1,0)))},[s==null?void 0:s.state,Xe]),m.useEffect(()=>{var H;if(!(!d||d.length===0))try{sessionStorage.setItem("fast_queue_v1",JSON.stringify({ts:Date.now(),queue:d,startKey:String(((H=d==null?void 0:d[c])==null?void 0:H.key)||"").trim(),startIndex:c}))}catch(J){}},[d,c]),m.useEffect(()=>{let H=!1;return(async()=>{var qe;const J=String(((qe=d==null?void 0:d[c])==null?void 0:qe.key)||Xe||"").trim();if(!J)return;const xe=fe.current.get(J);if(xe&&!H){v(xe.user||(d==null?void 0:d[c])||null),w(Array.isArray(xe.items)?xe.items:[]);const ot=oe.current;oe.current=null,je.current=0,Array.isArray(xe.items)&&xe.items.length&&k(ot==="last"?Math.max(0,xe.items.length-1):0)}$(!1),G(0),z(!1),St(!0);try{const{user:ot,items:dt}=await ue(J);if(H)return;v(ot||(d==null?void 0:d[c])||null),w(dt);const Et=oe.current;if(oe.current=null,je.current=0,dt.length===0){k(0),Ie();return}k(Et==="last"?Math.max(0,dt.length-1):0);try{const Ct={};for(const oa of dt){const Da=(oa==null?void 0:oa.id)!=null?String(oa.id):"";Da&&(Ct[Da]=Number((oa==null?void 0:oa.like_count)||0)||0)}A(Ct)}catch(Ct){A({})}}catch(ot){if(H)return;v((d==null?void 0:d[c])||null),w([]),k(0)}finally{H||St(!1)}})(),()=>{H=!0}},[Ie,ue,d,Xe,c]),m.useEffect(()=>{var xe,qe;const H=c>0?(xe=d==null?void 0:d[c-1])==null?void 0:xe.key:null,J=c<((d==null?void 0:d.length)||0)-1?(qe=d==null?void 0:d[c+1])==null?void 0:qe.key:null;H&&rt(H),J&&rt(J)},[rt,d,c]),m.useEffect(()=>{try{localStorage.setItem("fast_sound_muted",String(B))}catch(H){}},[B]),m.useEffect(()=>{if(ce.current&&clearTimeout(ce.current),Z.current&&cancelAnimationFrame(Z.current),G(0),!b.length||!Se||ye)return;const H=performance.now(),J=xe=>{const qe=xe-H,ot=Math.max(0,Math.min(1,qe/Se));if(G(ot),ot>=1){Ot(1,()=>Ut(1));return}Z.current=requestAnimationFrame(J)};return Z.current=requestAnimationFrame(J),ce.current=setTimeout(()=>Ot(1,()=>Ut(1)),Se+30),()=>{ce.current&&clearTimeout(ce.current),Z.current&&cancelAnimationFrame(Z.current)}},[Ot,F==null?void 0:F.id,Se,Ut,ye,b.length]);const gt=H=>{var xe,qe;const J=(qe=(xe=H==null?void 0:H.media_urls)!=null?xe:H==null?void 0:H.media_url)!=null?qe:[];return Array.isArray(J)?J[0]:J},Bt=m.useMemo(()=>F?String(gt(F)||""):"",[F]),jt=m.useMemo(()=>{if(!(F!=null&&F.id))return!1;const H=String((F==null?void 0:F.user_id)||"").trim(),J=String((i==null?void 0:i.id)||(i==null?void 0:i.user_id)||"").trim();return!!H&&!!J&&H===J},[F==null?void 0:F.id,F==null?void 0:F.user_id,i==null?void 0:i.id,i==null?void 0:i.user_id]),Vt=m.useCallback(async()=>{if(!(!(F!=null&&F.id)||!jt||!window.confirm("Bu Fast silinsin mi?")))try{await Ma.delete(String(F.id)),ra.success("Fast silindi."),w(J=>Array.isArray(J)?J.filter(xe=>String((xe==null?void 0:xe.id)||"")!==String(F.id)):[]),k(J=>Math.max(0,J-1)),setTimeout(()=>{try{(b||[]).filter(xe=>String((xe==null?void 0:xe.id)||"")!==String(F.id)).length===0&&et(1)}catch(J){}},0)}catch(J){ra.error(String((J==null?void 0:J.message)||"Fast silinemedi."))}},[jt,F==null?void 0:F.id,et,b,w,k]),ia=m.useCallback(async()=>{var ot;if(!(F!=null&&F.id))return;if(!(i!=null&&i.id)){r("/login-new");return}const H=String(F.id),J=!!(_&&_[H]),xe=Number(T&&Object.prototype.hasOwnProperty.call(T,H)?T[H]:F==null?void 0:F.like_count),qe=Number.isFinite(xe)?xe:0;J||y(dt=>({...dt||{},[H]:Number((dt||{})[H]||0)+1})),M(dt=>({...dt||{},[H]:!J})),A(dt=>({...dt||{},[H]:Math.max(0,qe+(J?-1:1))}));try{const dt=await Ma.like(H).catch(()=>null),Et=String((dt==null?void 0:dt.action)||((ot=dt==null?void 0:dt.data)==null?void 0:ot.action)||"").toLowerCase();Et==="liked"?(J&&y(Ct=>({...Ct||{},[H]:Number((Ct||{})[H]||0)+1})),M(Ct=>({...Ct||{},[H]:!0})),A(Ct=>({...Ct||{},[H]:Math.max(0,qe+1)}))):Et==="unliked"&&(M(Ct=>({...Ct||{},[H]:!1})),A(Ct=>({...Ct||{},[H]:Math.max(0,qe-1)})))}catch(dt){M(Et=>({...Et||{},[H]:J})),A(Et=>({...Et||{},[H]:Math.max(0,qe)}))}},[F==null?void 0:F.id,F==null?void 0:F.like_count,_,T,i==null?void 0:i.id,r]);m.useEffect(()=>{var H,J,xe,qe;try{ct.current&&(ct.current.currentTime=0,(J=(H=ct.current).pause)==null||J.call(H)),Ne.current&&(Ne.current.currentTime=0,(qe=(xe=Ne.current).pause)==null||qe.call(xe))}catch(ot){}$(!1),q(0),V(0),Ke({w:0,h:0}),de({w:0,h:0})},[N]),m.useEffect(()=>{const H=Ne.current;if(!H)return;const J=()=>q(Number(H.currentTime||0)||0),xe=()=>{V(Number(H.duration||0)||0),Ke({w:Number(H.videoWidth||0)||0,h:Number(H.videoHeight||0)||0})};return H.addEventListener("timeupdate",J),H.addEventListener("loadedmetadata",xe),H.addEventListener("durationchange",xe),()=>{H.removeEventListener("timeupdate",J),H.removeEventListener("loadedmetadata",xe),H.removeEventListener("durationchange",xe)}},[F==null?void 0:F.id]),m.useEffect(()=>{F!=null&&F.id&&(Re||re("/api/fast/items/".concat(encodeURIComponent(String(F.id)),"/view"),{method:"POST"}).catch(()=>null))},[F==null?void 0:F.id,Re]),m.useEffect(()=>{if(!(F!=null&&F.id))return;if(!Re){j([]),P("");return}let H=!1;return(async()=>{var qe;let J=null;try{J=await re("/api/fast/items/".concat(encodeURIComponent(String(F.id)),"/viewers?limit=50"),{method:"GET"})}catch(ot){P(""),j([]);return}if(H)return;if(J!=null&&J.schemaMissing){P(String((J==null?void 0:J.requiredSql)||"")),j([]);return}const xe=((qe=J==null?void 0:J.data)==null?void 0:qe.data)||(J==null?void 0:J.data)||[];j(Array.isArray(xe)?xe:[]),P("")})(),()=>{H=!0}},[F==null?void 0:F.id,Re]),m.useEffect(()=>{if(!F||F.content_type!=="video")return;const H=Ne.current;if(!H)return;let J=!1;const xe=async()=>{try{H.muted=!!B,await H.play(),$(!1)}catch(qe){try{H.muted=!0,await H.play(),$(!1)}catch(ot){$(!0)}}};return setTimeout(()=>{J||xe()},50),()=>{J=!0}},[F,N,B]),m.useEffect(()=>{if(!F||F.content_type!=="audio")return;const H=ct.current;if(!H)return;let J=!1;const xe=async()=>{try{H.muted=!!B,await H.play(),$(!1)}catch(qe){$(!0)}};return setTimeout(()=>{J||xe()},50),()=>{J=!0}},[F,N,B]),m.useEffect(()=>{try{(F==null?void 0:F.content_type)==="video"&&Ne.current&&(Ne.current.muted=!!B),(F==null?void 0:F.content_type)==="audio"&&ct.current&&(ct.current.muted=!!B)}catch(H){}},[B,F==null?void 0:F.content_type]),m.useEffect(()=>{var H,J,xe,qe,ot,dt,Et,Ct;try{(F==null?void 0:F.content_type)==="video"&&Ne.current&&(ye?(J=(H=Ne.current).pause)==null||J.call(H):D||(qe=(xe=Ne.current).play)==null||qe.call(xe).catch(()=>null)),(F==null?void 0:F.content_type)==="audio"&&ct.current&&(ye?(dt=(ot=ct.current).pause)==null||dt.call(ot):D||(Ct=(Et=ct.current).play)==null||Ct.call(Et).catch(()=>null))}catch(oa){}},[F==null?void 0:F.id,F==null?void 0:F.content_type,ye,D]);const se=((Te==null?void 0:Te.w)>0&&(Te==null?void 0:Te.h)>0?Te.w/Te.h:0)>1.05,Je=((kt==null?void 0:kt.w)>0&&(kt==null?void 0:kt.h)>0?kt.w/kt.h:0)>1.05,Nt=m.useCallback(({mediaW:H,mediaH:J,mode:xe})=>{const qe=Number(H||0)||0,ot=Number(J||0)||0,dt=Number((Xt==null?void 0:Xt.w)||0)||0,Et=Number((Xt==null?void 0:Xt.h)||0)||0;if(!(qe>0&&ot>0&&dt>0&&Et>0))return 1;const Ct=Math.min(dt/qe,Et/ot),oa=Math.max(dt/qe,Et/ot);return Math.min(1,Math.max(0,xe==="contain"?Ct:oa))},[Xt==null?void 0:Xt.h,Xt==null?void 0:Xt.w]);m.useMemo(()=>Nt({mediaW:kt==null?void 0:kt.w,mediaH:kt==null?void 0:kt.h,mode:Je?"contain":"cover"}),[Nt,kt==null?void 0:kt.h,kt==null?void 0:kt.w,Je]),m.useMemo(()=>Nt({mediaW:Te==null?void 0:Te.w,mediaH:Te==null?void 0:Te.h,mode:se?"contain":"cover"}),[Nt,se,Te==null?void 0:Te.h,Te==null?void 0:Te.w]),m.useEffect(()=>{if(!F||F.content_type!=="video"&&F.content_type!=="audio")return;const H=F.content_type==="video"?Ne.current:ct.current;if(!H)return;const J=()=>{try{const qe=Number(H.duration||0),ot=Number(H.currentTime||0);qe>0&&G(Math.max(0,Math.min(1,ot/qe)))}catch(qe){}},xe=()=>Ot(1,()=>Ut(1));return H.addEventListener("timeupdate",J),H.addEventListener("ended",xe),()=>{H.removeEventListener("timeupdate",J),H.removeEventListener("ended",xe)}},[Ot,F==null?void 0:F.id,F==null?void 0:F.content_type,Ut]),m.useEffect(()=>{const H=J=>{const xe=String(J.key||"");if(xe==="Escape")return Ie();if(xe==="ArrowLeft")return Ot(-1,()=>Ut(-1));if(xe==="ArrowRight")return Ot(1,()=>Ut(1));(xe===" "||xe==="Spacebar")&&(J.preventDefault(),z(qe=>!qe))};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[Ot,Ie,Ut]);const Ve=()=>{le.current.active=!1,le.current.pointerId=null,le.current.moved=!1,le.current.zoneDir=0,le.current.pausedByHold=!1},Be=(H,J)=>{var qe,ot,dt,Et;try{if((ot=(qe=H==null?void 0:H.target)==null?void 0:qe.closest)!=null&&ot.call(qe,"button,a,input,textarea,select"))return}catch(Ct){}const xe=H==null?void 0:H.pointerId;if(xe!=null){le.current.active=!0,le.current.pointerId=xe,le.current.zoneDir=J,le.current.startX=H.clientX,le.current.startY=H.clientY,le.current.lastX=H.clientX,le.current.lastY=H.clientY,le.current.moved=!1,le.current.pausedByHold=!1;try{(Et=(dt=H.currentTarget)==null?void 0:dt.setPointerCapture)==null||Et.call(dt,xe)}catch(Ct){}ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{le.current.pausedByHold=!0,z(!0)},zm)}},mt=H=>{const J=le.current;if(!J.active||J.pointerId!=null&&H.pointerId!==J.pointerId)return;J.lastX=H.clientX,J.lastY=H.clientY;const xe=J.lastX-J.startX,qe=J.lastY-J.startY;!J.moved&&(Math.abs(xe)>8||Math.abs(qe)>8)&&(J.moved=!0,ie.current&&(clearTimeout(ie.current),ie.current=null),J.pausedByHold&&(J.pausedByHold=!1,z(!1)))},bt=H=>{const J=le.current;if(!J.active||J.pointerId!=null&&H.pointerId!==J.pointerId)return;ie.current&&(clearTimeout(ie.current),ie.current=null);const xe=(J.lastX||H.clientX)-J.startX,qe=(J.lastY||H.clientY)-J.startY,ot=Math.abs(xe),dt=Math.abs(qe);if(qe>Pm&&dt>ot*1.2){z(!1),Ve(),Ie();return}if(ot>uo&&ot>dt*1.2){z(!1),Ve(),xe<0?et(1):et(-1);return}if(!J.moved&&!J.pausedByHold&&!ye){const Et=J.zoneDir||0;Et&&Ot(Et,()=>Ut(Et))}J.pausedByHold&&z(!1),Ve()},lt=H=>{const J=le.current;J.active&&(J.pointerId!=null&&H.pointerId!==J.pointerId||(ie.current&&(clearTimeout(ie.current),ie.current=null),J.pausedByHold&&z(!1),Ve()))},At=({u:H,side:J})=>{if(!H)return null;const xe=J==="left"?"left-6":"right-6",qe=String((H==null?void 0:H.username)||"").trim()||String((H==null?void 0:H.full_name)||"").trim()||"Fast",ot=mo((H==null?void 0:H.avatar_url)||(H==null?void 0:H.profile_image)||""),dt=J==="left"?-1:1;return e.jsxs("button",{type:"button",onClick:()=>et(dt),className:["hidden md:flex absolute top-1/2 -translate-y-1/2",xe,"items-center gap-3","px-3 py-2 rounded-full","bg-black/35 hover:bg-black/55 border border-white/10 backdrop-blur-sm","shadow-[0_20px_80px_rgba(0,0,0,0.55)]","opacity-80 hover:opacity-100 transition-opacity"].join(" "),"aria-label":J==="left"?"nceki Fast":"Sonraki Fast",title:J==="left"?"nceki Fast":"Sonraki Fast",children:[e.jsx("div",{className:"w-14 h-14 rounded-full border border-white/20 bg-black/25 overflow-hidden flex-shrink-0",children:ot?e.jsx("img",{src:ot,alt:"",className:"w-full h-full object-cover"}):null}),e.jsxs("div",{className:"text-sm font-black text-white/90 max-w-[140px] truncate",children:["@",qe]})]})};return e.jsxs("div",{ref:L,className:"fixed inset-0 bg-black text-white z-50",children:[e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center px-3 md:px-8",children:[nt?e.jsx(At,{u:nt,side:"left"}):null,ee?e.jsx(At,{u:ee,side:"right"}):null,e.jsxs("div",{className:["relative","h-[calc(100dvh-36px)] md:h-[84vh]","aspect-[9/16]","rounded-[28px] overflow-hidden","bg-[#0b0b0b] border border-white/10 shadow-[0_30px_120px_rgba(0,0,0,0.75)]"].join(" "),children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 px-3 pt-[calc(env(safe-area-inset-top)+12px)] z-20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex gap-1.5 flex-1 min-w-0",children:Array.from({length:Ye}).map((H,J)=>{const xe=J<N?1:J===N?X:0;return e.jsx("div",{className:"h-[3px] flex-1 rounded-full overflow-hidden border border-sky-300/60",style:{borderStyle:"dashed"},"aria-label":"Fast ".concat(J+1,"/").concat(Ye),children:e.jsx("div",{className:"h-full bg-sky-400",style:{width:"".concat(Math.round(xe*100),"%")}})},J)})}),e.jsxs("div",{className:"text-[11px] font-black text-sky-200/90 flex-shrink-0",children:[N+1,"/",Ye]})]})}),e.jsxs("div",{className:"absolute top-0 left-0 right-0 px-3 pt-[calc(env(safe-area-inset-top)+24px)] z-20 flex items-center justify-between gap-3",children:[e.jsxs("button",{type:"button",onClick:Pe,className:"flex items-center gap-2 min-w-0 text-left",title:"Profile git",children:[e.jsx(Yt,{src:(f==null?void 0:f.avatar_url)||(f==null?void 0:f.profile_image),size:"34px",verified:za(f),ring:"fast"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-black truncate",children:(f==null?void 0:f.full_name)||"Fast"}),e.jsxs("div",{className:"text-xs text-white/70 truncate",children:["@",(f==null?void 0:f.username)||(f==null?void 0:f.id)||"-"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>Y(H=>!H),className:"w-10 h-10 rounded-full bg-black/35 hover:bg-black/55 border border-white/10 flex items-center justify-center","aria-label":B?"Sesi a":"Sesi kapat",title:B?"Sesi a":"Sesi kapat",children:B?e.jsx(oh,{className:"w-5 h-5"}):e.jsx(ch,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:Ie,className:"w-10 h-10 rounded-full bg-black/35 hover:bg-black/55 border border-white/10 flex items-center justify-center","aria-label":"Kapat",title:"Kapat",children:e.jsx(xs,{className:"w-5 h-5"})})]})]}),e.jsx("button",{type:"button",onClick:()=>Ot(-1,()=>Ut(-1)),className:"hidden md:flex absolute left-2 top-1/2 -translate-y-1/2 z-30 w-11 h-11 rounded-full bg-sky-500/20 hover:bg-sky-500/30 border border-sky-300/30 items-center justify-center backdrop-blur-sm","aria-label":"nceki Fast",title:"nceki Fast",children:e.jsx(ih,{className:"w-7 h-7 text-sky-200"})}),e.jsx("button",{type:"button",onClick:()=>Ot(1,()=>Ut(1)),className:"hidden md:flex absolute right-2 top-1/2 -translate-y-1/2 z-30 w-11 h-11 rounded-full bg-sky-500/20 hover:bg-sky-500/30 border border-sky-300/30 items-center justify-center backdrop-blur-sm","aria-label":"Sonraki Fast",title:"Sonraki Fast",children:e.jsx(Nr,{className:"w-7 h-7 text-sky-200"})}),e.jsx("div",{className:"absolute inset-0 z-10",style:{touchAction:"none",bottom:"0px"},children:e.jsxs("div",{className:["absolute inset-0 grid",(F==null?void 0:F.content_type)==="video"||(F==null?void 0:F.content_type)==="audio"?"grid-cols-3":"grid-cols-2"].join(" "),children:[e.jsx("div",{role:"button",tabIndex:-1,"aria-label":"nceki Fast",className:"w-full h-full",onPointerDown:H=>Be(H,-1),onPointerMove:mt,onPointerUp:bt,onPointerCancel:lt,onTouchStart:H=>{var xe;const J=(xe=H.touches)==null?void 0:xe[0];J&&(le.current.active=!0,le.current.pointerId="touch",le.current.zoneDir=-1,le.current.startX=J.clientX,le.current.startY=J.clientY,le.current.lastX=J.clientX,le.current.lastY=J.clientY,le.current.moved=!1,le.current.pausedByHold=!1,ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{le.current.pausedByHold=!0,z(!0)},zm))},onTouchMove:H=>{var dt;const J=(dt=H.touches)==null?void 0:dt[0];if(!J)return;const xe=le.current;if(!xe.active||xe.pointerId!=="touch")return;xe.lastX=J.clientX,xe.lastY=J.clientY;const qe=xe.lastX-xe.startX,ot=xe.lastY-xe.startY;!xe.moved&&(Math.abs(qe)>8||Math.abs(ot)>8)&&(xe.moved=!0,ie.current&&(clearTimeout(ie.current),ie.current=null),xe.pausedByHold&&(xe.pausedByHold=!1,z(!1)))},onTouchEnd:H=>{var Da,pa,yt;const J=le.current;if(!J.active||J.pointerId!=="touch")return;ie.current&&(clearTimeout(ie.current),ie.current=null);const xe=(Da=H.changedTouches)==null?void 0:Da[0],qe=(pa=xe==null?void 0:xe.clientX)!=null?pa:J.lastX,ot=(yt=xe==null?void 0:xe.clientY)!=null?yt:J.lastY,dt=qe-J.startX,Et=ot-J.startY,Ct=Math.abs(dt),oa=Math.abs(Et);if(Et>Pm&&oa>Ct*1.2){z(!1),Ve(),Ie();return}if(Ct>uo&&Ct>oa*1.2){z(!1),Ve(),dt<0?et(1):et(-1);return}!J.moved&&!J.pausedByHold&&!ye&&Ot(-1,()=>Ut(-1)),J.pausedByHold&&z(!1),Ve()},onTouchCancel:()=>{const H=le.current;!H.active||H.pointerId!=="touch"||(ie.current&&(clearTimeout(ie.current),ie.current=null),H.pausedByHold&&z(!1),Ve())}}),(F==null?void 0:F.content_type)==="video"||(F==null?void 0:F.content_type)==="audio"?e.jsx("div",{role:"button",tabIndex:-1,"aria-label":ye?"Devam et":"Durdur",className:"w-full h-full",onPointerDown:H=>Be(H,0),onPointerMove:mt,onPointerUp:H=>{const J=le.current;ie.current&&(clearTimeout(ie.current),ie.current=null);const xe=(J.lastX||H.clientX)-J.startX,qe=(J.lastY||H.clientY)-J.startY,ot=Math.abs(xe),dt=Math.abs(qe);ot<=uo&&dt<=uo&&!J.moved&&z(Et=>!Et),J.pausedByHold&&z(!1),Ve()},onPointerCancel:lt}):null,e.jsx("div",{role:"button",tabIndex:-1,"aria-label":"Sonraki Fast",className:"w-full h-full",onPointerDown:H=>Be(H,1),onPointerMove:mt,onPointerUp:bt,onPointerCancel:lt,onTouchStart:H=>{var xe;const J=(xe=H.touches)==null?void 0:xe[0];J&&(le.current.active=!0,le.current.pointerId="touch",le.current.zoneDir=1,le.current.startX=J.clientX,le.current.startY=J.clientY,le.current.lastX=J.clientX,le.current.lastY=J.clientY,le.current.moved=!1,le.current.pausedByHold=!1,ie.current&&clearTimeout(ie.current),ie.current=setTimeout(()=>{le.current.pausedByHold=!0,z(!0)},zm))},onTouchMove:H=>{var dt;const J=(dt=H.touches)==null?void 0:dt[0];if(!J)return;const xe=le.current;if(!xe.active||xe.pointerId!=="touch")return;xe.lastX=J.clientX,xe.lastY=J.clientY;const qe=xe.lastX-xe.startX,ot=xe.lastY-xe.startY;!xe.moved&&(Math.abs(qe)>8||Math.abs(ot)>8)&&(xe.moved=!0,ie.current&&(clearTimeout(ie.current),ie.current=null),xe.pausedByHold&&(xe.pausedByHold=!1,z(!1)))},onTouchEnd:H=>{var Da,pa,yt;const J=le.current;if(!J.active||J.pointerId!=="touch")return;ie.current&&(clearTimeout(ie.current),ie.current=null);const xe=(Da=H.changedTouches)==null?void 0:Da[0],qe=(pa=xe==null?void 0:xe.clientX)!=null?pa:J.lastX,ot=(yt=xe==null?void 0:xe.clientY)!=null?yt:J.lastY,dt=qe-J.startX,Et=ot-J.startY,Ct=Math.abs(dt),oa=Math.abs(Et);if(Et>Pm&&oa>Ct*1.2){z(!1),Ve(),Ie();return}if(Ct>uo&&Ct>oa*1.2){z(!1),Ve(),dt<0?et(1):et(-1);return}!J.moved&&!J.pausedByHold&&!ye&&Ot(1,()=>Ut(1)),J.pausedByHold&&z(!1),Ve()},onTouchCancel:()=>{const H=le.current;!H.active||H.pointerId!=="touch"||(ie.current&&(clearTimeout(ie.current),ie.current=null),H.pausedByHold&&z(!1),Ve())}})]})}),e.jsx("div",{ref:$e,className:"absolute inset-0 z-0",style:{transform:"translateX(".concat($t.x,"px)"),opacity:$t.o,transition:Qe?"transform 160ms ease, opacity 160ms ease":void 0,willChange:Qe?"transform, opacity":void 0},children:F?F.content_type==="image"?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:e.jsx("img",{src:Bt,alt:"",draggable:!1,className:"max-w-full max-h-full w-auto h-auto object-contain"})}):F.content_type==="video"?e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black",children:e.jsx("video",{ref:Ne,src:Bt,playsInline:!0,muted:B,autoPlay:!0,controls:!1,preload:"auto",className:"max-w-full max-h-full w-auto h-auto object-contain"})}):F.content_type==="audio"?e.jsxs("div",{className:"h-full w-full flex items-center justify-center p-6",children:[e.jsx("audio",{ref:ct,src:Bt,autoPlay:!0,preload:"auto"}),e.jsx("div",{className:"w-full max-w-[360px] rounded-[22px] border border-white/10 shadow-[0_30px_90px_rgba(0,0,0,0.45)] overflow-hidden",style:{backgroundColor:"#0b1220",backgroundImage:"radial-gradient(circle at 20% 20%, rgba(29,78,216,0.35), transparent 55%),radial-gradient(circle at 80% 30%, rgba(56,189,248,0.22), transparent 55%),repeating-linear-gradient(to bottom, rgba(255,255,255,0) 0, rgba(255,255,255,0) 26px, rgba(59,130,246,0.22) 27px, rgba(59,130,246,0.22) 28px)"},children:e.jsxs("div",{className:"px-6 py-7 flex flex-col items-center",children:[e.jsx("div",{className:"w-28 h-28 rounded-full bg-[#1D4ED8] shadow-[0_20px_70px_rgba(29,78,216,0.55)] flex items-center justify-center",children:e.jsx("div",{className:"w-10 h-16 rounded-2xl bg-white/95"})}),e.jsx("div",{className:"mt-4 text-sm font-black text-white/90",children:"Sesli Fast"}),e.jsx("div",{className:"mt-2 text-xs text-white/80 max-w-[260px] text-center",children:String((F==null?void 0:F.content_text)||(F==null?void 0:F.content)||"").trim()?"Not: "+String(F.content_text||F.content).slice(0,110):"Dinliyorsun"})]})})]}):e.jsx("div",{className:"h-full w-full flex items-center justify-center p-6",children:e.jsx("div",{className:"w-full max-w-[360px] rounded-[22px] border border-black/10 shadow-[0_30px_90px_rgba(0,0,0,0.35)] overflow-hidden",style:{backgroundColor:"#fff7dc",backgroundImage:"linear-gradient(to right, rgba(220,38,38,0.25) 0, rgba(220,38,38,0.25) 2px, transparent 2px),repeating-linear-gradient(to bottom, rgba(0,0,0,0) 0, rgba(0,0,0,0) 26px, rgba(59,130,246,0.22) 27px, rgba(59,130,246,0.22) 28px)"},children:e.jsx("div",{className:"px-6 py-7",children:e.jsx("div",{className:"text-[22px] leading-snug font-black text-gray-900 whitespace-pre-wrap text-center",children:String((F==null?void 0:F.content_text)||(F==null?void 0:F.content)||"").trim()||""})})})}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-white/70 text-sm",children:"erik bulunamad."})}),F!=null&&F.id?e.jsxs("div",{className:"absolute bottom-[calc(env(safe-area-inset-bottom)+16px)] right-4 z-30 flex items-end gap-3",children:[jt?e.jsx("button",{type:"button",onClick:Vt,className:"w-14 h-14 rounded-full bg-black/25 backdrop-blur-sm border border-white/15 flex items-center justify-center","aria-label":"Sil",title:"Sil",children:e.jsx(Ka,{className:"w-6 h-6 text-white/90"})}):null,e.jsxs("button",{type:"button",onClick:ia,className:"relative w-14 h-14 rounded-full bg-black/25 backdrop-blur-sm border border-white/15 flex flex-col items-center justify-center","aria-label":De?"Beeniyi kaldr":"Been",title:De?"Beeniyi kaldr":"Been",children:[e.jsx(xd,{trigger:Number((S==null?void 0:S[String((F==null?void 0:F.id)||"")])||0),sizeClass:"w-10 h-10"}),e.jsx(Or,{className:"w-7 h-7",style:{color:"#ffffff",fill:De?"#E11D48":"transparent",opacity:De?1:.92}}),e.jsx("div",{className:"mt-0.5 text-[10px] font-black text-white/90 leading-none",children:We})]})]}):null,Re&&(F!=null&&F.id)?e.jsxs("button",{type:"button",onClick:()=>C(!0),className:"absolute bottom-[calc(env(safe-area-inset-bottom)+16px)] left-4 z-30 flex items-center gap-1.5 px-3 py-2 rounded-full bg-black/25 border border-white/15 backdrop-blur-sm","aria-label":"Bakanlar",title:"Bakanlar",children:[e.jsx(cs,{className:"w-4 h-4 text-white/90"}),e.jsx("span",{className:"text-xs font-black text-white/90",children:Array.isArray(p)?p.length:0})]}):null]})]}),e.jsx(qs,{isOpen:E,onClose:()=>C(!1),title:"Bakanlar",size:"small",children:O?e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("div",{className:"font-black text-gray-900 mb-2",children:"Veritaban tablosu eksik"}),e.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"Supabase SQL Editorda bu SQLi altrn:"}),e.jsx("pre",{className:"text-xs bg-gray-50 border border-gray-200 rounded-lg p-3 overflow-x-auto whitespace-pre-wrap",children:O})]}):p.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Henz bakan yok."}):e.jsx("div",{className:"space-y-3",children:p.map(H=>{const J=(H==null?void 0:H.user)||{};return e.jsxs("button",{type:"button",className:"w-full flex items-center gap-3 p-2 rounded-xl hover:bg-gray-50 text-left",onClick:()=>{C(!1),r(as(J||{}))},children:[e.jsx(Yt,{src:J.avatar_url,size:"36px",verified:za(J)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:J.full_name||""}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",J.username||J.id]})]}),e.jsx("div",{className:"text-[11px] text-gray-400 whitespace-nowrap",children:String((H==null?void 0:H.viewed_at)||"").slice(11,16)})]},String(J.id))})})})]})},lS=()=>{const r=Qt(),{login:s}=Pa(),[l,i]=m.useState(!1),[d,u]=m.useState({identifier:"",password:"",remember:!1}),[c,g]=m.useState(!1),[f,v]=m.useState(!1),[b,w]=m.useState(""),N=_=>{const{name:M,value:T,type:A,checked:S}=_.target;u(y=>({...y,[M]:A==="checkbox"?S:T})),w("")},k=async _=>{var M,T;_.preventDefault(),w(""),v(!0);try{const A=await s(d.identifier,d.password);A.success?(M=A.user)!=null&&M.is_admin||((T=A.user)==null?void 0:T.user_type)==="admin"?r("/adminyonetim"):r("/"):w(A.error||"Giri baarsz")}catch(A){w("Bir hata olutu")}finally{v(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(Tt,{to:"/",className:"inline-flex items-center justify-center mb-4 cursor-pointer hover:scale-105 transition-transform","aria-label":"Ana sayfaya git",children:[!l&&e.jsx("img",{src:"/favicon.ico",alt:"Polithane",className:"w-24 h-24 sm:w-28 sm:h-28 object-contain drop-shadow-lg",onError:()=>i(!0)}),e.jsx("div",{className:"".concat(l?"flex":"hidden"," items-center justify-center w-24 h-24 sm:w-28 sm:h-28 bg-primary-blue rounded-2xl shadow-lg"),children:e.jsx("span",{className:"text-5xl sm:text-6xl font-black text-white",children:"P"})})]}),e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Polithane. Ho Geldiniz"}),e.jsx("p",{className:"text-gray-600",children:"zgr, ak, effaf siyaset, bamsz medya!"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:[e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[b&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(fs,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"E-posta veya Benzersiz sim"}),e.jsxs("div",{className:"relative",children:[e.jsx(hr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:"text",name:"identifier",value:d.identifier,onChange:N,placeholder:"eposta@ornek.com veya kullaniciadi",className:"w-full pl-14 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none transition-all",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ifre"}),e.jsxs("div",{className:"relative",children:[e.jsx(nn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:c?"text":"password",name:"password",value:d.password,onChange:N,placeholder:"",className:"w-full pl-14 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none transition-all",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!c),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?e.jsx(ml,{className:"w-6 h-6"}):e.jsx(cs,{className:"w-6 h-6"})})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer select-none py-2 pr-2 -my-2",children:[e.jsx("input",{type:"checkbox",name:"remember",checked:d.remember,onChange:N,className:"w-6 h-6 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"}),e.jsx("span",{className:"text-sm font-semibold text-gray-800",children:"Beni hatrla"})]}),e.jsx(Tt,{to:"/forgot-password",className:"text-sm text-primary-blue hover:text-blue-600 font-semibold",children:"ifremi Unuttum"})]}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-primary-blue hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:f?"Giri yaplyor...":"Giri Yap"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["Hesabnz yok mu?"," ",e.jsx(Tt,{to:"/register-new",className:"text-primary-blue hover:text-blue-600 font-bold",children:"Kayt Olun"})]})})]}),e.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:e.jsx("p",{children:" 2025 Polithane. Tm haklar sakldr."})})]})})},Dm=[{id:"length",label:"En az 8 karakter",validator:r=>r.length>=8},{id:"max_length",label:"En fazla 50 karakter",validator:r=>r.length<=50},{id:"letter",label:"En az 1 harf",validator:r=>/[a-zA-Z]/.test(r)},{id:"number",label:"En az 1 rakam",validator:r=>/[0-9]/.test(r)}],iS=[{id:"citizen",label:"Vatanda",desc:"Gndemi takip etmek ve etkileime girmek iin.",icon:li,color:"bg-gradient-to-br from-blue-50 to-blue-100 text-blue-600",iconBg:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",borderColor:"hover:border-blue-500"},{id:"party_member",label:"Parti yesi",desc:"Parti kimliinizi dorulayarak rozet kazann.",icon:ts,color:"bg-gradient-to-br from-red-50 to-red-100 text-red-600",iconBg:"bg-gradient-to-br from-red-500 to-red-600 text-white",borderColor:"hover:border-red-500"},{id:"organization",label:"Tekilat / Ynetim",desc:"l/le bakan veya belediye bakan.",icon:gy,color:"bg-gradient-to-br from-orange-50 to-orange-100 text-orange-600",iconBg:"bg-gradient-to-br from-orange-500 to-orange-600 text-white",borderColor:"hover:border-orange-500"},{id:"politician",label:"Milletvekili",desc:"TBMM yeleri iin resmi hesap.",icon:wj,color:"bg-gradient-to-br from-purple-50 to-purple-100 text-purple-600",iconBg:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",borderColor:"hover:border-purple-500"},{id:"media",label:"Medya Mensubu",desc:"Gazeteci, yazar ve medya kurulular.",icon:uh,color:"bg-gradient-to-br from-green-50 to-green-100 text-green-600",iconBg:"bg-gradient-to-br from-green-500 to-green-600 text-white",borderColor:"hover:border-green-500"}],oS=()=>{const r=Qt(),[s,l]=m.useState(!1),[i]=ud(),{register:d}=Pa(),{allowRegistration:u}=Eo(),c=i.get("mode"),g=i.get("claimUserId"),[f,v]=m.useState(c==="claim"?1:0),[b,w]=m.useState(null),[N,k]=m.useState([]),[_,M]=m.useState(!1),[T,A]=m.useState([]),[S,y]=m.useState(!1),[p,j]=m.useState("idle"),[E,C]=m.useState(null),[O,P]=m.useState(""),[L,ce]=m.useState({membership_type:"",role_type:"",full_name:"",email:"",password:"",password_confirm:"",phone:"",province:"",district:"",party_id:"",media_title:"",media_outlet:"",media_website:"",media_bio:"",org_position:"",start_date:"",previous_roles:"",bio:""}),[Z,ie]=m.useState(null),[le,ye]=m.useState(!1),[z,X]=m.useState(""),[G,D]=m.useState(""),[$,B]=m.useState({});m.useEffect(()=>{Y(),g&&Q(g)},[]);const Y=async()=>{try{const fe="".replace(/\/+$/,"").replace(/\/api$/,""),$e=await(await fetch("".concat(fe,"/api/parties"))).json();Array.isArray($e)?k($e):$e.data&&Array.isArray($e.data)&&k($e.data)}catch(fe){console.error("Parties error:",fe)}},Q=async fe=>{try{M(!0);const ke=await us.getById(fe);ke&&ke.success&&(w(ke.data),v(3),ce($e=>({...$e,full_name:ke.data.full_name,membership_type:q(ke.data.user_type,ke.data.politician_type),party_id:ke.data.party_id||"",province:ke.data.province||""})))}catch(ke){console.error("Claim user load error:",ke)}finally{M(!1)}},q=(fe,ke)=>fe==="mp"?"politician":fe==="media"?"media":fe==="party_member"?"party_member":ke?"organization":"citizen",I=async(fe,ke)=>{if(!ke||ke.length<5)return;{const Le=/[]/.test(String(ke||""));if(!wm(ke)||Le){j("idle");return}}E&&clearTimeout(E),j("checking");const $e=setTimeout(async()=>{try{const Le="".replace(/\/+$/,"").replace(/\/api$/,""),Qe=await(await fetch("".concat(Le,"/api/auth/check-availability?").concat(fe,"=").concat(encodeURIComponent(ke)))).json();Qe.success&&fe==="email"&&j(Qe.emailAvailable?"available":"taken")}catch(Le){console.error("Check failed:",Le)}},500);C($e)},V=fe=>{const{name:ke,value:$e}=fe.target;if(!(ke==="full_name"&&$e.length>50)&&!(ke==="district"&&$e.length>50)&&(ce(Le=>({...Le,[ke]:$e})),X(""),B(Le=>({...Le,[ke]:""})),ke==="email"&&I("email",$e),ke==="phone"&&$e&&(y0($e)||B(Le=>({...Le,phone:"Telefon 05XXXXXXXXX formatnda olmal."}))),ke==="email"&&$e)){const Le=/[]/.test(String($e||""));(!wm($e)||Le)&&B(St=>({...St,email:"Geerli bir eposta girin (Trke karakter olmadan)."}))}},Te=async fe=>{if(fe.length<3){A([]);return}y(!0);try{const ke="".replace(/\/+$/,"").replace(/\/api$/,""),Le=await(await fetch("".concat(ke,"/api/users?search=").concat(encodeURIComponent(fe),"&limit=5"))).json();Array.isArray(Le)?A(Le):Le.data&&Array.isArray(Le.data)&&A(Le.data)}catch(ke){console.error(ke)}finally{y(!1)}},Ke=async fe=>{var Le,St,Qe,It,$t,Zt,Xt,ya;if(fe.preventDefault(),!u){X("Kayt alm u anda kapal. Ltfen daha sonra tekrar deneyin.");return}if(O){console.log("Bot detected");return}const ke=Dm.every(kt=>kt.validator(String(L.password||""))),$e=String(L.password||"")===String(L.password_confirm||"");if(p==="taken"&&!b){X("Bu e-posta adresi zaten kullanmda.");return}if(L.email&&(/[]/.test(L.email)||!wm(L.email))){X("Geerli bir e-posta adresi giriniz (Trke karakter olmadan).");return}if(!ke){X("ifreniz kurallara uygun deil. Ltfen ifre kurallarn salayn.");return}if(!$e){X("ifreler elemiyor. Ltfen kontrol edip tekrar deneyin.");return}if(L.phone&&!y0(L.phone)){X("Telefon 05XXXXXXXXX formatnda olmal.");return}M(!0),X("");try{let kt=null;if(Z){if(!Im(Z,["application/pdf","image/jpeg","image/png"]))throw new Error("Belge tr desteklenmiyor. PDF/JPG/PNG ykleyin.");if(!qm(Z,5))throw new Error("Belge boyutu ok byk. En fazla 5MB ykleyin.");const We=Ye=>new Promise((ct,Ne)=>{const Xe=new FileReader;Xe.readAsDataURL(Ye),Xe.onload=()=>ct(Xe.result),Xe.onerror=ut=>Ne(ut)});try{const Ye=await We(Z);kt={name:Z.name,type:Z.type,content:Ye}}catch(Ye){throw console.error("File conversion error",Ye),new Error("Dosya yklenirken hata olutu.")}}const Ie=(De=>De==="citizen"?"citizen":De==="party_member"?"party_member":De==="organization"?"party_official":De==="politician"?"mp":De==="media"?"media":"citizen")(L.membership_type),Pe={full_name:L.full_name,email:L.email,password:L.password,user_type:Ie,party_id:L.party_id,province:L.province,district:L.district,politician_type:L.role_type||null,metadata:{phone:L.phone,media_title:L.media_title,media_outlet:L.media_outlet,media_website:L.media_website,media_bio:L.media_bio,org_position:L.org_position,start_date:L.start_date,previous_roles:L.previous_roles,bio:L.bio},document:kt,is_claim:b?"true":"false",claim_user_id:b==null?void 0:b.id},F="".replace(/\/+$/,"").replace(/\/api$/,""),nt=await fetch("".concat(F,"/api/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Pe)}),ee=await nt.json();if(!nt.ok)throw ee.error&&ee.error.includes("metadata")?new Error('Teknik Hata: Veritabannda "metadata" stunu eksik. Ltfen yneticiye bildirin.'):new Error(ee.error||"Kayt baarsz.");if(!!((St=ee==null?void 0:ee.requiresApproval)!=null?St:(Le=ee==null?void 0:ee.data)!=null&&Le.requiresApproval)){const De=(Qe=ee==null?void 0:ee.data)==null?void 0:Qe.token,We=(It=ee==null?void 0:ee.data)==null?void 0:It.user;De&&(localStorage.setItem("auth_token",De),We&&localStorage.setItem("user",JSON.stringify(We))),D((ee==null?void 0:ee.message)||(b?"Profil sahiplenme bavurunuz alnd. nceleme sonras bilgilendirileceksiniz.":"Bavurunuz alnd. nceleme sonras bilgilendirileceksiniz."));return}else if(($t=ee.data)!=null&&$t.token){if(localStorage.setItem("auth_token",ee.data.token),(Zt=ee.data)!=null&&Zt.user)localStorage.setItem("user",JSON.stringify(ee.data.user));else try{const We=await(await fetch("".concat(F,"/api/auth/me"),{headers:{Authorization:"Bearer ".concat(ee.data.token)}})).json().catch(()=>({})),Ye=(ya=(Xt=We==null?void 0:We.data)==null?void 0:Xt.user)!=null?ya:null;Ye&&localStorage.setItem("user",JSON.stringify(Ye))}catch(De){}window.location.href="/"}else r("/login-new")}catch(kt){X(kt.message||"Kayt baarsz oldu.")}finally{M(!1)}};if(G)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-white rounded-3xl shadow-xl p-10 text-center border border-blue-50",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-50 rounded-full flex items-center justify-center mx-auto mb-8 shadow-inner",children:e.jsx(hl,{className:"w-12 h-12 text-blue-600"})}),e.jsx("h2",{className:"text-3xl font-black text-gray-900 mb-4 tracking-tight",children:"Bavurunuz Alnd"}),e.jsxs("div",{className:"bg-blue-50 p-6 rounded-2xl mb-8 text-left",children:[e.jsxs("h4",{className:"font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx(Ga,{className:"w-5 h-5 mr-2"}),"Sre Balatld"]}),e.jsxs("p",{className:"text-blue-800 text-sm leading-relaxed",children:["Deerli kullancmz, yelik bavurunuz ve ilettiiniz belgeler sistemimize gvenli bir ekilde kaydedilmitir.",e.jsx("br",{}),e.jsx("br",{}),"Ekibimiz bavurunuzu ",e.jsx("strong",{children:"en ksa srede"})," titizlikle inceleyecek ve sonu hakknda size e-posta/SMS yoluyla bilgilendirme yapacaktr."]})]}),e.jsx(Va,{onClick:()=>r("/"),variant:"outline",fullWidth:!0,size:"lg",children:"Ana Sayfaya Dn"})]})});const oe=()=>{const fe=L.membership_type==="organization",ke=L.membership_type==="media",$e=L.membership_type==="politician",Le=L.membership_type==="party_member"||fe||$e,St=L.role_type==="district_chair"||L.role_type==="district_mayor";return e.jsxs("form",{onSubmit:Ke,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>v(b?1:2),className:"p-2 hover:bg-gray-100 rounded-full mr-2",children:e.jsx(dl,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Bilgilerinizi Girin"}),e.jsx("p",{className:"text-sm text-gray-500",children:b?"Profil sahiplenme bavurusu":"Yeni yelik formu"})]})]}),e.jsx("input",{type:"text",name:"website_url_check",value:O,onChange:Qe=>P(Qe.target.value),className:"opacity-0 absolute -z-10 h-0 w-0",tabIndex:-1,autoComplete:"off"}),fe&&e.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-100 mb-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-orange-800 mb-2",children:"Greviniz"}),e.jsxs("select",{name:"role_type",className:"w-full border-orange-200 rounded-lg p-2.5 bg-white",onChange:V,required:!0,children:[e.jsx("option",{value:"",children:"Seiniz..."}),e.jsx("option",{value:"party_official",children:"Parti Tekilat Grevlisi"}),e.jsx("option",{value:"provincial_chair",children:"l Bakan"}),e.jsx("option",{value:"district_chair",children:"le Bakan"}),e.jsx("option",{value:"metropolitan_mayor",children:"Bykehir Bld. Bakan"}),e.jsx("option",{value:"district_mayor",children:"le Bld. Bakan"})]})]}),L.role_type==="party_official"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-orange-800 mb-1",children:"Grev nvan"}),e.jsx("input",{type:"text",name:"org_position",className:"w-full border-orange-200 rounded-lg p-2",onChange:V,required:!0,placeholder:"rn: Genlik Kollar Bk.",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-orange-800 mb-1",children:"Greve Balama Tarihi"}),e.jsx("input",{type:"date",name:"start_date",className:"w-full border-orange-200 rounded-lg p-2",onChange:V,required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ad Soyad"}),e.jsxs("div",{className:"relative",children:[e.jsx(li,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:"text",name:"full_name",className:"w-full border border-gray-300 rounded-lg p-3 pl-14 focus:ring-2 focus:ring-primary-blue focus:border-transparent transition-all",value:L.full_name,onChange:V,required:!0,readOnly:!!b,maxLength:50})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"E-posta Adresi"}),e.jsxs("div",{className:"relative",children:[e.jsx(hr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:"email",name:"email",className:"w-full border rounded-lg p-3 pl-14 pr-10 focus:ring-2 transition-all ".concat(p==="taken"?"border-red-500 bg-red-50":p==="available"?"border-green-500 bg-green-50":"border-gray-300"),value:L.email,onChange:V,required:!0,maxLength:100}),e.jsxs("div",{className:"absolute right-3 top-3.5",children:[p==="checking"&&e.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-primary-blue border-t-transparent rounded-full"}),p==="available"&&e.jsx(ri,{className:"w-5 h-5 text-green-600"}),p==="taken"&&e.jsx(xs,{className:"w-5 h-5 text-red-600"})]})]}),p==="taken"&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Bu e-posta kullanmda."}),$.email&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:$.email})]}),Le&&e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Parti"}),e.jsxs("select",{name:"party_id",className:"w-full border border-gray-300 rounded-lg p-3 bg-white",value:L.party_id,onChange:V,required:!0,children:[e.jsx("option",{value:"",children:"Seiniz..."}),N.map(Qe=>e.jsxs("option",{value:Qe.id||Qe.party_id,children:[Qe.name||Qe.party_name," (",Qe.short_name||Qe.party_short_name,")"]},Qe.id||Qe.party_id))]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"l"}),e.jsxs("select",{name:"province",className:"w-full border border-gray-300 rounded-lg p-3 bg-white",value:L.province,onChange:V,required:Le||fe,children:[e.jsx("option",{value:"",children:"Seiniz..."}),Object.values(xl).sort().map(Qe=>e.jsx("option",{value:Qe,children:Qe},Qe))]})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"le"}),e.jsx("input",{type:"text",name:"district",className:"w-full border border-gray-300 rounded-lg p-3",value:L.district,onChange:V,required:St,placeholder:St?"Zorunlu alan":"Opsiyonel",maxLength:50})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefon (Opsiyonel)"}),e.jsx("input",{type:"tel",name:"phone",className:"w-full border rounded-lg p-3 ".concat($.phone?"border-red-400 bg-red-50":"border-gray-300"),value:L.phone,onChange:V,placeholder:"05XXXXXXXXX",maxLength:11}),$.phone&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:$.phone})]}),ke&&e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-gray-50 p-4 rounded-xl border border-gray-200 space-y-3",children:[e.jsxs("h4",{className:"font-bold text-gray-900 flex items-center",children:[e.jsx(uh,{className:"w-6 h-6 sm:w-5 sm:h-5 mr-2"})," Medya Bilgileri"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Kurum Ad"}),e.jsx("input",{type:"text",name:"media_outlet",className:"w-full border border-gray-300 rounded-lg p-2",onChange:V,maxLength:100,placeholder:"Opsiyonel"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"nvan"}),e.jsx("input",{type:"text",name:"media_title",className:"w-full border border-gray-300 rounded-lg p-2",onChange:V,maxLength:50,placeholder:"Opsiyonel"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Web Sitesi"}),e.jsx("input",{type:"url",name:"media_website",className:"w-full border border-gray-300 rounded-lg p-2",onChange:V,maxLength:200})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-bold text-gray-500 uppercase mb-1",children:"Ksa Biyografi"}),e.jsx("textarea",{name:"media_bio",className:"w-full border border-gray-300 rounded-lg p-2",rows:"2",onChange:V,maxLength:500})]})]}),(Le||fe||$e)&&e.jsxs("div",{className:"col-span-1 md:col-span-2 bg-blue-50 p-4 rounded-xl border border-blue-100",children:[e.jsxs("label",{className:"block text-sm font-bold text-blue-900 mb-2 flex items-center",children:[e.jsx(rn,{className:"w-6 h-6 sm:w-5 sm:h-5 mr-2"}),"Resmi Belge Ykleme (Zorunlu)"]}),e.jsxs("p",{className:"text-xs text-blue-700 mb-3",children:[$e&&"Ltfen mazbatanzn net bir fotorafn ykleyiniz.",L.role_type&&L.role_type.includes("chair")&&"Ltfen mazbatanzn veya atama yaznzn fotorafn ykleyiniz.",L.role_type==="party_official"&&"Ltfen grevlendirme yaznz ykleyiniz.",L.membership_type==="party_member"&&"Ltfen E-Devlet zerinden alacanz parti yelik belgesini ykleyiniz."]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200",onChange:Qe=>{var Zt;const It=(Zt=Qe.target.files)==null?void 0:Zt[0];if(!It)return;if(!Im(It,["application/pdf","image/jpeg","image/png"])){X("Belge tr desteklenmiyor. PDF/JPG/PNG ykleyin."),ie(null);return}if(!qm(It,5)){X("Belge boyutu ok byk. En fazla 5MB ykleyin."),ie(null);return}X(""),ie(It)},required:!0})})]}),(fe||$e)&&e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"nceki Grevler (Opsiyonel)"}),e.jsx("textarea",{name:"previous_roles",className:"w-full border border-gray-300 rounded-lg p-3",rows:"2",onChange:V,maxLength:500})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2 border-t pt-4 mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ifre"}),e.jsxs("div",{className:"relative",children:[e.jsx(nn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:le?"text":"password",name:"password",className:"w-full border border-gray-300 rounded-lg p-3 pl-14 pr-10",value:L.password,onChange:V,required:!0,maxLength:50}),e.jsx("button",{type:"button",onClick:()=>ye(!le),className:"absolute right-3 top-3.5 text-gray-400",children:le?e.jsx(ml,{size:20}):e.jsx(cs,{size:20})})]})]}),e.jsxs("div",{className:"col-span-1 md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ifre Tekrar"}),e.jsx("input",{type:"password",name:"password_confirm",className:"w-full border rounded-lg p-3 ".concat(L.password&&L.password!==L.password_confirm?"border-red-300 focus:ring-red-200":"border-gray-300"),value:L.password_confirm,onChange:V,required:!0,maxLength:50}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:Dm.map(Qe=>{const It=Qe.validator(L.password);return e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full flex items-center transition-colors ".concat(It?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:[It?e.jsx(ri,{size:14,className:"mr-1"}):e.jsx(xs,{size:14,className:"mr-1"}),Qe.label]},Qe.id)})})]})]}),z&&e.jsxs("div",{className:"bg-red-50 text-red-600 p-4 rounded-xl flex items-center gap-3 animate-pulse",children:[e.jsx(fs,{size:20}),e.jsx("p",{className:"text-sm font-medium",children:z})]}),e.jsx("div",{className:"flex justify-center pt-4",children:e.jsx("button",{type:"submit",disabled:_||p==="taken"||!L.password||L.password!==L.password_confirm||!Dm.every(Qe=>Qe.validator(String(L.password||""))),className:"w-full md:w-2/3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-4 rounded-xl shadow-lg transform transition hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-lg",children:_?e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full"}):b?"Profili Sahiplen ve Kaydol":"Kayd Tamamla"})})]})},je=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("button",{onClick:()=>v(2),className:"flex items-center p-6 bg-white border-2 border-gray-100 rounded-2xl hover:border-primary-blue hover:shadow-lg transition-all group text-left",children:[e.jsx("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center mr-6 group-hover:scale-110 transition-transform",children:e.jsx(li,{className:"w-12 h-12 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1 group-hover:text-primary-blue",children:"Yeni ye Ol"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Henz bir profiliniz yoksa buradan yeni hesap oluturun."})]}),e.jsx(Nr,{className:"w-6 h-6 text-gray-300 group-hover:text-primary-blue"})]}),e.jsxs("button",{onClick:()=>v(1),className:"flex items-center p-6 bg-white border-2 border-gray-100 rounded-2xl hover:border-purple-500 hover:shadow-lg transition-all group text-left",children:[e.jsx("div",{className:"w-24 h-24 bg-purple-100 rounded-full flex items-center justify-center mr-6 group-hover:scale-110 transition-transform",children:e.jsx(hl,{className:"w-12 h-12 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1 group-hover:text-purple-600",children:"Mevcut Profili Sahiplen"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Adnza alm otomatik profili dorulayn ve ynetmeye balayn."})]}),e.jsx(Nr,{className:"w-6 h-6 text-gray-300 group-hover:text-purple-600"})]})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Zaten hesabnz var m? ",e.jsx("a",{href:"/login-new",className:"text-primary-blue font-bold hover:underline",children:"Giri Yap"})]})})]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4 py-10",children:e.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-3xl shadow-2xl p-6 md:p-10 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(Tt,{to:"/",className:"inline-flex items-center justify-center mb-4 cursor-pointer hover:scale-105 transition-transform","aria-label":"Ana sayfaya git",children:[!s&&e.jsx("img",{src:"/favicon.ico",alt:"Polithane",className:"w-24 h-24 sm:w-28 sm:h-28 object-contain drop-shadow-lg",onError:()=>l(!0)}),e.jsx("div",{className:"".concat(s?"flex":"hidden"," items-center justify-center w-24 h-24 sm:w-28 sm:h-28 bg-primary-blue rounded-2xl shadow-lg"),children:e.jsx("span",{className:"text-5xl sm:text-6xl font-black text-white",children:"P"})})]}),e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Polithane. ye Ol"}),e.jsx("p",{className:"text-gray-600",children:"zgr, ak, effaf siyaset, bamsz medya!"})]}),f===0&&je(),f===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>v(0),className:"p-2 hover:bg-gray-100 rounded-full mr-2",children:e.jsx(dl,{className:"w-6 h-6 text-gray-600"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"Profilinizi Bulun"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-7 h-7 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ad Soyad veya Kullanc Ad Ara...",className:"w-full pl-12 pr-4 py-4 border-2 border-gray-200 rounded-xl focus:border-purple-500 focus:ring-0 text-lg",onChange:fe=>Te(fe.target.value)}),S&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 animate-spin w-5 h-5 border-2 border-purple-500 border-t-transparent rounded-full"})]}),e.jsxs("div",{className:"space-y-3 mt-4",children:[T.map(fe=>e.jsxs("div",{onClick:()=>{w(fe),ce(ke=>({...ke,full_name:fe.full_name,membership_type:q(fe.user_type,fe.politician_type),party_id:fe.party_id||"",province:fe.province||""})),v(3)},className:"flex items-center p-4 border rounded-xl hover:border-purple-500 cursor-pointer hover:bg-purple-50 transition-all",children:[e.jsx(Yt,{src:fe.avatar_url,size:"50px"}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h4",{className:"font-bold text-gray-900",children:fe.full_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["@",fe.username]})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(Va,{size:"sm",variant:"outline",children:"Se"})})]},fe.id)),T.length===0&&!S&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"Aradnz profili bulamadnz m?"}),e.jsx("button",{onClick:()=>v(2),className:"text-purple-600 font-bold hover:underline mt-2",children:"Yeni Profil Oluturun"})]})]})]}),f===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("button",{onClick:()=>v(0),className:"p-2 hover:bg-gray-100 rounded-full mr-2",children:e.jsx(dl,{className:"w-6 h-6 text-gray-600"})}),e.jsx("h2",{className:"text-2xl font-bold",children:"yelik Tipi Sein"})]}),e.jsx("div",{className:"grid gap-3",children:iS.map(fe=>{const ke=fe.icon;return e.jsxs("button",{onClick:()=>{ce($e=>({...$e,membership_type:fe.id})),v(3)},className:"flex items-center p-4 bg-white border-2 border-gray-100 rounded-xl transition-all group text-left ".concat(fe.borderColor," hover:shadow-md"),children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl flex items-center justify-center mr-5 flex-shrink-0 shadow-lg transform group-hover:scale-110 transition-transform duration-300 ".concat(fe.iconBg),children:e.jsx(ke,{className:"w-12 h-12"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900 mb-1",children:fe.label}),e.jsx("p",{className:"text-xs text-gray-500",children:fe.desc})]}),e.jsx(Nr,{className:"w-5 h-5 text-gray-300 group-hover:text-gray-600 mt-3"})]},fe.id)})})]}),f===3&&oe()]})})},cS=()=>{const r=Qt(),[s,l]=m.useState(!1),[i,d]=m.useState(""),[u,c]=m.useState(!1),[g,f]=m.useState(""),[v,b]=m.useState(!1),w=async N=>{N.preventDefault(),f(""),c(!0);try{const k=await re("/api/auth/forgot-password",{method:"POST",body:JSON.stringify({email:i})});k.success?b(!0):(f(k.error||"Bir hata olutu"),c(!1))}catch(k){f(k.message||"Bir hata olutu. Ltfen tekrar deneyin."),c(!1)}};return v?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsxs("div",{className:"inline-flex items-center justify-center mb-4 cursor-pointer hover:scale-105 transition-transform",onClick:()=>r("/"),children:[!s&&e.jsx("img",{src:"/logo.png",alt:"Polithane",width:96,height:96,className:"w-24 h-24 object-contain drop-shadow-lg",onError:()=>l(!0)}),e.jsx("div",{className:"".concat(s?"flex":"hidden"," items-center justify-center w-20 h-20 bg-primary-blue rounded-2xl shadow-lg"),children:e.jsx("span",{className:"text-4xl font-black text-white",children:"P"})})]})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(Ga,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-3",children:"E-posta Gnderildi!"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:[e.jsx("strong",{children:i})," adresine ifre sfrlama linki gnderdik. Ltfen e-posta kutunuzu kontrol edin."]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-left",children:[e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:e.jsx("strong",{children:" E-posta gelmediyse:"})}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Spam/Gereksiz klasrn kontrol edin"}),e.jsx("li",{children:"E-posta adresinizi doru yazdnzdan emin olun"}),e.jsx("li",{children:"Birka dakika bekleyin (bazen ge gelebilir)"})]})]}),e.jsx("button",{onClick:()=>r("/login-new"),className:"w-full bg-primary-blue hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-all shadow-lg hover:shadow-xl",children:"Giri Sayfasna Dn"})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center justify-center mb-4 cursor-pointer hover:scale-105 transition-transform",onClick:()=>r("/"),children:[!s&&e.jsx("img",{src:"/logo.png",alt:"Polithane",width:80,height:80,className:"w-20 h-20 object-contain drop-shadow-lg",onError:()=>l(!0)}),e.jsx("div",{className:"".concat(s?"flex":"hidden"," items-center justify-center w-20 h-20 bg-primary-blue rounded-2xl shadow-lg"),children:e.jsx("span",{className:"text-4xl font-black text-white",children:"P"})})]}),e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Polithane. ifremi Unuttum"}),e.jsx("p",{className:"text-gray-600",children:"zgr, ak, effaf siyaset, bamsz medya!"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:[e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[g&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(fs,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:g})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"E-posta Adresiniz"}),e.jsxs("div",{className:"relative",children:[e.jsx(hr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:"email",value:i,onChange:N=>d(N.target.value),placeholder:"eposta@ornek.com",className:"w-full pl-14 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none transition-all",required:!0})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Kaytl e-posta adresinizi girin. Size ifre sfrlama linki gndereceiz."})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary-blue hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:u?"Gnderiliyor...":"Sfrlama Linki Gnder"})]}),e.jsx("div",{className:"mt-6",children:e.jsxs(Tt,{to:"/login-new",className:"flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 font-semibold transition-colors",children:[e.jsx(dl,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Giri Sayfasna Dn"]})})]}),e.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:e.jsx("p",{children:" 2025 Polithane. Tm haklar sakldr."})})]})})},dS=()=>{const r=Qt(),[s]=ud(),l=s.get("token"),[i,d]=m.useState(!1),[u,c]=m.useState({password:"",confirmPassword:""}),[g,f]=m.useState(!1),[v,b]=m.useState(!1),[w,N]=m.useState(!1),[k,_]=m.useState(""),[M,T]=m.useState(!1);m.useEffect(()=>{l||_("Geersiz veya eksik token. Ltfen ifre sfrlama linkini tekrar isteyin.")},[l]);const A=y=>{const{name:p,value:j}=y.target;c(E=>({...E,[p]:j})),_("")},S=async y=>{if(y.preventDefault(),_(""),u.password.length<8){_("ifre en az 8 karakter olmaldr.");return}if(u.password!==u.confirmPassword){_("ifreler elemiyor.");return}if(!l){_("Geersiz token. Ltfen ifre sfrlama linkini tekrar isteyin.");return}N(!0);try{const p=await re("/api/auth/reset-password",{method:"POST",body:JSON.stringify({token:l,newPassword:u.password})});p.success?(T(!0),setTimeout(()=>{r("/login-new")},3e3)):_(p.error||"ifre sfrlama baarsz.")}catch(p){_("Bir hata olutu. Ltfen tekrar deneyin.")}finally{N(!1)}};return M?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("div",{className:"inline-flex items-center justify-center mb-4 cursor-pointer hover:scale-105 transition-transform",onClick:()=>r("/"),children:i?e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-primary-blue rounded-2xl shadow-lg",children:e.jsx("span",{className:"text-4xl font-black text-white",children:"P"})}):e.jsx("img",{src:"/logo.png",alt:"Polithane",width:96,height:96,className:"w-24 h-24 object-contain drop-shadow-lg",onError:()=>d(!0)})})}),e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(Ga,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-3",children:"ifreniz Deitirildi!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"ifreniz baaryla deitirildi. Artk yeni ifrenizle giri yapabilirsiniz."}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"3 saniye iinde giri sayfasna ynlendirileceksiniz..."}),e.jsx("button",{onClick:()=>r("/login-new"),className:"w-full bg-primary-blue hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-all shadow-lg hover:shadow-xl",children:"Giri Sayfasna Git"})]})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center mb-4 cursor-pointer hover:scale-105 transition-transform",onClick:()=>r("/"),children:i?e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-primary-blue rounded-2xl shadow-lg",children:e.jsx("span",{className:"text-4xl font-black text-white",children:"P"})}):e.jsx("img",{src:"/logo.png",alt:"Polithane",width:96,height:96,className:"w-24 h-24 object-contain drop-shadow-lg",onError:()=>d(!0)})}),e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Polithane. Yeni ifre"}),e.jsx("p",{className:"text-gray-600",children:"zgr, ak, effaf siyaset, bamsz medya!"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:[e.jsxs("form",{onSubmit:S,className:"space-y-6",children:[k&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(fs,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:k})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Yeni ifre"}),e.jsxs("div",{className:"relative",children:[e.jsx(nn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:g?"text":"password",name:"password",value:u.password,onChange:A,placeholder:"En az 8 karakter",className:"w-full pl-14 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none transition-all",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>f(!g),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:g?e.jsx(ml,{className:"w-6 h-6"}):e.jsx(cs,{className:"w-6 h-6"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"ifreniz en az 8 karakter olmaldr."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"ifre Tekrar"}),e.jsxs("div",{className:"relative",children:[e.jsx(nn,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-6 h-6 text-gray-400"}),e.jsx("input",{type:v?"text":"password",name:"confirmPassword",value:u.confirmPassword,onChange:A,placeholder:"ifrenizi tekrar girin",className:"w-full pl-14 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none transition-all",required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!v),className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:v?e.jsx(ml,{className:"w-6 h-6"}):e.jsx(cs,{className:"w-6 h-6"})})]})]}),e.jsx("button",{type:"submit",disabled:w||!l,className:"w-full bg-primary-blue hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:w?"ifre Deitiriliyor...":"ifremi Deitir"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(Tt,{to:"/login-new",className:"text-gray-600 hover:text-gray-900 font-semibold transition-colors",children:"Giri Sayfasna Dn"})})]}),e.jsx("div",{className:"mt-8 text-center text-sm text-gray-500",children:e.jsx("p",{children:" 2025 Polithane. Tm haklar sakldr."})})]})})},uS=()=>{const r=Qt(),[s]=ud(),l=s.get("token"),[i,d]=m.useState(!1),[u,c]=m.useState(!0),[g,f]=m.useState(!1),[v,b]=m.useState("");return m.useEffect(()=>{let w=!1;return(async()=>{if(!l){c(!1),f(!1),b("Geersiz veya eksik token.");return}c(!0),b("");try{const N=await re("/api/auth/verify-email?token=".concat(encodeURIComponent(l))).catch(()=>null);!w&&(N!=null&&N.success)?f(!0):w||(f(!1),b((N==null?void 0:N.error)||"Dorulama baarsz."))}catch(N){w||(f(!1),b((N==null?void 0:N.message)||"Dorulama baarsz."))}finally{w||c(!1)}})(),()=>{w=!0}},[l]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center justify-center mb-4 cursor-pointer hover:scale-105 transition-transform",onClick:()=>r("/"),children:[!i&&e.jsx("img",{src:"/logo.png",alt:"Polithane",width:96,height:96,className:"w-24 h-24 object-contain drop-shadow-lg",onError:()=>d(!0)}),e.jsx("div",{className:"".concat(i?"flex":"hidden"," items-center justify-center w-20 h-20 bg-primary-blue rounded-2xl shadow-lg"),children:e.jsx("span",{className:"text-4xl font-black text-white",children:"P"})})]}),e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"E-posta Dorulama"}),e.jsx("p",{className:"text-gray-600",children:"Hesabnz aktifletiriyoruz"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:[u&&e.jsx("div",{className:"text-center text-sm text-gray-600",children:"Dorulanyor"}),!u&&g&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:e.jsx(Ga,{className:"w-8 h-8 text-green-600"})}),e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-2",children:"E-posta doruland"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Artk giri yapabilirsiniz."}),e.jsx("button",{onClick:()=>r("/login-new"),className:"w-full bg-primary-blue hover:bg-blue-600 text-white font-bold py-3 rounded-lg transition-all shadow-lg hover:shadow-xl",children:"Giri Yap"})]}),!u&&!g&&e.jsxs("div",{children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3 mb-4",children:[e.jsx(fs,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:v||"Dorulama baarsz."})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Tt,{to:"/login-new",className:"text-primary-blue font-black hover:underline",children:"Giri"}),e.jsx(Tt,{to:"/register-new",className:"text-gray-700 font-black hover:underline",children:"ye ol"})]})]})]})]})})},mS=()=>{const r=tr(),s=[{path:"/settings/profile",icon:li,label:"Profil Dzenle"},{path:"/settings/account",icon:nn,label:"Hesap"},{path:"/settings/security",icon:on,label:"Gvenlik"},{path:"/settings/notifications",icon:ni,label:"Bildirimler"},{path:"/settings/privacy",icon:fl,label:"Gizlilik"},{path:"/settings/blocked",icon:jy,label:"Engellenenler"},{path:"/settings/appearance",icon:bo,label:"Grnm"},{path:"/settings/delete",icon:Ka,label:"Hesab Sil"}];return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container-main py-8",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-8",children:"Ayarlar"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 h-fit",children:e.jsx("nav",{className:"space-y-1",children:s.map(l=>e.jsxs(Tt,{to:l.path,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ".concat(r.pathname===l.path?"bg-primary-blue text-white":"text-gray-700 hover:bg-gray-100"),children:[e.jsx(l.icon,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:l.label})]},l.path))})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:e.jsx(uy,{})})]})]})})},hS=()=>{const{user:r,updateUser:s}=Pa(),[l,i]=m.useState({full_name:(r==null?void 0:r.full_name)||"",bio:(r==null?void 0:r.bio)||"",city_code:(r==null?void 0:r.city_code)||"",phone:(r==null?void 0:r.phone)||""}),[d,u]=m.useState(!1),[c,g]=m.useState(!1),[f,v]=m.useState(""),[b,w]=m.useState(!1),N=m.useRef(null),k=A=>{const{name:S,value:y}=A.target;i(p=>({...p,[S]:y}))},_=()=>{var A;v(""),(A=N.current)==null||A.click()},M=async A=>{if(!A)return;if(v(""),!Im(A,["image/jpeg","image/png","image/webp"])){v("Sadece JPG / PNG / WEBP ykleyebilirsiniz.");return}if(!qm(A,2)){v("Dosya boyutu ok byk (max 2MB).");return}if(!(r!=null&&r.id)){v("Kullanc bilgisi bulunamad. Ltfen k yapp tekrar giri yapn.");return}w(!0);try{const p=await(E=>new Promise((C,O)=>{const P=new FileReader;P.onload=()=>C(String(P.result||"")),P.onerror=()=>O(new Error("Dosya okunamad.")),P.readAsDataURL(E)}))(A),j=await re("/api/users/me/avatar",{method:"POST",body:JSON.stringify({dataUrl:p,contentType:A.type||""})});if(!(j!=null&&j.success))throw new Error((j==null?void 0:j.error)||"Fotoraf yklenemedi.");j.data&&s(j.data),g(!0),setTimeout(()=>g(!1),2500)}catch(y){const p=String((y==null?void 0:y.message)||"");p.toLowerCase().includes("row-level security")?v("Fotoraf yklenemedi: depolama izinleri kstl. Ltfen daha sonra tekrar deneyin."):v(p||"Fotoraf yklenemedi.")}finally{w(!1)}},T=async A=>{A.preventDefault(),u(!0),g(!1),v("");try{const S=await re("/api/users/me",{method:"PUT",body:JSON.stringify({full_name:l.full_name,bio:l.bio,phone:l.phone,city_code:l.city_code})});if(!(S!=null&&S.success))throw new Error((S==null?void 0:S.error)||"Gncelleme baarsz.");S.data&&s(S.data),g(!0),setTimeout(()=>g(!1),3e3)}catch(S){console.error("Update failed:",S),v((S==null?void 0:S.message)||"Gncelleme baarsz.")}finally{u(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6",children:"Profil Dzenle"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Profil Fotoraf"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:r!=null&&r.avatar_url||r!=null&&r.profile_image?e.jsx("img",{src:r.avatar_url||r.profile_image,alt:r.full_name,className:"w-full h-full object-cover"}):e.jsx(vy,{className:"w-10 h-10 text-gray-400"})}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("input",{ref:N,type:"file",accept:"image/jpeg,image/png,image/webp",className:"hidden",onChange:A=>{var S;return M((S=A.target.files)==null?void 0:S[0])}}),e.jsxs("button",{type:"button",onClick:_,disabled:b,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Ny,{className:"w-6 h-6 sm:w-5 sm:h-5"}),b?"Ykleniyor...":"Fotoraf Ykle"]}),e.jsx("p",{className:"text-xs text-gray-500",children:"JPG/PNG/WEBP  max 2MB"})]})]})]}),e.jsxs("form",{onSubmit:T,className:"space-y-6",children:[c&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-700 flex items-center gap-2",children:[e.jsx(Ga,{className:"w-5 h-5"}),"Profil baaryla gncellendi!"]}),f&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5"}),f]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ad Soyad"}),e.jsx("input",{type:"text",name:"full_name",value:l.full_name,onChange:k,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Biyografi"}),e.jsx("textarea",{name:"bio",value:l.bio,onChange:k,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none resize-none",placeholder:"Kendinizden bahsedin..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telefon (Opsiyonel)"}),e.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:k,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none",placeholder:"05XXXXXXXXX"})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:d,className:"flex items-center gap-2 bg-primary-blue hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-bold transition-all disabled:opacity-50",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),d?"Kaydediliyor...":"Kaydet"]})})]})]})},fS=()=>{const{user:r,updateUser:s}=Pa(),[l,i]=m.useState({username:(r==null?void 0:r.username)||"",email:(r==null?void 0:r.email)||"",phone:(r==null?void 0:r.phone)||"",city_code:(r==null?void 0:r.city_code)||"",birth_date:(r==null?void 0:r.birth_date)||""}),[d,u]=m.useState(!1),[c,g]=m.useState(""),[f,v]=m.useState({checking:!1,available:null,message:""}),b=m.useRef(null);m.useEffect(()=>{const N=async()=>{const k=l.username;if(!k||k===(r==null?void 0:r.username)){v({checking:!1,available:null,message:""});return}if(k.length<3){v({checking:!1,available:!1,message:"En az 3 karakter olmal"});return}if(k.length>15){v({checking:!1,available:!1,message:"En fazla 15 karakter olabilir"});return}if(!/^[a-zA-Z0-9._-]+$/.test(k)){v({checking:!1,available:!1,message:"Sadece harf, rakam, alt izgi (_), tire (-) ve nokta (.) kullanlabilir"});return}v({checking:!0,available:null,message:"Kontrol ediliyor..."});try{const M=await re("/api/users/check-username/".concat(k));M.success&&v({checking:!1,available:M.available,message:M.available?"Kullanc ad msait! ":M.message})}catch(M){console.error("Username check error:",M),v({checking:!1,available:!1,message:"Kontrol edilemedi"})}};return b.current&&clearTimeout(b.current),b.current=setTimeout(N,500),()=>{b.current&&clearTimeout(b.current)}},[l.username,r==null?void 0:r.username]);const w=async N=>{N.preventDefault(),g(""),u(!1);try{if(l.username!==(r==null?void 0:r.username)){const M=await re("/api/users/username",{method:"PUT",body:JSON.stringify({username:l.username})});if(!M.success){g(M.error||"Kullanc ad gncellenemedi");return}M.data&&s(M.data)}const k=r&&typeof r.metadata=="object"&&r.metadata?r.metadata:{},_=await re("/api/users/me",{method:"PUT",body:JSON.stringify({phone:l.phone,city_code:l.city_code,metadata:{...k,birth_date:l.birth_date||null}})});if(!_.success){g(_.error||"Hesap bilgileri gncellenemedi");return}_.data&&s(_.data),u(!0),setTimeout(()=>u(!1),3e3)}catch(k){g(k.message||"Bir hata olutu")}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6",children:"Hesap Ayarlar"}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[d&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-700",children:" Hesap ayarlar gncellendi!"}),c&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:c}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Kullanc Ad",e.jsxs("span",{className:"text-xs text-gray-500 font-normal ml-2",children:["(polithane.com/",e.jsx("span",{className:"font-medium",children:l.username||"kullanici-adiniz"}),")"]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(_j,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:l.username,onChange:N=>i(k=>({...k,username:N.target.value.toLowerCase()})),className:"w-full pl-14 pr-12 py-3 border rounded-lg focus:ring-2 outline-none ".concat(f.available===!1?"border-red-300 focus:ring-red-200":f.available===!0?"border-green-300 focus:ring-green-200":"border-gray-300 focus:ring-primary-blue"),placeholder:"kullanici-adiniz",maxLength:15,minLength:3}),e.jsxs("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:[f.checking&&e.jsx(Zc,{className:"w-5 h-5 text-gray-400 animate-spin"}),!f.checking&&f.available===!0&&e.jsx(Ga,{className:"w-5 h-5 text-green-500"}),!f.checking&&f.available===!1&&e.jsx(wy,{className:"w-5 h-5 text-red-500"})]})]}),f.message&&e.jsx("p",{className:"text-sm mt-2 ".concat(f.available?"text-green-600":"text-red-600"),children:f.message}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:" 3-15 karakter aras  Sadece harf, rakam, alt izgi (_), tire (-) ve nokta (.) kullanlabilir"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"E-posta Adresi"}),e.jsxs("div",{className:"relative",children:[e.jsx(hr,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"email",value:l.email,onChange:N=>i(k=>({...k,email:N.target.value})),className:"w-full pl-14 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",disabled:!0})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"E-posta adresi deitirilemez"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telefon"}),e.jsxs("div",{className:"relative",children:[e.jsx(ed,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"tel",value:l.phone,onChange:N=>i(k=>({...k,phone:N.target.value})),className:"w-full pl-14 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"+90 555 123 45 67"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:f.available===!1||f.checking,className:"flex items-center gap-2 bg-primary-blue text-white px-6 py-3 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Kaydet"]})})]})]})},xS=()=>{const{user:r,updateUser:s,changePassword:l}=Pa(),[i,d]=m.useState({current:"",new:"",confirm:""}),[u,c]=m.useState(!1),[g,f]=m.useState(!1),[v,b]=m.useState(""),[w,N]=m.useState(!1),[k,_]=m.useState(!1),M=m.useRef(null),T=m.useMemo(()=>[{id:"length",label:"En az 8 karakter",ok:j=>String(j||"").length>=8},{id:"max",label:"En fazla 50 karakter",ok:j=>String(j||"").length<=50},{id:"letter",label:"En az 1 harf",ok:j=>/[a-zA-Z]/.test(String(j||""))},{id:"number",label:"En az 1 rakam",ok:j=>/[0-9]/.test(String(j||""))}],[]),A=T.every(j=>j.ok(i.new)),S=!i.confirm||i.new===i.confirm;m.useEffect(()=>{var O;const j=r&&typeof r.metadata=="object"&&r.metadata?r.metadata:{},E=localStorage.getItem("polithane_2fa_enabled"),C=(O=j.security_settings)==null?void 0:O.twoFactorEnabled;typeof C=="boolean"?c(C):E!=null&&c(E==="true")},[]);const y=async j=>{localStorage.setItem("polithane_2fa_enabled",j?"true":"false"),_(!0);try{const E=r&&typeof r.metadata=="object"&&r.metadata?r.metadata:{},C=await re("/api/users/me",{method:"PUT",body:JSON.stringify({metadata:{...E,security_settings:{...E.security_settings&&typeof E.security_settings=="object"?E.security_settings:{},twoFactorEnabled:!!j}}})});C!=null&&C.success&&C.data&&s(C.data)}catch(E){b((E==null?void 0:E.message)||"2FA ayar sunucuya kaydedilemedi. Bu cihazda kaydedildi. Kalc zm iin Supabase'de `users.metadata` stunu olmal.")}finally{_(!1)}},p=async j=>{if(j.preventDefault(),b(""),f(!1),i.new!==i.confirm){b("Yeni ifreler elemiyor!");return}if(!i.current||!i.new){b("Ltfen mevcut ifre ve yeni ifreyi girin.");return}if(!A){b("Yeni ifre kurallara uygun deil.");return}N(!0);try{const E=await l(i.current,i.new);if(!(E!=null&&E.success))throw new Error((E==null?void 0:E.error)||"ifre deitirilemedi.");f(!0),d({current:"",new:"",confirm:""}),setTimeout(()=>f(!1),3e3)}catch(E){b((E==null?void 0:E.message)||"ifre deitirilemedi.")}finally{N(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6",children:"Gvenlik Ayarlar"}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"ifre Deitir"}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[g&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-700 flex items-center gap-2",children:[e.jsx(Ga,{className:"w-5 h-5"}),"ifre baaryla deitirildi!"]}),v&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5"}),v]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mevcut ifre"}),e.jsx("input",{type:"password",value:i.current,onChange:j=>d(E=>({...E,current:j.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Yeni ifre"}),e.jsx("input",{type:"password",value:i.new,onChange:j=>d(E=>({...E,new:j.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",maxLength:50}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:T.map(j=>{const E=j.ok(i.new);return e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full flex items-center transition-colors ".concat(E?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"),children:[E?e.jsx(Ga,{className:"w-5 h-5 sm:w-4 sm:h-4 mr-1"}):e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-400 mr-1"}),j.label]},j.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Yeni ifre (Tekrar)"}),e.jsx("input",{type:"password",value:i.confirm,onChange:j=>d(E=>({...E,confirm:j.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",maxLength:50}),!S&&e.jsx("p",{className:"text-sm text-red-600 mt-2",children:"ifreler elemiyor."})]}),e.jsxs("button",{type:"submit",disabled:w||!i.current||!i.new||!i.confirm||!S||!A,className:"flex items-center gap-2 bg-primary-blue text-white px-6 py-3 rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),w?"Deitiriliyor...":"ifreyi Deitir"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"ki Faktrl Dorulama"}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(on,{className:"w-5 h-5 text-primary-blue"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"2FA Aktif"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ek gvenlik katman"})]})]}),e.jsx("input",{type:"checkbox",checked:u,onChange:j=>{const E=j.target.checked;c(E),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>y(E),400)},className:"w-6 h-6 text-primary-blue rounded"})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{type:"button",onClick:()=>y(u),disabled:k,className:"px-5 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Kaydediliyor...":"Kaydet"})})]})]})},gS=()=>{const{user:r,updateUser:s}=Pa(),[l,i]=m.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,likes:!0,comments:!0,follows:!0,mentions:!0,messages:!0,weeklyDigest:!0}),[d,u]=m.useState(!1),[c,g]=m.useState(!1),[f,v]=m.useState(""),b=m.useRef(null),w=m.useRef(!1),N=m.useMemo(()=>{const M=r&&typeof r.metadata=="object"&&r.metadata?r.metadata:{};if(M.notification_settings&&typeof M.notification_settings=="object")return M.notification_settings;const T=localStorage.getItem("polithane_notification_settings");if(!T)return null;try{return JSON.parse(T)}catch(A){return null}},[r]);m.useEffect(()=>{N&&i(M=>({...M,...N}))},[N]),m.useEffect(()=>{if(!w.current){w.current=!0;return}localStorage.setItem("polithane_notification_settings",JSON.stringify(l)),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{_()},800)},[l]);const k=M=>{i(T=>({...T,[M]:!T[M]}))},_=()=>{(async()=>{u(!0),g(!1),v("");try{const T=r&&typeof r.metadata=="object"&&r.metadata?r.metadata:{},A=await re("/api/users/me",{method:"PUT",body:JSON.stringify({metadata:{...T,notification_settings:l}})});if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Kaydedilemedi.");A.data&&s(A.data),g(!0),setTimeout(()=>g(!1),3e3)}catch(T){v((T==null?void 0:T.message)||"Kaydedilemedi. Bu cihazda kaydedildi. Kalc zm iin Supabase'de `users.metadata` stunu olmal.")}finally{u(!1)}})()};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6",children:"Bildirim Ayarlar"}),c&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-700 flex items-center gap-2 mb-6",children:[e.jsx(Ga,{className:"w-5 h-5"}),"Kaydedildi."]}),f&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 flex items-center gap-2 mb-6",children:[e.jsx(fs,{className:"w-5 h-5"}),f]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Bildirim Kanallar"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(hr,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"E-posta Bildirimleri"}),e.jsx("div",{className:"text-sm text-gray-600",children:"E-posta ile bildirim al"})]})]}),e.jsx("input",{type:"checkbox",checked:l.emailNotifications,onChange:()=>k("emailNotifications"),className:"w-5 h-5 text-primary-blue rounded"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ni,{className:"w-5 h-5 text-purple-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Anlk Bildirimler"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Tarayc bildirimleri"})]})]}),e.jsx("input",{type:"checkbox",checked:l.pushNotifications,onChange:()=>k("pushNotifications"),className:"w-5 h-5 text-primary-blue rounded"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Bildirim Tipleri"}),e.jsx("div",{className:"space-y-3",children:[{key:"likes",label:"Beeniler",desc:"Paylamlarnz beenildiinde"},{key:"comments",label:"Yorumlar",desc:"Paylamlarnza yorum yapldnda"},{key:"follows",label:"Takipler",desc:"Sizi takip ettiklerinde"},{key:"mentions",label:"Bahsetmeler",desc:"Sizi etiketlediklerinde"},{key:"messages",label:"Mesajlar",desc:"Yeni mesaj aldnzda"}].map(M=>e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:M.label}),e.jsx("div",{className:"text-sm text-gray-600",children:M.desc})]}),e.jsx("input",{type:"checkbox",checked:l[M.key],onChange:()=>k(M.key),className:"w-5 h-5 text-primary-blue rounded"})]},M.key))})]}),e.jsxs("button",{onClick:_,disabled:d,className:"flex items-center gap-2 bg-primary-blue text-white px-6 py-3 rounded-lg hover:bg-blue-600 disabled:opacity-50",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),d?"Kaydediliyor...":"Kaydet"]})]})},yS=()=>{const{user:r,updateUser:s}=Pa(),[l,i]=m.useState({profileVisibility:"public",showEmail:!1,showPhone:!1,showBirthday:!1,allowMessages:"everyone",allowComments:"everyone",allowTagging:"following",showOnlineStatus:!0,showActivity:!0,showFollowers:!0,showFollowing:!0,indexProfile:!0}),[d,u]=m.useState(!1),[c,g]=m.useState(!1),[f,v]=m.useState(""),b=m.useRef(null),w=m.useRef(!1),N=m.useMemo(()=>{const T=r&&typeof r.metadata=="object"&&r.metadata?r.metadata:{};if(T.privacy_settings&&typeof T.privacy_settings=="object")return T.privacy_settings;const A=localStorage.getItem("polithane_privacy_settings");if(!A)return null;try{return JSON.parse(A)}catch(S){return null}},[r]);m.useEffect(()=>{N&&i(T=>({...T,...N}))},[N]),m.useEffect(()=>{if(!w.current){w.current=!0;return}localStorage.setItem("polithane_privacy_settings",JSON.stringify(l)),b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{M()},800)},[l]);const k=T=>{i(A=>({...A,[T]:!A[T]}))},_=(T,A)=>{i(S=>({...S,[T]:A}))},M=async()=>{u(!0),g(!1),v("");try{const T=r&&typeof r.metadata=="object"&&r.metadata?r.metadata:{},A=await re("/api/users/me",{method:"PUT",body:JSON.stringify({metadata:{...T,privacy_settings:l}})});if(!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Kaydedilemedi.");A.data&&s(A.data),g(!0),setTimeout(()=>g(!1),3e3)}catch(T){v((T==null?void 0:T.message)||"Kaydedilemedi. Bu cihazda kaydedildi. Kalc zm iin Supabase'de `users.metadata` stunu olmal.")}finally{u(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6",children:"Gizlilik Ayarlar"}),c&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-700 flex items-center gap-2 mb-6",children:[e.jsx(Ga,{className:"w-5 h-5"}),"Kaydedildi."]}),f&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 flex items-center gap-2 mb-6",children:[e.jsx(fs,{className:"w-5 h-5"}),f]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(fl,{className:"w-6 h-6 text-primary-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Profil Grnrl"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Profilinizi kimler grebilir?"})]})]}),e.jsxs("select",{value:l.profileVisibility,onChange:T=>_("profileVisibility",T.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none",children:[e.jsx("option",{value:"public",children:"Herkese Ak"}),e.jsx("option",{value:"followers",children:"Sadece Takipilerim"}),e.jsx("option",{value:"private",children:"Gizli (Kimse gremez)"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(nn,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Kiisel Bilgiler"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Hangi bilgileriniz grnsn?"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"E-posta Adresi"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Profilimde e-posta adresimi gster"})]}),e.jsx("input",{type:"checkbox",checked:l.showEmail,onChange:()=>k("showEmail"),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Telefon Numaras"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Profilimde telefon numaram gster"})]}),e.jsx("input",{type:"checkbox",checked:l.showPhone,onChange:()=>k("showPhone"),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Doum Tarihi"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Profilimde doum tarihimi gster"})]}),e.jsx("input",{type:"checkbox",checked:l.showBirthday,onChange:()=>k("showBirthday"),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(ts,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Etkileim Ayarlar"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Kimler sizinle etkileime geebilir?"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mesaj Gnderebilir"}),e.jsxs("select",{value:l.allowMessages,onChange:T=>_("allowMessages",T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none",children:[e.jsx("option",{value:"everyone",children:"Herkes"}),e.jsx("option",{value:"following",children:"Takip Ettiklerim"}),e.jsx("option",{value:"followers",children:"Takipilerim"}),e.jsx("option",{value:"none",children:"Kimse"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Yorum Yapabilir"}),e.jsxs("select",{value:l.allowComments,onChange:T=>_("allowComments",T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none",children:[e.jsx("option",{value:"everyone",children:"Herkes"}),e.jsx("option",{value:"following",children:"Takip Ettiklerim"}),e.jsx("option",{value:"followers",children:"Takipilerim"}),e.jsx("option",{value:"none",children:"Kimse"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Beni Etiketleyebilir"}),e.jsxs("select",{value:l.allowTagging,onChange:T=>_("allowTagging",T.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none",children:[e.jsx("option",{value:"everyone",children:"Herkes"}),e.jsx("option",{value:"following",children:"Takip Ettiklerim"}),e.jsx("option",{value:"none",children:"Kimse"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(cs,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Aktivite ve Grnrlk"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Aktivitelerinizi paylan"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"evrimii Durumu Gster"}),e.jsx("div",{className:"text-sm text-gray-600",children:"evrimii olduunuzda gsterilsin mi?"})]}),e.jsx("input",{type:"checkbox",checked:l.showOnlineStatus,onChange:()=>k("showOnlineStatus"),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Aktivite Gemii"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Beeniler ve yorumlar gster"})]}),e.jsx("input",{type:"checkbox",checked:l.showActivity,onChange:()=>k("showActivity"),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Takipi Listesi"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Takipilerimi gster"})]}),e.jsx("input",{type:"checkbox",checked:l.showFollowers,onChange:()=>k("showFollowers"),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Takip Ettiklerim Listesi"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Takip ettiklerimi gster"})]}),e.jsx("input",{type:"checkbox",checked:l.showFollowing,onChange:()=>k("showFollowing"),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(on,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Arama Motorlar"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Profilinizin arama motorlarnda grnmesi"})]})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Arama Motorlarna zin Ver"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Google, Bing gibi arama motorlarnda kmasn sala"})]}),e.jsx("input",{type:"checkbox",checked:l.indexProfile,onChange:()=>k("indexProfile"),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:M,disabled:d,className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold inline-flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),d?"Kaydediliyor...":"Deiiklikleri Kaydet"]})})]})},Wp=m.createContext(null),eb=()=>{const r=m.useContext(Wp);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r},ey={primaryColor:"#009FD6",secondaryColor:"#10b981",accentColor:"#f59e0b",dangerColor:"#ef4444",backgroundColor:"#f9fafb",textColor:"#111827",borderRadius:"0.75rem",fontFamily:"Inter, system-ui, sans-serif"},pS=({children:r})=>{const[s,l]=m.useState(ey),[i,d]=m.useState(!1);m.useEffect(()=>{const w=()=>{const M=localStorage.getItem("theme"),T=localStorage.getItem("darkMode");if(M)try{l(JSON.parse(M))}catch(A){}T!=null&&d(T==="true")},N=localStorage.getItem("theme");w(),(async()=>{try{if(N)return;const M=await re("/api/theme",{method:"GET"}).catch(()=>null);M!=null&&M.success&&(M!=null&&M.data)&&typeof M.data=="object"&&l(T=>({...T,...M.data}))}catch(M){}})();const k=M=>{((M==null?void 0:M.key)==="theme"||(M==null?void 0:M.key)==="darkMode")&&w()},_=()=>w();return window.addEventListener("storage",k),window.addEventListener("theme:apply",_),()=>{window.removeEventListener("storage",k),window.removeEventListener("theme:apply",_)}},[]),m.useEffect(()=>{const w=document.documentElement;w.style.setProperty("--primary-color",s.primaryColor),w.style.setProperty("--secondary-color",s.secondaryColor),w.style.setProperty("--accent-color",s.accentColor),w.style.setProperty("--danger-color",s.dangerColor),w.style.setProperty("--background-color",s.backgroundColor),w.style.setProperty("--text-color",s.textColor),w.style.setProperty("--border-radius",s.borderRadius),w.style.setProperty("--font-family",s.fontFamily),i?w.classList.add("dark"):w.classList.remove("dark")},[s,i]);const u=w=>{const N={...s,...w};l(N),localStorage.setItem("theme",JSON.stringify(N)),window.dispatchEvent(new Event("theme:apply"))},c=()=>{const w=!i;d(w),localStorage.setItem("darkMode",w.toString()),window.dispatchEvent(new Event("theme:apply"))},g=w=>{const N=!!w;d(N),localStorage.setItem("darkMode",N.toString()),window.dispatchEvent(new Event("theme:apply"))},f=w=>{const N=String(w||"").trim();N&&u({primaryColor:N})},v=()=>{l(ey),localStorage.removeItem("theme")},b={theme:s,darkMode:i,primaryColor:s.primaryColor,updateTheme:u,toggleDarkMode:c,setDarkMode:g,setPrimaryColor:f,resetTheme:v};return e.jsx(Wp.Provider,{value:b,children:r})},bS=()=>{const{darkMode:r,primaryColor:s,setDarkMode:l,setPrimaryColor:i}=eb(),{user:d,updateUser:u}=Pa(),[c,g]=m.useState("light"),[f,v]=m.useState("medium"),[b,w]=m.useState(!1),[N,k]=m.useState(!1),_=m.useMemo(()=>{const S=d&&typeof d.metadata=="object"&&d.metadata?d.metadata:{};return S.appearance_settings&&typeof S.appearance_settings=="object"?S.appearance_settings:null},[d]);m.useEffect(()=>{_&&(typeof _.darkMode=="boolean"&&l(_.darkMode),typeof _.primaryColor=="string"&&_.primaryColor&&i(_.primaryColor),typeof _.fontSize=="string"&&v(_.fontSize),typeof _.compactMode=="boolean"&&w(_.compactMode))},[_]),m.useEffect(()=>{g(r?"dark":"light")},[r]);const M=[{name:"Mavi",value:"#00aaff",color:"bg-[#00aaff]"},{name:"Krmz",value:"#ff3b30",color:"bg-red-500"},{name:"Yeil",value:"#34c759",color:"bg-green-500"},{name:"Mor",value:"#af52de",color:"bg-purple-500"},{name:"Turuncu",value:"#ff9500",color:"bg-orange-500"},{name:"Pembe",value:"#ff2d55",color:"bg-pink-500"}],T=(S,y)=>{const p=document.documentElement;p.dataset.fontSize=S||"medium",p.dataset.compact=y?"true":"false"};m.useEffect(()=>{T(f,b)},[f,b]);const A=async()=>{k(!0);try{const S=d&&typeof d.metadata=="object"&&d.metadata?d.metadata:{},y={darkMode:!!r,primaryColor:String(s||"").trim(),fontSize:f,compactMode:!!b},p=await re("/api/users/me",{method:"PUT",body:JSON.stringify({metadata:{...S,appearance_settings:y}})});p!=null&&p.success&&p.data&&u(p.data),window.dispatchEvent(new Event("theme:apply"))}finally{k(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-6",children:"Grnm Ayarlar"}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(bo,{className:"w-6 h-6 text-primary-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Tema Modu"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Aydnlk veya karanlk tema sein"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>{g("light"),l(!1)},className:"flex flex-col items-center gap-3 p-4 border-2 rounded-xl transition-all ".concat(c==="light"?"border-primary-blue bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center border border-gray-200",children:e.jsx(Sj,{className:"w-6 h-6 text-yellow-500"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Aydnlk"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Gndz modu"})]})]}),e.jsxs("button",{onClick:()=>{g("dark"),l(!0)},className:"flex flex-col items-center gap-3 p-4 border-2 rounded-xl transition-all ".concat(c==="dark"?"border-primary-blue bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsx(kj,{className:"w-6 h-6 text-blue-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Karanlk"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Gece modu"})]})]}),e.jsxs("button",{onClick:()=>{g("auto")},className:"flex flex-col items-center gap-3 p-4 border-2 rounded-xl transition-all ".concat(c==="auto"?"border-primary-blue bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-gray-800 rounded-lg flex items-center justify-center",children:e.jsx(Ej,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Otomatik"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Sistem ayar"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(bo,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Renk emas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ana rengi sein"})]})]}),e.jsx("div",{className:"grid grid-cols-6 gap-3",children:M.map(S=>e.jsxs("button",{onClick:()=>i(S.value),className:"flex flex-col items-center gap-2 p-3 border-2 rounded-xl transition-all ".concat(s===S.value?"border-gray-900":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-10 h-10 ".concat(S.color," rounded-lg shadow-md")}),e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:S.name})]},S.value))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Tj,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Yaz Boyutu"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Metin boyutunu ayarlayn"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("button",{onClick:()=>v("small"),className:"p-4 border-2 rounded-xl transition-all ".concat(f==="small"?"border-primary-blue bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Kk"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Daha fazla ierik"})]}),e.jsxs("button",{onClick:()=>v("medium"),className:"p-4 border-2 rounded-xl transition-all ".concat(f==="medium"?"border-primary-blue bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"text-base font-semibold text-gray-900 mb-1",children:"Normal"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Varsaylan boyut"})]}),e.jsxs("button",{onClick:()=>v("large"),className:"p-4 border-2 rounded-xl transition-all ".concat(f==="large"?"border-primary-blue bg-blue-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Byk"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Daha rahat okuma"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(Aj,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Dzen Seenekleri"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sayfa dzenini zelletirin"})]})]}),e.jsxs("label",{className:"flex items-center justify-between p-3 hover:bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Kompakt Mod"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Daha skk ierik grnm"})]}),e.jsx("input",{type:"checkbox",checked:b,onChange:()=>w(!b),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:A,disabled:N,className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Kaydediliyor...":"Deiiklikleri Kaydet"})})]})},vS=()=>{const[r,s]=m.useState(!1),[l,i]=m.useState(""),[d,u]=m.useState(""),[c,g]=m.useState([]),[f,v]=m.useState(""),[b,w]=m.useState([]),[N,k]=m.useState(!1),_=async()=>{s(!0),i("");try{const S=await re("/api/users/blocks");if(!(S!=null&&S.success))throw new Error((S==null?void 0:S.error)||"Engellenenler yklenemedi.");g(S.data||[])}catch(S){const y=String((S==null?void 0:S.message)||"");i(y||"Engellenenler kaydedilemiyor. zm: Supabase'de `users` tablosuna `metadata` (JSONB) stunu eklenmeli ve RLS/policy ayarlanmal.")}finally{s(!1)}};m.useEffect(()=>{_()},[]),m.useEffect(()=>{let S=null;return S=setTimeout(async()=>{const p=f.trim();if(p.length<3){w([]);return}k(!0);try{const j=await re("/api/users?search=".concat(encodeURIComponent(p),"&limit=8")),E=Array.isArray(j)?j:(j==null?void 0:j.data)||[];w(Array.isArray(E)?E:[])}catch(j){w([])}finally{k(!1)}},350),()=>S&&clearTimeout(S)},[f]);const M=async S=>{i(""),u("");try{const y=await re("/api/users/blocks",{method:"POST",body:JSON.stringify({user_id:S})});if(!(y!=null&&y.success))throw new Error((y==null?void 0:y.error)||"Engellenemedi.");u("Kullanc engellendi."),await _(),setTimeout(()=>u(""),2500)}catch(y){i((y==null?void 0:y.message)||"Engellenemedi.")}},T=async S=>{i(""),u("");try{const y=await re("/api/users/blocks/".concat(S),{method:"DELETE"});if(!(y!=null&&y.success))throw new Error((y==null?void 0:y.error)||"Kaldrlamad.");u("Engel kaldrld."),await _(),setTimeout(()=>u(""),2500)}catch(y){i((y==null?void 0:y.message)||"Kaldrlamad.")}},A=new Set((c||[]).map(S=>String(S==null?void 0:S.id)));return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-2",children:"Engellenenler"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Engellediiniz kullanclar size mesaj gnderemez (mesaj filtrelemesi sonraki admda)."}),d&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-700 flex items-center gap-2 mb-6",children:[e.jsx(Ga,{className:"w-5 h-5"}),d]}),l&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 flex items-center gap-2 mb-6",children:[e.jsx(fs,{className:"w-5 h-5"}),l]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{value:f,onChange:S=>v(S.target.value),placeholder:"Kullanc ara (en az 3 karakter)",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none"}),N&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 animate-spin w-5 h-5 border-2 border-primary-blue border-t-transparent rounded-full"})]}),b.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:b.map(S=>e.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-xl",children:[e.jsx(Yt,{src:S.avatar_url,size:"44px"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-gray-900 truncate",children:S.full_name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",S.username]})]}),e.jsxs("button",{onClick:()=>M(S.id),disabled:A.has(String(S.id)),className:"inline-flex items-center gap-2 bg-gray-900 hover:bg-black text-white font-bold px-3 py-2 rounded-lg disabled:opacity-50",children:[e.jsx(jy,{className:"w-6 h-6 sm:w-5 sm:h-5"}),A.has(String(S.id))?"Engelli":"Engelle"]})]},S.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 flex items-center justify-between",children:[e.jsx("div",{className:"font-bold text-gray-900",children:"Engellenen Kullanclar"}),e.jsx("div",{className:"text-sm text-gray-600",children:c.length})]}),e.jsxs("div",{className:"divide-y",children:[c.map(S=>e.jsxs("div",{className:"px-5 py-4 flex items-center gap-3",children:[e.jsx(Yt,{src:S.avatar_url,size:"44px"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-gray-900 truncate",children:S.full_name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",S.username]})]}),e.jsxs("button",{onClick:()=>T(S.id),className:"inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-bold px-3 py-2 rounded-lg",children:[e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Kaldr"]})]},S.id)),!r&&c.length===0&&e.jsx("div",{className:"px-5 py-10 text-center text-gray-500",children:"Henz kimseyi engellemediniz."})]})]})]})},jS=()=>{const r=Qt(),{user:s,updateUser:l,logout:i}=Pa(),[d,u]=m.useState(!1),[c,g]=m.useState(!1),[f,v]=m.useState(!1),[b,w]=m.useState(""),[N,k]=m.useState(!1),[_,M]=m.useState(""),[T,A]=m.useState(!1),[S,y]=m.useState(!1),p=m.useMemo(()=>{const C=s&&typeof s.metadata=="object"&&s.metadata?s.metadata:{};return{status:String(C.delete_request_status||""),scheduledFor:C.delete_request_scheduled_for||""}},[s]),j=async()=>{k(!0),M(""),A(!1);try{const C=localStorage.getItem("auth_token"),O=await fetch("/api/users/me/delete-request",{method:"POST",headers:{"Content-Type":"application/json",...C?{Authorization:"Bearer ".concat(C)}:{}}}),P=await O.json().catch(()=>({}));if(!O.ok||!(P!=null&&P.success))throw new Error((P==null?void 0:P.error)||"Onay e-postas gnderilemedi.");y(!0),A(!0)}catch(C){M((C==null?void 0:C.message)||"Onay e-postas gnderilemedi.")}finally{k(!1)}},E=async()=>{k(!0),M("");try{const C=localStorage.getItem("auth_token"),O=await fetch("/api/users/me/reactivate",{method:"POST",headers:{"Content-Type":"application/json",...C?{Authorization:"Bearer ".concat(C)}:{}}}),P=await O.json().catch(()=>({}));if(!O.ok||!(P!=null&&P.success))throw new Error((P==null?void 0:P.error)||"Hesap tekrar aktif edilemedi.");P.data&&l(P.data),A(!0),y(!1)}catch(C){M((C==null?void 0:C.message)||"Hesap tekrar aktif edilemedi.")}finally{k(!1)}};return e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black text-gray-900 mb-2",children:"Hesab Sil"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Hesabnz silmek iin 3 aamal gvenlik onay gerekir. Son admda eposta onay gnderilir."}),T&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-green-700 flex items-center gap-2 mb-6",children:[e.jsx(Ga,{className:"w-5 h-5"}),S?"Onay e-postas gnderildi. Ltfen e-postanz kontrol edin.":"lem baarl."]}),_&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 flex items-center gap-2 mb-6",children:[e.jsx(fs,{className:"w-5 h-5"}),_]}),p.status==="confirmed"&&e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-50 border border-blue-100 flex items-center justify-center",children:e.jsx(e0,{className:"w-6 h-6 text-primary-blue"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-black text-gray-900",children:"Silme kayd mevcut"}),e.jsx("div",{className:"text-sm text-gray-700 mt-1",children:"Hesabnz silinmek zere kayda alnm. Bu sre boyunca hesabnz tekrar aktif edebilirsiniz."}),p.scheduledFor&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Planlanan kesin silme: ",e.jsx("span",{className:"font-semibold",children:new Date(p.scheduledFor).toLocaleString("tr-TR")})]}),e.jsxs("button",{onClick:E,disabled:N,className:"mt-4 inline-flex items-center gap-2 bg-primary-blue hover:bg-blue-600 text-white font-bold px-5 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(e0,{className:"w-5 h-5"}),N?"leniyor...":"Hesabm Tekrar Aktif Et"]})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-red-200 p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 border border-red-100 flex items-center justify-center",children:e.jsx(gi,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-black text-gray-900",children:"Gvenlik Onay (3 adm)"}),e.jsx("div",{className:"text-sm text-gray-700 mt-1",children:"Hesap silme talebi, eposta zerinden onaylandktan sonra hesabnz pasif duruma alnr. Bu andan itibaren profiliniz ve ierikleriniz dier kullanclara grnmez olur. 90 gn sonunda hesap kalc silinir."}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:C=>u(C.target.checked),className:"mt-0.5 w-6 h-6"}),e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("span",{className:"font-semibold",children:"1)"})," Bu talebin gvenlik nedeniyle eposta ile onaylanacan anladm."]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:C=>g(C.target.checked),className:"mt-0.5 w-6 h-6"}),e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("span",{className:"font-semibold",children:"2)"})," Onay sonras hesabm pasif olacak; 90 gn sonunda sitedeki grnrlm kaldrlacak."]})]}),e.jsxs("label",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:C=>v(C.target.checked),className:"mt-0.5 w-6 h-6"}),e.jsxs("div",{className:"text-sm text-gray-800",children:[e.jsx("span",{className:"font-semibold",children:"3)"})," Bu sre iinde istersem hesabm tekrar aktif edebileceimi anladm."]})]}),e.jsxs("div",{className:"pt-2",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Devam etmek iin kutuya ",e.jsx("strong",{children:"SL"})," yazn."]}),e.jsx("input",{value:b,onChange:C=>w(C.target.value),className:"mt-3 w-full border border-gray-300 rounded-lg p-3",placeholder:"SL"})]}),e.jsxs("button",{onClick:j,disabled:N||!d||!c||!f||b.trim().toUpperCase()!=="SL",className:"mt-2 inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white font-bold px-5 py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(hr,{className:"w-5 h-5"}),N?"Gnderiliyor...":"Onay E-postas Gnder"]}),e.jsx("button",{type:"button",onClick:()=>{r("/")},className:"w-full mt-2 inline-flex items-center justify-center gap-2 border border-gray-300 hover:bg-gray-50 text-gray-800 font-bold px-5 py-3 rounded-lg",children:"Vazge"})]})]})]})})]})},NS=({onNavigate:r,onClose:s,showCloseButton:l=!1})=>{const i=tr(),[d,u]=m.useState(!1),c=[{title:"Genel",items:[{path:"/adminyonetim",icon:Cj,label:"Genel Bak"},{path:"/adminyonetim/analytics",icon:_y,label:"Analitik & Raporlar"}]},{title:"erik Ynetimi",items:[{path:"/adminyonetim/users",icon:ts,label:"Kullanc Ynetimi"},{path:"/adminyonetim/parliament",icon:hd,label:"Meclis Ynetimi"},{path:"/adminyonetim/parties",icon:sn,label:"Parti Ynetimi"},{path:"/adminyonetim/agendas",icon:mr,label:"Gndem Ynetimi"},{path:"/adminyonetim/posts",icon:rn,label:"Post Moderasyonu"},{path:"/adminyonetim/comments",icon:rn,label:"Yorum Moderasyonu"},{path:"/adminyonetim/media",icon:ci,label:"Medya Ynetimi"}]},{title:"Platform Ayarlar",items:[{path:"/adminyonetim/algorithm",icon:er,label:"Polit Puan Algoritmas"},{path:"/adminyonetim/site-settings",icon:md,label:"Site Ayarlar"},{path:"/adminyonetim/theme",icon:bo,label:"Tasarm & Tema"},{path:"/adminyonetim/seo",icon:Gs,label:"SEO Ayarlar"},{path:"/adminyonetim/email",icon:hr,label:"E-posta ablonlar"},{path:"/adminyonetim/mail-settings",icon:dh,label:"Mail Ayarlar"},{path:"/adminyonetim/notifications",icon:ni,label:"Bildirim Kurallar"}]},{title:"Otomasyon",items:[{path:"/adminyonetim/automation",icon:Bm,label:"Otomasyon Kontrol"},{path:"/adminyonetim/scraping",icon:fy,label:"Tarama Ynetimi"},{path:"/adminyonetim/sources",icon:fl,label:"Kaynak Ynetimi"}]},{title:"Gelir & Reklam",items:[{path:"/adminyonetim/ads",icon:Mj,label:"Reklam Ynetimi"},{path:"/adminyonetim/payments",icon:vo,label:"deme & Gelir"}]},{title:"Sistem",items:[{path:"/adminyonetim/security",icon:on,label:"Gvenlik"},{path:"/adminyonetim/database",icon:Sy,label:"Veritaban Ynetimi"},{path:"/adminyonetim/api",icon:Rj,label:"API Ayarlar"},{path:"/adminyonetim/jobs",icon:Oj,label:"Job Kuyruu"},{path:"/adminyonetim/system",icon:zj,label:"Sistem Dnmleri"}]}];return e.jsxs("div",{className:"w-full bg-white border-r border-gray-200 h-[100dvh] overflow-y-auto lg:h-screen",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between gap-3",children:[e.jsxs(Tt,{to:"/",className:"flex items-center gap-3 hover:opacity-90 transition-opacity","aria-label":"Ana sayfaya git",children:[d?e.jsx("div",{className:"w-12 h-12 bg-primary-blue rounded-2xl flex items-center justify-center shadow",children:e.jsx("span",{className:"text-2xl font-black text-white",children:"P"})}):e.jsx("img",{src:"/logo.png",alt:"Polithane",className:"w-12 h-12 rounded-2xl object-contain drop-shadow",onError:()=>u(!0)}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h2",{className:"font-black text-gray-900 truncate",children:"Polithane"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:"Admin Paneli"})]})]}),l?e.jsx("button",{type:"button",onClick:()=>s==null?void 0:s(),className:"p-2 rounded-lg hover:bg-gray-100 lg:hidden","aria-label":"Meny kapat",children:e.jsx("span",{className:"text-xl font-black text-gray-700",children:""})}):null]}),e.jsx("nav",{className:"p-4",children:c.map((g,f)=>e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-2 px-3",children:g.title}),e.jsx("div",{className:"space-y-1",children:g.items.map(v=>e.jsxs(Tt,{to:v.path,className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ".concat(i.pathname===v.path?"bg-primary-blue text-white font-semibold":"text-gray-700 hover:bg-gray-100"),onClick:()=>r==null?void 0:r(),children:[e.jsx(v.icon,{className:"w-6 h-6"}),e.jsx("span",{className:"text-sm",children:v.label})]},v.path))})]},f))})]})},wS=()=>{const{isAuthenticated:r,isAdmin:s,loading:l}=Pa(),[i,d]=m.useState(!1);return l?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 w-full max-w-md",children:[e.jsx("div",{className:"text-xl font-black text-gray-900",children:"Admin Paneli"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Oturum kontrol ediliyor"}),e.jsx("div",{className:"mt-4 h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full w-1/2 bg-primary-blue rounded-full animate-pulse"})})]})}):r?s()?e.jsxs("div",{className:"min-h-screen bg-gray-50 lg:flex admin-shell",children:[i?e.jsx("button",{type:"button","aria-label":"Meny kapat",className:"fixed inset-0 z-40 bg-black/40 lg:hidden",onClick:()=>d(!1)}):null,e.jsx("div",{className:"fixed inset-y-0 left-0 z-50 w-[280px] max-w-[85vw] transform transition-transform duration-200 ease-out lg:static lg:translate-x-0 lg:w-64 ".concat(i?"translate-x-0":"-translate-x-full"),children:e.jsx(NS,{onNavigate:()=>d(!1),onClose:()=>d(!1),showCloseButton:!0})}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-x-hidden",children:[e.jsx("div",{className:"sticky top-0 z-30 bg-white border-b border-gray-200 lg:hidden",children:e.jsxs("div",{className:"h-14 px-4 flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:()=>d(u=>!u),className:"p-2 rounded-lg hover:bg-gray-100","aria-label":i?"Meny kapat":"Meny a",children:i?e.jsx(xs,{className:"w-6 h-6 text-gray-700"}):e.jsx(Pj,{className:"w-6 h-6 text-gray-700"})}),e.jsx("div",{className:"font-black text-gray-900",children:"Admin Paneli"}),e.jsx("div",{className:"w-10"})]})}),e.jsx(uy,{})]})]}):e.jsx(Zg,{to:"/"}):e.jsx(Zg,{to:"/login-new"})},_S=()=>{const[r,s]=m.useState(!0),[l,i]=m.useState(""),[d,u]=m.useState({totalUsers:0,totalPosts:0,totalViews:0,totalLikes:0,totalComments:0,totalShares:0,totalPolitScore:0,activeUsers24h:0,newUsersToday:0,newPostsToday:0,avgPolitScore:0}),[c,g]=m.useState([]),[f,v]=m.useState([]);m.useEffect(()=>{(async()=>{var N,k;try{s(!0),i("");const _=await Ze.getStats();if(!(_!=null&&_.success))throw new Error((_==null?void 0:_.error)||"statistikler yklenemedi.");_!=null&&_.success&&(u(M=>{var T,A,S,y,p,j,E,C,O,P,L,ce,Z,ie,le,ye,z,X,G,D,$,B;return{...M,totalUsers:(A=(T=_.data)==null?void 0:T.totalUsers)!=null?A:0,totalPosts:(y=(S=_.data)==null?void 0:S.totalPosts)!=null?y:0,totalViews:(j=(p=_.data)==null?void 0:p.totalViews)!=null?j:0,totalLikes:(C=(E=_.data)==null?void 0:E.totalLikes)!=null?C:0,totalComments:(P=(O=_.data)==null?void 0:O.totalComments)!=null?P:0,totalShares:(ce=(L=_.data)==null?void 0:L.totalShares)!=null?ce:0,totalPolitScore:(ie=(Z=_.data)==null?void 0:Z.totalPolitScore)!=null?ie:0,activeUsers24h:(ye=(le=_.data)==null?void 0:le.activeUsers24h)!=null?ye:0,newUsersToday:(X=(z=_.data)==null?void 0:z.newUsersToday)!=null?X:0,newPostsToday:(D=(G=_.data)==null?void 0:G.newPostsToday)!=null?D:0,avgPolitScore:(B=($=_.data)==null?void 0:$.avgPolitScore)!=null?B:0}}),g(Array.isArray((N=_.data)==null?void 0:N.recentUsers)?_.data.recentUsers:[]),v(Array.isArray((k=_.data)==null?void 0:k.topPosts)?_.data.topPosts:[]))}catch(_){console.error("Admin stats load error:",_),i(String((_==null?void 0:_.message)||"statistikler yklenemedi."))}finally{s(!1)}})()},[]);const b=[{label:"Toplam Kullanc",value:d.totalUsers.toLocaleString("tr-TR"),icon:ts,iconBg:"bg-blue-100",iconText:"text-blue-600",link:"/adminyonetim/users"},{label:"Toplam Paylam",value:d.totalPosts.toLocaleString("tr-TR"),icon:rn,iconBg:"bg-green-100",iconText:"text-green-600",link:"/adminyonetim/posts"},{label:"Toplam Grntlenme",value:d.totalViews.toLocaleString("tr-TR"),icon:cs,iconBg:"bg-purple-100",iconText:"text-purple-600"},{label:"Toplam Polit Puan",value:"".concat((d.totalPolitScore/1e6).toFixed(1),"M"),icon:er,iconBg:"bg-orange-100",iconText:"text-orange-600",link:"/adminyonetim/algorithm"},{label:"Bugn Yeni Kullanc",value:d.newUsersToday.toLocaleString("tr-TR"),icon:ts,iconBg:"bg-green-100",iconText:"text-green-600"},{label:"Bugn Yeni Paylam",value:d.newPostsToday.toLocaleString("tr-TR"),icon:rn,iconBg:"bg-blue-100",iconText:"text-blue-600"},{label:"Aktif Kullanc (24s)",value:d.activeUsers24h.toLocaleString("tr-TR"),icon:Um,iconBg:"bg-red-100",iconText:"text-red-600"},{label:"Ort. Polit Puan",value:d.avgPolitScore.toLocaleString("tr-TR"),icon:er,iconBg:"bg-yellow-100",iconText:"text-yellow-600"}];return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-8 flex items-start justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Genel Bak"}),e.jsx("p",{className:"text-gray-600",children:"Platform ynetim merkezi - Tm istatistikler"})]})}),l?e.jsx("div",{className:"mb-6 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 font-semibold",children:l}):null,r?e.jsx("div",{className:"mb-6 text-sm text-gray-600 font-semibold",children:"Ykleniyor"}):null,e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:b.map((w,N)=>{const k=e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-3 rounded-lg ".concat(w.iconBg),children:e.jsx(w.icon,{className:"w-6 h-6 ".concat(w.iconText)})})}),e.jsx("div",{className:"text-3xl font-black text-gray-900 mb-1",children:w.value}),e.jsx("div",{className:"text-sm text-gray-600",children:w.label})]});return w.link?e.jsx(Tt,{to:w.link,className:"cursor-pointer",children:k},N):e.jsx("div",{className:"cursor-default",children:k},N)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-pink-500 rounded-xl p-6 text-white",children:[e.jsx(Or,{className:"w-8 h-8 mb-2",fill:"white"}),e.jsx("div",{className:"text-3xl font-black mb-1",children:d.totalLikes.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-sm opacity-90",children:"Toplam Beeni"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[e.jsx(Dn,{className:"w-8 h-8 mb-2"}),e.jsx("div",{className:"text-3xl font-black mb-1",children:d.totalComments.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-sm opacity-90",children:"Toplam Yorum"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white",children:[e.jsx(oi,{className:"w-8 h-8 mb-2"}),e.jsx("div",{className:"text-3xl font-black mb-1",children:d.totalShares.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-sm opacity-90",children:"Toplam Paylam"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white",children:[e.jsx(cs,{className:"w-8 h-8 mb-2"}),e.jsxs("div",{className:"text-3xl font-black mb-1",children:[(d.totalViews/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-sm opacity-90",children:"Toplam Grntlenme"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Son Kullanclar"}),e.jsx(Tt,{to:"/adminyonetim/users",className:"text-sm text-primary-blue hover:text-blue-600 font-semibold",children:"Tmn Gr "})]}),e.jsx("div",{className:"space-y-3",children:c.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Henz veri yok."}):c.map(w=>e.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsx(Yt,{src:w.avatar_url||w.profile_image,alt:w.full_name,size:"40px"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:w.full_name}),e.jsx("div",{className:"text-xs text-gray-500",children:ms(w,!0)||"ye"})]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full font-semibold",children:"Yeni"})]},w.user_id||w.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"En Yksek Polit Puan"}),e.jsx(Tt,{to:"/adminyonetim/posts",className:"text-sm text-primary-blue hover:text-blue-600 font-semibold",children:"Tmn Gr "})]}),e.jsx("div",{className:"space-y-3",children:f.length===0?e.jsx("div",{className:"text-sm text-gray-500",children:"Henz veri yok."}):f.map(w=>{var N,k,_,M;return e.jsxs("div",{className:"flex items-center gap-3 p-3 hover:bg-gray-50 rounded-lg transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:(N=w.user)==null?void 0:N.full_name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:[String((_=(k=w.content_text)!=null?k:w.content)!=null?_:"").slice(0,50),"..."]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-blue",children:[(w.polit_score/1e3).toFixed(1),"K"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Polit Puan"})]})]},(M=w.post_id)!=null?M:w.id)})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsxs(Tt,{to:"/adminyonetim/users",className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow",children:[e.jsx(ts,{className:"w-8 h-8 text-blue-500 mb-2"}),e.jsx("div",{className:"font-bold text-gray-900",children:"Kullanclar"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Ynet & Dorula"})]}),e.jsxs(Tt,{to:"/adminyonetim/posts",className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow",children:[e.jsx(rn,{className:"w-8 h-8 text-green-500 mb-2"}),e.jsx("div",{className:"font-bold text-gray-900",children:"Paylamlar"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Moderasyon"})]}),e.jsxs(Tt,{to:"/adminyonetim/agendas",className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow",children:[e.jsx(mr,{className:"w-8 h-8 text-orange-500 mb-2"}),e.jsx("div",{className:"font-bold text-gray-900",children:"Gndemler"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Sralama & Ynetim"})]}),e.jsxs(Tt,{to:"/adminyonetim/algorithm",className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow",children:[e.jsx(er,{className:"w-8 h-8 text-purple-500 mb-2"}),e.jsx("div",{className:"font-bold text-gray-900",children:"Algoritma"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Polit Puan"})]}),e.jsxs(Tt,{to:"/adminyonetim/theme",className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow",children:[e.jsx(bo,{className:"w-8 h-8 text-pink-500 mb-2"}),e.jsx("div",{className:"font-bold text-gray-900",children:"Tasarm"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Tema & Renk"})]}),e.jsxs(Tt,{to:"/adminyonetim/site-settings",className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow",children:[e.jsx(md,{className:"w-8 h-8 text-slate-700 mb-2"}),e.jsx("div",{className:"font-bold text-gray-900",children:"Site Ayarlar"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Genel yaplandrma"})]})]})]})},SS=()=>{const[r,s]=m.useState(!0),[l,i]=m.useState(!1),[d,u]=m.useState(""),[c,g]=m.useState(""),[f,v]=m.useState({userTypeMultipliers:{normal:1,party_member:5,opponent_party_member:10,politician_district:15,politician_provincial:20,politician_mp:50,politician_party_vice:75,politician_party_chair:100,ex_politician:30,media:25},actionWeights:{view:1,like:5,comment:10,share:50},timeFactors:{freshPostBonus:1.5,freshPostHours:24,decayRate:.05,maxAgeDays:30},agendaFactors:{trendingMultiplier:2,hotMultiplier:1.5},verificationBonus:1.2}),[b,w]=m.useState({views:1e3,likes:50,comments:10,shares:5,userType:"politician_mp",isVerified:!0,ageHours:12,isTrending:!1}),[N,k]=m.useState(0),[_,M]=m.useState([]),T=()=>{const{userTypeMultipliers:y,actionWeights:p,timeFactors:j,agendaFactors:E,verificationBonus:C}=f,{views:O,likes:P,comments:L,shares:ce,userType:Z,isVerified:ie,ageHours:le,isTrending:ye}=b,z=y[Z]||1,X=O*p.view*z,G=P*p.like*z,D=L*p.comment*z,$=ce*p.share*z;let B=X+G+D+$,Y=0;le<=j.freshPostHours&&(Y=B*(j.freshPostBonus-1));let Q=1;ye&&(Q=E.trendingMultiplier);let q=0;ie&&(q=B*(C-1));const I=Math.round((B+Y+q)*Q),V=[{label:"Grntlenme",value:Math.round(X),formula:"".concat(O,"  ").concat(p.view,"  ").concat(z)},{label:"Beeni",value:Math.round(G),formula:"".concat(P,"  ").concat(p.like,"  ").concat(z)},{label:"Yorum",value:Math.round(D),formula:"".concat(L,"  ").concat(p.comment,"  ").concat(z)},{label:"Paylam",value:Math.round($),formula:"".concat(ce,"  ").concat(p.share,"  ").concat(z)},{label:"Temel Puan",value:Math.round(B),formula:"Toplam aksiyon puan"},{label:"Zaman Bonusu",value:Math.round(Y),formula:"".concat(j.freshPostBonus,"x (ilk ").concat(j.freshPostHours," saat)")},{label:"Dorulama Bonusu",value:Math.round(q),formula:"".concat(C,"x bonus")},{label:"Gndem arpan",value:Q,formula:ye?"Trend":"Normal"},{label:"TOPLAM POLT PUAN",value:I,formula:"Final hesaplama",isTotal:!0}];M(V),k(I)};m.useEffect(()=>{T()},[b,f]),m.useEffect(()=>{let y=!1;return(async()=>{var p;s(!0);try{const j=await re("/api/settings",{method:"GET"}).catch(()=>null);j!=null&&j.schemaMissing&&(j!=null&&j.requiredSql)&&g(String(j.requiredSql||""));const E=j!=null&&j.success?(p=j==null?void 0:j.data)==null?void 0:p.algorithm_config:null,C=typeof E=="string"&&E.trim()?JSON.parse(E):E&&typeof E=="object"?E:null;!y&&C&&typeof C=="object"&&v(O=>({...O,...C,userTypeMultipliers:{...O.userTypeMultipliers,...C.userTypeMultipliers||{}},actionWeights:{...O.actionWeights,...C.actionWeights||{}},timeFactors:{...O.timeFactors,...C.timeFactors||{}},agendaFactors:{...O.agendaFactors,...C.agendaFactors||{}}}))}catch(j){}finally{y||s(!1)}})(),()=>{y=!0}},[]);const A=async()=>{i(!0),u("");try{const y={algorithm_config:JSON.stringify(f),algorithm_updated_at:new Date().toISOString()},p=await re("/api/settings",{method:"PUT",body:JSON.stringify(y)}).catch(()=>null);p!=null&&p.success?(u(" Algoritma kaydedildi!"),setTimeout(()=>u(""),3e3)):(p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&g(String(p.requiredSql||"")),u(" ".concat((p==null?void 0:p.error)||"Kaydetme baarsz")))}catch(y){u(" ".concat(String((y==null?void 0:y.message)||"Kaydetme baarsz")))}finally{i(!1)}},S=()=>{const y=JSON.stringify(f,null,2),p="data:application/json;charset=utf-8,"+encodeURIComponent(y),j="polithane-algorithm-".concat(Date.now(),".json"),E=document.createElement("a");E.setAttribute("href",p),E.setAttribute("download",j),E.click()};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"container-main",children:[c?e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik: `site_settings`"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:c})]}):null,e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Polit Puan Algoritmas"}),e.jsx("p",{className:"text-gray-600",children:"Platformun kalp atn buradan ynetin"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[d?e.jsx("span",{className:"text-sm font-medium ".concat(d.includes("")?"text-green-600":"text-red-600"),children:d}):null,e.jsxs("button",{onClick:S,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ky,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Da Aktar"]}),e.jsxs("button",{onClick:A,disabled:l||r,className:"px-6 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 disabled:opacity-60",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),l?"Kaydediliyor":r?"Ykleniyor":"Kaydet"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Kullanc Tipi arpanlar"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(f.userTypeMultipliers).map(([y,p])=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 capitalize",children:y.replace(/_/g," ")}),e.jsx("input",{type:"number",value:p,onChange:j=>v(E=>({...E,userTypeMultipliers:{...E.userTypeMultipliers,[y]:parseFloat(j.target.value)||0}})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue",step:"0.1",min:"0"})]},y))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Aksiyon Arlklar"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(f.actionWeights).map(([y,p])=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2 capitalize",children:y}),e.jsx("input",{type:"number",value:p,onChange:j=>v(E=>({...E,actionWeights:{...E.actionWeights,[y]:parseFloat(j.target.value)||0}})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue",step:"1",min:"0"})]},y))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-primary-blue to-blue-600 rounded-xl border border-blue-300 p-6 text-white sticky top-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold",children:"Test Edici"}),e.jsx(Dj,{className:"w-6 h-6"})]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Grntlenme"}),e.jsx("input",{type:"number",value:b.views,onChange:y=>w(p=>({...p,views:parseInt(y.target.value)||0})),className:"w-full px-4 py-2 rounded-lg text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Beeni"}),e.jsx("input",{type:"number",value:b.likes,onChange:y=>w(p=>({...p,likes:parseInt(y.target.value)||0})),className:"w-full px-4 py-2 rounded-lg text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Yorum"}),e.jsx("input",{type:"number",value:b.comments,onChange:y=>w(p=>({...p,comments:parseInt(y.target.value)||0})),className:"w-full px-4 py-2 rounded-lg text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Paylam"}),e.jsx("input",{type:"number",value:b.shares,onChange:y=>w(p=>({...p,shares:parseInt(y.target.value)||0})),className:"w-full px-4 py-2 rounded-lg text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Kullanc Tipi"}),e.jsx("select",{value:b.userType,onChange:y=>w(p=>({...p,userType:y.target.value})),className:"w-full px-4 py-2 rounded-lg text-gray-900",children:Object.keys(f.userTypeMultipliers).map(y=>e.jsx("option",{value:y,children:y.replace(/_/g," ")},y))})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b.isVerified,onChange:y=>w(p=>({...p,isVerified:y.target.checked})),className:"w-5 h-5 accent-primary-blue cursor-pointer"}),e.jsx("span",{className:"text-sm",children:"Onayl"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:b.isTrending,onChange:y=>w(p=>({...p,isTrending:y.target.checked})),className:"w-5 h-5 accent-primary-blue cursor-pointer"}),e.jsx("span",{className:"text-sm",children:"Trend"})]})]})]}),e.jsxs("div",{className:"bg-white/20 backdrop-blur rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"HESAPLANAN POLT PUAN"}),e.jsxs("div",{className:"text-4xl font-black",children:[N.toLocaleString("tr-TR")," P."]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Puan Dalm"}),e.jsx("div",{className:"space-y-2",children:_.map((y,p)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(y.isTotal?"bg-primary-blue text-white font-bold":"bg-gray-50"),children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold",children:y.label}),e.jsx("div",{className:"text-xs opacity-75",children:y.formula})]}),e.jsxs("div",{className:"text-lg font-bold",children:[typeof y.value=="number"?y.value.toLocaleString("tr-TR"):y.value,!y.isTotal&&" P."]})]},p))})]})]})]})]})})},kS="",ES=()=>{var B,Y,Q,q;const[r,s]=m.useState([]),[l,i]=m.useState(!0),[d,u]=m.useState(""),[c,g]=m.useState(""),[f,v]=m.useState({user_type:"",is_verified:""}),[b,w]=m.useState({page:1,totalPages:1}),[N,k]=m.useState(null),[_,M]=m.useState(!1),[T,A]=m.useState(!1),[S,y]=m.useState(!1),[p,j]=m.useState(""),[E,C]=m.useState({full_name:"",username:"",email:"",user_type:"",politician_type:"",party_id:"",province:"",district_name:"",avatar_url:"",is_active:!0,is_verified:!1,is_admin:!1,email_verified:!1,metadata_json:""}),[O,P]=m.useState(!1),[L,ce]=m.useState([]);m.useEffect(()=>{Z()},[b.page,f,c]);const Z=async()=>{try{i(!0),u("");const I={page:b.page,limit:20,...f};c&&(I.search=c);const V=await Ze.getUsers(I);if(!(V!=null&&V.success))throw new Error((V==null?void 0:V.error)||"Kullanclar yklenemedi.");V.success&&(s(V.data),w(V.pagination))}catch(I){console.error("Fetch users error:",I),s([]),w(V=>({...V,totalPages:1,total:0})),u(String((I==null?void 0:I.message)||"Kullanclar yklenemedi."))}finally{i(!1)}},ie=I=>{k(I),A(!1),j(""),M(!0)},le=I=>{const V=I||null;if(!V)return;const Te=V!=null&&V.metadata&&typeof V.metadata=="object"?V.metadata:null;k(V),C({full_name:String((V==null?void 0:V.full_name)||""),username:String((V==null?void 0:V.username)||""),email:String((V==null?void 0:V.email)||""),user_type:String((V==null?void 0:V.user_type)||""),politician_type:String((V==null?void 0:V.politician_type)||""),party_id:(V==null?void 0:V.party_id)==null?"":String(V.party_id),province:String((V==null?void 0:V.province)||(V==null?void 0:V.city_code)||""),district_name:String((V==null?void 0:V.district_name)||""),avatar_url:String((V==null?void 0:V.avatar_url)||""),is_active:(V==null?void 0:V.is_active)!==!1,is_verified:!!(V!=null&&V.is_verified),is_admin:!!(V!=null&&V.is_admin),email_verified:!!(V!=null&&V.email_verified),metadata_json:Te?JSON.stringify(Te,null,2):""}),A(!0),j(""),M(!0)},ye=()=>{k(null),M(!1),A(!1),y(!1),j("")},z=async I=>{if(confirm("Kullancy yasaklamak/silmek istediinize emin misiniz?"))try{await Ze.deleteUser(I),Z()}catch(V){alert("lem baarsz: "+V.message)}},X=async(I,V)=>{if(confirm("Kullanc dorulama durumunu ".concat(!V," yapmak istiyor musunuz?")))try{await Ze.updateUser(I,{is_verified:!V}),Z()}catch(Te){alert("lem baarsz: "+Te.message)}},G=async()=>{if(N!=null&&N.id){y(!0),j("");try{let I;const V=String(E.metadata_json||"").trim();if(V)try{I=JSON.parse(V)}catch(je){throw new Error("metadata JSON geersiz.")}const Te={full_name:E.full_name,username:E.username,email:E.email,user_type:E.user_type,politician_type:E.politician_type||null,party_id:String(E.party_id||"").trim()?String(E.party_id).trim():null,province:String(E.province||"").trim()?String(E.province).trim():null,district_name:String(E.district_name||"").trim()?String(E.district_name).trim():null,avatar_url:String(E.avatar_url||"").trim()?String(E.avatar_url).trim():null,is_active:!!E.is_active,is_verified:!!E.is_verified,is_admin:!!E.is_admin,email_verified:!!E.email_verified,...I!==void 0?{metadata:I}:{}},Ke=await Ze.updateUser(N.id,Te).catch(()=>null);if(!(Ke!=null&&Ke.success))throw new Error((Ke==null?void 0:Ke.error)||"Kullanc gncellenemedi.");const oe=(Ke==null?void 0:Ke.data)||null;oe?(s(je=>je.map(fe=>String(fe==null?void 0:fe.id)===String(N.id)?{...fe,...oe}:fe)),k(je=>je&&{...je,...oe})):await Z(),A(!1),ye()}catch(I){j(String((I==null?void 0:I.message)||"Kullanc gncellenemedi."))}finally{y(!1)}}},D=async()=>{var I;try{P(!0);const V=await Ze.getDuplicateUsers({limit:5e3}).catch(()=>null),Te=(V==null?void 0:V.data)||((I=V==null?void 0:V.data)==null?void 0:I.data)||[];ce(Array.isArray(Te)?Te:[])}catch(V){console.error(V),ce([])}finally{P(!1)}},$=async I=>{const V=Array.isArray(I==null?void 0:I.users)?I.users:[];if(V.length<2)return;const Te=[...V].sort((je,fe)=>{const ke=(je==null?void 0:je.is_active)===!1?0:1,$e=(fe==null?void 0:fe.is_active)===!1?0:1;return ke!==$e?$e-ke:(Number((fe==null?void 0:fe.polit_score)||0)||0)-(Number((je==null?void 0:je.polit_score)||0)||0)}),Ke=Te[0],oe=Te.slice(1).map(je=>je.id).filter(Boolean);if(!(!(Ke!=null&&Ke.id)||oe.length===0)&&confirm("Bu gruptaki ".concat(oe.length," mkerrer hesab pasife almak istiyor musunuz?\n\nPrimary: ").concat(Ke.full_name," (@").concat(Ke.username,")")))try{await Ze.dedupeUsers({primaryId:Ke.id,duplicateIds:oe,dryRun:!1}),alert("Mkerrer hesaplar pasife alnd."),await D(),await Z()}catch(je){alert("lem baarsz: "+((je==null?void 0:je.message)||"Bilinmeyen hata"))}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Kullanc Ynetimi"}),e.jsxs("p",{className:"text-gray-600",children:["Toplam ",b.total||0," kullanc"]})]}),e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-800 font-semibold hover:bg-gray-50",children:"Mkerrerleri Bul"})]}),O&&e.jsx("div",{className:"mb-6 bg-white rounded-xl border border-gray-200 p-4 text-sm text-gray-600",children:"Mkerrer hesaplar aranyor"}),!O&&L.length>0&&e.jsxs("div",{className:"mb-6 bg-white rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"font-black text-gray-900",children:"Mkerrer Hesaplar"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[L.length," grup"]})]}),e.jsx("div",{className:"space-y-3 max-h-[320px] overflow-y-auto",children:L.slice(0,20).map(I=>{var V,Te;return e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[((Te=(V=I.users)==null?void 0:V[0])==null?void 0:Te.full_name)||"Ayn kii"," (",I.count,")"]}),e.jsx("button",{type:"button",onClick:()=>$(I),className:"px-3 py-2 rounded-lg bg-gray-900 hover:bg-black text-white text-xs font-black",children:"Teke Dr"})]}),e.jsx("div",{className:"mt-2 flex gap-2 overflow-x-auto",children:(I.users||[]).map(Ke=>e.jsxs("div",{className:"flex items-center gap-2 bg-white border border-gray-200 rounded-lg px-2 py-1",children:[e.jsx(Yt,{src:Ke.avatar_url,size:"28px"}),e.jsxs("div",{className:"text-xs text-gray-800 font-semibold whitespace-nowrap",children:["@",Ke.username||Ke.id]}),Ke.is_active===!1&&e.jsx("span",{className:"text-[10px] text-gray-500",children:"(pasif)"})]},Ke.id))}),e.jsx("div",{className:"mt-2 text-[11px] text-gray-500",children:"Not: Bu ilem mkerrer hesaplar pasife alr ve rollerini primary kullancya metadata olarak ekler."})]},I.key)})})]}),d?e.jsx("div",{className:"mb-6 rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 font-semibold",children:d}):null,e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Ad, e-posta veya kullanc ad...",value:c,onChange:I=>g(I.target.value),className:"w-full pl-11 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none"})]}),e.jsxs("select",{value:f.user_type,onChange:I=>v(V=>({...V,user_type:I.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue",children:[e.jsx("option",{value:"",children:"Tm Tipler"}),e.jsx("option",{value:"citizen",children:"Vatanda"}),e.jsx("option",{value:"politician",children:"Siyaseti"}),e.jsx("option",{value:"media",children:"Medya"}),e.jsx("option",{value:"party_member",children:"Parti yesi"})]}),e.jsxs("select",{value:f.is_verified,onChange:I=>v(V=>({...V,is_verified:I.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue",children:[e.jsx("option",{value:"",children:"Dorulama Durumu"}),e.jsx("option",{value:"true",children:"Onayl"}),e.jsx("option",{value:"false",children:"Bekleyen/Dorulanmam"})]}),e.jsx("button",{onClick:Z,className:"bg-primary-blue text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Filtrele"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase",children:"Kullanc"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase",children:"Tip"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase",children:"Kayt Tarihi"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-bold text-gray-500 uppercase",children:"lemler"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:l?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:"Ykleniyor..."})}):r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"p-8 text-center text-gray-500",children:"Kullanc bulunamad."})}):r.map(I=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yt,{src:I.avatar_url,alt:I.full_name,size:"40px"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[I.full_name,I.is_verified&&e.jsx(Ga,{className:"w-6 h-6 sm:w-5 sm:h-5 text-blue-500"})]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["@",I.username||"user","  ",I.email]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-semibold \n                        ".concat(I.user_type==="politician"?"bg-purple-100 text-purple-700":I.user_type==="media"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"),children:I.user_type==="politician"?"Siyaseti":I.user_type==="media"?"Medya":I.user_type==="party_member"?"Parti yesi":"Vatanda"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ".concat(I.is_verified?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:I.is_verified?"Onayl":"Bekliyor"})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:new Date(I.created_at).toLocaleDateString("tr-TR")}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>X(I.id,I.is_verified),className:"p-2 text-green-600 hover:bg-green-50 rounded",title:I.is_verified?"Onay Kaldr":"Onayla",children:e.jsx(Ga,{className:"w-6 h-6 sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:()=>ie(I),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Detaylar",children:e.jsx(cs,{className:"w-6 h-6 sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:()=>le(I),className:"p-2 text-gray-700 hover:bg-gray-100 rounded",title:"Dzenle",children:e.jsx(yi,{className:"w-6 h-6 sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:()=>z(I.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Sil/Yasakla",children:e.jsx(ti,{className:"w-6 h-6 sm:w-5 sm:h-5"})})]})})]},I.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-t bg-gray-50",children:[e.jsx("button",{disabled:b.page<=1,onClick:()=>w(I=>({...I,page:I.page-1})),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"nceki"}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Sayfa ",b.page," / ",b.totalPages]}),e.jsx("button",{disabled:b.page>=b.totalPages,onClick:()=>w(I=>({...I,page:I.page+1})),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Sonraki"})]})]}),_&&N&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"p-6 border-b flex items-center justify-between sticky top-0 bg-white z-10",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:T?"Kullancy Dzenle":"Kullanc Detay"}),p?e.jsx("div",{className:"mt-1 text-sm text-red-600 font-semibold",children:p}):null]}),e.jsx("button",{onClick:ye,className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(xs,{className:"w-6 h-6 text-gray-500"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[T?e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-5",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Ad Soyad"}),e.jsx("input",{value:E.full_name,onChange:I=>C(V=>({...V,full_name:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Username"}),e.jsx("input",{value:E.username,onChange:I=>C(V=>({...V,username:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"E-posta"}),e.jsx("input",{value:E.email,onChange:I=>C(V=>({...V,email:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"user_type"}),e.jsx("input",{value:E.user_type,onChange:I=>C(V=>({...V,user_type:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"citizen / politician / mp / party_official / media / ..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"politician_type"}),e.jsx("input",{value:E.politician_type,onChange:I=>C(V=>({...V,politician_type:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"party_id"}),e.jsx("input",{value:E.party_id,onChange:I=>C(V=>({...V,party_id:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"(bo braklabilir)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"l"}),e.jsx("input",{value:E.province,onChange:I=>C(V=>({...V,province:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"le"}),e.jsx("input",{value:E.district_name,onChange:I=>C(V=>({...V,district_name:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"avatar_url"}),e.jsx("input",{value:E.avatar_url,onChange:I=>C(V=>({...V,avatar_url:I.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"(bo braklabilir)"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"metadata (JSON)"}),e.jsx("textarea",{value:E.metadata_json,onChange:I=>C(V=>({...V,metadata_json:I.target.value})),className:"mt-1 w-full min-h-[140px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none font-mono text-xs",placeholder:'{"key":"value"}'})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-4",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("input",{type:"checkbox",checked:!!E.is_active,onChange:I=>C(V=>({...V,is_active:I.target.checked})),className:"w-5 h-5 accent-primary-blue"}),"Aktif (is_active)"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("input",{type:"checkbox",checked:!!E.is_verified,onChange:I=>C(V=>({...V,is_verified:I.target.checked})),className:"w-5 h-5 accent-primary-blue"}),"Onayl (is_verified)"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("input",{type:"checkbox",checked:!!E.is_admin,onChange:I=>C(V=>({...V,is_admin:I.target.checked})),className:"w-5 h-5 accent-primary-blue"}),"Admin (is_admin)"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("input",{type:"checkbox",checked:!!E.email_verified,onChange:I=>C(V=>({...V,email_verified:I.target.checked})),className:"w-5 h-5 accent-primary-blue"}),"Email doruland (email_verified)"]})]}),e.jsxs("div",{className:"mt-5 flex items-center justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>A(!1),className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black",disabled:S,children:"Vazge"}),e.jsx("button",{type:"button",onClick:G,className:"px-4 py-2 rounded-xl bg-gray-900 hover:bg-black text-white font-black disabled:opacity-60",disabled:S,children:S?"Kaydediliyor":"Kaydet"})]})]}):null,e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(Yt,{src:N.avatar_url,size:"80px"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:N.full_name}),e.jsxs("p",{className:"text-gray-500",children:["@",N.username||"user"]}),e.jsxs("div",{className:"flex gap-2 mt-2",children:[e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:N.user_type==="mp"?"Milletvekili":N.user_type==="party_official"?"Tekilat Grevlisi":N.user_type==="politician"?"Siyaseti":N.user_type==="media"?"Medya":N.user_type==="party_member"?"Parti yesi":N.user_type==="citizen"?"Vatanda":N.user_type||"Kullanc"}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(N.is_verified?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"),children:N.is_verified?"Onayl Hesap":"Onay Bekliyor"})]})]})]}),e.jsxs("a",{href:"/profile/".concat(N.username),target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:[e.jsx(Bj,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Profili Grntle"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 bg-gray-50 p-4 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"E-posta"}),e.jsx("p",{className:"font-medium",children:N.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Kayt Tarihi"}),e.jsx("p",{className:"font-medium",children:new Date(N.created_at).toLocaleDateString("tr-TR")})]}),N.party_id&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Parti"}),e.jsx("p",{className:"font-medium",children:((B=N.party)==null?void 0:B.name)||((Y=N.party)==null?void 0:Y.party_name)||N.party_id})]}),(N.province||N.city_code)&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"l"}),e.jsx("p",{className:"font-medium",children:N.province||N.city_code})]}),N.district_name&&e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"le"}),e.jsx("p",{className:"font-medium",children:N.district_name})]}),N.bio&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Biyografi"}),e.jsx("p",{className:"font-medium whitespace-pre-wrap",children:N.bio})]})]}),(()=>{const I=N.metadata&&typeof N.metadata=="object"?N.metadata:{},V=[];if(N.user_type==="party_official"||N.user_type==="mp"||N.user_type==="politician"){const oe=I.start_date||I.startDate||null,je=I.org_position||I.orgPosition||null,fe=I.previous_roles||null,ke=I.bio||null;V.push(e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[e.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Grev Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N.politician_type&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Grev (Tip)"}),e.jsx("div",{className:"font-medium",children:N.politician_type})]}),je&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Grev nvan"}),e.jsx("div",{className:"font-medium",children:String(je)})]}),oe&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Greve Balama"}),e.jsx("div",{className:"font-medium",children:String(oe)})]}),fe&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"nceki Grevler"}),e.jsx("div",{className:"font-medium whitespace-pre-wrap",children:String(fe)})]}),ke&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Ek Biyografi"}),e.jsx("div",{className:"font-medium whitespace-pre-wrap",children:String(ke)})]})]})]},"role"))}if(N.user_type==="media"){const oe=I.media_title||null,je=I.media_outlet||null,fe=I.media_website||null,ke=I.media_bio||null;V.push(e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[e.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Medya Bilgileri"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[oe&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"nvan"}),e.jsx("div",{className:"font-medium",children:String(oe)})]}),je&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Kurum"}),e.jsx("div",{className:"font-medium",children:String(je)})]}),fe&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Web"}),e.jsx("div",{className:"font-medium break-all",children:String(fe)})]}),ke&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:"Biyografi"}),e.jsx("div",{className:"font-medium whitespace-pre-wrap",children:String(ke)})]})]})]},"media"))}const Te=new Set(["document_path","document_original_name","start_date","startDate","org_position","orgPosition","previous_roles","media_title","media_outlet","media_website","media_bio","bio","roles"]),Ke=Object.entries(I||{}).filter(([oe,je])=>!Te.has(oe)&&(typeof je=="string"||typeof je=="number"||typeof je=="boolean"));return Ke.length>0&&V.push(e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[e.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Dier Bilgiler"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ke.map(([oe,je])=>e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase",children:oe.replace(/_/g," ")}),e.jsx("div",{className:"font-medium",children:String(je)})]},oe))})]},"meta")),Array.isArray(I.roles)&&I.roles.length>0&&V.push(e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-6",children:[e.jsx("div",{className:"font-black text-gray-900 mb-3",children:"Roller"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:I.roles.map((oe,je)=>e.jsx("span",{className:"px-3 py-1 rounded-full bg-gray-100 border border-gray-200 text-sm font-semibold text-gray-800",children:String(oe)},"".concat(oe,"-").concat(je)))})]},"roles")),V.length>0?e.jsx("div",{className:"space-y-4",children:V}):null})(),((Q=N.metadata)==null?void 0:Q.document_path)&&e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-lg",children:e.jsx(rn,{className:"w-8 h-8 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-900",children:"Yklenen Resmi Belge"}),e.jsx("p",{className:"text-sm text-gray-600",children:N.metadata.document_original_name||"belge.pdf"})]})]}),e.jsxs("a",{href:"".concat(kS).concat(N.metadata.document_path),target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-lg shadow-blue-200 flex items-center gap-2",children:[e.jsx(cs,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Belgeyi Grntle"]})]})}),!((q=N.metadata)!=null&&q.document_path)&&N.user_type!=="citizen"&&e.jsx("div",{className:"text-center p-6 border-2 border-dashed border-gray-300 rounded-xl",children:e.jsx("p",{className:"text-gray-500",children:"Bu kullanc herhangi bir belge yklememi."})}),e.jsxs("div",{className:"border-t pt-6 flex justify-end gap-3",children:[!N.is_verified&&e.jsx("button",{onClick:()=>{X(N.id,!1),ye()},className:"px-6 py-3 bg-green-600 text-white rounded-xl font-bold hover:bg-green-700",children:"Bavuruyu Onayla"}),e.jsx("button",{onClick:ye,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold hover:bg-gray-200",children:"Kapat"})]})]})]})})]})},TS=()=>{const[r,s]=m.useState([]),[l,i]=m.useState(!1),[d,u]=m.useState(null),[c,g]=m.useState({content:"",content_text:"",category:"general",agenda_tag:"",content_type:"text",thumbnail_url:"",media_urls_text:"",is_trending:!1,is_deleted:!1}),[f,v]=m.useState(!1),[b,w]=m.useState(""),[N,k]=m.useState(""),[_,M]=m.useState({status:"all",content_type:"all"}),[T,A]=m.useState(!0),[S,y]=m.useState({page:1,totalPages:1,total:0});m.useEffect(()=>{const L=setTimeout(async()=>{A(!0);try{const ce={page:S.page,limit:50,include_deleted:"true"},Z=String(N||"").trim();Z&&(ce.search=Z),_.status==="published"&&(ce.is_deleted="false"),_.status==="deleted"&&(ce.is_deleted="true");const ie=await Ze.getPosts(ce);ie!=null&&ie.success&&(s(ie.data||[]),y(ie.pagination||S))}catch(ce){console.error("Admin posts load error:",ce),s([])}finally{A(!1)}},250);return()=>clearTimeout(L)},[S.page,N,_.status]);const p=m.useMemo(()=>{const P=Array.isArray(r)?r:[];return _.content_type==="all"?P:P.filter(L=>String((L==null?void 0:L.content_type)||"")===String(_.content_type))},[r,_.content_type]),j=P=>{confirm("Bu paylam silmek istediinize emin misiniz?")&&Ze.deletePost(P).then(()=>s(L=>L.filter(ce=>String(ce.id||ce.post_id)!==String(P)))).catch(L=>alert("lem baarsz: "+((L==null?void 0:L.message)||"")))},E=P=>{var le,ye,z;if(!((P==null?void 0:P.id)||(P==null?void 0:P.post_id)))return;u(P);const ce=String((le=P==null?void 0:P.content)!=null?le:"").trim(),Z=String((z=(ye=P==null?void 0:P.content_text)!=null?ye:P==null?void 0:P.content)!=null?z:"").trim(),ie=Array.isArray(P==null?void 0:P.media_urls)?P.media_urls:[];g({content:ce,content_text:Z,category:String((P==null?void 0:P.category)||"general"),agenda_tag:String((P==null?void 0:P.agenda_tag)||""),content_type:String((P==null?void 0:P.content_type)||"text"),thumbnail_url:String((P==null?void 0:P.thumbnail_url)||""),media_urls_text:(ie||[]).map(X=>String(X||"").trim()).filter(Boolean).join("\n"),is_trending:!!(P!=null&&P.is_trending),is_deleted:!!(P!=null&&P.is_deleted)}),w(""),i(!0)},C=()=>{i(!1),u(null),v(!1),w("")},O=async()=>{const P=(d==null?void 0:d.id)||(d==null?void 0:d.post_id);if(P){v(!0),w("");try{const L=String(c.media_urls_text||"").split("\n").map(le=>String(le||"").trim()).filter(Boolean).slice(0,12),ce={content:c.content,content_text:c.content_text,category:c.category,agenda_tag:c.agenda_tag?c.agenda_tag:null,content_type:String(c.content_type||"").trim()||"text",thumbnail_url:String(c.thumbnail_url||"").trim()?String(c.thumbnail_url).trim():null,...L.length>0?{media_urls:L}:{media_urls:[]},is_trending:!!c.is_trending,is_deleted:!!c.is_deleted},Z=await Ze.updatePost(P,ce).catch(()=>null);if(!(Z!=null&&Z.success))throw new Error((Z==null?void 0:Z.error)||"Paylam gncellenemedi.");const ie=(Z==null?void 0:Z.data)||null;ie&&(s(le=>le.map(ye=>String((ye==null?void 0:ye.id)||(ye==null?void 0:ye.post_id))===String(P)?{...ye,...ie}:ye)),u(le=>le&&{...le,...ie})),C()}catch(L){w(String((L==null?void 0:L.message)||"Paylam gncellenemedi."))}finally{v(!1)}}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Paylam Moderasyonu"}),e.jsxs("p",{className:"text-gray-600",children:[p.length," paylam bulundu"]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Paylam ieriinde ara...",value:N,onChange:P=>k(P.target.value),className:"w-full pl-11 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("select",{value:_.content_type,onChange:P=>M(L=>({...L,content_type:P.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",children:[e.jsx("option",{value:"all",children:"Tm Tipler"}),e.jsx("option",{value:"text",children:"Metin"}),e.jsx("option",{value:"image",children:"Resim"}),e.jsx("option",{value:"video",children:"Video"}),e.jsx("option",{value:"audio",children:"Ses"})]}),e.jsxs("select",{value:_.status,onChange:P=>M(L=>({...L,status:P.target.value})),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",children:[e.jsx("option",{value:"all",children:"Tm Durumlar"}),e.jsx("option",{value:"published",children:"Yaynda"}),e.jsx("option",{value:"deleted",children:"Silinmi"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Paylam"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Kullanc"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Tip"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Polit Puan"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Etkileim"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Tarih"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Aksiyon"})]})}),e.jsx("tbody",{children:T?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-8 text-center text-gray-500",children:"Ykleniyor..."})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-8 text-center text-gray-500",children:"Paylam bulunamad."})}):p.slice(0,50).map(P=>{var L,ce,Z,ie,le;return e.jsxs("tr",{className:"border-b hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"max-w-md",children:e.jsx("p",{className:"text-sm text-gray-900 line-clamp-2",children:(ce=(L=P.content_text)!=null?L:P.content)!=null?ce:""})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yt,{src:((Z=P.user)==null?void 0:Z.avatar_url)||((ie=P.user)==null?void 0:ie.profile_image),alt:"",size:32}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:(le=P.user)==null?void 0:le.full_name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700",children:P.content_type||"text"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-bold text-primary-blue",children:Ra(P.polit_score)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("div",{children:[" ",P.view_count]}),e.jsxs("div",{children:[" ",P.like_count]}),e.jsxs("div",{children:[" ",P.comment_count]})]})}),e.jsx("td",{className:"px-6 py-4 text-xs text-gray-600",children:ui(P.created_at)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>window.open("/post/".concat(P.id||P.post_id),"_blank"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Grntle",children:e.jsx(cs,{className:"w-6 h-6 sm:w-5 sm:h-5"})}),e.jsx("button",{type:"button",onClick:()=>E(P),className:"p-2 text-gray-700 hover:bg-gray-100 rounded",title:"Dzenle",children:e.jsx(yi,{className:"w-6 h-6 sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:()=>j(P.id||P.post_id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Sil",children:e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5"})})]})})]},P.id||P.post_id)})})]})})}),l&&d?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"p-5 border-b flex items-center justify-between sticky top-0 bg-white z-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Paylam Dzenle"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",String(d.id||d.post_id)]})]}),e.jsx("button",{type:"button",onClick:C,className:"p-2 hover:bg-gray-100 rounded-full",title:"Kapat",children:e.jsx(xs,{className:"w-6 h-6 text-gray-600"})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[b?e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 font-semibold",children:b}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"Kategori"}),e.jsx("input",{value:c.category,onChange:P=>g(L=>({...L,category:P.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"general"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"Gndem etiketi (agenda_tag)"}),e.jsx("input",{value:c.agenda_tag,onChange:P=>g(L=>({...L,agenda_tag:P.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"(bo braklabilir)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"erik tipi (content_type)"}),e.jsxs("select",{value:c.content_type,onChange:P=>g(L=>({...L,content_type:P.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none bg-white",children:[e.jsx("option",{value:"text",children:"text"}),e.jsx("option",{value:"image",children:"image"}),e.jsx("option",{value:"video",children:"video"}),e.jsx("option",{value:"audio",children:"audio"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"Thumbnail URL (ops.)"}),e.jsx("input",{value:c.thumbnail_url,onChange:P=>g(L=>({...L,thumbnail_url:P.target.value})),className:"mt-1 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"https://..."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"erik"}),e.jsx("textarea",{value:c.content_text,onChange:P=>g(L=>({...L,content_text:P.target.value,content:P.target.value})),className:"mt-1 w-full min-h-[140px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"Paylam metni"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"Medya URLleri (media_urls)  satr satr"}),e.jsx("textarea",{value:c.media_urls_text,onChange:P=>g(L=>({...L,media_urls_text:P.target.value})),className:"mt-1 w-full min-h-[110px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none font-mono text-xs",placeholder:"https://...\\nhttps://..."}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Maks 12 URL."})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("input",{type:"checkbox",checked:!!c.is_trending,onChange:P=>g(L=>({...L,is_trending:P.target.checked})),className:"w-5 h-5 accent-primary-blue"}),"Fast/Trend (is_trending)"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("input",{type:"checkbox",checked:!!c.is_deleted,onChange:P=>g(L=>({...L,is_deleted:P.target.checked})),className:"w-5 h-5 accent-primary-blue"}),"Silinmi (is_deleted)"]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black",disabled:f,children:"Vazge"}),e.jsxs("button",{type:"button",onClick:O,className:"px-4 py-2 rounded-xl bg-gray-900 hover:bg-black text-white font-black inline-flex items-center gap-2 disabled:opacity-60",disabled:f,children:[e.jsx(ks,{className:"w-5 h-5"}),f?"Kaydediliyor":"Kaydet"]})]})]})]})}):null]})},AS=()=>{const{theme:r,updateTheme:s,resetTheme:l}=eb(),i=m.useMemo(()=>{var j,E;const y=String((r==null?void 0:r.fontFamily)||"").trim();return y&&((E=(j=y.split(",")[0])==null?void 0:j.trim())==null?void 0:E.replace(/^["']|["']$/g,""))||"Inter"},[r==null?void 0:r.fontFamily]),[d,u]=m.useState({primary:r.primaryColor||"#009FD6",secondary:r.secondaryColor||"#10b981",accent:r.accentColor||"#f59e0b",danger:r.dangerColor||"#ef4444"}),[c,g]=m.useState({heading:i,body:i}),[f,v]=m.useState(!1),[b,w]=m.useState(""),[N,k]=m.useState(""),_=(y,p)=>{u(j=>({...j,[y]:p}))},M=y=>({primary:"Ana",secondary:"kincil",accent:"Vurgu",danger:"Uyar"})[y]||y,T=async(y,p)=>{const j={theme_primary_color:y.primaryColor,theme_secondary_color:y.secondaryColor,theme_accent_color:y.accentColor,theme_danger_color:y.dangerColor,theme_font_family:y.fontFamily,theme_font_heading:p.heading,theme_font_body:p.body};return await re("/api/settings",{method:"PUT",body:JSON.stringify(j)})},A=async()=>{const y={primaryColor:d.primary,secondaryColor:d.secondary,accentColor:d.accent,dangerColor:d.danger,fontFamily:"".concat(c.body,", system-ui, sans-serif")};s(y),v(!0),w("");try{const p=await T(y,c);p!=null&&p.success?(w(" Tema kaydedildi!"),setTimeout(()=>w(""),3e3)):(p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&k(String(p.requiredSql||"")),w(" ".concat((p==null?void 0:p.error)||"Kaydetme baarsz")))}catch(p){w(" ".concat(String((p==null?void 0:p.message)||"Bir hata olutu")))}finally{v(!1)}},S=async()=>{const y={primary:"#009FD6",secondary:"#10b981",accent:"#f59e0b",danger:"#ef4444"},p={heading:"Inter",body:"Inter"};u(y),g(p);const j={primaryColor:y.primary,secondaryColor:y.secondary,accentColor:y.accent,dangerColor:y.danger,fontFamily:"Inter, system-ui, sans-serif"};s(j),l(),v(!0),w("");try{const E=await T(j,p);E!=null&&E.success?(w(" Tema varsaylana dndrld."),setTimeout(()=>w(""),3e3)):(E!=null&&E.schemaMissing&&(E!=null&&E.requiredSql)&&k(String(E.requiredSql||"")),w(" ".concat((E==null?void 0:E.error)||"Kaydetme baarsz")))}catch(E){w(" ".concat(String((E==null?void 0:E.message)||"Bir hata olutu")))}finally{v(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Tasarm & Tema Editr"}),e.jsx("p",{className:"text-gray-600",children:"Sitenin grnmn zelletirin"})]}),e.jsxs("div",{className:"flex gap-3",children:[b&&e.jsx("span",{className:"self-center text-sm font-medium ".concat(b.includes("")?"text-green-600":"text-red-600"),children:b}),e.jsxs("button",{onClick:S,disabled:f,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(by,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Sfrla"]}),e.jsxs("button",{onClick:A,disabled:f,className:"px-6 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),f?"Kaydediliyor...":"Kaydet"]})]})]}),N?e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik: `site_settings`"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:N})]}):null,e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Renk Paleti"}),e.jsx("div",{className:"grid grid-cols-2 gap-6",children:Object.entries(d).map(([y,p])=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[M(y)," Rengi"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:p,onChange:j=>_(y,j.target.value),className:"w-16 h-16 rounded-lg cursor-pointer border-2 border-gray-300"}),e.jsx("input",{type:"text",value:p,onChange:j=>_(y,j.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"#009FD6"})]})]},y))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Tipografi"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Balk Fontu"}),e.jsxs("select",{value:c.heading,onChange:y=>g(p=>({...p,heading:y.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"Poppins",children:"Poppins"}),e.jsx("option",{value:"Roboto",children:"Roboto"}),e.jsx("option",{value:"Montserrat",children:"Montserrat"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Gvde Fontu"}),e.jsxs("select",{value:c.body,onChange:y=>g(p=>({...p,body:y.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"Inter",children:"Inter"}),e.jsx("option",{value:"Poppins",children:"Poppins"}),e.jsx("option",{value:"Roboto",children:"Roboto"})]})]})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 sticky top-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"nizleme"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:d.primary+"20"},children:[e.jsx("div",{style:{color:d.primary},className:"font-bold text-lg mb-2",children:"Ana Renk"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bu renk butonlar ve linkler iin kullanlr"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:d.secondary+"20"},children:[e.jsx("div",{style:{color:d.secondary},className:"font-bold text-lg mb-2",children:"kincil Renk"}),e.jsx("p",{className:"text-sm text-gray-600",children:"kincil eler iin"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:d.accent+"20"},children:[e.jsx("div",{style:{color:d.accent},className:"font-bold text-lg mb-2",children:"Vurgu Rengi"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Vurgular iin"})]}),e.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:d.danger+"20"},children:[e.jsx("div",{style:{color:d.danger},className:"font-bold text-lg mb-2",children:"Uyar Rengi"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Uyarlar iin"})]})]})]})})]})]})},CS=()=>{const r=(k,_=!1)=>{if(typeof k=="boolean")return k;const M=String(k!=null?k:"").trim().toLowerCase();return M==="true"?!0:M==="false"?!1:_},s=k=>{if(k&&typeof k=="object")return k;const _=String(k!=null?k:"").trim();if(!_)return null;try{return JSON.parse(_)}catch(M){return null}},[l,i]=m.useState({siteName:"Polithane.",siteSlogan:"zgr, ak, effaf siyaset, bamsz medya!",siteDescription:"zgr, ak, effaf siyaset platformu",contactEmail:"info@polithane.com",supportEmail:"support@polithane.com",maintenanceMode:!1,allowRegistration:!0,allowComments:!0,allowMessages:!0,homePostsPerRow:2,socialLinks:{twitter:"https://twitter.com/polithane",facebook:"https://facebook.com/polithane",instagram:"https://instagram.com/polithane",youtube:"https://youtube.com/@polithane"}}),[d,u]=m.useState(!1),[c,g]=m.useState(""),[f,v]=m.useState("");m.useEffect(()=>{(async()=>{try{const _=await re("/api/settings",{method:"GET"});if(_!=null&&_.schemaMissing&&(_!=null&&_.requiredSql)&&v(String(_.requiredSql||"")),_.success){const M=_.data&&typeof _.data=="object"?_.data:{},T=s(M.social_links);i(A=>{var S,y,p,j,E,C;return{...A,siteName:(S=M.site_name)!=null?S:A.siteName,siteSlogan:(y=M.site_slogan)!=null?y:A.siteSlogan,siteDescription:(p=M.site_description)!=null?p:A.siteDescription,contactEmail:(j=M.contact_email)!=null?j:A.contactEmail,supportEmail:(E=M.support_email)!=null?E:A.supportEmail,maintenanceMode:r(M.maintenance_mode,A.maintenanceMode),allowRegistration:r(M.allow_registration,A.allowRegistration),allowComments:r(M.allow_comments,A.allowComments),allowMessages:r(M.allow_messages,A.allowMessages),homePostsPerRow:Math.max(1,Math.min(3,parseInt(String((C=M.home_posts_per_row)!=null?C:A.homePostsPerRow),10)||A.homePostsPerRow)),socialLinks:T&&typeof T=="object"?{...A.socialLinks,...T}:A.socialLinks}})}}catch(_){console.error("Settings yklenemedi:",_)}})()},[]);const b=(k,_)=>{i(M=>({...M,[k]:_}))},w=(k,_)=>{i(M=>({...M,socialLinks:{...M.socialLinks,[k]:_}}))},N=async()=>{u(!0),g("");try{const k=await re("/api/settings",{method:"PUT",body:JSON.stringify({site_name:l.siteName,site_slogan:l.siteSlogan,site_description:l.siteDescription,contact_email:l.contactEmail,support_email:l.supportEmail,maintenance_mode:!!l.maintenanceMode,allow_registration:!!l.allowRegistration,allow_comments:!!l.allowComments,allow_messages:!!l.allowMessages,home_posts_per_row:Math.max(1,Math.min(3,Number(l.homePostsPerRow)||2)),social_links:l.socialLinks||{}})});k.success?(g(" Ayarlar baaryla kaydedildi!"),setTimeout(()=>g(""),3e3)):(k!=null&&k.schemaMissing&&(k!=null&&k.requiredSql)&&v(String(k.requiredSql||"")),g(" "+(k.error||"Kaydetme baarsz")))}catch(k){g(" "+(k.message||"Bir hata olutu"))}finally{u(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Site Ayarlar"}),e.jsx("p",{className:"text-gray-600",children:"Genel platform ayarlar"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[c&&e.jsx("span",{className:"text-sm font-medium ".concat(c.includes("")?"text-green-600":"text-red-600"),children:c}),e.jsxs("button",{onClick:N,disabled:d,className:"px-6 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),d?"Kaydediliyor...":"Kaydet"]})]})]}),f?e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik: `site_settings`"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:f})]}):null,e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(fl,{className:"w-5 h-5 text-primary-blue"}),"Ana Sayfa Grnm"]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Ana sayfada satr bana Polit"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Mobilde bir satrda ka Polit kart grnsn?"})]}),e.jsxs("select",{value:String(l.homePostsPerRow),onChange:k=>b("homePostsPerRow",parseInt(k.target.value,10)||2),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white font-bold",children:[e.jsx("option",{value:"1",children:"1"}),e.jsx("option",{value:"2",children:"2"}),e.jsx("option",{value:"3",children:"3"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Genel Bilgiler"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Site Ad"}),e.jsx("input",{type:"text",value:l.siteName,onChange:k=>b("siteName",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Site Slogan"}),e.jsx("input",{type:"text",value:l.siteSlogan,onChange:k=>b("siteSlogan",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Site Aklamas (SEO)"}),e.jsx("textarea",{value:l.siteDescription,onChange:k=>b("siteDescription",k.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"letiim E-postas"}),e.jsx("input",{type:"email",value:l.contactEmail,onChange:k=>b("contactEmail",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Destek E-postas"}),e.jsx("input",{type:"email",value:l.supportEmail,onChange:k=>b("supportEmail",k.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Sosyal Medya Linkleri"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Uj,{className:"w-5 h-5 text-blue-400"}),e.jsx("input",{type:"url",value:l.socialLinks.twitter,onChange:k=>w("twitter",k.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"https://twitter.com/polithane"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Lj,{className:"w-5 h-5 text-blue-600"}),e.jsx("input",{type:"url",value:l.socialLinks.facebook,onChange:k=>w("facebook",k.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"https://facebook.com/polithane"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($j,{className:"w-5 h-5 text-pink-500"}),e.jsx("input",{type:"url",value:l.socialLinks.instagram,onChange:k=>w("instagram",k.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"https://instagram.com/polithane"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ij,{className:"w-5 h-5 text-red-500"}),e.jsx("input",{type:"url",value:l.socialLinks.youtube,onChange:k=>w("youtube",k.target.value),className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"https://youtube.com/@polithane"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"zellik Ayarlar"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Bakm Modu"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Site bakmda mesaj gster"})]}),e.jsx("input",{type:"checkbox",checked:l.maintenanceMode,onChange:k=>b("maintenanceMode",k.target.checked),className:"w-5 h-5 text-primary-blue rounded"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Yeni Kaytlar"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Kullanc kaydna izin ver"})]}),e.jsx("input",{type:"checkbox",checked:l.allowRegistration,onChange:k=>b("allowRegistration",k.target.checked),className:"w-5 h-5 text-primary-blue rounded"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Yorumlar"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Yorum yaplmasna izin ver"})]}),e.jsx("input",{type:"checkbox",checked:l.allowComments,onChange:k=>b("allowComments",k.target.checked),className:"w-5 h-5 text-primary-blue rounded"})]}),e.jsxs("label",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Mesajlama"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Kullanc mesajlamasna izin ver"})]}),e.jsx("input",{type:"checkbox",checked:l.allowMessages,onChange:k=>b("allowMessages",k.target.checked),className:"w-5 h-5 text-primary-blue rounded"})]})]})]})]})]})},MS=()=>{const[r,s]=m.useState({metaTitle:"Polithane - Trkiye Siyasetinin Dijital Meydan",metaDescription:"effaf, demokratik ve etkileimli siyaset platformu. Polit Puan sistemi ile siyaseti takip edin.",metaKeywords:"polithane, siyaset, trkiye, polit puan, demokratik platform",ogTitle:"Polithane",ogDescription:"Trkiye siyasetinin dijital meydan",ogImage:"/og-image.png",twitterCard:"summary_large_image",twitterSite:"@polithane",favicon:"/favicon.ico",robots:"index, follow",canonicalURL:"https://polithane.com",googleAnalyticsID:"",googleAdsenseID:"",headHtml:"",bodyHtml:""}),[l,i]=m.useState(!1),[d,u]=m.useState(""),[c,g]=m.useState(""),f={metaTitle:"seo_metaTitle",metaDescription:"seo_metaDescription",metaKeywords:"seo_metaKeywords",ogTitle:"seo_ogTitle",ogDescription:"seo_ogDescription",ogImage:"seo_ogImage",twitterCard:"seo_twitterCard",twitterSite:"seo_twitterSite",favicon:"seo_favicon",robots:"seo_robots",canonicalURL:"seo_canonicalURL",googleAnalyticsID:"seo_googleAnalyticsID",googleAdsenseID:"seo_googleAdsenseID",headHtml:"seo_head_html",bodyHtml:"seo_body_html"};m.useEffect(()=>{(async()=>{try{const N=await re("/api/settings",{method:"GET"});N!=null&&N.schemaMissing&&(N!=null&&N.requiredSql)&&g(String(N.requiredSql||"")),N!=null&&N.success&&(N!=null&&N.data)&&typeof N.data=="object"&&s(k=>{const _={...k};for(const[M,T]of Object.entries(f))N.data[T]!==void 0&&N.data[T]!==null&&(_[M]=String(N.data[T]));return _})}catch(N){}})()},[]);const v=(w,N)=>{s(k=>({...k,[w]:N}))},b=async()=>{var w;i(!0),u("");try{const N={};for(const[_,M]of Object.entries(f))N[M]=(w=r[_])!=null?w:"";const k=await re("/api/settings",{method:"PUT",body:JSON.stringify(N)});k!=null&&k.success?(u(" SEO ayarlar kaydedildi!"),setTimeout(()=>u(""),3e3)):(k!=null&&k.schemaMissing&&(k!=null&&k.requiredSql)&&g(String(k.requiredSql||"")),u(" ".concat((k==null?void 0:k.error)||"Kaydetme baarsz")))}catch(N){u(" ".concat(String((N==null?void 0:N.message)||"Bir hata olutu")))}finally{i(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"SEO Ayarlar"}),e.jsx("p",{className:"text-gray-600",children:"Arama motoru optimizasyonu"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[d&&e.jsx("span",{className:"text-sm font-medium ".concat(d.includes("")?"text-green-600":"text-red-600"),children:d}),e.jsxs("button",{onClick:b,disabled:l,className:"px-6 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),l?"Kaydediliyor...":"Kaydet"]})]})]}),c?e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik: `site_settings`"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:c})]}):null,e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Meta Etiketleri"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Meta Balk"}),e.jsx("input",{type:"text",value:r.metaTitle,onChange:w=>v("metaTitle",w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"60-70 karakter ideal"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.metaTitle.length," karakter"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Meta Aklama"}),e.jsx("textarea",{value:r.metaDescription,onChange:w=>v("metaDescription",w.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"150-160 karakter ideal"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r.metaDescription.length," karakter"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Anahtar Kelimeler (virglle ayrn)"}),e.jsx("input",{type:"text",value:r.metaKeywords,onChange:w=>v("metaKeywords",w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Open Graph (Facebook)"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"OG Balk"}),e.jsx("input",{type:"text",value:r.ogTitle,onChange:w=>v("ogTitle",w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"OG Aklama"}),e.jsx("textarea",{value:r.ogDescription,onChange:w=>v("ogDescription",w.target.value),rows:2,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"OG Grsel Balants"}),e.jsx("input",{type:"url",value:r.ogImage,onChange:w=>v("ogImage",w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"https://polithane.com/og-image.png"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"nerilen: 1200x630px"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Analitik Kodlar"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Google Analytics Kimlii"}),e.jsx("input",{type:"text",value:r.googleAnalyticsID,onChange:w=>v("googleAnalyticsID",w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"G-XXXXXXXXXX"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Google AdSense Kimlii"}),e.jsx("input",{type:"text",value:r.googleAdsenseID,onChange:w=>v("googleAdsenseID",w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"ca-pub-XXXXXXXXXXXXXXXX"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"zel Kod (Head / Body)"}),e.jsx("div",{className:"text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4",children:"Uyar: Buraya eklenen HTML/JS tm ziyaretilerde alr. Sadece gvenilir kod ekleyin (GA, GTM, dorulama etiketleri vb.)."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Head iine eklenecek HTML/Script"}),e.jsx("textarea",{value:r.headHtml,onChange:w=>v("headHtml",w.target.value),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none font-mono text-xs",placeholder:"<script>/* ... */<\/script>"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Body sonuna eklenecek HTML/Script"}),e.jsx("textarea",{value:r.bodyHtml,onChange:w=>v("bodyHtml",w.target.value),rows:6,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none font-mono text-xs",placeholder:"<noscript>...</noscript>"})]})]})]})]})]})},RS=()=>{const[r,s]=m.useState(!1),[l,i]=m.useState(""),[d,u]=m.useState(""),[c,g]=m.useState([]),[f,v]=m.useState(""),[b,w]=m.useState(!1),N=async()=>{s(!0),i("");try{const S=await Ze.getWorkflows().catch(()=>null);if(S!=null&&S.schemaMissing&&(S!=null&&S.requiredSql)&&u(String(S.requiredSql||"")),!(S!=null&&S.success))throw new Error((S==null?void 0:S.error)||" aklar yklenemedi.");g(Array.isArray(S.data)?S.data:[])}catch(S){i(String((S==null?void 0:S.message)||" aklar yklenemedi."))}finally{s(!1)}};m.useEffect(()=>{N()},[]);const k=m.useMemo(()=>{const S=c.reduce((j,E)=>j+(Number(E.success_count||0)||0),0),y=c.reduce((j,E)=>j+(Number(E.fail_count||0)||0),0),p=c.filter(j=>String(j.status)==="running").length;return{success:S,fail:y,active:p}},[c]),_=async()=>{const S=String(f||"").trim();if(S&&!b){w(!0),i("");try{const y=await Ze.createWorkflow({name:S,status:"paused"}).catch(()=>null);if(!(y!=null&&y.success))throw y!=null&&y.schemaMissing&&(y!=null&&y.requiredSql)&&u(String(y.requiredSql||"")),new Error((y==null?void 0:y.error)||" ak oluturulamad.");v(""),await N()}catch(y){i(String((y==null?void 0:y.message)||" ak oluturulamad."))}finally{w(!1)}}},M=async S=>{const y=String((S==null?void 0:S.id)||"");if(!y)return;const p=String(S.status)==="running"?"paused":"running";g(E=>E.map(C=>String(C.id)===y?{...C,status:p}:C));const j=await Ze.updateWorkflow(y,{status:p}).catch(()=>null);j!=null&&j.success||await N()},T=async S=>{const y=String((S==null?void 0:S.id)||"");if(!y)return;i("");const p=await Ze.enqueueJob({job_type:"run_workflow",payload:{workflow_id:y}}).catch(()=>null);if(!(p!=null&&p.success)){p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&u(String(p.requiredSql||"")),i((p==null?void 0:p.error)||"Job oluturulamad.");return}await N()},A=async S=>{const y=String((S==null?void 0:S.id)||"");if(!y||!window.confirm("Bu i ak silinsin mi?"))return;const p=await Ze.deleteWorkflow(y).catch(()=>null);if(!(p!=null&&p.success)){i((p==null?void 0:p.error)||"Silinemedi.");return}await N()};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Otomasyon Kontrol"}),e.jsx("p",{className:"text-gray-600",children:" aklarn ynetin"})]}),e.jsxs("button",{type:"button",onClick:N,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black inline-flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Yenile"]})]}),l?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:l}):null,r?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,d?e.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_workflows`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:d})]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsx(Ga,{className:"w-8 h-8 text-green-500 mb-2"}),e.jsx("div",{className:"text-2xl font-black text-gray-900",children:k.success.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-sm text-gray-600",children:"Baarl (toplam)"})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[e.jsx(fs,{className:"w-8 h-8 text-red-500 mb-2"}),e.jsx("div",{className:"text-2xl font-black text-gray-900",children:k.fail.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-sm text-gray-600",children:"Baarsz (toplam)"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[e.jsx(Bm,{className:"w-8 h-8 text-blue-500 mb-2"}),e.jsx("div",{className:"text-2xl font-black text-gray-900",children:k.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"alan  Ak"})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Toplam  Ak"}),e.jsx("div",{className:"text-2xl font-black text-gray-900",children:c.length})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(As,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yeni  Ak"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{value:f,onChange:S=>v(S.target.value),placeholder:" ak ad (rn: Twitter Tarayc)",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:_,disabled:b,className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-black disabled:opacity-60",children:b?"Ekleniyor":"Ekle"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200",children:[c.map(S=>e.jsx("div",{className:"p-6 border-b last:border-b-0 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center ".concat(String(S.status)==="running"?"bg-green-100":"bg-gray-100"),children:e.jsx(Bm,{className:"w-6 h-6 ".concat(String(S.status)==="running"?"text-green-600":"text-gray-400")})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:S.name}),e.jsx("div",{className:"flex items-center gap-4 mt-1",children:e.jsx("span",{className:"text-xs px-2 py-1 rounded-full font-semibold ".concat(String(S.status)==="running"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:String(S.status)==="running"?"alyor":"Duraklatld"})})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Baarl / Hata"}),e.jsxs("div",{className:"font-bold text-gray-900",children:[Number(S.success_count||0)||0," / ",e.jsx("span",{className:"text-red-500",children:Number(S.fail_count||0)||0})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>T(S),className:"p-2 bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200",title:"imdi altr (job)",children:e.jsx(fr,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>M(S),className:"p-2 rounded-lg ".concat(String(S.status)==="running"?"bg-yellow-100 text-yellow-600 hover:bg-yellow-200":"bg-green-100 text-green-600 hover:bg-green-200"),title:"Balat/Durdur",children:String(S.status)==="running"?e.jsx(fd,{className:"w-5 h-5"}):e.jsx(xi,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>A(S),className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:"Sil",children:e.jsx(Ka,{className:"w-5 h-5"})})]})]})]})},S.id)),c.length===0?e.jsx("div",{className:"p-6 text-sm text-gray-600",children:"Henz i ak yok."}):null]})]})},OS=()=>{const[r,s]=m.useState(!1),[l,i]=m.useState(""),[d,u]=m.useState(""),[c,g]=m.useState([]),[f,v]=m.useState({title:"",position:"agenda_bar",target_url:"",status:"paused"}),[b,w]=m.useState(!1),N=async()=>{s(!0),i("");try{const A=await Ze.getAds().catch(()=>null);if(A!=null&&A.schemaMissing&&(A!=null&&A.requiredSql)&&u(String(A.requiredSql||"")),!(A!=null&&A.success))throw new Error((A==null?void 0:A.error)||"Reklamlar yklenemedi.");g(Array.isArray(A.data)?A.data:[])}catch(A){i(String((A==null?void 0:A.message)||"Reklamlar yklenemedi."))}finally{s(!1)}};m.useEffect(()=>{N()},[]);const k=m.useMemo(()=>{const A=c.filter(j=>String(j.status)==="active").length,S=c.reduce((j,E)=>j+(Number(E.clicks||0)||0),0),y=c.reduce((j,E)=>j+(Number(E.impressions||0)||0),0),p=y>0?S/y*100:0;return{active:A,clicks:S,imps:y,ctr:p}},[c]),_=async()=>{if(!b){w(!0),i("");try{const A=await Ze.createAd(f).catch(()=>null);if(!(A!=null&&A.success))throw A!=null&&A.schemaMissing&&(A!=null&&A.requiredSql)&&u(String(A.requiredSql||"")),new Error((A==null?void 0:A.error)||"Reklam oluturulamad.");v({title:"",position:f.position||"agenda_bar",target_url:"",status:"paused"}),await N()}catch(A){i(String((A==null?void 0:A.message)||"Reklam oluturulamad."))}finally{w(!1)}}},M=async A=>{const S=String((A==null?void 0:A.id)||"");if(!S)return;const y=String(A.status)==="active"?"paused":"active";g(j=>j.map(E=>String(E.id)===S?{...E,status:y}:E));const p=await Ze.updateAd(S,{status:y}).catch(()=>null);p!=null&&p.success||await N()},T=async A=>{const S=String((A==null?void 0:A.id)||"");if(!S||!window.confirm("Bu reklam silinsin mi?"))return;const y=await Ze.deleteAd(S).catch(()=>null);if(!(y!=null&&y.success)){i((y==null?void 0:y.error)||"Silinemedi.");return}await N()};return e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Reklam Ynetimi"}),e.jsx("p",{className:"text-gray-600",children:"Reklam alanlarn ynetin"})]})}),l?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:l}):null,r?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,d?e.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_ads`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:d})]}):null,e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border p-4",children:[e.jsx("div",{className:"text-2xl font-black text-gray-900",children:k.active}),e.jsx("div",{className:"text-sm text-gray-600",children:"Aktif Reklam"})]}),e.jsxs("div",{className:"bg-white rounded-xl border p-4",children:[e.jsx("div",{className:"text-2xl font-black text-gray-900",children:k.clicks.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Tklama"})]}),e.jsxs("div",{className:"bg-white rounded-xl border p-4",children:[e.jsx("div",{className:"text-2xl font-black text-gray-900",children:k.imps.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-sm text-gray-600",children:"Toplam Gsterim"})]}),e.jsxs("div",{className:"bg-white rounded-xl border p-4",children:[e.jsxs("div",{className:"text-2xl font-black text-gray-900",children:[k.ctr.toFixed(2),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Ort. Tklama Oran"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(As,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yeni Reklam"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{value:f.title,onChange:A=>v(S=>({...S,title:A.target.value})),placeholder:"Reklam bal",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsxs("select",{value:f.position,onChange:A=>v(S=>({...S,position:A.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"agenda_bar",children:"agenda_bar"}),e.jsx("option",{value:"post_card",children:"post_card"}),e.jsx("option",{value:"header",children:"header"}),e.jsx("option",{value:"sidebar",children:"sidebar"})]}),e.jsx("input",{value:f.target_url,onChange:A=>v(S=>({...S,target_url:A.target.value})),placeholder:"Hedef URL (opsiyonel)",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:_,disabled:b,className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-black disabled:opacity-60",children:b?"Ekleniyor":"Ekle"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Reklam"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Pozisyon"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Durum"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Tklama"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Gsterim"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"CTR"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm font-bold text-gray-900",children:"Aksiyon"})]})}),e.jsxs("tbody",{children:[c.map(A=>{const S=Number(A.clicks||0)||0,y=Number(A.impressions||0)||0,p=y>0?S/y*100:0;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 font-semibold text-gray-900",children:A.title}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-semibold",children:A.position})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat(String(A.status)==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:String(A.status)==="active"?"Aktif":"Duraklad"})}),e.jsx("td",{className:"px-6 py-4",children:S.toLocaleString("tr-TR")}),e.jsx("td",{className:"px-6 py-4",children:y.toLocaleString("tr-TR")}),e.jsxs("td",{className:"px-6 py-4 font-semibold",children:[p.toFixed(2),"%"]}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>M(A),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Aktif/Pasif",children:String(A.status)==="active"?e.jsx(ml,{className:"w-6 h-6 sm:w-5 sm:h-5"}):e.jsx(cs,{className:"w-6 h-6 sm:w-5 sm:h-5"})}),e.jsx("button",{type:"button",onClick:()=>T(A),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Sil",children:e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5"})})]})})]},A.id)}),c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-10 text-center text-sm text-gray-600",children:"Henz reklam yok."})}):null]})]})})]})},zS=()=>{var _,M,T,A;const[r,s]=m.useState("7days"),[l,i]=m.useState(!1),[d,u]=m.useState(""),[c,g]=m.useState(null);m.useEffect(()=>{let S=!1;return(async()=>{i(!0),u("");try{const y=await Ze.getAnalytics({range:r}).catch(()=>null);if(!(y!=null&&y.success))throw new Error((y==null?void 0:y.error)||"Analitik yklenemedi.");S||g(y.data||null)}catch(y){S||u(String((y==null?void 0:y.message)||"Analitik yklenemedi."))}finally{S||i(!1)}})(),()=>{S=!0}},[r]);const f=m.useMemo(()=>{const S=(c==null?void 0:c.totals)||{},y=(c==null?void 0:c.window)||{},p=(c==null?void 0:c.approx)||{},j=p==null?void 0:p.totalViews,E=p==null?void 0:p.totalPolitScore;return[{label:"Toplam Kullanc",value:Number(S.totalUsers||0).toLocaleString("tr-TR"),sub:"Bu aralkta +".concat(Number(y.usersInRange||0).toLocaleString("tr-TR")),icon:ts,color:"text-blue-600"},{label:"Toplam Paylam",value:Number(S.totalPosts||0).toLocaleString("tr-TR"),sub:"Bu aralkta +".concat(Number(y.postsInRange||0).toLocaleString("tr-TR")),icon:rn,color:"text-green-600"},{label:"Grntlenme (yaklak)",value:typeof j=="number"?j.toLocaleString("tr-TR"):"",sub:p!=null&&p.sampleSize?"Son ".concat(Number(p.sampleSize).toLocaleString("tr-TR")," post rnei"):"Veri yok",icon:cs,color:"text-purple-600"},{label:"Polit Puan (yaklak)",value:typeof E=="number"?Ra(E):"",sub:p!=null&&p.sampleSize?"Son ".concat(Number(p.sampleSize).toLocaleString("tr-TR")," post rnei"):"Veri yok",icon:er,color:"text-orange-600"}]},[c]),v=m.useMemo(()=>{const S=(c==null?void 0:c.userTypeCounts)||{};return[{key:"normal",label:"Vatanda/ye"},{key:"party_member",label:"Parti yesi"},{key:"media",label:"Medya"},{key:"politician",label:"Siyaseti"},{key:"party_official",label:"Tekilat"},{key:"mp",label:"Milletvekili"},{key:"ex_politician",label:"Deneyimli"},{key:"citizen",label:"Citizen (legacy)"}].map(p=>({...p,count:Number(S[p.key]||0)}))},[c]),b=(c==null?void 0:c.windowDetail)||null,w=Array.isArray(b==null?void 0:b.series)?b.series:[],N=Math.max(1,...w.map(S=>Number((S==null?void 0:S.posts)||0)||0)),k=Math.max(1,...w.map(S=>Number((S==null?void 0:S.users)||0)||0));return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Analitik & Raporlar"}),e.jsx("p",{className:"text-gray-600",children:"Gerek veriler (Supabase) zerinden zet"})]}),e.jsxs("select",{value:r,onChange:S=>s(S.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"today",children:"Bugn"}),e.jsx("option",{value:"7days",children:"Son 7 Gn"}),e.jsx("option",{value:"30days",children:"Son 30 Gn"}),e.jsx("option",{value:"90days",children:"Son 90 Gn"})]})]}),d?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:d}):null,l?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:f.map(S=>e.jsxs("div",{className:"bg-white rounded-xl border p-6",children:[e.jsx(S.icon,{className:"w-8 h-8 ".concat(S.color," mb-2")}),e.jsx("div",{className:"text-3xl font-black text-gray-900",children:S.value}),e.jsx("div",{className:"text-sm text-gray-600",children:S.label}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:S.sub})]},S.label))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"En Popler Gndemler"}),e.jsxs("div",{className:"space-y-3",children:[(Array.isArray(c==null?void 0:c.topAgendas)?c.topAgendas:[]).slice(0,10).map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:S.title}),e.jsx("span",{className:"text-primary-blue font-black",children:Ra(S.total_polit_score||0)})]},S.id)),!l&&(!(c!=null&&c.topAgendas)||c.topAgendas.length===0)?e.jsx("div",{className:"text-sm text-gray-600",children:"Gndem verisi bulunamad."}):null]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Kullanc Dalm"}),e.jsx("div",{className:"space-y-3",children:v.map(S=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:S.label}),e.jsx("span",{className:"font-black text-gray-900",children:S.count.toLocaleString("tr-TR")})]},S.key))})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Zaman Serisi (yaklak)"}),e.jsx(er,{className:"w-6 h-6 text-primary-blue"})]}),w.length?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:b!=null&&b.truncated?"Not: ok veri olduu iin rnekleme uygulanm olabilir.":""}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-black text-gray-600 mb-2",children:"Gnlk Paylam"}),e.jsx("div",{className:"flex items-end gap-1 h-14",children:w.slice(-30).map(S=>e.jsx("div",{className:"flex-1 bg-blue-200 rounded-sm",style:{height:"".concat(Math.max(2,Math.round(Number(S.posts||0)/N*56)),"px")},title:"".concat(S.date,": ").concat(Number(S.posts||0)," post")},"p-".concat(S.date)))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-black text-gray-600 mb-2",children:"Gnlk Yeni Kullanc"}),e.jsx("div",{className:"flex items-end gap-1 h-14",children:w.slice(-30).map(S=>e.jsx("div",{className:"flex-1 bg-emerald-200 rounded-sm",style:{height:"".concat(Math.max(2,Math.round(Number(S.users||0)/k*56)),"px")},title:"".concat(S.date,": ").concat(Number(S.users||0)," user")},"u-".concat(S.date)))})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Son ",Math.min(30,w.length)," gn gsterilir."]})]}):e.jsx("div",{className:"text-sm text-gray-600",children:"Zaman serisi verisi bulunamad."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Aralk zeti (yaklak)"}),e.jsx(mr,{className:"w-6 h-6 text-primary-blue"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Grntlenme"}),e.jsx("div",{className:"text-xl font-black text-gray-900",children:Number(((_=b==null?void 0:b.totals)==null?void 0:_.views)||0).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Beeni"}),e.jsx("div",{className:"text-xl font-black text-gray-900",children:Number(((M=b==null?void 0:b.totals)==null?void 0:M.likes)||0).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Yorum"}),e.jsx("div",{className:"text-xl font-black text-gray-900",children:Number(((T=b==null?void 0:b.totals)==null?void 0:T.comments)||0).toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Paylam"}),e.jsx("div",{className:"text-xl font-black text-gray-900",children:Number(((A=b==null?void 0:b.totals)==null?void 0:A.shares)||0).toLocaleString("tr-TR")})]})]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500",children:"Kaynak: seilen aralkta oluturulan postlarn rneklemi (tam tablo taramas yaplmaz)."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"En Yksek Polit Puanl Kullanclar"}),e.jsx(qj,{className:"w-6 h-6 text-primary-blue"})]}),e.jsxs("div",{className:"space-y-3",children:[(Array.isArray(c==null?void 0:c.topUsers)?c.topUsers:[]).slice(0,10).map(S=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-semibold text-gray-900 truncate",children:S.full_name||""}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",S.username||S.id]})]}),e.jsx("div",{className:"text-primary-blue font-black",children:Ra(S.polit_score||0)})]},S.id)),!l&&(!(c!=null&&c.topUsers)||c.topUsers.length===0)?e.jsx("div",{className:"text-sm text-gray-600",children:"Kullanc verisi bulunamad."}):null]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Paylam Tipleri"}),e.jsx(Yj,{className:"w-6 h-6 text-primary-blue"})]}),e.jsx("div",{className:"space-y-3",children:[{k:"text",label:"Metin"},{k:"image",label:"Resim"},{k:"video",label:"Video"},{k:"audio",label:"Ses"}].map(S=>{var y;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-700",children:S.label}),e.jsx("span",{className:"font-black text-gray-900",children:Number(((y=c==null?void 0:c.postTypeCounts)==null?void 0:y[S.k])||0).toLocaleString("tr-TR")})]},S.k)})})]})]}),e.jsxs("div",{className:"mt-6 bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"En ok Beeni Alan Paylamlar (aralk)"}),e.jsx(Or,{className:"w-6 h-6 text-primary-blue"})]}),e.jsxs("div",{className:"space-y-3",children:[(Array.isArray(b==null?void 0:b.topPostsByLikes)?b.topPostsByLikes:[]).slice(0,12).map(S=>e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:S.excerpt||""}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"font-mono",children:String(S.id||"").slice(0,8)}),e.jsx("span",{children:S.content_type||""}),S.is_trending?e.jsx("span",{className:"px-2 py-0.5 rounded-full bg-amber-100 text-amber-800 font-black",children:"FAST"}):null]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs font-black text-gray-700",children:[e.jsxs("span",{title:"Beeni",children:[" ",Number(S.like_count||0).toLocaleString("tr-TR")]}),e.jsxs("span",{title:"Grntlenme",children:[" ",Number(S.view_count||0).toLocaleString("tr-TR")]}),e.jsxs("span",{title:"Yorum",children:[" ",Number(S.comment_count||0).toLocaleString("tr-TR")]})]})]})},S.id)),!l&&(!(b!=null&&b.topPostsByLikes)||b.topPostsByLikes.length===0)?e.jsx("div",{className:"text-sm text-gray-600",children:"Bu aralkta paylam verisi bulunamad."}):null]})]})]})},PS=()=>{const[r,s]=m.useState(""),[l,i]=m.useState("all"),[d,u]=m.useState([]),[c,g]=m.useState(!1),[f,v]=m.useState(""),[b,w]=m.useState([]),[N,k]=m.useState(!1),[_,M]=m.useState(null),[T,A]=m.useState(""),[S,y]=m.useState(!1),[p,j]=m.useState(!1),[E,C]=m.useState(""),O=async()=>{g(!0),v("");try{const B=await Ze.getComments({status:l==="all"?"all":l,limit:200}).catch(()=>null);if(!(B!=null&&B.success))throw new Error((B==null?void 0:B.error)||"Yorumlar yklenemedi.");w(Array.isArray(B.data)?B.data:[]),u([])}catch(B){v(String((B==null?void 0:B.message)||"Yorumlar yklenemedi."))}finally{g(!1)}};m.useEffect(()=>{O()},[l]);const P=m.useMemo(()=>{const B=String(r||"").trim().toLocaleLowerCase("tr-TR"),Y=Array.isArray(b)?b:[];return B?Y.filter(Q=>{const q=String((Q==null?void 0:Q.content)||"").toLocaleLowerCase("tr-TR"),I=(Q==null?void 0:Q.user)||{},V=String((I==null?void 0:I.full_name)||(I==null?void 0:I.name)||"").toLocaleLowerCase("tr-TR"),Te=String((I==null?void 0:I.username)||"").toLocaleLowerCase("tr-TR");return q.includes(B)||V.includes(B)||Te.includes(B)}):Y},[b,r]),L=B=>{B.target.checked?u(P.map(Y=>Y.id)):u([])},ce=B=>{d.includes(B)?u(d.filter(Y=>Y!==B)):u([...d,B])},Z=B=>{const Q={approved:{color:"bg-green-100 text-green-700",icon:Ga,text:"Onayland"},pending:{color:"bg-yellow-100 text-yellow-700",icon:gi,text:"Bekliyor"}}[B],q=Q.icon;return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ".concat(Q.color),children:[e.jsx(q,{className:"w-5 h-5"}),Q.text]})},ie=B=>B!=null&&B.is_deleted?"pending":"approved",le=async B=>{const Y=String(B||"");if(!Y)return;const Q=await Ze.approveComment(Y).catch(()=>null);if(!(Q!=null&&Q.success)){v((Q==null?void 0:Q.error)||"Onaylanamad.");return}await O()},ye=async B=>{const Y=String(B||"");if(!Y||!window.confirm("Bu yorum silinsin mi?"))return;const Q=await Ze.deleteComment(Y).catch(()=>null);if(!(Q!=null&&Q.success)){v((Q==null?void 0:Q.error)||"Silinemedi.");return}await O()},z=async()=>{const B=d.map(String).filter(Boolean);if(B.length){for(const Y of B)await Ze.approveComment(Y).catch(()=>null);await O()}},X=async()=>{const B=d.map(String).filter(Boolean);if(B.length&&window.confirm("".concat(B.length," yorumu silmek istiyor musunuz?"))){for(const Y of B)await Ze.deleteComment(Y).catch(()=>null);await O()}},G=B=>{var Y;B!=null&&B.id&&(M(B),A(String((Y=B==null?void 0:B.content)!=null?Y:"")),y(!!(B!=null&&B.is_deleted)),C(""),k(!0))},D=()=>{k(!1),M(null),A(""),y(!1),j(!1),C("")},$=async()=>{const B=_==null?void 0:_.id;if(B){j(!0),C("");try{const Y={content:T,is_deleted:!!S},Q=await Ze.updateComment(B,Y).catch(()=>null);if(!(Q!=null&&Q.success))throw new Error((Q==null?void 0:Q.error)||"Yorum gncellenemedi.");const q=(Q==null?void 0:Q.data)||null;q?w(I=>I.map(V=>String(V==null?void 0:V.id)===String(B)?{...V,...q}:V)):await O(),D()}catch(Y){C(String((Y==null?void 0:Y.message)||"Yorum gncellenemedi."))}finally{j(!1)}}};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8 flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Yorum Moderasyonu"}),e.jsx("p",{className:"text-gray-600",children:"Kullanc yorumlarn ynetin"})]}),e.jsxs("button",{type:"button",onClick:O,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black inline-flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Yenile"]})]}),f?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:f}):null,c?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Toplam Yorum"}),e.jsx("div",{className:"text-2xl font-black text-gray-900",children:b.length})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"Onaylanm"}),e.jsx("div",{className:"text-2xl font-black text-green-700",children:b.filter(B=>!(B!=null&&B.is_deleted)).length})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-xl border border-yellow-200 p-4",children:[e.jsx("div",{className:"text-sm text-yellow-600 mb-1",children:"Bekleyen"}),e.jsx("div",{className:"text-2xl font-black text-yellow-700",children:b.filter(B=>!!(B!=null&&B.is_deleted)).length})]}),e.jsxs("div",{className:"bg-red-50 rounded-xl border border-red-200 p-4",children:[e.jsx("div",{className:"text-sm text-red-600 mb-1",children:"Seili"}),e.jsx("div",{className:"text-2xl font-black text-red-700",children:d.length})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Yorum veya kullanc ara...",value:r,onChange:B=>s(B.target.value),className:"w-full pl-11 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none"})]}),e.jsxs("select",{value:l,onChange:B=>i(B.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none",children:[e.jsx("option",{value:"all",children:"Tm Durumlar"}),e.jsx("option",{value:"approved",children:"Onaylanm"}),e.jsx("option",{value:"pending",children:"Bekleyen"})]})]}),d.length>0&&e.jsxs("div",{className:"flex items-center gap-3 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:[d.length," yorum seildi"]}),e.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-semibold",children:"Onayla"}),e.jsx("button",{type:"button",onClick:X,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-semibold",children:"Sil"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left",children:e.jsx("input",{type:"checkbox",checked:d.length===P.length,onChange:L,className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue cursor-pointer accent-primary-blue"})}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Kullanc"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Paylam"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Yorum"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Durum"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Beeni"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Tarih"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"lemler"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[P.map(B=>{var Y,Q,q,I;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("input",{type:"checkbox",checked:d.includes(B.id),onChange:()=>ce(B.id),className:"w-5 h-5 text-primary-blue border-gray-300 rounded focus:ring-primary-blue cursor-pointer accent-primary-blue"})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yt,{src:(Y=B==null?void 0:B.user)==null?void 0:Y.avatar_url,alt:"",size:40}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:((Q=B==null?void 0:B.user)==null?void 0:Q.full_name)||""}),e.jsxs("div",{className:"text-sm text-gray-500",children:["@",((q=B==null?void 0:B.user)==null?void 0:q.username)||""]})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 max-w-xs truncate",children:String(((I=B==null?void 0:B.post)==null?void 0:I.content)||"").slice(0,80)||""})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"text-sm text-gray-700 max-w-md line-clamp-2",children:B.content})}),e.jsx("td",{className:"px-6 py-4",children:Z(ie(B))}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:Number(B.like_count||0)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500",children:String(B.created_at||"").slice(0,19)||""})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Grntle",onClick:()=>window.open("/post/".concat(B==null?void 0:B.post_id),"_blank"),children:e.jsx(cs,{className:"w-6 h-6 sm:w-5 sm:h-5 text-gray-600"})}),e.jsx("button",{type:"button",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Dzenle",onClick:()=>G(B),children:e.jsx(yi,{className:"w-6 h-6 sm:w-5 sm:h-5 text-gray-700"})}),B!=null&&B.is_deleted?e.jsx("button",{type:"button",className:"p-2 hover:bg-green-50 rounded-lg transition-colors",title:"Onayla",onClick:()=>le(B.id),children:e.jsx(Ga,{className:"w-6 h-6 sm:w-5 sm:h-5 text-green-600"})}):null,e.jsx("button",{type:"button",className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Sil",onClick:()=>ye(B.id),children:e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5 text-red-600"})})]})})]},B.id)}),P.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-10 text-center text-sm text-gray-600",children:"Henz yorum yok."})}):null]})]})})}),N&&_?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"p-5 border-b flex items-center justify-between sticky top-0 bg-white z-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yorumu Dzenle"}),e.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",String(_==null?void 0:_.id)]})]}),e.jsx("button",{type:"button",onClick:D,className:"p-2 hover:bg-gray-100 rounded-full",title:"Kapat",children:e.jsx(xs,{className:"w-6 h-6 text-gray-600"})})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[E?e.jsx("div",{className:"rounded-xl border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700 font-semibold",children:E}):null,e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"Yorum"}),e.jsx("textarea",{value:T,onChange:B=>A(B.target.value),className:"mt-1 w-full min-h-[140px] px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue outline-none",placeholder:"Yorum"}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:[String(T||"").length,"/500"]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-800",children:[e.jsx("input",{type:"checkbox",checked:!!S,onChange:B=>y(B.target.checked),className:"w-5 h-5 accent-primary-blue"}),"Bekleyen/Silinmi (is_deleted)"]}),e.jsxs("div",{className:"flex items-center justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black",disabled:p,children:"Vazge"}),e.jsxs("button",{type:"button",onClick:$,className:"px-4 py-2 rounded-xl bg-gray-900 hover:bg-black text-white font-black inline-flex items-center gap-2 disabled:opacity-60",disabled:p,children:[e.jsx(ks,{className:"w-5 h-5"}),p?"Kaydediliyor":"Kaydet"]})]})]})]})}):null]})},DS=()=>{const[r,s]=m.useState("uploads"),[l,i]=m.useState("all"),[d,u]=m.useState(""),[c,g]=m.useState(""),[f,v]=m.useState(!1),[b,w]=m.useState(""),[N,k]=m.useState([]),_=m.useRef(null),[M,T]=m.useState(null),A=async()=>{var P;v(!0),w("");try{const L=await Ze.storageList({bucket:r,prefix:c,limit:200,offset:0}).catch(()=>null);if(!(L!=null&&L.success))throw new Error((L==null?void 0:L.error)||"Storage listesi alnamad.");k(Array.isArray(L.data)?L.data:[]);const ce=String(((P=L==null?void 0:L.meta)==null?void 0:P.bucket)||"").trim();ce&&ce!==r&&s(ce)}catch(L){w(String((L==null?void 0:L.message)||"Storage listesi alnamad."))}finally{v(!1)}};m.useEffect(()=>{A()},[c]);const S=m.useMemo(()=>N.map(P=>{const L=String((P==null?void 0:P.mimetype)||"").toLowerCase(),ce=L.startsWith("image/")?"image":L.startsWith("video/")?"video":"document";return{id:P.path,filename:P.name,path:P.path,bucket:P.bucket,url:P.public_url,type:ce,sizeBytes:Number(P.size||0)||0,uploaded_at:P.created_at||P.updated_at||null,usage_count:""}}),[N]),y=m.useMemo(()=>{const P=String(d||"").trim().toLocaleLowerCase("tr-TR");return S.filter(L=>{const ce=l==="all"||L.type===l,Z=!P||String(L.filename||"").toLocaleLowerCase("tr-TR").includes(P);return ce&&Z})},[S,l,d]),p=P=>{switch(P){case"image":return e.jsx(ci,{className:"w-6 h-6 text-blue-500"});case"video":return e.jsx(po,{className:"w-6 h-6 text-purple-500"});case"document":return e.jsx(t0,{className:"w-6 h-6 text-gray-500"});default:return e.jsx(t0,{className:"w-6 h-6 text-gray-500"})}},j=async P=>{const L=String((P==null?void 0:P.path)||"").trim();if(!L||!window.confirm("Silinsin mi?\n".concat(L)))return;const ce=String((P==null?void 0:P.bucket)||r||"uploads").trim()||"uploads",Z=await Ze.storageDelete({bucket:ce,paths:[L]}).catch(()=>null);if(!(Z!=null&&Z.success)){w((Z==null?void 0:Z.error)||"Silinemedi.");return}await A()},E=async P=>{const L=String(P||"").trim();if(L)try{await navigator.clipboard.writeText(L)}catch(ce){try{const Z=document.createElement("textarea");Z.value=L,Z.style.position="fixed",Z.style.left="-9999px",document.body.appendChild(Z),Z.select(),document.execCommand("copy"),document.body.removeChild(Z)}catch(Z){}}},C=P=>{var L,ce;T(P);try{(ce=(L=_.current)==null?void 0:L.click)==null||ce.call(L)}catch(Z){}},O=async P=>{var ce,Z;const L=((Z=(ce=P==null?void 0:P.target)==null?void 0:ce.files)==null?void 0:Z[0])||null;if(!(!L||!(M!=null&&M.path))){w(""),v(!0);try{const ie=await new Promise((ye,z)=>{const X=new FileReader;X.onload=()=>ye(String(X.result||"")),X.onerror=()=>z(new Error("Dosya okunamad.")),X.readAsDataURL(L)}),le=await Ze.storageReplace({bucket:String((M==null?void 0:M.bucket)||r||"uploads").trim()||"uploads",path:M.path,dataUrl:ie,contentType:String(L.type||"").trim()}).catch(()=>null);if(!(le!=null&&le.success))throw new Error((le==null?void 0:le.error)||"Dosya gncellenemedi.");await A()}catch(ie){w(String((ie==null?void 0:ie.message)||"Dosya gncellenemedi."))}finally{v(!1),T(null);try{_.current&&(_.current.value="")}catch(ie){}}}};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("input",{ref:_,type:"file",className:"hidden",onChange:O}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Medya Ynetimi"}),e.jsx("p",{className:"text-gray-600",children:"URL ve metadata zerinden ynetim (dosyalar otomatik yklenmez)"})]}),e.jsxs("button",{type:"button",onClick:A,className:"flex items-center gap-2 px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-black",children:[e.jsx(fr,{className:"w-5 h-5"}),"Yenile"]})]}),b?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:b}):null,f?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,e.jsxs("div",{className:"mb-4 text-xs text-gray-500",children:["Bucket: ",e.jsx("span",{className:"font-mono text-gray-700",children:r})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Toplam Resim"}),e.jsx("div",{className:"text-2xl font-black text-blue-700",children:S.filter(P=>P.type==="image").length})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Toplam Video"}),e.jsx("div",{className:"text-2xl font-black text-purple-700",children:S.filter(P=>P.type==="video").length})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Toplam Dokman"}),e.jsx("div",{className:"text-2xl font-black text-gray-700",children:S.filter(P=>P.type==="document").length})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"Toplam Boyut"}),e.jsx("div",{className:"text-2xl font-black text-green-700",children:f0(S.reduce((P,L)=>P+(Number(L.sizeBytes||0)||0),0))})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Dosya ara...",value:d,onChange:P=>u(P.target.value),className:"w-full pl-11 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none"})]}),e.jsxs("select",{value:l,onChange:P=>i(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none",children:[e.jsx("option",{value:"all",children:"Tm Dosyalar"}),e.jsx("option",{value:"image",children:"Resimler"}),e.jsx("option",{value:"video",children:"Videolar"}),e.jsx("option",{value:"document",children:"Dokmanlar"})]}),e.jsxs("select",{value:c,onChange:P=>g(P.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none",title:"Klasr",children:[e.jsx("option",{value:"",children:"(kk)"}),e.jsx("option",{value:"messages",children:"messages"}),e.jsx("option",{value:"documents",children:"documents"}),e.jsx("option",{value:"posts",children:"posts"}),e.jsx("option",{value:"fast",children:"fast"}),e.jsx("option",{value:"avatars",children:"avatars"})]})]})}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"divide-y divide-gray-100",children:[y.map(P=>e.jsx("div",{className:"p-4 sm:p-5 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:p(P.type)}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-black text-gray-900 truncate",children:P.filename}),e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5 truncate",children:[f0(P.sizeBytes),"  ",P.path]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>E(P.url),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-700",title:"URL kopyala",children:e.jsx(Ey,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>window.open(P.url,"_blank"),className:"p-2 rounded-lg hover:bg-gray-100 text-gray-700",title:"URL a",children:e.jsx(cs,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>window.open(P.url,"_blank"),className:"p-2 rounded-lg hover:bg-blue-50 text-primary-blue",title:"ndir",children:e.jsx(ky,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>C(P),className:"p-2 rounded-lg hover:bg-amber-50 text-amber-700",title:"Deitir (dosya se)",children:e.jsx(Ny,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:()=>j(P),className:"p-2 rounded-lg hover:bg-red-50 text-red-700",title:"Sil",children:e.jsx(Ka,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"button",onClick:()=>E(P.url),className:"w-full text-left px-3 py-2 rounded-lg bg-gray-50 hover:bg-gray-100 border border-gray-200 font-mono text-[11px] text-gray-700 truncate",title:"Tklaynca URL kopyalanr",children:P.url})})]})]})},P.id)),y.length===0?e.jsx("div",{className:"p-10 text-center text-sm text-gray-600",children:"Henz dosya yok."}):null]})})]})},BS=()=>{const[r,s]=m.useState(null),[l,i]=m.useState(null),[d,u]=m.useState(!1),[c,g]=m.useState(""),[f,v]=m.useState(""),[b,w]=m.useState([]),[N,k]=m.useState({name:"",type:"other",subject:"",content_html:"",is_active:!0}),[_,M]=m.useState(!1),T=async()=>{u(!0),g("");try{const S=await Ze.getEmailTemplates().catch(()=>null);if(S!=null&&S.schemaMissing&&(S!=null&&S.requiredSql)&&v(String(S.requiredSql||"")),!(S!=null&&S.success))throw new Error((S==null?void 0:S.error)||"ablonlar yklenemedi.");const y=Array.isArray(S==null?void 0:S.data)?S.data:[],p=j=>{var O,P,L,ce,Z,ie,le,ye,z,X;const E=Number((P=(O=j==null?void 0:j.usage_count)!=null?O:j==null?void 0:j.usage)!=null?P:0),C=(le=(ie=(Z=(ce=(L=j==null?void 0:j.updated_at)!=null?L:j==null?void 0:j.updatedAt)!=null?ce:j==null?void 0:j.last_updated)!=null?Z:j==null?void 0:j.created_at)!=null?ie:j==null?void 0:j.createdAt)!=null?le:null;return{...j,id:j==null?void 0:j.id,name:String((j==null?void 0:j.name)||(j==null?void 0:j.template_name)||"").trim()||"ablon",type:String((j==null?void 0:j.type)||"other").trim()||"other",subject:String((j==null?void 0:j.subject)||"").trim(),content_html:String((X=(z=(ye=j==null?void 0:j.content_html)!=null?ye:j==null?void 0:j.html)!=null?z:j==null?void 0:j.content)!=null?X:"").trim(),is_active:(j==null?void 0:j.is_active)!==!1,usage_count:Number.isFinite(E)&&E>=0?E:0,_lastUpdated:C?String(C):""}};w(y.map(p))}catch(S){g(String((S==null?void 0:S.message)||"ablonlar yklenemedi."))}finally{u(!1)}};m.useEffect(()=>{T()},[]);const A=S=>{const p={welcome:{color:"bg-green-100 text-green-700",text:"Ho Geldin"},password_reset:{color:"bg-red-100 text-red-700",text:"ifre"},email_verification:{color:"bg-blue-100 text-blue-700",text:"Dorulama"},weekly_digest:{color:"bg-purple-100 text-purple-700",text:"zet"}}[S]||{color:"bg-gray-100 text-gray-700",text:"Dier"};return e.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-xs font-semibold ".concat(p.color),children:p.text})};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"E-posta ablonlar"}),e.jsx("p",{className:"text-gray-600",children:"Otomatik e-posta ablonlarn dzenleyin"})]}),e.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black",children:"Yenile"})]}),c?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:c}):null,d?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,f?e.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_email_templates`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:f})]}):null,e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Toplam ablon"}),e.jsx("div",{className:"text-2xl font-black text-gray-900",children:b.length})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Aktif ablon"}),e.jsx("div",{className:"text-2xl font-black text-blue-700",children:b.filter(S=>S.is_active!==!1).length})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"Bu Ay Gnderilen"}),e.jsx("div",{className:"text-2xl font-black text-green-700",children:""})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Alma Oran"}),e.jsx("div",{className:"text-2xl font-black text-purple-700",children:""})]})]}),e.jsxs("div",{className:"mb-6 bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(As,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yeni ablon"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{value:N.name,onChange:S=>k(y=>({...y,name:S.target.value})),placeholder:"ablon ad",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsxs("select",{value:N.type,onChange:S=>k(y=>({...y,type:S.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"welcome",children:"welcome"}),e.jsx("option",{value:"password_reset",children:"password_reset"}),e.jsx("option",{value:"email_verification",children:"email_verification"}),e.jsx("option",{value:"weekly_digest",children:"weekly_digest"}),e.jsx("option",{value:"other",children:"other"})]}),e.jsx("input",{value:N.subject,onChange:S=>k(y=>({...y,subject:S.target.value})),placeholder:"Konu",className:"px-4 py-3 border border-gray-300 rounded-lg md:col-span-2"}),e.jsx("textarea",{value:N.content_html,onChange:S=>k(y=>({...y,content_html:S.target.value})),placeholder:"HTML ierik",className:"px-4 py-3 border border-gray-300 rounded-lg md:col-span-2",rows:6}),e.jsx("button",{type:"button",disabled:_,onClick:async()=>{if(!_){M(!0),g("");try{const S=await Ze.createEmailTemplate(N).catch(()=>null);if(!(S!=null&&S.success))throw S!=null&&S.schemaMissing&&(S!=null&&S.requiredSql)&&v(String(S.requiredSql||"")),new Error((S==null?void 0:S.error)||"ablon oluturulamad.");k({name:"",type:N.type||"other",subject:"",content_html:"",is_active:!0}),await T()}catch(S){g(String((S==null?void 0:S.message)||"ablon oluturulamad."))}finally{M(!1)}}},className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-black disabled:opacity-60 md:col-span-2",children:_?"Ekleniyor":"ablon Ekle"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"ablon Ad"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Konu"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Tr"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Kullanm"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Son Gncelleme"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"lemler"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[b.map(S=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(hr,{className:"w-5 h-5 text-primary-blue"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:S.name})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-700",children:S.subject})}),e.jsx("td",{className:"px-6 py-4",children:A(S.type)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:Number(S.usage_count||0).toLocaleString("tr-TR")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500",children:S._lastUpdated||""})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",onClick:()=>s(S),title:"Grntle",children:e.jsx(cs,{className:"w-6 h-6 sm:w-5 sm:h-5 text-gray-600"})}),e.jsx("button",{type:"button",className:"p-2 hover:bg-blue-50 rounded-lg transition-colors",title:"Dzenle",onClick:()=>i(S),children:e.jsx(yi,{className:"w-6 h-6 sm:w-5 sm:h-5 text-primary-blue"})}),e.jsx("button",{type:"button",className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Sil",onClick:async()=>{if(!window.confirm("ablon silinsin mi?"))return;const y=await Ze.deleteEmailTemplate(S.id).catch(()=>null);if(!(y!=null&&y.success)){g((y==null?void 0:y.error)||"Silinemedi.");return}await T()},children:e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5 text-red-600"})})]})})]},S.id)),b.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-8 text-center text-sm text-gray-600",children:"Henz ablon yok."})}):null]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-black text-gray-900",children:r.name}),e.jsx("button",{onClick:()=>s(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Konu: ",r.subject]})]}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:e.jsx("iframe",{title:"E-posta nizleme",sandbox:"",className:"w-full h-[420px] bg-white rounded-lg border border-gray-200",srcDoc:'<!doctype html><html><head><meta charset="utf-8" /></head><body style="margin:0;padding:16px;font-family:Arial,sans-serif;line-height:1.6;color:#111827;">'.concat(String(r.content_html||""),"</body></html>")})})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 flex gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{i(r),s(null)},className:"flex-1 px-4 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold",children:"Dzenle"}),e.jsx("button",{type:"button",onClick:()=>s(null),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors font-semibold",children:"Kapat"})]})]})}),l?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"text-xl font-black text-gray-900",children:"ablon Dzenle"}),e.jsx("button",{type:"button",onClick:()=>i(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsxs("div",{className:"p-6 space-y-3",children:[e.jsx("input",{value:l.name||"",onChange:S=>i(y=>({...y,name:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:l.subject||"",onChange:S=>i(y=>({...y,subject:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("textarea",{value:l.content_html||"",onChange:S=>i(y=>({...y,content_html:S.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg",rows:10}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"px-5 py-3 rounded-xl bg-primary-blue text-white font-black hover:bg-blue-600",onClick:async()=>{const S=l.id,y=await Ze.updateEmailTemplate(S,{name:l.name,subject:l.subject,content_html:l.content_html,type:l.type,is_active:l.is_active!==!1}).catch(()=>null);if(!(y!=null&&y.success)){g((y==null?void 0:y.error)||"Gncellenemedi.");return}i(null),await T()},children:"Kaydet"}),e.jsx("button",{type:"button",className:"px-5 py-3 rounded-xl border border-gray-300 bg-white hover:bg-gray-50 font-semibold",onClick:()=>i(null),children:"Vazge"})]})]})]})}):null]})},ty=()=>{const{user:r}=Pa(),s=m.useMemo(()=>String((r==null?void 0:r.email)||"").trim(),[r==null?void 0:r.email]),[l,i]=m.useState(!1),[d,u]=m.useState(!1),[c,g]=m.useState(!1),[f,v]=m.useState(null),[b,w]=m.useState({mail_enabled:"true",mail_provider:"brevo",mail_sender_email:"",mail_sender_name:"Polithane",mail_reply_to_email:"",mail_reply_to_name:"",email_verification_enabled:"false",brevo_api_key_configured:!1}),[N,k]=m.useState(""),[_,M]=m.useState({to:s,subject:"Polithane Mail Test",text:"Bu bir test e-postasdr.\n\nSaat: ".concat(new Date().toISOString(),"\n\n Polithane"),html:""}),T=async()=>{i(!0),v(null);try{const p=await ma.admin.getMailSettings().catch(()=>null);if(!(p!=null&&p.success))throw new Error((p==null?void 0:p.error)||"Mail ayarlar yklenemedi.");w(j=>({...j,...p.data||{}}))}catch(p){ra.error(String((p==null?void 0:p.message)||"Mail ayarlar yklenemedi."))}finally{i(!1)}};m.useEffect(()=>{T()},[]),m.useEffect(()=>{M(p=>({...p,to:s||p.to}))},[s]);const A=async()=>{if(d)return;const p=String(b.mail_sender_email||"").trim();if(b.mail_enabled==="true"&&!p){ra.error("Gnderici email zorunlu (mail_sender_email).");return}u(!0);try{const j={mail_enabled:String(b.mail_enabled),mail_provider:"brevo",mail_sender_email:String(b.mail_sender_email||"").trim(),mail_sender_name:String(b.mail_sender_name||"").trim(),mail_reply_to_email:String(b.mail_reply_to_email||"").trim(),mail_reply_to_name:String(b.mail_reply_to_name||"").trim(),email_verification_enabled:String(b.email_verification_enabled),brevo_api_key:String(N||"").trim()||void 0},E=await ma.admin.updateMailSettings(j).catch(()=>null);if(!(E!=null&&E.success))throw new Error((E==null?void 0:E.error)||"Kaydedilemedi.");k(""),ra.success("Mail ayarlar kaydedildi."),await T()}catch(j){ra.error(String((j==null?void 0:j.message)||"Kaydedilemedi."))}finally{u(!1)}},S=async()=>{if(c)return;const p={to:String(_.to||"").trim(),subject:String(_.subject||"").trim(),text:String(_.text||"").trim(),html:String(_.html||"").trim()};if(!p.to||!p.to.includes("@")){ra.error("Geerli bir alc e-posta yazn.");return}if(!p.subject){ra.error("Konu bo olamaz.");return}if(!p.text&&!p.html){ra.error("Mesaj bo olamaz (text veya html).");return}g(!0),v(null);try{const j=await ma.admin.sendTestEmail(p);v(j),j!=null&&j.success?ra.success("Test e-postas gnderildi."):ra.error((j==null?void 0:j.error)||"E-posta gnderilemedi.")}catch(j){const E=String((j==null?void 0:j.message)||"E-posta gnderilemedi.");v({success:!1,error:E}),ra.error(E)}finally{g(!1)}},y=!!(f!=null&&f.success);return e.jsxs("div",{className:"p-6 sm:p-8",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-gray-900",children:"Mail Ayarlar"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Tm mail sistemi burada ynetilir (Brevo Transactional API)."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:T,disabled:l,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 font-semibold disabled:opacity-60",children:[e.jsx(fr,{className:"w-5 h-5"}),"Yenile"]}),e.jsxs("button",{type:"button",onClick:A,disabled:d,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-900 text-white hover:bg-black disabled:opacity-60 font-semibold",children:[e.jsx(ks,{className:"w-5 h-5"}),d?"Kaydediliyor":"Kaydet"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 border border-blue-100 flex items-center justify-center",children:e.jsx(hr,{className:"w-6 h-6 text-primary-blue"})}),e.jsx("div",{className:"font-black text-gray-900",children:"Brevo Mail Yaplandrmas"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-gray-900",children:"Mail Sistemi"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Genel mail gnderimi ak/kapal"})]}),e.jsxs("select",{value:String(b.mail_enabled),onChange:p=>w(j=>({...j,mail_enabled:p.target.value})),className:"px-3 py-2 rounded-lg border border-gray-200 bg-white font-semibold",children:[e.jsx("option",{value:"true",children:"Ak"}),e.jsx("option",{value:"false",children:"Kapal"})]})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(hl,{className:"w-5 h-5 text-primary-blue"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-black text-gray-900",children:"E-posta Dorulama"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Login iin email_verified zorunlu olsun"})]})]}),e.jsxs("select",{value:String(b.email_verification_enabled),onChange:p=>w(j=>({...j,email_verification_enabled:p.target.value})),className:"px-3 py-2 rounded-lg border border-gray-200 bg-white font-semibold",children:[e.jsx("option",{value:"true",children:"Ak"}),e.jsx("option",{value:"false",children:"Kapal"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Provider"}),e.jsx("input",{value:"brevo",readOnly:!0,className:"w-full rounded-lg border border-gray-200 px-3 py-2 bg-gray-50 text-gray-800 font-semibold"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Not: Bu projede tek provider: ",e.jsx("strong",{children:"Brevo"}),"."]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Brevo API Key"}),e.jsx("input",{type:"password",value:N,onChange:p=>k(p.target.value),placeholder:b.brevo_api_key_configured?" (kaytl)":"Brevo API Key girin",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:b.brevo_api_key_configured?"API key kaytl (gizli).":"API key henz tanml deil."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Gnderici Email"}),e.jsx("input",{value:b.mail_sender_email,onChange:p=>w(j=>({...j,mail_sender_email:p.target.value})),placeholder:"noreply@polithane.com",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Gnderici Ad"}),e.jsx("input",{value:b.mail_sender_name,onChange:p=>w(j=>({...j,mail_sender_name:p.target.value})),placeholder:"Polithane",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Reply-To Email (opsiyonel)"}),e.jsx("input",{value:b.mail_reply_to_email,onChange:p=>w(j=>({...j,mail_reply_to_email:p.target.value})),placeholder:"support@polithane.com",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Reply-To Ad (opsiyonel)"}),e.jsx("input",{value:b.mail_reply_to_name,onChange:p=>w(j=>({...j,mail_reply_to_name:p.target.value})),placeholder:"Polithane Destek",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-5 sm:p-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-4",children:[e.jsx("div",{className:"font-black text-gray-900",children:"Test Mail Gnder"}),e.jsxs("button",{type:"button",onClick:S,disabled:c,className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-primary-blue text-white hover:bg-blue-600 disabled:opacity-60 disabled:cursor-not-allowed font-semibold",children:[e.jsx(dh,{className:"w-5 h-5"}),c?"Gnderiliyor":"Test Gnder"]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Alc"}),e.jsx("input",{value:_.to,onChange:p=>M(j=>({...j,to:p.target.value})),placeholder:"ornek@domain.com",className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Konu"}),e.jsx("input",{value:_.subject,onChange:p=>M(j=>({...j,subject:p.target.value})),className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Mesaj (Text)"}),e.jsx("textarea",{value:_.text,onChange:p=>M(j=>({...j,text:p.target.value})),rows:6,className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Mesaj (HTML) (opsiyonel)"}),e.jsx("textarea",{value:_.html,onChange:p=>M(j=>({...j,html:p.target.value})),rows:6,className:"w-full rounded-lg border border-gray-200 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-blue"})]})]}),f?e.jsxs("div",{className:"mt-5",children:[e.jsxs("div",{className:"rounded-xl border p-4 ".concat(y?"bg-green-50 border-green-200":"bg-red-50 border-red-200"),children:[e.jsx("div",{className:"font-black ".concat(y?"text-green-800":"text-red-800"),children:y?"Baarl":"Baarsz"}),e.jsx("div",{className:"text-sm mt-1 ".concat(y?"text-green-800/80":"text-red-800/80"),children:y?"E-posta gnderimi tamamland.":String((f==null?void 0:f.error)||"E-posta gnderilemedi.")})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:"Hata Ayklama (JSON)"}),e.jsx("pre",{className:"text-xs bg-gray-900 text-gray-100 rounded-xl p-4 overflow-auto max-h-[320px]",children:JSON.stringify(f,null,2)})]})]}):null]})]})]})},US=()=>{const[r,s]=m.useState([]),[l,i]=m.useState(!1),[d,u]=m.useState(""),[c,g]=m.useState(""),[f,v]=m.useState({in_app_enabled:!0,push_enabled:!1,email_enabled:!0,sms_enabled:!1}),[b,w]=m.useState(""),[N,k]=m.useState(!1),[_,M]=m.useState({name:"",description:"",trigger:"",enabled:!0,priority:"normal",channels:["in_app"]}),[T,A]=m.useState(!1),[S,y]=m.useState(null),[p,j]=m.useState(null),E=async()=>{i(!0),u("");try{const[z,X]=await Promise.all([Ze.getNotificationRules().catch(()=>null),Ze.getNotificationChannels().catch(()=>null)]);if(z!=null&&z.schemaMissing&&(z!=null&&z.requiredSql)&&g(String(z.requiredSql||"")),!(z!=null&&z.success))throw new Error((z==null?void 0:z.error)||"Kurallar yklenemedi.");const G=Array.isArray(z==null?void 0:z.data)?z.data:[],D=B=>{if(Array.isArray(B))return B.map(Q=>String(Q||"").trim()).filter(Boolean);const Y=String(B||"").trim();if(!Y)return[];try{const Q=JSON.parse(Y);if(Array.isArray(Q))return Q.map(q=>String(q||"").trim()).filter(Boolean)}catch(Q){}return Y.split(",").map(Q=>Q.trim()).filter(Boolean)},$=G.map(B=>({...B,id:B==null?void 0:B.id,name:String((B==null?void 0:B.name)||"").trim()||"Kural",description:String((B==null?void 0:B.description)||"").trim(),trigger:String((B==null?void 0:B.trigger)||"").trim(),enabled:(B==null?void 0:B.enabled)!==!1,priority:String((B==null?void 0:B.priority)||"normal").trim()||"normal",channels:D(B==null?void 0:B.channels)}));s($),X!=null&&X.schemaMissing&&(X!=null&&X.requiredSql)&&w(String(X.requiredSql||"")),X!=null&&X.success&&(X!=null&&X.data)&&v({in_app_enabled:X.data.in_app_enabled!==!1,push_enabled:!!X.data.push_enabled,email_enabled:X.data.email_enabled!==!1,sms_enabled:!!X.data.sms_enabled})}catch(z){u(String((z==null?void 0:z.message)||"Kurallar yklenemedi."))}finally{i(!1)}};m.useEffect(()=>{E()},[]);const C=z=>{const X=String(z||""),G=r.find($=>String($.id)===X),D=(G==null?void 0:G.enabled)===!1;s($=>$.map(B=>String(B.id)===X?{...B,enabled:D}:B)),Ze.updateNotificationRule(X,{enabled:D}).catch(()=>E())},O=z=>{const X={high:{color:"bg-red-100 text-red-700",text:"Yksek"},normal:{color:"bg-yellow-100 text-yellow-700",text:"Normal"},low:{color:"bg-gray-100 text-gray-700",text:"Dk"}},G=X[z]||X.normal;return e.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-xs font-semibold ".concat(G.color),children:G.text})},P=z=>{const X={in_app:"Uygulama i",push:"Anlk Bildirim",email:"E-posta",sms:"SMS"};return e.jsx("div",{className:"flex flex-wrap gap-2",children:(Array.isArray(z)?z:[]).map(G=>e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-semibold",children:X[G]},G))})},L=m.useMemo(()=>r.filter(z=>z.enabled).length,[r]),ce=z=>{y(String((z==null?void 0:z.id)||"")),j({name:String((z==null?void 0:z.name)||""),description:String((z==null?void 0:z.description)||""),trigger:String((z==null?void 0:z.trigger)||""),enabled:(z==null?void 0:z.enabled)!==!1,priority:String((z==null?void 0:z.priority)||"normal"),channels:Array.isArray(z==null?void 0:z.channels)?z.channels:["in_app"]})},Z=async()=>{if(!(!S||!p))try{await Ze.updateNotificationRule(S,p),y(null),j(null),await E()}catch(z){u(String((z==null?void 0:z.message)||"Kaydedilemedi."))}},ie=async z=>{const X=String(z||"");if(X&&window.confirm("Bu kural silinsin mi?"))try{await Ze.deleteNotificationRule(X),await E()}catch(G){u(String((G==null?void 0:G.message)||"Silinemedi."))}},le=async()=>{if(!T){A(!0),u("");try{const z=await Ze.createNotificationRule(_).catch(X=>({success:!1,error:X==null?void 0:X.message}));if(!(z!=null&&z.success))throw z!=null&&z.schemaMissing&&(z!=null&&z.requiredSql)&&g(String(z.requiredSql||"")),new Error((z==null?void 0:z.error)||"Kural oluturulamad.");M({name:"",description:"",trigger:"",enabled:!0,priority:"normal",channels:["in_app"]}),await E()}catch(z){u(String((z==null?void 0:z.message)||"Kural oluturulamad."))}finally{A(!1)}}},ye=async()=>{if(!N){k(!0),u("");try{const z=await Ze.updateNotificationChannels(f).catch(()=>null);if(!(z!=null&&z.success))throw z!=null&&z.schemaMissing&&(z!=null&&z.requiredSql)&&w(String(z.requiredSql||"")),new Error((z==null?void 0:z.error)||"Kanal ayarlar kaydedilemedi.")}catch(z){u(String((z==null?void 0:z.message)||"Kanal ayarlar kaydedilemedi."))}finally{k(!1)}}};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Bildirim Kurallar"}),e.jsx("p",{className:"text-gray-600",children:"Kurallar ve kanallar buradan ynetilir."})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{type:"button",onClick:E,className:"px-4 py-3 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 font-semibold",children:"Yenile"})})]}),d?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:d}):null,l?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,c?e.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_notification_rules`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:c})]}):null,e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Toplam Kural"}),e.jsx("div",{className:"text-2xl font-black text-gray-900",children:r.length})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"Aktif Kural"}),e.jsx("div",{className:"text-2xl font-black text-green-700",children:L})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Kanal Ayarlar"}),e.jsx("div",{className:"text-2xl font-black text-blue-700",children:""})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Bildirimler"}),e.jsx("div",{className:"text-2xl font-black text-purple-700",children:""})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ni,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yeni Kural"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{value:_.name,onChange:z=>M(X=>({...X,name:z.target.value})),placeholder:"Kural ad",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:_.trigger,onChange:z=>M(X=>({...X,trigger:z.target.value})),placeholder:"Tetikleyici (r: new_comment)",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:_.description,onChange:z=>M(X=>({...X,description:z.target.value})),placeholder:"Aklama",className:"px-4 py-3 border border-gray-300 rounded-lg md:col-span-2"}),e.jsxs("select",{value:_.priority,onChange:z=>M(X=>({...X,priority:z.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"high",children:"Yksek"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"low",children:"Dk"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["in_app","push","email","sms"].map(z=>{const X=_.channels.includes(z);return e.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200 bg-gray-50 text-sm",children:[e.jsx("input",{type:"checkbox",checked:X,onChange:G=>{M(D=>({...D,channels:G.target.checked?[...D.channels,z]:D.channels.filter($=>$!==z)}))}}),z]},z)})}),e.jsxs("button",{type:"button",onClick:le,disabled:T,className:"flex items-center justify-center gap-2 px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition-colors font-black disabled:opacity-60",children:[e.jsx(As,{className:"w-5 h-5"}),T?"Ekleniyor":"Kural Ekle"]})]})]}),e.jsx("div",{className:"space-y-4",children:r.map(z=>e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:z.name}),O(z.priority),e.jsx("button",{onClick:()=>C(z.id),className:["ml-auto p-2 rounded-lg hover:bg-gray-50",z.enabled?"text-green-500":"text-gray-400"].join(" "),type:"button","aria-label":z.enabled?"Kural kapat":"Kural a",children:z.enabled?e.jsx(Jl,{className:"w-8 h-8"}):e.jsx(Ql,{className:"w-8 h-8"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:z.description}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Tetikleyici:"}),e.jsx("code",{className:"text-xs bg-gray-100 px-2 py-1 rounded text-gray-700",children:z.trigger})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Kanallar:"}),P(z.channels)]})]}),S===String(z.id)&&p?e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{value:p.name,onChange:X=>j(G=>({...G,name:X.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:p.trigger,onChange:X=>j(G=>({...G,trigger:X.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:p.description,onChange:X=>j(G=>({...G,description:X.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg md:col-span-2"}),e.jsxs("select",{value:p.priority,onChange:X=>j(G=>({...G,priority:X.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg",children:[e.jsx("option",{value:"high",children:"Yksek"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"low",children:"Dk"})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-2",children:["in_app","push","email","sms"].map(X=>{const G=p.channels.includes(X);return e.jsxs("label",{className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-gray-200 bg-gray-50 text-sm",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:D=>{j($=>({...$,channels:D.target.checked?[...$.channels,X]:$.channels.filter(B=>B!==X)}))}}),X]},X)})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:Z,className:"px-4 py-3 rounded-lg bg-primary-blue text-white font-black hover:bg-blue-600",children:"Kaydet"}),e.jsx("button",{type:"button",onClick:()=>{y(null),j(null)},className:"px-4 py-3 rounded-lg border border-gray-300 bg-white hover:bg-gray-50 font-semibold",children:"Vazge"})]})]}):null]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{type:"button",className:"p-2 hover:bg-blue-50 rounded-lg transition-colors",onClick:()=>ce(z),children:e.jsx(yi,{className:"w-5 h-5 text-primary-blue"})}),e.jsx("button",{type:"button",className:"p-2 hover:bg-red-50 rounded-lg transition-colors",onClick:()=>ie(z.id),children:e.jsx(Ka,{className:"w-5 h-5 text-red-600"})})]})]})},z.id))}),e.jsxs("div",{className:"mt-8 bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Bildirim Kanallar Ayarlar"}),b?e.jsxs("div",{className:"mb-4 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_notification_channels`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:b})]}):null,e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Uygulama i"}),e.jsx("button",{type:"button",onClick:()=>v(z=>({...z,in_app_enabled:!z.in_app_enabled})),className:["p-2 rounded-lg hover:bg-gray-50",f.in_app_enabled?"text-green-500":"text-gray-400"].join(" "),title:"A/Kapat","aria-label":f.in_app_enabled?"Uygulama ii bildirimleri kapat":"Uygulama ii bildirimleri a",children:f.in_app_enabled?e.jsx(Jl,{className:"w-8 h-8"}):e.jsx(Ql,{className:"w-8 h-8"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Platform iinde anlk bildirimler"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Anlk Bildirim"}),e.jsx("button",{type:"button",onClick:()=>v(z=>({...z,push_enabled:!z.push_enabled})),className:["p-2 rounded-lg hover:bg-gray-50",f.push_enabled?"text-green-500":"text-gray-400"].join(" "),title:"A/Kapat","aria-label":f.push_enabled?"Anlk bildirimleri kapat":"Anlk bildirimleri a",children:f.push_enabled?e.jsx(Jl,{className:"w-8 h-8"}):e.jsx(Ql,{className:"w-8 h-8"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Mobil ve masast anlk bildirimler"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"E-posta"}),e.jsx("button",{type:"button",onClick:()=>v(z=>({...z,email_enabled:!z.email_enabled})),className:["p-2 rounded-lg hover:bg-gray-50",f.email_enabled?"text-green-500":"text-gray-400"].join(" "),title:"A/Kapat","aria-label":f.email_enabled?"E-posta bildirimlerini kapat":"E-posta bildirimlerini a",children:f.email_enabled?e.jsx(Jl,{className:"w-8 h-8"}):e.jsx(Ql,{className:"w-8 h-8"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"E-posta ile bildirim gnderimi"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"SMS"}),e.jsx("button",{type:"button",onClick:()=>v(z=>({...z,sms_enabled:!z.sms_enabled})),className:["p-2 rounded-lg hover:bg-gray-50",f.sms_enabled?"text-green-500":"text-gray-400"].join(" "),title:"A/Kapat","aria-label":f.sms_enabled?"SMS bildirimlerini kapat":"SMS bildirimlerini a",children:f.sms_enabled?e.jsx(Jl,{className:"w-8 h-8"}):e.jsx(Ql,{className:"w-8 h-8"})})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"SMS kanal aldnda job kuyruuna yazlacak ekilde hazrlanmtr."})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:ye,disabled:N,className:"px-5 py-3 rounded-xl bg-gray-900 text-white font-black hover:bg-black disabled:opacity-60",children:N?"Kaydediliyor":"Kanal Ayarlarn Kaydet"})})]})]})},LS=()=>{const[r,s]=m.useState(!1),[l,i]=m.useState(""),[d,u]=m.useState(""),[c,g]=m.useState([]),f=async()=>{s(!0),i("");try{const N=await Ze.getSources().catch(()=>null);if(N!=null&&N.schemaMissing&&(N!=null&&N.requiredSql)&&u(String(N.requiredSql||"")),!(N!=null&&N.success))throw new Error((N==null?void 0:N.error)||"Kaynaklar yklenemedi.");g(Array.isArray(N.data)?N.data:[])}catch(N){i(String((N==null?void 0:N.message)||"Yklenemedi."))}finally{s(!1)}};m.useEffect(()=>{f()},[]);const v=m.useMemo(()=>{const N=c.filter(M=>M.enabled).length,k=c.length,_=c.reduce((M,T)=>M+(Number(T.items_collected||0)||0),0);return{active:N,total:k,items:_}},[c]),b=async N=>{const k=String((N==null?void 0:N.id)||"");if(!k)return;const _=(N==null?void 0:N.enabled)===!1;g(T=>T.map(A=>String(A.id)===k?{...A,enabled:_}:A));const M=await Ze.updateSource(k,{enabled:_}).catch(()=>null);M!=null&&M.success||await f()},w=async N=>{const k=String((N==null?void 0:N.id)||"");if(!k)return;i("");const _=await Ze.enqueueJob({job_type:"scrape_source",payload:{source_id:k}}).catch(()=>null);if(!(_!=null&&_.success)){_!=null&&_.schemaMissing&&(_!=null&&_.requiredSql)&&u(String(_.requiredSql||"")),await f();return}await f()};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Tarama Ynetimi"}),e.jsx("p",{className:"text-gray-600",children:"Kaynaklar zerinden tarama durumunu ynetin"})]}),e.jsxs("button",{type:"button",onClick:f,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black inline-flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Yenile"]})]}),l?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:l}):null,r?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,d?e.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_sources`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:d})]}):null,e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"Aktif Kaynak"}),e.jsx("div",{className:"text-2xl font-black text-green-700",children:v.active})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Toplam Kaynak"}),e.jsx("div",{className:"text-2xl font-black text-blue-700",children:v.total})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Toplanan (toplam)"}),e.jsx("div",{className:"text-2xl font-black text-purple-700",children:v.items.toLocaleString("tr-TR")})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Not"}),e.jsx("div",{className:"text-xs text-gray-500",children:"imdi altr istei job kuyruuna yazlr (admin_jobs)."})]})]}),e.jsxs("div",{className:"space-y-4",children:[c.map(N=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-blue/10 rounded-xl flex items-center justify-center",children:e.jsx(fl,{className:"w-6 h-6 text-primary-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:N.name}),e.jsx("p",{className:"text-sm text-gray-600",children:N.url})]})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(N.enabled?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:N.enabled?"Aktif":"Duraklatld"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Son ekme"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:N.last_fetch_at?String(N.last_fetch_at).slice(0,19):""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"Toplanan"}),e.jsx("span",{className:"text-sm font-semibold text-blue-600",children:Number(N.items_collected||0).toLocaleString("tr-TR")})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500 block mb-1",children:"ncelik"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:N.priority})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[N.enabled?e.jsxs("button",{type:"button",onClick:()=>b(N),className:"flex items-center gap-2 px-4 py-2 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 transition-colors text-sm font-semibold",children:[e.jsx(fd,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Duraklat"]}):e.jsxs("button",{type:"button",onClick:()=>b(N),className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-semibold",children:[e.jsx(xi,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Balat"]}),e.jsxs("button",{type:"button",onClick:()=>w(N),className:"flex items-center gap-2 px-4 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-semibold",children:[e.jsx(fr,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"imdi altr"]})]})]},N.id)),c.length===0?e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 text-sm text-gray-600",children:"Henz kaynak yok."}):null]})]})},$S=()=>{const[r,s]=m.useState(!1),[l,i]=m.useState(""),[d,u]=m.useState(""),[c,g]=m.useState([]),[f,v]=m.useState({name:"",type:"news",url:"",rss_feed:"",enabled:!0,priority:"medium"}),[b,w]=m.useState(!1),N=async()=>{s(!0),i("");try{const y=await Ze.getSources().catch(()=>null);if(y!=null&&y.schemaMissing&&(y!=null&&y.requiredSql)&&u(String(y.requiredSql||"")),!(y!=null&&y.success))throw new Error((y==null?void 0:y.error)||"Kaynaklar yklenemedi.");g(Array.isArray(y.data)?y.data:[])}catch(y){i(String((y==null?void 0:y.message)||"Kaynaklar yklenemedi."))}finally{s(!1)}};m.useEffect(()=>{N()},[]);const k=m.useMemo(()=>{const y=c.filter(C=>C.enabled).length,p=c.filter(C=>String(C.type)==="news").length,j=c.filter(C=>String(C.type||"").includes("politician")).length,E=c.reduce((C,O)=>C+(Number(O.items_collected||0)||0),0);return{active:y,news:p,pol:j,totalItems:E}},[c]),_=y=>{const p={news:{color:"bg-blue-100 text-blue-700",text:"Haber Sitesi"},politician_twitter:{color:"bg-purple-100 text-purple-700",text:"Siyaseti Twitter"},politician_instagram:{color:"bg-pink-100 text-pink-700",text:"Siyaseti Instagram"},media_twitter:{color:"bg-cyan-100 text-cyan-700",text:"Medya Twitter"},other:{color:"bg-gray-100 text-gray-700",text:"Dier"}},j=p[y]||p.other;return e.jsx("span",{className:"inline-flex px-3 py-1 rounded-full text-xs font-semibold ".concat(j.color),children:j.text})},M=y=>{const p={high:{color:"bg-red-100 text-red-700",text:"Yksek"},medium:{color:"bg-yellow-100 text-yellow-700",text:"Orta"},low:{color:"bg-gray-100 text-gray-700",text:"Dk"}},j=p[y]||p.medium;return e.jsx("span",{className:"inline-flex px-2 py-1 rounded text-xs font-semibold ".concat(j.color),children:j.text})},T=async y=>{const p=String((y==null?void 0:y.id)||"");if(!p)return;const j=(y==null?void 0:y.enabled)===!1;g(C=>C.map(O=>String(O.id)===p?{...O,enabled:j}:O));const E=await Ze.updateSource(p,{enabled:j}).catch(()=>null);E!=null&&E.success||await N()},A=async()=>{if(!b){w(!0),i("");try{const y={...f,rss_feed:f.rss_feed?String(f.rss_feed).trim():null},p=await Ze.createSource(y).catch(()=>null);if(!(p!=null&&p.success))throw p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&u(String(p.requiredSql||"")),new Error((p==null?void 0:p.error)||"Kaynak eklenemedi.");v({name:"",type:f.type||"news",url:"",rss_feed:"",enabled:!0,priority:"medium"}),await N()}catch(y){i(String((y==null?void 0:y.message)||"Kaynak eklenemedi."))}finally{w(!1)}}},S=async y=>{const p=String((y==null?void 0:y.id)||"");if(!p||!window.confirm("Bu kaynak silinsin mi?"))return;const j=await Ze.deleteSource(p).catch(()=>null);if(!(j!=null&&j.success)){i((j==null?void 0:j.error)||"Silinemedi.");return}await N()};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Kaynak Ynetimi"}),e.jsx("p",{className:"text-gray-600",children:"erik kaynaklarn ynetin"})]}),e.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black",children:"Yenile"})]}),l?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:l}):null,r?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,d?e.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_sources`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:d})]}):null,e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"Toplam Kaynak"}),e.jsx("div",{className:"text-2xl font-black text-gray-900",children:c.length})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsx("div",{className:"text-sm text-green-600 mb-1",children:"Aktif Kaynak"}),e.jsx("div",{className:"text-2xl font-black text-green-700",children:k.active})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[e.jsx("div",{className:"text-sm text-blue-600 mb-1",children:"Haber Kayna"}),e.jsx("div",{className:"text-2xl font-black text-blue-700",children:k.news})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-4",children:[e.jsx("div",{className:"text-sm text-purple-600 mb-1",children:"Siyaseti"}),e.jsx("div",{className:"text-2xl font-black text-purple-700",children:k.pol})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(As,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yeni Kaynak"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsx("input",{value:f.name,onChange:y=>v(p=>({...p,name:y.target.value})),placeholder:"Kaynak Ad",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:f.url,onChange:y=>v(p=>({...p,url:y.target.value})),placeholder:"Balant",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:f.rss_feed,onChange:y=>v(p=>({...p,rss_feed:y.target.value})),placeholder:"RSS (opsiyonel)",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsxs("select",{value:f.type,onChange:y=>v(p=>({...p,type:y.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"news",children:"news"}),e.jsx("option",{value:"politician_twitter",children:"politician_twitter"}),e.jsx("option",{value:"politician_instagram",children:"politician_instagram"}),e.jsx("option",{value:"media_twitter",children:"media_twitter"}),e.jsx("option",{value:"other",children:"other"})]}),e.jsxs("select",{value:f.priority,onChange:y=>v(p=>({...p,priority:y.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"high",children:"high"}),e.jsx("option",{value:"medium",children:"medium"}),e.jsx("option",{value:"low",children:"low"})]}),e.jsx("button",{type:"button",onClick:A,disabled:b,className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-black disabled:opacity-60",children:b?"Ekleniyor":"Ekle"})]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500",children:"Toplanan ierik / son ekme alanlar scraper tarafndan gncellenecek."})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Kaynak"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Tr"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Balant"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"ncelik"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Toplanan"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Son ekme"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Durum"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"lem"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[c.map(y=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:"font-semibold text-gray-900",children:y.name})}),e.jsx("td",{className:"px-6 py-4",children:_(y.type)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("a",{href:y.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-primary-blue hover:underline",children:[e.jsx(Ey,{className:"w-5 h-5"}),e.jsx("span",{className:"max-w-xs truncate",children:y.url})]})}),e.jsx("td",{className:"px-6 py-4",children:M(y.priority)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:Number(y.items_collected||0).toLocaleString("tr-TR")})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-500",children:y.last_fetch_at?String(y.last_fetch_at).slice(0,19):""})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{type:"button",onClick:()=>T(y),className:y.enabled?"text-green-500":"text-gray-400",title:"A/Kapat",children:y.enabled?e.jsx(Jl,{className:"w-7 h-7"}):e.jsx(Ql,{className:"w-7 h-7"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{type:"button",onClick:()=>S(y),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Sil",children:e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5 text-red-600"})})})]},y.id)),c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-10 text-center text-sm text-gray-600",children:"Henz kaynak yok."})}):null]})]})})]})},IS=({embedded:r=!1})=>{const[s,l]=m.useState(!1),[i,d]=m.useState(""),[u,c]=m.useState(""),[g,f]=m.useState([]),[v,b]=m.useState([]),[w,N]=m.useState({name:"",period:"monthly",price_cents:0,currency:"TRY",is_active:!0}),[k,_]=m.useState(!1),[M,T]=m.useState({user_email:"",plan_name:"",amount_cents:0,currency:"TRY",payment_method:"card",status:"completed",note:""}),[A,S]=m.useState(!1),y=async()=>{l(!0),d("");try{const[C,O]=await Promise.all([Ze.getPaymentPlans().catch(()=>null),Ze.getPaymentTransactions({limit:100}).catch(()=>null)]);C!=null&&C.schemaMissing&&(C!=null&&C.requiredSql)&&c(String(C.requiredSql||"")),O!=null&&O.schemaMissing&&(O!=null&&O.requiredSql)&&c(String(O.requiredSql||"")),C!=null&&C.success&&f(Array.isArray(C.data)?C.data:[]),O!=null&&O.success&&b(Array.isArray(O.data)?O.data:[])}catch(C){d(String((C==null?void 0:C.message)||"deme verileri yklenemedi."))}finally{l(!1)}};m.useEffect(()=>{y()},[]);const p=m.useMemo(()=>{const C=new Date,O=new Date(C.getFullYear(),C.getMonth(),1).toISOString(),P=v.filter(le=>String((le==null?void 0:le.occurred_at)||"")>=O),L=P.filter(le=>String((le==null?void 0:le.status)||"")==="completed"),ce=P.filter(le=>String((le==null?void 0:le.status)||"")==="pending"),Z=P.filter(le=>String((le==null?void 0:le.status)||"")==="failed");return{start:O,revenueCents:(le=>le.reduce((ye,z)=>ye+(Number((z==null?void 0:z.amount_cents)||0)||0),0))(L),pending:ce.length,failed:Z.length}},[v]),j=C=>{const O=(Number(C||0)||0)/100;return"".concat(O.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}))},E=C=>{const P={completed:{color:"bg-green-100 text-green-700",icon:ri,text:"Tamamland"},pending:{color:"bg-yellow-100 text-yellow-700",icon:a0,text:"Bekliyor"},failed:{color:"bg-red-100 text-red-700",icon:xs,text:"Baarsz"}}[C],L=P.icon;return e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ".concat(P.color),children:[e.jsx(L,{className:"w-5 h-5"}),P.text]})};return e.jsxs("div",{className:r?"":"p-4 sm:p-6 lg:p-8",children:[r?null:e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"deme Sistemi"}),e.jsx("p",{className:"text-gray-600",children:"Plan ve ilem kaytlar."})]}),i?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:i}):null,s?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,u?e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:u})]}):null,e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Bu Ay Gelir"}),e.jsx(er,{className:"w-5 h-5 text-green-600"})]}),e.jsx("div",{className:"text-2xl font-black text-green-700",children:j(p.revenueCents)}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[p.start.slice(0,10)," "]})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-blue-600",children:"Aktif Plan"}),e.jsx(jo,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("div",{className:"text-2xl font-black text-blue-700",children:g.filter(C=>C.is_active!==!1).length}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Toplam plan: ",g.length]})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-xl border border-yellow-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-yellow-600",children:"Bekleyen deme"}),e.jsx(a0,{className:"w-5 h-5 text-yellow-600"})]}),e.jsx("div",{className:"text-2xl font-black text-yellow-700",children:p.pending})]}),e.jsxs("div",{className:"bg-red-50 rounded-xl border border-red-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-red-600",children:"Baarsz deme"}),e.jsx(xs,{className:"w-5 h-5 text-red-600"})]}),e.jsx("div",{className:"text-2xl font-black text-red-700",children:p.failed})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(As,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yeni Plan"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{value:w.name,onChange:C=>N(O=>({...O,name:C.target.value})),placeholder:"Plan ad",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsxs("select",{value:w.period,onChange:C=>N(O=>({...O,period:C.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"monthly",children:"monthly"}),e.jsx("option",{value:"yearly",children:"yearly"}),e.jsx("option",{value:"one_time",children:"one_time"})]}),e.jsx("input",{value:String(w.price_cents),onChange:C=>N(O=>({...O,price_cents:C.target.value})),placeholder:"Fiyat (kuru) r: 19900",className:"px-4 py-3 border border-gray-300 rounded-lg",inputMode:"numeric"}),e.jsx("button",{type:"button",disabled:k,onClick:async()=>{if(!k){_(!0),d("");try{const C=await Ze.createPaymentPlan({...w,price_cents:parseInt(String(w.price_cents||0),10)||0}).catch(()=>null);if(!(C!=null&&C.success))throw C!=null&&C.schemaMissing&&(C!=null&&C.requiredSql)&&c(String(C.requiredSql||"")),new Error((C==null?void 0:C.error)||"Plan oluturulamad.");N({name:"",period:"monthly",price_cents:0,currency:"TRY",is_active:!0}),await y()}catch(C){d(String((C==null?void 0:C.message)||"Plan oluturulamad."))}finally{_(!1)}}},className:"md:col-span-2 px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-black disabled:opacity-60",children:k?"Ekleniyor":"Plan Ekle"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(As,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yeni lem"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{value:M.user_email,onChange:C=>T(O=>({...O,user_email:C.target.value})),placeholder:"Kullanc e-posta (opsiyonel)",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:M.plan_name,onChange:C=>T(O=>({...O,plan_name:C.target.value})),placeholder:"Plan ad (opsiyonel)",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:String(M.amount_cents),onChange:C=>T(O=>({...O,amount_cents:C.target.value})),placeholder:"Tutar (kuru) r: 19900",className:"px-4 py-3 border border-gray-300 rounded-lg",inputMode:"numeric"}),e.jsxs("select",{value:M.status,onChange:C=>T(O=>({...O,status:C.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"completed",children:"completed"}),e.jsx("option",{value:"pending",children:"pending"}),e.jsx("option",{value:"failed",children:"failed"})]}),e.jsxs("select",{value:M.payment_method,onChange:C=>T(O=>({...O,payment_method:C.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"card",children:"card"}),e.jsx("option",{value:"transfer",children:"transfer"}),e.jsx("option",{value:"other",children:"other"})]}),e.jsx("button",{type:"button",disabled:A,onClick:async()=>{if(!A){S(!0),d("");try{const C=await Ze.createPaymentTransaction({...M,amount_cents:parseInt(String(M.amount_cents||0),10)||0}).catch(()=>null);if(!(C!=null&&C.success))throw C!=null&&C.schemaMissing&&(C!=null&&C.requiredSql)&&c(String(C.requiredSql||"")),new Error((C==null?void 0:C.error)||"lem eklenemedi.");T({user_email:"",plan_name:"",amount_cents:0,currency:"TRY",payment_method:"card",status:"completed",note:""}),await y()}catch(C){d(String((C==null?void 0:C.message)||"lem eklenemedi."))}finally{S(!1)}}},className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-black disabled:opacity-60",children:A?"Ekleniyor":"lem Ekle"}),e.jsx("input",{value:M.note,onChange:C=>T(O=>({...O,note:C.target.value})),placeholder:"Not (opsiyonel)",className:"md:col-span-2 px-4 py-3 border border-gray-300 rounded-lg"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"deme Yntemleri"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Kredi/Banka Kart"}),e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:e.jsx(jo,{className:"w-5 h-5 text-primary-blue"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Visa, Mastercard, Troy"}),e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Aktif"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Banka Transferi"}),e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded flex items-center justify-center",children:e.jsx(vo,{className:"w-5 h-5 text-purple-600"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"EFT/Havale"}),e.jsx("span",{className:"text-xs text-green-600 font-semibold",children:"Aktif"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 opacity-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:"Kripto Para"}),e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded flex items-center justify-center",children:e.jsx(vo,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"BTC, ETH, USDT"}),e.jsx("span",{className:"text-xs text-gray-500 font-semibold",children:"Pasif (entegrasyon yok)"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Son lemler"})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Kullanc"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Plan"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Tutar"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Yntem"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Durum"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Tarih"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[v.map(C=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-semibold text-gray-900",children:C.user_email||""})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-700",children:C.plan_name||""})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-bold text-gray-900",children:j(C.amount_cents)})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm text-gray-700",children:C.payment_method})}),e.jsx("td",{className:"px-6 py-4",children:E(C.status)}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("span",{className:"text-sm text-gray-500",children:String(C.occurred_at||"").slice(0,19)||""}),e.jsx("button",{type:"button",className:"p-2 hover:bg-red-50 rounded-lg",title:"Sil",onClick:async()=>{if(!window.confirm("Bu ilem silinsin mi?"))return;const O=await Ze.deletePaymentTransaction(C.id).catch(()=>null);if(!(O!=null&&O.success)){d((O==null?void 0:O.error)||"Silinemedi.");return}await y()},children:e.jsx(Ka,{className:"w-5 h-5 text-red-600"})})]})})]},C.id)),v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-sm text-gray-600",children:"Henz ilem yok."})}):null]})]})]})]})},al=r=>{const s=(Number(r||0)||0)/100;return"".concat(s.toLocaleString("tr-TR",{minimumFractionDigits:2,maximumFractionDigits:2}))},qS=({embedded:r=!1})=>{const[s,l]=m.useState(!1),[i,d]=m.useState(""),[u,c]=m.useState(""),[g,f]=m.useState(null),[v,b]=m.useState([]),[w,N]=m.useState({amount_cents:0,category:"other",plan_name:"",payment_method:"",status:"completed",note:""}),[k,_]=m.useState(!1),M=async()=>{l(!0),d("");try{const[E,C]=await Promise.all([Ze.getRevenueSummary().catch(()=>null),Ze.getRevenueEntries({limit:100}).catch(()=>null)]);E!=null&&E.schemaMissing&&(E!=null&&E.requiredSql)&&c(String(E.requiredSql||"")),C!=null&&C.schemaMissing&&(C!=null&&C.requiredSql)&&c(String(C.requiredSql||"")),E!=null&&E.success&&f(E.data||null),C!=null&&C.success&&b(Array.isArray(C.data)?C.data:[])}catch(E){d(String((E==null?void 0:E.message)||"Gelir verileri yklenemedi."))}finally{l(!1)}};m.useEffect(()=>{M()},[]);const T=Number((g==null?void 0:g.monthTotalCents)||0)||0,A=Array.isArray(g==null?void 0:g.byCategory)?g.byCategory:[],S=Array.isArray(g==null?void 0:g.byPaymentMethod)?g.byPaymentMethod:[],y=async()=>{if(!k){_(!0),d("");try{const E=await Ze.createRevenueEntry({...w,amount_cents:Math.max(0,parseInt(String(w.amount_cents||0),10)||0)});if(!(E!=null&&E.success))throw E!=null&&E.schemaMissing&&(E!=null&&E.requiredSql)&&c(String(E.requiredSql||"")),new Error((E==null?void 0:E.error)||"Kayt eklenemedi.");N({amount_cents:0,category:"other",plan_name:"",payment_method:"",status:"completed",note:""}),await M()}catch(E){d(String((E==null?void 0:E.message)||"Kayt eklenemedi."))}finally{_(!1)}}},p=async E=>{const C=String(E||"");if(!C||!window.confirm("Bu gelir kayd silinsin mi?"))return;const O=await Ze.deleteRevenueEntry(C).catch(()=>null);if(!(O!=null&&O.success)){d((O==null?void 0:O.error)||"Silinemedi.");return}await M()},j=m.useMemo(()=>{const E=new Map(A.map(C=>[String(C.key||""),Number(C.amount_cents||0)||0]));return{subscription:E.get("subscription")||0,ads:E.get("ads")||0,other:E.get("other")||0}},[A]);return e.jsxs("div",{className:r?"":"p-4 sm:p-6 lg:p-8",children:[r?null:e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Gelir Analizi"}),e.jsx("p",{className:"text-gray-600",children:"Veritaban tabanl gelir kaytlar"})]}),i?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:i}):null,s?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,u?e.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_revenue_entries`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:u})]}):null,e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Bu Ay Toplam"}),e.jsx(er,{className:"w-6 h-6 opacity-90"})]}),e.jsx("div",{className:"text-3xl font-black mb-2",children:al(T)}),e.jsx("div",{className:"text-xs opacity-90",children:g!=null&&g.monthStart?"Balang: ".concat(String(g.monthStart).slice(0,10)):""})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Abonelik"}),e.jsx(vo,{className:"w-6 h-6 opacity-90"})]}),e.jsx("div",{className:"text-3xl font-black mb-2",children:al(j.subscription)}),e.jsx("div",{className:"text-xs opacity-90",children:"Kategori: subscription"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Reklam"}),e.jsx(jo,{className:"w-6 h-6 opacity-90"})]}),e.jsx("div",{className:"text-3xl font-black mb-2",children:al(j.ads)}),e.jsx("div",{className:"text-xs opacity-90",children:"Kategori: ads"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-sm opacity-90",children:"Dier"}),e.jsx(jo,{className:"w-6 h-6 opacity-90"})]}),e.jsx("div",{className:"text-3xl font-black mb-2",children:al(j.other)}),e.jsx("div",{className:"text-xs opacity-90",children:"Kategori: other"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(As,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Gelir Kayd Ekle"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3",children:[e.jsx("input",{value:String(w.amount_cents||""),onChange:E=>N(C=>({...C,amount_cents:E.target.value})),placeholder:"Tutar (kuru) r: 19900",className:"px-4 py-3 border border-gray-300 rounded-lg",inputMode:"numeric"}),e.jsxs("select",{value:w.category,onChange:E=>N(C=>({...C,category:E.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"subscription",children:"subscription"}),e.jsx("option",{value:"ads",children:"ads"}),e.jsx("option",{value:"other",children:"other"})]}),e.jsx("input",{value:w.plan_name,onChange:E=>N(C=>({...C,plan_name:E.target.value})),placeholder:"Plan ad (opsiyonel)",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:w.payment_method,onChange:E=>N(C=>({...C,payment_method:E.target.value})),placeholder:"deme yntemi (card/transfer)",className:"px-4 py-3 border border-gray-300 rounded-lg"}),e.jsxs("select",{value:w.status,onChange:E=>N(C=>({...C,status:E.target.value})),className:"px-4 py-3 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"completed",children:"completed"}),e.jsx("option",{value:"pending",children:"pending"}),e.jsx("option",{value:"failed",children:"failed"})]}),e.jsx("button",{type:"button",onClick:y,disabled:k,className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-black disabled:opacity-60",children:k?"Ekleniyor":"Ekle"}),e.jsx("input",{value:w.note,onChange:E=>N(C=>({...C,note:E.target.value})),placeholder:"Not (opsiyonel)",className:"px-4 py-3 border border-gray-300 rounded-lg md:col-span-6"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Kategori Dalm (Bu Ay)"}),e.jsxs("div",{className:"space-y-2",children:[A.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:E.key}),e.jsx("span",{className:"font-black text-primary-blue",children:al(E.amount_cents)})]},E.key)),A.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Henz veri yok."}):null]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"deme Yntemleri (Bu Ay)"}),e.jsxs("div",{className:"space-y-2",children:[S.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:E.key}),e.jsx("span",{className:"font-black text-primary-blue",children:al(E.amount_cents)})]},E.key)),S.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Henz veri yok."}):null]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Son Gelir Kaytlar"})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Tarih"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Tutar"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Kategori"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Yntem"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Durum"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Aksiyon"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[v.map(E=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:String(E.occurred_at||"").slice(0,10)}),e.jsx("td",{className:"px-6 py-4 text-sm font-black text-gray-900",children:al(E.amount_cents)}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:E.category}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:E.payment_method||""}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:E.status}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{type:"button",onClick:()=>p(E.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Sil",children:e.jsx(Ka,{className:"w-5 h-5"})})})]},E.id)),v.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-10 text-center text-sm text-gray-600",children:"Henz kayt yok."})}):null]})]})]})]})},ay=()=>{const[r,s]=m.useState("payments"),l=m.useMemo(()=>[{key:"payments",label:"deme Sistemi",icon:jo},{key:"revenue",label:"Gelir Analizi",icon:_y}],[]);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"mb-6 flex items-start justify-between gap-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(vo,{className:"w-8 h-8 text-primary-blue"}),"deme & Gelir"]}),e.jsx("p",{className:"text-gray-600",children:"Planlar, ilemler ve gelir kaytlar"})]})}),e.jsx("div",{className:"mb-6 bg-white rounded-xl border border-gray-200 p-2 flex flex-wrap gap-2",children:l.map(i=>{const d=i.icon,u=r===i.key;return e.jsxs("button",{type:"button",onClick:()=>s(i.key),className:"px-4 py-2 rounded-lg font-black inline-flex items-center gap-2 ".concat(u?"bg-gray-900 text-white":"hover:bg-gray-50 text-gray-800"),children:[e.jsx(d,{className:"w-5 h-5"}),i.label]},i.key)})}),r==="payments"?e.jsx(IS,{embedded:!0}):null,r==="revenue"?e.jsx(qS,{embedded:!0}):null]})},YS=()=>{const[r,s]=m.useState(!0),[l,i]=m.useState(null),[d,u]=m.useState(null),[c,g]=m.useState(""),[f,v]=m.useState(""),[b,w]=m.useState({admin_mfa_enabled:"false",admin_mfa_require_new_device:"false"}),[N,k]=m.useState([]),[_,M]=m.useState([]),[T,A]=m.useState("");m.useEffect(()=>{(async()=>{var j,E;try{const[C,O,P,L,ce]=await Promise.all([ma.admin.getSettings().catch(()=>null),ma.admin.envCheck().catch(()=>null),ma.admin.getDbOverview().catch(()=>null),ma.admin.getSecurityEvents({limit:50}).catch(()=>null),ma.admin.getSecurityDevices({limit:50}).catch(()=>null)]);C!=null&&C.schemaMissing&&(C!=null&&C.requiredSql)&&g(String(C.requiredSql||"")),C!=null&&C.success&&(C!=null&&C.data)&&typeof C.data=="object"&&w(Z=>({...Z,...C.data})),O!=null&&O.success&&i(((j=O==null?void 0:O.data)==null?void 0:j.present)||null),P!=null&&P.success&&u(((E=P==null?void 0:P.data)==null?void 0:E.counts)||null),L!=null&&L.schemaMissing&&(L!=null&&L.requiredSql)&&v(String(L.requiredSql||"")),ce!=null&&ce.schemaMissing&&(ce!=null&&ce.requiredSql)&&v(String(ce.requiredSql||"")),L!=null&&L.success&&k(Array.isArray(L.data)?L.data:[]),ce!=null&&ce.success&&M(Array.isArray(ce.data)?ce.data:[])}catch(C){console.error(C)}finally{s(!1)}})()},[]);const S=(()=>{const j=l||{},E=[!!j.JWT_SECRET,!!j.SUPABASE_URL&&!!j.SUPABASE_KEY_OK,!!j.PUBLIC_APP_URL||!!j.APP_URL,!!j.SMTP_OK||!!j.MAIL_RELAY_OK],C=E.filter(Boolean).length;return Math.round(C/E.length*100)})(),y=async j=>{const E=String(b[j])==="true"?"false":"true";w(C=>({...C,[j]:E}));try{await ma.admin.updateSettings({[j]:E})}catch(C){console.error(C),w(O=>({...O,[j]:String(O[j])==="true"?"false":"true"}))}},p=async j=>{const E=j==null?void 0:j.id;if(!E)return;const C=(j==null?void 0:j.trusted)!==!0;M(O=>O.map(P=>String(P==null?void 0:P.id)===String(E)?{...P,trusted:C}:P)),A("");try{const O=await ma.admin.updateSecurityDevice(E,{trusted:C}).catch(()=>null);if(!(O!=null&&O.success))throw new Error((O==null?void 0:O.error)||"Cihaz gncellenemedi.")}catch(O){A(String((O==null?void 0:O.message)||"Cihaz gncellenemedi.")),M(P=>P.map(L=>String(L==null?void 0:L.id)===String(E)?{...L,trusted:!C}:L))}};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Gvenlik Ayarlar"}),e.jsx("p",{className:"text-gray-600",children:"Platform gvenliini ynetin ve izleyin"})]}),c?e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik: `site_settings`"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:c})]}):null,f?e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik: gvenlik loglar"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:f})]}):null,e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-900 rounded-lg flex items-center justify-center",children:e.jsx(py,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Ynetici Mobil Dorulama"}),e.jsx("p",{className:"text-sm text-gray-600",children:"imdilik pasif. Aldnda yeni cihazdan girite dorulama istenir."})]}),r?e.jsx("span",{className:"text-xs text-gray-400",children:"Ykleniyor..."}):e.jsx("span",{className:"text-xs font-bold text-gray-700",children:String(b.admin_mfa_enabled)==="true"?"Ak":"Kapal"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>y("admin_mfa_enabled"),className:"px-4 py-3 rounded-lg border font-semibold text-sm transition-colors ".concat(String(b.admin_mfa_enabled)==="true"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-900 border-gray-900 hover:bg-gray-50"),children:["Mobil dorulamay ",String(b.admin_mfa_enabled)==="true"?"kapat":"a"]}),e.jsxs("button",{type:"button",onClick:()=>y("admin_mfa_require_new_device"),className:"px-4 py-3 rounded-lg border font-semibold text-sm transition-colors ".concat(String(b.admin_mfa_require_new_device)==="true"?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-900 border-gray-900 hover:bg-gray-50"),children:["Yeni cihaz zorunluluu ",String(b.admin_mfa_require_new_device)==="true"?"kapat":"a"]})]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500",children:"Not: SMS/2FA ak sonraki admda eklenecek. Bu ekran ayarlar imdiden saklar."})]}),e.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-8 mb-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-black mb-2",children:"Gvenlik Skoru"}),e.jsx("p",{className:"text-green-100 mb-4",children:"Mevcut yaplandrma (env + temel kontroller)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ga,{className:"w-5 h-5"}),e.jsx("span",{className:"font-semibold",children:"JWT / Supabase / App URL / Mail durumu"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-32 h-32 bg-white/20 rounded-full flex items-center justify-center mb-2",children:e.jsx("div",{className:"text-6xl font-black",children:Number.isFinite(S)?S:""})}),e.jsx("div",{className:"text-sm opacity-90",children:"/ 100"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(nn,{className:"w-6 h-6 text-primary-blue"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"SSL/TLS Sertifikas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Vercel/edge tarafndan ynetilir"})]})]}),e.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"Aktif"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Sertifika Tr:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Edge Managed"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Geerlilik:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Panelden takip edilir"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(on,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"DDoS Korumas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Vercel/edge temel korumalar"})]})]}),e.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"Aktif"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Not:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Detayl saya/log bu srmde yok"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Koruma Seviyesi:"}),e.jsx("span",{className:"text-sm font-semibold text-primary-blue",children:"Edge default"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(Gj,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"API Gvenlii"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Hz snr & JWT"})]})]}),e.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"Aktif"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Hz Snr:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"Endpoint bazl (best-effort)"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Token Sresi:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"7 gn"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsx(gi,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-900",children:"Gvenlik Duvar"}),e.jsx("p",{className:"text-sm text-gray-600",children:"WAF (Web Uygulama Gvenlik Duvar)"})]})]}),e.jsx("span",{className:"text-green-600 font-semibold text-sm",children:"Aktif"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Engellenen IP:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:""})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Kara Liste:"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:""})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden mb-6",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Son Admin Gvenlik Olaylar"})}),e.jsxs("div",{className:"p-6",children:[T?e.jsx("div",{className:"mb-3 text-sm text-red-600 font-semibold",children:T}):null,N.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Henz olay yok (veya tablo yok)."}):e.jsx("div",{className:"space-y-2",children:N.slice(0,30).map(j=>e.jsxs("div",{className:"p-3 bg-gray-50 border border-gray-200 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"font-black text-gray-900",children:String(j.event_type||"event")}),e.jsx("div",{className:"text-xs text-gray-500",children:String(j.created_at||"").slice(0,19)})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:["user_id: ",e.jsx("span",{className:"font-mono",children:String(j.user_id||"")}),"  ip: ",e.jsx("span",{className:"font-mono",children:String(j.ip||"")})]})]},j.id))}),d&&typeof d.users=="number"?e.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["DB hzl zet: users=",d.users.toLocaleString("tr-TR"),", posts=",typeof d.posts=="number"?d.posts.toLocaleString("tr-TR"):""]}):null]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden mb-6",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Admin Cihazlar"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Admin girilerinde otomatik kaydedilir."})]}),e.jsx("div",{className:"p-6 space-y-3",children:_.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Henz cihaz yok (veya tablo yok)."}):_.slice(0,50).map(j=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-xl flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"text-sm font-black text-gray-900",children:[j.trusted?"Gvenilir":"Yeni/Onaysz"," "," ",e.jsxs("span",{className:"font-mono text-xs text-gray-600",children:[String(j.device_key||"").slice(0,12),""]})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600",children:["user_id: ",e.jsx("span",{className:"font-mono",children:String(j.user_id||"")}),"  last_seen: ",String(j.last_seen_at||"").slice(0,19)||""]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 truncate",children:["UA: ",String(j.user_agent||"")]})]}),e.jsx("button",{type:"button",onClick:()=>p(j),className:"px-4 py-2 rounded-xl font-black border ".concat(j.trusted?"bg-gray-900 text-white border-gray-900":"bg-white text-gray-900 border-gray-300 hover:bg-gray-50"),children:j.trusted?"Gvenilir":"Gvenilir Yap"})]},j.id))})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"ifre Politikas"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ga,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Minimum 8 karakter"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ga,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Byk ve kk harf zorunlu"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ga,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"En az 1 rakam"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ga,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-gray-700",children:"zel karakter zorunlu"})]})]})]})]})},GS=()=>{const[r,s]=m.useState(!0),[l,i]=m.useState(""),[d,u]=m.useState(null),[c,g]=m.useState(null);m.useEffect(()=>{let b=!1;return(async()=>{s(!0),i("");try{const[w,N]=await Promise.all([Ze.getDbOverview().catch(()=>null),Ze.schemaCheck().catch(()=>null)]);if(!(w!=null&&w.success))throw new Error((w==null?void 0:w.error)||"DB zeti yklenemedi.");b||(u(w.data||null),g(N!=null&&N.success?N.data:null))}catch(w){b||i(String((w==null?void 0:w.message)||"DB zeti yklenemedi."))}finally{b||s(!1)}})(),()=>{b=!0}},[]);const f=m.useMemo(()=>{const b=(d==null?void 0:d.counts)||{};return["users","posts","comments","notifications","messages","agendas","parties","follows","likes","admin_notification_rules","admin_notification_channels"].map(N=>({table:N,count:typeof b[N]=="number"?b[N]:null}))},[d]),v=m.useMemo(()=>f.reduce((b,w)=>b+(typeof w.count=="number"?w.count:0),0),[f]);return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Veritaban Ynetimi"}),e.jsx("p",{className:"text-gray-600",children:"Supabase Postgres zet grnm"})]}),l?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:l}):null,r?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-green-600",children:"Veritaban Durumu"}),e.jsx(Um,{className:"w-5 h-5 text-green-600"})]}),e.jsx("div",{className:"text-2xl font-black text-green-700",children:(c==null?void 0:c.ok)===!1?"Kontrol Gerekiyor":"alyor"}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Schema kontrol: ",c?c.ok?"OK":"Eksik var":""]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-purple-600",children:"Toplam Kayt"}),e.jsx(Sy,{className:"w-5 h-5 text-purple-600"})]}),e.jsx("div",{className:"text-2xl font-black text-purple-700",children:v.toLocaleString("tr-TR")}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Saym: seili tablolar"})]}),e.jsxs("div",{className:"bg-orange-50 rounded-xl border border-orange-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-orange-600",children:"Son Polit"}),e.jsx(Um,{className:"w-5 h-5 text-orange-600"})]}),e.jsx("div",{className:"text-2xl font-black text-orange-700",children:d!=null&&d.lastPostAt?td(d.lastPostAt):""}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"created_at (posts)"})]}),e.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-blue-600",children:"Operasyon"}),e.jsx(fr,{className:"w-5 h-5 text-blue-600"})]}),e.jsx("div",{className:"text-2xl font-black text-blue-700",children:"Supabase"}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Backup/optimizasyon panelden"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden mb-6",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Tablo statistikleri"}),e.jsxs("button",{type:"button",onClick:()=>window.location.reload(),className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black inline-flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Yenile"]})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Tablo Ad"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase",children:"Kayt Says"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"font-mono text-sm text-gray-900",children:b.table})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:typeof b.count=="number"?b.count.toLocaleString("tr-TR"):""})})]},b.table))})]})]}),(c==null?void 0:c.ok)===!1?e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"Schema kontrolnde eksikler var"}),e.jsx("div",{className:"text-sm mt-1",children:"Eksik tablolar/stunlar aada listelenir (schema-check kts)."}),Array.isArray(c==null?void 0:c.missingTables)&&c.missingTables.length>0?e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xs font-black uppercase text-amber-900 mb-2",children:"Eksik tablolar"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.missingTables.slice(0,50).map(b=>e.jsx("span",{className:"px-3 py-1 rounded-full bg-white border border-amber-200 text-xs font-bold text-amber-900",children:b},b))})]}):null,c!=null&&c.missingColumns&&typeof c.missingColumns=="object"&&Object.keys(c.missingColumns).length>0?e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xs font-black uppercase text-amber-900 mb-2",children:"Eksik stunlar"}),e.jsx("div",{className:"space-y-2",children:Object.entries(c.missingColumns).slice(0,20).map(([b,w])=>e.jsxs("div",{className:"bg-white border border-amber-200 rounded-lg p-3",children:[e.jsx("div",{className:"font-mono text-sm font-black text-amber-900",children:b}),e.jsx("div",{className:"mt-1 text-xs text-amber-900",children:(Array.isArray(w)?w:[]).slice(0,30).join(", ")})]},b))})]}):null]}):null]})},KS=()=>{const[r,s]=m.useState(!1),[l,i]=m.useState(""),[d,u]=m.useState(""),[c,g]=m.useState([]),[f,v]=m.useState(""),[b,w]=m.useState(!1),[N,k]=m.useState(""),[_,M]=m.useState(""),T=async()=>{s(!0),i("");try{const p=await Ze.getApiKeys().catch(()=>null);if(p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&u(String(p.requiredSql||"")),!(p!=null&&p.success))throw new Error((p==null?void 0:p.error)||"Anahtarlar yklenemedi.");g(Array.isArray(p.data)?p.data:[])}catch(p){i(String((p==null?void 0:p.message)||"Anahtarlar yklenemedi."))}finally{s(!1)}};m.useEffect(()=>{T()},[]);const A=async()=>{const p=String(f||"").trim();if(p&&!b){w(!0),i("");try{const j=await Ze.createApiKey({name:p}).catch(()=>null);if(!(j!=null&&j.success))throw j!=null&&j.schemaMissing&&(j!=null&&j.requiredSql)&&u(String(j.requiredSql||"")),new Error((j==null?void 0:j.error)||"Anahtar oluturulamad.");k(String(j.secret||"")),v(""),await T()}catch(j){i(String((j==null?void 0:j.message)||"Anahtar oluturulamad."))}finally{w(!1)}}},S=async p=>{const j=String(p||"");if(!j||!window.confirm("Bu API anahtar silinsin mi?"))return;const E=await Ze.deleteApiKey(j).catch(()=>null);if(!(E!=null&&E.success)){i((E==null?void 0:E.error)||"Silinemedi.");return}await T()},y=async(p,j)=>{const E=String(p||"");if(E){M(E),i("");try{const C=await Ze.updateApiKey(E,j).catch(()=>null);if(!(C!=null&&C.success))throw C!=null&&C.schemaMissing&&(C!=null&&C.requiredSql)&&u(String(C.requiredSql||"")),new Error((C==null?void 0:C.error)||"Gncellenemedi.");await T()}catch(C){i(String((C==null?void 0:C.message)||"Gncellenemedi."))}finally{M("")}}};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"API Ayarlar"}),e.jsx("p",{className:"text-gray-600",children:"API anahtarlarn ynetin"})]})}),l?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:l}):null,r?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,d?e.jsxs("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `admin_api_keys`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:d})]}):null,N?e.jsxs("div",{className:"mb-6 rounded-xl border border-green-200 bg-green-50 p-4 text-green-900",children:[e.jsx("div",{className:"font-black",children:"Yeni anahtar oluturuldu (sadece 1 kere gsterilir)"}),e.jsx("div",{className:"text-sm mt-2",children:"Bu anahtar kopyalayp gvenli yerde saklayn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-green-200 overflow-auto text-xs text-gray-900",children:N}),e.jsx("button",{type:"button",className:"mt-3 px-4 py-2 rounded-lg bg-gray-900 text-white font-black",onClick:()=>k(""),children:"Kapat"})]}):null,e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(As,{className:"w-6 h-6 text-primary-blue"}),e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Yeni API Anahtar"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{value:f,onChange:p=>v(p.target.value),placeholder:"Anahtar ad",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("button",{type:"button",onClick:A,disabled:b,className:"px-6 py-3 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-black disabled:opacity-60",children:b?"Oluturuluyor":"Olutur"})]}),e.jsx("div",{className:"mt-3 text-xs text-gray-500",children:"Not: Secret deerleri sadece olutururken 1 kez gsterilir. Sonrasnda sadece prefix grntlenir."})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden mb-6",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"API Anahtarlar"})}),e.jsxs("div",{className:"divide-y divide-gray-200",children:[c.map(p=>e.jsx("div",{className:"p-6 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-bold text-gray-900",children:"Ad"}),e.jsx("input",{defaultValue:p.name,onBlur:j=>{const E=String(j.target.value||"").trim();E&&E!==String(p.name||"")&&y(p.id,{name:E})},className:"mt-1 w-full max-w-md px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Prefix: ",p.key_prefix,""]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 flex items-center gap-2",children:["Durum:",e.jsxs("select",{value:String(p.status||"active"),onChange:j=>y(p.id,{status:j.target.value}),className:"px-2 py-1 border border-gray-300 rounded-lg bg-white text-xs",disabled:_===String(p.id),children:[e.jsx("option",{value:"active",children:"active"}),e.jsx("option",{value:"disabled",children:"disabled"})]}),_===String(p.id)?e.jsx("span",{className:"text-xs text-gray-400",children:"Kaydediliyor"}):null]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["stek: ",Number(p.requests_count||0).toLocaleString("tr-TR")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-semibold inline-flex items-center gap-1",children:[e.jsx(ml,{className:"w-5 h-5"})," Gizli"]}),e.jsxs("button",{type:"button",onClick:()=>y(p.id,{status:String(p.status||"active")==="active"?"disabled":"active"}),className:"px-3 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 text-xs font-black inline-flex items-center gap-2",title:"Durumu deitir",disabled:_===String(p.id),children:[e.jsx(ks,{className:"w-5 h-5"}),"Kaydet"]}),e.jsx("button",{type:"button",onClick:()=>S(p.id),className:"p-2 hover:bg-red-50 rounded-lg transition-colors",title:"Sil",children:e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5 text-red-600"})})]})]})},p.id)),c.length===0?e.jsx("div",{className:"p-6 text-sm text-gray-600",children:"Henz API anahtar yok."}):null]})]})]})},HS=()=>{const[r,s]=m.useState("purge_archived_posts"),[l,i]=m.useState(""),[d,u]=m.useState(3),[c,g]=m.useState(200),[f,v]=m.useState(50),[b,w]=m.useState(!1),[N,k]=m.useState(""),[_,M]=m.useState(null),T=m.useMemo(()=>[{key:"purge_archived_posts",label:"Arivlenmi postlar kalc sil (media temizlii dahil)",icon:Ka},{key:"rebuild_agenda_post_counts",label:"Gndem post_count yeniden hesapla (ilk N gndem)",icon:fr}],[]),A=async()=>{var y;w(!0),k(""),M(null);try{const p=r==="purge_archived_posts"?{action:r,confirm:l,days:Number(d)||3,limit:Number(c)||200}:{action:r,confirm:l,maxAgendas:Number(f)||50},j=await ma.admin.systemTransform(p).catch(()=>null);if(!(j!=null&&j.success))throw new Error((j==null?void 0:j.error)||"lem baarsz.");M((y=j==null?void 0:j.data)!=null?y:null)}catch(p){k(String((p==null?void 0:p.message)||"lem baarsz."))}finally{w(!1)}},S=String(l||"").trim()==="ONAYLIYORUM";return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Sistem Dnmleri"}),e.jsx("p",{className:"text-gray-600",children:"Geri alnamaz ilemler. Dikkatli kullann."})]}),e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900 flex items-start gap-3",children:[e.jsx(gi,{className:"w-6 h-6 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:["Bu ekrandaki ilemler ",e.jsx("strong",{children:"kalc"})," etkiler yaratabilir. Devam etmek iin aaya ",e.jsx("strong",{children:"ONAYLIYORUM"})," yazmanz gerekir."]})]}),N?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:N}):null,e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"lem"}),e.jsx("select",{value:r,onChange:y=>s(y.target.value),className:"mt-1 w-full px-4 py-3 border border-gray-300 rounded-lg bg-white",children:T.map(y=>e.jsx("option",{value:y.key,children:y.label},y.key))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"Onay"}),e.jsx("input",{value:l,onChange:y=>i(y.target.value),placeholder:"ONAYLIYORUM",className:"mt-1 w-full px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("div",{className:"mt-1 text-xs ".concat(S?"text-green-600":"text-gray-500"),children:S?"Onayland":"Devam etmek iin ONAYLIYORUM yazn"})]})]}),r==="purge_archived_posts"?e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"Gn"}),e.jsx("input",{value:String(d),onChange:y=>u(y.target.value),className:"mt-1 w-full px-4 py-3 border border-gray-300 rounded-lg",inputMode:"numeric"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Arivlenmi postlar: olderThanDays"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"Limit"}),e.jsx("input",{value:String(c),onChange:y=>g(y.target.value),className:"mt-1 w-full px-4 py-3 border border-gray-300 rounded-lg",inputMode:"numeric"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"Tek altrmada ilenecek maksimum kayt"})]})]}):null,r==="rebuild_agenda_post_counts"?e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-xs font-black text-gray-600 uppercase",children:"maxAgendas"}),e.jsx("input",{value:String(f),onChange:y=>v(y.target.value),className:"mt-1 w-full px-4 py-3 border border-gray-300 rounded-lg",inputMode:"numeric"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500",children:"En fazla 100 gndem zerinde alr"})]}):null,e.jsx("div",{className:"mt-5 flex justify-end",children:e.jsxs("button",{type:"button",onClick:A,disabled:b||!S,className:"px-6 py-3 rounded-xl bg-gray-900 hover:bg-black text-white font-black inline-flex items-center gap-2 disabled:opacity-50",children:[e.jsx(xi,{className:"w-5 h-5"}),b?"alyor":"altr"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("div",{className:"text-lg font-black text-gray-900 mb-3",children:"Sonu"}),e.jsx("pre",{className:"text-xs bg-gray-50 border border-gray-200 rounded-xl p-4 overflow-auto",children:_==null?"":JSON.stringify(_,null,2)})]})]})},sy=({status:r})=>{const s=String(r||"").trim(),i={queued:"bg-yellow-100 text-yellow-700",running:"bg-blue-100 text-blue-700",success:"bg-green-100 text-green-700",failed:"bg-red-100 text-red-700"}[s]||"bg-gray-100 text-gray-700";return e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-black ".concat(i),children:s||""})},VS=()=>{const[r,s]=m.useState(!1),[l,i]=m.useState(!1),[d,u]=m.useState(""),[c,g]=m.useState(""),[f,v]=m.useState([]),[b,w]=m.useState(null),[N,k]=m.useState(""),[_,M]=m.useState(""),T=async()=>{s(!0),u("");try{const p=await Ze.getJobs({limit:200}).catch(()=>null);if(p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&g(String(p.requiredSql||"")),!(p!=null&&p.success))throw new Error((p==null?void 0:p.error)||"Job listesi yklenemedi.");const j=Array.isArray(p.data)?p.data:[];if(v(j),b){const E=String((b==null?void 0:b.id)||""),C=j.find(O=>String((O==null?void 0:O.id)||"")===E)||null;w(C)}}catch(p){u(String((p==null?void 0:p.message)||"Job listesi yklenemedi."))}finally{s(!1)}};m.useEffect(()=>{T()},[]);const A=m.useMemo(()=>{let p=Array.isArray(f)?f:[];return N&&(p=p.filter(j=>String((j==null?void 0:j.status)||"")===String(N))),_&&(p=p.filter(j=>String((j==null?void 0:j.job_type)||"")===String(_))),p},[f,N,_]),S=m.useMemo(()=>{const p=new Set((f||[]).map(j=>String((j==null?void 0:j.job_type)||"")).filter(Boolean));return Array.from(p).sort()},[f]),y=async()=>{i(!0),u("");try{const p=await Ze.processJobs({limit:10}).catch(()=>null);if(p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&g(String(p.requiredSql||"")),!(p!=null&&p.success))throw new Error((p==null?void 0:p.error)||"Job ilenemedi.");await T()}catch(p){u(String((p==null?void 0:p.message)||"Job ilenemedi."))}finally{i(!1)}};return e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8 flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900 mb-2",children:"Job Kuyruu"}),e.jsx("p",{className:"text-gray-600",children:"Tarama / otomasyon gibi iler burada kuyrua alnr ve altrlr."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:T,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black inline-flex items-center gap-2",children:[e.jsx(fr,{className:"w-5 h-5"}),"Yenile"]}),e.jsxs("button",{type:"button",onClick:y,disabled:l,className:"px-4 py-2 rounded-xl bg-gray-900 hover:bg-black text-white font-black inline-flex items-center gap-2 disabled:opacity-60",children:[l?e.jsx(Zc,{className:"w-5 h-5 animate-spin"}):e.jsx(xi,{className:"w-5 h-5"}),"Kuyruu altr"]})]})]}),c?e.jsxs("div",{className:"mb-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik: `admin_jobs`"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:c})]}):null,d?e.jsx("div",{className:"mb-4 text-sm text-red-600 font-semibold",children:d}):null,r?e.jsx("div",{className:"mb-4 text-sm text-gray-600",children:"Ykleniyor"}):null,e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-6 flex flex-wrap items-center gap-3",children:[e.jsx("div",{className:"text-sm font-black text-gray-900",children:"Filtre"}),e.jsxs("select",{value:N,onChange:p=>k(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Tm durumlar"}),e.jsx("option",{value:"queued",children:"queued"}),e.jsx("option",{value:"running",children:"running"}),e.jsx("option",{value:"success",children:"success"}),e.jsx("option",{value:"failed",children:"failed"})]}),e.jsxs("select",{value:_,onChange:p=>M(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"Tm tipler"}),S.map(p=>e.jsx("option",{value:p,children:p},p))]}),e.jsxs("div",{className:"ml-auto text-xs text-gray-500",children:[A.length," kayt"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr_420px] gap-6",children:[e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"divide-y divide-gray-200",children:[A.map(p=>{const j=String((b==null?void 0:b.id)||"")===String((p==null?void 0:p.id)||"");return e.jsx("button",{type:"button",onClick:()=>w(p),className:"w-full text-left p-4 hover:bg-gray-50 ".concat(j?"bg-gray-50":""),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-black text-gray-900 truncate",children:String(p.job_type||"")}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 truncate",children:[String(p.requested_at||"").slice(0,19),"  id: ",e.jsxs("span",{className:"font-mono",children:[String(p.id||"").slice(0,8),""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(sy,{status:p.status}),String(p.status)==="success"?e.jsx(Ga,{className:"w-5 h-5 text-green-600"}):null,String(p.status)==="failed"?e.jsx(wy,{className:"w-5 h-5 text-red-600"}):null]})]})},p.id)}),A.length===0?e.jsx("div",{className:"p-6 text-sm text-gray-600",children:"Job yok."}):null]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsx("div",{className:"text-lg font-black text-gray-900 mb-3",children:"Detay"}),b?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-black text-gray-900",children:String(b.job_type||"")}),e.jsx(sy,{status:b.status})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["requested_at: ",String(b.requested_at||"").slice(0,19)||"",e.jsx("br",{}),"started_at: ",String(b.started_at||"").slice(0,19)||"",e.jsx("br",{}),"finished_at: ",String(b.finished_at||"").slice(0,19)||""]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-black text-gray-600 uppercase mb-1",children:"payload"}),e.jsx("pre",{className:"text-xs bg-gray-50 border border-gray-200 rounded-xl p-3 overflow-auto max-h-[200px]",children:JSON.stringify(b.payload||{},null,2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-black text-gray-600 uppercase mb-1",children:"result"}),e.jsx("pre",{className:"text-xs bg-gray-50 border border-gray-200 rounded-xl p-3 overflow-auto max-h-[240px]",children:JSON.stringify(b.result||{},null,2)})]})]}):e.jsx("div",{className:"text-sm text-gray-600",children:"Soldan bir job sein."})]})]})]})},FS=()=>{var D,$,B,Y,Q;const[r,s]=m.useState(!1),[l,i]=m.useState(""),[d,u]=m.useState([]),[c,g]=m.useState({page:1,limit:20,total:0,totalPages:1}),[f,v]=m.useState(""),[b,w]=m.useState(""),[N,k]=m.useState(!1),[_,M]=m.useState({name:"",short_name:"",slug:"",color:"",logo_url:"",is_active:!0}),[T,A]=m.useState(null),[S,y]=m.useState(!1),[p,j]=m.useState(null),[E,C]=m.useState(!1),[O,P]=m.useState(null),[L,ce]=m.useState(""),[Z,ie]=m.useState({user_id:"",unit_type:"provincial_chair",province:"",district_name:"",title:"",contact_phone:"",contact_email:"",contact_website:""}),le=async q=>{var I,V,Te,Ke,oe,je;j(q),y(!0),C(!0),P(null),ce(""),i(""),A({id:q.id,name:q.name||"",short_name:q.short_name||"",slug:q.slug||"",color:q.color||"",logo_url:q.logo_url||"",is_active:!!q.is_active});try{const fe=await Ze.getPartyHierarchy(q.id);if(!(fe!=null&&fe.success))throw new Error((fe==null?void 0:fe.error)||"Hiyerari yklenemedi.");P(fe.data||null);const $e=[...(((V=(I=fe.data)==null?void 0:I.users)==null?void 0:V.mps)||[]).slice(),...(((Ke=(Te=fe.data)==null?void 0:Te.users)==null?void 0:Ke.officials)||[]).slice(),...(((je=(oe=fe.data)==null?void 0:oe.users)==null?void 0:je.members)||[]).slice()].find(Le=>String((Le==null?void 0:Le.politician_type)||"")==="party_chair")||null;$e!=null&&$e.id&&ce(String($e.id))}catch(fe){i((fe==null?void 0:fe.message)||"Hiyerari yklenemedi."),P(null)}finally{C(!1)}},ye=async(q=c.page)=>{s(!0),i("");try{const I={page:q,limit:c.limit};f.trim()&&(I.search=f.trim()),(b==="true"||b==="false")&&(I.is_active=b);const V=await Ze.getParties(I);if(!(V!=null&&V.success))throw new Error((V==null?void 0:V.error)||"Partiler yklenemedi.");u(V.data||[]),g(V.pagination||{page:q,limit:c.limit,total:0,totalPages:1})}catch(I){i((I==null?void 0:I.message)||"Bir hata olutu.")}finally{s(!1)}};m.useEffect(()=>{ye(1)},[]);const z=async()=>{s(!0),i("");try{const q={name:_.name.trim(),short_name:_.short_name.trim(),slug:_.slug.trim()||void 0,color:_.color.trim()||void 0,logo_url:_.logo_url.trim()||void 0,is_active:!!_.is_active},I=await Ze.createParty(q);if(!(I!=null&&I.success))throw new Error((I==null?void 0:I.error)||"Parti oluturulamad.");M({name:"",short_name:"",slug:"",color:"",logo_url:"",is_active:!0}),k(!1),await ye(1)}catch(q){i((q==null?void 0:q.message)||"Bir hata olutu.")}finally{s(!1)}},X=async()=>{if(T!=null&&T.id){s(!0),i("");try{const q={name:T.name.trim(),short_name:T.short_name.trim(),slug:T.slug.trim(),color:T.color.trim()||null,logo_url:T.logo_url.trim()||null,is_active:!!T.is_active},I=await Ze.updateParty(T.id,q);if(!(I!=null&&I.success))throw new Error((I==null?void 0:I.error)||"Gncellenemedi.");await ye(c.page)}catch(q){i((q==null?void 0:q.message)||"Bir hata olutu.")}finally{s(!1)}}},G=async q=>{if(q&&window.confirm("Partiyi pasif yapmak istiyor musunuz?")){s(!0),i("");try{const I=await Ze.deleteParty(q);if(!(I!=null&&I.success))throw new Error((I==null?void 0:I.error)||"Silinemedi.");await ye(c.page)}catch(I){i((I==null?void 0:I.message)||"Bir hata olutu.")}finally{s(!1)}}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-black text-gray-900 flex items-center gap-2",children:[e.jsx(sn,{className:"w-7 h-7 text-primary-blue"}),"Parti Ynetimi"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Partiler (imdilik)  il/ile tekilat & belediye modlleri bu ekrann altna eklenecek."})]}),e.jsxs("button",{onClick:()=>k(q=>!q),className:"inline-flex items-center gap-2 bg-primary-blue hover:bg-blue-600 text-white font-bold px-4 py-3 rounded-xl shadow-lg",children:[e.jsx(As,{className:"w-5 h-5"}),"Yeni Parti"]})]}),l&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3",children:[e.jsx(fs,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"text-sm text-red-700",children:l})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-4 flex flex-col md:flex-row gap-3 md:items-center md:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Gs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{value:f,onChange:q=>v(q.target.value),placeholder:"Ara: parti ad / ksa ad / ksa adres",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-primary-blue focus:border-primary-blue outline-none"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:b,onChange:q=>w(q.target.value),className:"border border-gray-300 rounded-xl px-3 py-3 bg-white",children:[e.jsx("option",{value:"",children:"Tm"}),e.jsx("option",{value:"true",children:"Aktif"}),e.jsx("option",{value:"false",children:"Pasif"})]}),e.jsx("button",{onClick:()=>ye(1),className:"bg-gray-900 hover:bg-black text-white font-bold px-4 py-3 rounded-xl",children:"Filtrele"})]})]}),N&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-black text-gray-900",children:"Yeni Parti Olutur"}),e.jsx("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(xs,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Parti Ad"}),e.jsx("input",{value:_.name,onChange:q=>M(I=>({...I,name:q.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"rn: Cumhuriyet Halk Partisi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Ksa Ad"}),e.jsx("input",{value:_.short_name,onChange:q=>M(I=>({...I,short_name:q.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"rn: CHP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Ksa Adres (ops.)"}),e.jsx("input",{value:_.slug,onChange:q=>M(I=>({...I,slug:q.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"rn: chp"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Renk (ops.)"}),e.jsx("input",{value:_.color,onChange:q=>M(I=>({...I,color:q.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"#FF0000"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Logo Balants (ops.)"}),e.jsx("input",{value:_.logo_url,onChange:q=>M(I=>({...I,logo_url:q.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"https://..."})]}),e.jsxs("div",{className:"md:col-span-2 flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:_.is_active,onChange:q=>M(I=>({...I,is_active:q.target.checked})),className:"w-5 h-5 accent-primary-blue cursor-pointer"}),"Aktif"]}),e.jsx("button",{onClick:z,disabled:r||!_.name.trim()||!_.short_name.trim(),className:"bg-primary-blue hover:bg-blue-600 text-white font-bold px-5 py-3 rounded-xl disabled:opacity-50",children:"Olutur"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-gray-100 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Toplam: ",e.jsx("span",{className:"font-bold text-gray-900",children:c.total})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{disabled:r||c.page<=1,onClick:()=>ye(c.page-1),className:"px-3 py-2 rounded-lg border border-gray-300 disabled:opacity-50",children:"nceki"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[c.page," / ",c.totalPages]}),e.jsx("button",{disabled:r||c.page>=c.totalPages,onClick:()=>ye(c.page+1),className:"px-3 py-2 rounded-lg border border-gray-300 disabled:opacity-50",children:"Sonraki"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{className:"text-left text-gray-600",children:[e.jsx("th",{className:"px-5 py-3",children:"ID"}),e.jsx("th",{className:"px-5 py-3",children:"Parti"}),e.jsx("th",{className:"px-5 py-3",children:"Ksa Adres"}),e.jsx("th",{className:"px-5 py-3",children:"Durum"}),e.jsx("th",{className:"px-5 py-3 text-right",children:"lem"})]})}),e.jsxs("tbody",{children:[d.map(q=>e.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"px-5 py-3 font-mono text-xs text-gray-700",children:q.id}),e.jsx("td",{className:"px-5 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[q.logo_url?e.jsx("img",{src:q.logo_url,alt:"",className:"w-10 h-10 rounded-xl object-cover border"}):e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 border border-blue-100"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:q.name}),e.jsx("div",{className:"text-xs text-gray-500",children:q.short_name})]})]})}),e.jsx("td",{className:"px-5 py-3 text-gray-700",children:q.slug}),e.jsx("td",{className:"px-5 py-3",children:e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-bold ".concat(q.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:q.is_active?"Aktif":"Pasif"})}),e.jsx("td",{className:"px-5 py-3",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs("button",{onClick:()=>le(q),className:"px-3 py-2 rounded-lg bg-gray-900 hover:bg-black text-white font-semibold inline-flex items-center gap-2",title:"Gelimi hiyerari / iletiim",children:[e.jsx(s0,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Ynet"]}),e.jsxs("button",{onClick:()=>G(q.id),className:"px-3 py-2 rounded-lg bg-red-600 hover:bg-red-700 text-white font-semibold inline-flex items-center gap-2",children:[e.jsx(Ka,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Pasifletir"]})]})})]},q.id)),!r&&d.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-5 py-12 text-center text-gray-500",children:"Sonu bulunamad."})})]})]})})]}),S&&p&&e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"w-full max-w-5xl bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 font-semibold",children:"Parti Ynetimi"}),e.jsxs("div",{className:"text-xl font-black text-gray-900 flex items-center gap-2",children:[e.jsx(s0,{className:"w-6 h-6 text-primary-blue"}),p.name]})]}),e.jsx("button",{onClick:()=>{y(!1),j(null),P(null),A(null)},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(xs,{className:"w-5 h-5 text-gray-500"})})]}),e.jsxs("div",{className:"p-5 grid grid-cols-1 lg:grid-cols-[360px_1fr] gap-5",children:[e.jsxs("div",{className:"space-y-4",children:[T?e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"font-black text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(sn,{className:"w-5 h-5 text-primary-blue"}),"Parti Bilgileri"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Parti Ad"}),e.jsx("input",{value:T.name,onChange:q=>A(I=>({...I,name:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Ksa Ad"}),e.jsx("input",{value:T.short_name,onChange:q=>A(I=>({...I,short_name:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Ksa Adres"}),e.jsx("input",{value:T.slug,onChange:q=>A(I=>({...I,slug:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Renk"}),e.jsx("input",{value:T.color,onChange:q=>A(I=>({...I,color:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3",placeholder:"#RRGGBB"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Logo URL"}),e.jsx("input",{value:T.logo_url,onChange:q=>A(I=>({...I,logo_url:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3",placeholder:"https://..."})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3 pt-1",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:T.is_active,onChange:q=>A(I=>({...I,is_active:q.target.checked})),className:"w-5 h-5 accent-primary-blue cursor-pointer"}),"Aktif"]}),e.jsxs("button",{type:"button",onClick:X,disabled:r||!T.name.trim()||!T.short_name.trim()||!T.slug.trim(),className:"bg-gray-900 hover:bg-black text-white font-bold px-4 py-3 rounded-xl inline-flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ks,{className:"w-5 h-5"}),"Kaydet"]})]})]})]}):null,e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"font-black text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(sn,{className:"w-5 h-5 text-primary-blue"}),"Parti Bakan"]}),e.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Bu seim Siyasi Partiler sayfasndaki Parti Bakan alann doldurur."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Kullanc"}),e.jsxs("select",{value:L,onChange:q=>ce(q.target.value),className:"mt-1 w-full border border-gray-300 rounded-xl p-3 bg-white",children:[e.jsx("option",{value:"",children:"Seiniz..."}),[...((D=O==null?void 0:O.users)==null?void 0:D.mps)||[],...(($=O==null?void 0:O.users)==null?void 0:$.officials)||[],...((B=O==null?void 0:O.users)==null?void 0:B.members)||[]].map(q=>e.jsxs("option",{value:q.id,children:[q.full_name," (@",q.username,")"]},"chair-".concat(q.id)))]})]}),e.jsx("button",{type:"button",disabled:E||!L,onClick:async()=>{try{C(!0);const q=await Ze.setPartyChair(p.id,Number(L));if(!(q!=null&&q.success))throw new Error((q==null?void 0:q.error)||"Kaydedilemedi.");const I=await Ze.getPartyHierarchy(p.id);I!=null&&I.success&&P(I.data||null)}catch(q){i((q==null?void 0:q.message)||"Kaydedilemedi.")}finally{C(!1)}},className:"w-full bg-primary-blue hover:bg-blue-600 text-white font-black px-4 py-3 rounded-xl disabled:opacity-50",children:E?"Kaydediliyor":"Genel Bakan Yap"})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"font-black text-gray-900 mb-2 flex items-center gap-2",children:[e.jsx(Wc,{className:"w-5 h-5 text-primary-blue"}),"Yetki / rtibat Atamas"]}),e.jsx("div",{className:"text-xs text-gray-600 mb-3",children:"Setiiniz kullancya birim grevi ve iletiim bilgisi atanr (kullanc metadata alanna kaydedilir)."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Kullanc"}),e.jsxs("select",{value:Z.user_id,onChange:q=>ie(I=>({...I,user_id:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3 bg-white",children:[e.jsx("option",{value:"",children:"Seiniz..."}),(((Y=O==null?void 0:O.users)==null?void 0:Y.officials)||[]).map(q=>e.jsxs("option",{value:q.id,children:[q.full_name," (@",q.username,")  ",ms(q,!0)||"ye"]},q.id)),(((Q=O==null?void 0:O.users)==null?void 0:Q.mps)||[]).map(q=>e.jsxs("option",{value:q.id,children:[q.full_name," (@",q.username,")  ",ms(q,!0)||"Milletvekili"]},q.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"Birim Tipi"}),e.jsxs("select",{value:Z.unit_type,onChange:q=>ie(I=>({...I,unit_type:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3 bg-white",children:[e.jsx("option",{value:"provincial_chair",children:"l Bakan"}),e.jsx("option",{value:"district_chair",children:"le Bakan"}),e.jsx("option",{value:"metropolitan_mayor",children:"Bykehir Belediye Bakan"}),e.jsx("option",{value:"district_mayor",children:"le Belediye Bakan"}),e.jsx("option",{value:"party_official",children:"Tekilat Grevlisi"}),e.jsx("option",{value:"mp",children:"Milletvekili"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"l"}),e.jsx("input",{value:Z.province,onChange:q=>ie(I=>({...I,province:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3",placeholder:"rn: Ankara"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"le (ops.)"}),e.jsx("input",{value:Z.district_name,onChange:q=>ie(I=>({...I,district_name:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3",placeholder:"rn: ankaya"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-600",children:"nvan (ops.)"}),e.jsx("input",{value:Z.title,onChange:q=>ie(I=>({...I,title:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3",placeholder:"rn: l Bakan Yard."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-600 flex items-center gap-2",children:[e.jsx(ed,{className:"w-6 h-6 sm:w-5 sm:h-5"})," Telefon (ops.)"]}),e.jsx("input",{value:Z.contact_phone,onChange:q=>ie(I=>({...I,contact_phone:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3",placeholder:"05xx..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-600 flex items-center gap-2",children:[e.jsx(hr,{className:"w-6 h-6 sm:w-5 sm:h-5"})," Eposta (ops.)"]}),e.jsx("input",{value:Z.contact_email,onChange:q=>ie(I=>({...I,contact_email:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3",placeholder:"ornek@..."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-xs font-bold text-gray-600 flex items-center gap-2",children:[e.jsx(fl,{className:"w-6 h-6 sm:w-5 sm:h-5"})," Web (ops.)"]}),e.jsx("input",{value:Z.contact_website,onChange:q=>ie(I=>({...I,contact_website:q.target.value})),className:"mt-1 w-full border border-gray-300 rounded-xl p-3",placeholder:"https://..."})]}),e.jsx("button",{type:"button",disabled:E||!Z.user_id||!Z.unit_type,onClick:async()=>{try{C(!0);const q={user_id:Number(Z.user_id),unit:{unit_type:Z.unit_type,province:Z.province||null,district_name:Z.district_name||null,title:Z.title||null,contact:{phone:Z.contact_phone||null,email:Z.contact_email||null,website:Z.contact_website||null}}},I=await Ze.assignPartyUnit(p.id,q);if(!(I!=null&&I.success))throw new Error((I==null?void 0:I.error)||"Atama kaydedilemedi.");const V=await Ze.getPartyHierarchy(p.id);V!=null&&V.success&&P(V.data||null),ie(Te=>({...Te,title:"",district_name:"",contact_phone:"",contact_email:"",contact_website:""}))}catch(q){i((q==null?void 0:q.message)||"Atama kaydedilemedi.")}finally{C(!1)}},className:"w-full bg-primary-blue hover:bg-blue-600 text-white font-black px-4 py-3 rounded-xl disabled:opacity-50",children:E?"Kaydediliyor":"Ata / Kaydet"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[E&&e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-6 text-gray-600",children:"Ykleniyor"}),!E&&O&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-4",children:[e.jsx("div",{className:"font-black text-gray-900 mb-2",children:"zet"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Vekil"}),e.jsx("div",{className:"text-xl font-black",children:O.counts.mps})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Tekilat"}),e.jsx("div",{className:"text-xl font-black",children:O.counts.party_officials})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"l Bakan"}),e.jsx("div",{className:"text-xl font-black",children:O.counts.provincial_chairs})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-3",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"le Bakan"}),e.jsx("div",{className:"text-xl font-black",children:O.counts.district_chairs})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"font-black text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-5 h-5 text-primary-blue"}),"Atamalar (Yetki/letiim)"]}),(O.assignments||[]).length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Henz bir atama yok."}):e.jsx("div",{className:"space-y-3",children:(O.assignments||[]).map((q,I)=>{const V=q.unit||{},Te=V.contact||{};return e.jsx("div",{className:"border border-gray-200 rounded-xl p-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Avatar,{src:q.avatar_url,size:"44px"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-black text-gray-900 truncate",children:q.full_name}),e.jsxs("div",{className:"text-xs text-gray-500 truncate",children:["@",q.username]}),e.jsxs("div",{className:"text-xs text-gray-700 mt-1 inline-flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded-full bg-blue-50 border border-blue-100 text-primary-blue font-bold",children:V.unit_type}),V.province&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-gray-600",children:[e.jsx(ii,{className:"w-5 h-5"})," ",V.province]}),V.district_name&&e.jsxs("span",{className:"text-gray-600",children:["/ ",V.district_name]})]}),V.title&&e.jsx("div",{className:"text-xs text-gray-700 mt-1",children:V.title}),e.jsxs("div",{className:"mt-2 text-xs text-gray-600 space-y-1",children:[Te.phone&&e.jsxs("div",{children:[e.jsx(ed,{className:"w-5 h-5 inline-block mr-1"})," ",Te.phone]}),Te.email&&e.jsxs("div",{children:[e.jsx(hr,{className:"w-5 h-5 inline-block mr-1"})," ",Te.email]}),Te.website&&e.jsxs("div",{children:[e.jsx(fl,{className:"w-5 h-5 inline-block mr-1"})," ",Te.website]})]})]})]}),e.jsx("button",{type:"button",onClick:async()=>{try{C(!0);const Ke=await Ze.unassignPartyUnit(p.id,{user_id:q.user_id,key:V.key});if(!(Ke!=null&&Ke.success))throw new Error((Ke==null?void 0:Ke.error)||"Kaldrlamad.");const oe=await Ze.getPartyHierarchy(p.id);oe!=null&&oe.success&&P(oe.data||null)}catch(Ke){i((Ke==null?void 0:Ke.message)||"Kaldrlamad.")}finally{C(!1)}},className:"px-3 py-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-700 text-xs font-black",children:"Kaldr"})]})},"".concat(q.user_id,"-").concat(V.key,"-").concat(I))})})]})]})]})]})]})})]})},XS=()=>{const s="home_agenda_config_v1",l=D=>String(D||"").trim().toLowerCase().replace(//g,"c").replace(//g,"g").replace(//g,"i").replace(//g,"o").replace(//g,"s").replace(//g,"u").replace(/[^a-z0-9]+/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").slice(0,200),[i,d]=m.useState([]),[u,c]=m.useState(!0),[g,f]=m.useState(null),[v,b]=m.useState(""),[w,N]=m.useState(""),[k,_]=m.useState(!1),[M,T]=m.useState(""),[A,S]=m.useState(!1),[y,p]=m.useState(!1),[j,E]=m.useState({title:"",trending_score:5e3,total_polit_score:0,is_trending:!0,is_active:!0}),[C,O]=m.useState(!1),[P,L]=m.useState(""),[ce,Z]=m.useState({pinned:[{id:"",label:"1",color:"red"},{id:"",label:"2",color:"orange"},{id:"",label:"3",color:"amber"}]}),ie=async()=>{c(!0),b(""),N("");try{const D=await Ze.getAgendas({limit:200,search:M.trim()||void 0,is_active:A?void 0:"true"});if(D!=null&&D.schemaMissing&&(D!=null&&D.requiredSql)){N(String(D.requiredSql||"")),d([]);return}if(!(D!=null&&D.success))throw new Error((D==null?void 0:D.error)||"Gndemler yklenemedi.");d(Array.isArray(D==null?void 0:D.data)?D.data:[])}catch(D){d([]),b((D==null?void 0:D.message)||"Gndemler yklenemedi.")}finally{c(!1)}};m.useEffect(()=>{ie()},[A]),m.useEffect(()=>{let D=!1;return(async()=>{O(!0),L("");try{const $=await Ze.getSettings().catch(()=>null),B=$!=null&&$.success?$==null?void 0:$.data:null,Y=B&&typeof B=="object"?B[s]:null,Q=Y&&typeof Y=="object"?Y:typeof Y=="string"?(()=>{try{return JSON.parse(Y)}catch(I){return null}})():null,q=Array.isArray(Q==null?void 0:Q.pinned)?Q.pinned:null;if(!D&&q){const I=q.slice(0,10).map(Te=>({id:String((Te==null?void 0:Te.id)||"").trim(),label:Te!=null&&Te.label?String(Te.label).trim().slice(0,20):"",color:Te!=null&&Te.color?String(Te.color).trim().slice(0,20):""})),V=[{id:"",label:"1",color:"red"},{id:"",label:"2",color:"orange"},{id:"",label:"3",color:"amber"}];for(;I.length<3;)I.push(V[I.length]||{id:"",label:"",color:""});Z({pinned:I})}}catch($){D||L(String(($==null?void 0:$.message)||"Ana sayfa gndem ayarlar yklenemedi."))}finally{D||O(!1)}})(),()=>{D=!0}},[]),m.useEffect(()=>{const D=setTimeout(()=>{ie()},250);return()=>clearTimeout(D)},[M]);const le=m.useMemo(()=>(i||[]).slice().sort((D,$)=>Number($.trending_score||0)-Number(D.trending_score||0)),[i]),ye=(D,$)=>{d(B=>B.map(Y=>String(Y.id)===String(D)?{...Y,...$}:Y))},z=async D=>{const $=D==null?void 0:D.id;if($){f($),b(""),N("");try{const B=String(D.title||"").trim();if(!B)throw new Error("Balk bo olamaz.");if(B.length>80)throw new Error("Balk en fazla 80 karakter olmal.");const Y={title:B,is_active:!!D.is_active,is_trending:!!D.is_trending,trending_score:Number(D.trending_score||0),total_polit_score:Number(D.total_polit_score||0)},Q=await Ze.updateAgenda($,Y);if(Q!=null&&Q.schemaMissing&&(Q!=null&&Q.requiredSql))throw N(String(Q.requiredSql||"")),new Error("DB tablosu eksik.");if(!(Q!=null&&Q.success))throw new Error((Q==null?void 0:Q.error)||"Kaydedilemedi.");Q!=null&&Q.success&&(Q!=null&&Q.data)&&ye($,Q.data),ra.success("Kaydedildi.")}catch(B){b((B==null?void 0:B.message)||"Kaydedilemedi."),ra.error(String((B==null?void 0:B.message)||"Kaydedilemedi."))}finally{f(null)}}},X=async()=>{const D=String(j.title||"").trim();if(D){f("__create__"),b(""),N("");try{const $=await Ze.createAgenda({title:D,trending_score:Number(j.trending_score||0),total_polit_score:Number(j.total_polit_score||0),is_trending:!!j.is_trending,is_active:!!j.is_active});if($!=null&&$.schemaMissing&&($!=null&&$.requiredSql))throw N(String($.requiredSql||"")),new Error("DB tablosu eksik.");if(!($!=null&&$.success))throw new Error(($==null?void 0:$.error)||"Oluturulamad.");$!=null&&$.success&&($!=null&&$.data)&&(d(B=>[$.data,...B||[]]),E({title:"",trending_score:5e3,total_polit_score:0,is_trending:!0,is_active:!0}),p(!1))}catch($){b(($==null?void 0:$.message)||"Oluturulamad.")}finally{f(null)}}},G=async()=>{_(!0),b("");try{await re("/api/agendas?limit=1").catch(()=>null),await ie()}catch(D){b((D==null?void 0:D.message)||"Varsaylan gndemler yklenemedi.")}finally{_(!1)}};return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-black text-gray-900 mb-2 flex items-center gap-3",children:[e.jsx(mr,{className:"w-7 h-7 sm:w-6 sm:h-6 text-orange-500"}),"Gndem Ynetimi"]}),e.jsx("p",{className:"text-gray-600",children:"Ana sayfadaki ilk gndemler buradan belirlenir. (Pinli olanlar en stte grnr.)"})]}),e.jsxs("button",{type:"button",onClick:()=>p(D=>!D),className:"px-5 py-2 bg-primary-blue text-white rounded-lg hover:bg-blue-600 font-bold inline-flex items-center gap-2",children:[e.jsx(As,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Yeni Gndem"]})]}),y&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:[e.jsx("input",{value:j.title,onChange:D=>E($=>({...$,title:D.target.value})),placeholder:"Gndem bal",className:"md:col-span-2 px-4 py-3 border border-gray-300 rounded-lg"}),e.jsx("input",{value:j.trending_score,onChange:D=>E($=>({...$,trending_score:D.target.value})),placeholder:"trend_skoru",className:"px-4 py-3 border border-gray-300 rounded-lg",inputMode:"numeric"}),e.jsx("input",{value:j.total_polit_score,onChange:D=>E($=>({...$,total_polit_score:D.target.value})),placeholder:"balang_polit_puan",className:"px-4 py-3 border border-gray-300 rounded-lg",inputMode:"numeric"}),e.jsxs("button",{type:"button",onClick:X,disabled:g==="__create__",className:"px-4 py-3 bg-gray-900 hover:bg-black text-white rounded-lg font-black inline-flex items-center justify-center gap-2 disabled:opacity-50",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Olutur"]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!j.is_trending,onChange:D=>E($=>({...$,is_trending:D.target.checked})),className:"w-5 h-5 accent-primary-blue cursor-pointer"}),"Trend"]}),e.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:!!j.is_active,onChange:D=>E($=>({...$,is_active:D.target.checked})),className:"w-5 h-5 accent-primary-blue cursor-pointer"}),"Aktif"]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-5 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"font-black text-gray-900",children:"Ana Sayfa Gndem Slotlar (13)"}),e.jsx("button",{type:"button",disabled:C,onClick:async()=>{O(!0),L("");try{const D={...ce};D.pinned=(Array.isArray(D.pinned)?D.pinned:[]).map(B=>({id:String((B==null?void 0:B.id)||"").trim(),label:B!=null&&B.label?String(B.label).trim().slice(0,20):"",color:B!=null&&B.color?String(B.color).trim().slice(0,20):""})).filter(B=>B.id);const $=await Ze.updateSettings({[s]:D}).catch(()=>null);if(!($!=null&&$.success))throw new Error(($==null?void 0:$.error)||"Kaydedilemedi.");ra.success("Ana sayfa gndem slotlar kaydedildi.")}catch(D){L(String((D==null?void 0:D.message)||"Kaydedilemedi."))}finally{O(!1)}},className:"px-4 py-2 rounded-lg bg-gray-900 text-white font-black disabled:opacity-60",children:C?"Kaydediliyor":"Kaydet"})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Not: lk 3 gndem AgendaBarda ate efektleriyle ne kar. Buradan sabitleyebilirsin."}),P?e.jsx("div",{className:"mt-2 text-sm text-red-600 font-semibold",children:P}):null,e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-3",children:(ce.pinned||[]).slice(0,3).map((D,$)=>e.jsxs("div",{className:"rounded-xl border border-gray-200 p-4",children:[e.jsxs("div",{className:"text-xs font-black text-gray-700 mb-2",children:["Slot ",$+1]}),e.jsxs("select",{value:String((D==null?void 0:D.id)||""),onChange:B=>{const Y=B.target.value;Z(Q=>{const q=Array.isArray(Q==null?void 0:Q.pinned)?[...Q.pinned]:[];for(;q.length<3;)q.push({id:"",label:"",color:""});return q[$]={...q[$]||{},id:Y},{...Q,pinned:q}})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-white",children:[e.jsx("option",{value:"",children:"(bo)"}),le.slice(0,200).map(B=>e.jsx("option",{value:B.id,children:String(B.title||"").slice(0,80)},B.id))]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2",children:[e.jsx("input",{value:String((D==null?void 0:D.label)||""),onChange:B=>{const Y=B.target.value;Z(Q=>{const q=Array.isArray(Q==null?void 0:Q.pinned)?[...Q.pinned]:[];for(;q.length<3;)q.push({id:"",label:"",color:""});return q[$]={...q[$]||{},label:Y},{...Q,pinned:q}})},placeholder:"Etiket (ops.)",className:"px-3 py-2 border border-gray-300 rounded-lg"}),e.jsxs("select",{value:String((D==null?void 0:D.color)||""),onChange:B=>{const Y=B.target.value;Z(Q=>{const q=Array.isArray(Q==null?void 0:Q.pinned)?[...Q.pinned]:[];for(;q.length<3;)q.push({id:"",label:"",color:""});return q[$]={...q[$]||{},color:Y},{...Q,pinned:q}})},className:"px-3 py-2 border border-gray-300 rounded-lg bg-white",title:"Etiket rengi",children:[e.jsx("option",{value:"",children:"(varsaylan)"}),e.jsx("option",{value:"red",children:"red"}),e.jsx("option",{value:"orange",children:"orange"}),e.jsx("option",{value:"amber",children:"amber"}),e.jsx("option",{value:"green",children:"green"}),e.jsx("option",{value:"blue",children:"blue"}),e.jsx("option",{value:"purple",children:"purple"}),e.jsx("option",{value:"gray",children:"gray"})]})]})]},$))})]}),w?e.jsxs("div",{className:"mb-4 bg-amber-50 border border-amber-200 rounded-xl p-4",children:[e.jsx("div",{className:"font-black text-amber-900",children:"DB tablosu eksik: `agendas`"}),e.jsx("div",{className:"text-sm text-amber-900 mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:w})]}):null,e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 mb-4 flex flex-col md:flex-row gap-3 md:items-center md:justify-between",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-6 h-6 sm:w-5 sm:h-5 text-gray-400"}),e.jsx("input",{value:M,onChange:D=>T(D.target.value),placeholder:"Gndem ara (balk/ksa adres)",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 cursor-pointer text-sm text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:D=>S(D.target.checked),className:"w-5 h-5 accent-primary-blue cursor-pointer"}),"Pasifleri de gster"]})]}),v&&e.jsx("div",{className:"mb-4 text-sm text-red-700 bg-red-50 border border-red-200 rounded-lg p-3",children:v}),u?e.jsx("div",{className:"text-gray-600",children:"Ykleniyor"}):le.length===0?e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Henz gndem yok"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Gndem listesi veritabanndan gelir. stersen varsaylan gndem listesini tek tkla oluturabilirsin."}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{type:"button",onClick:G,disabled:k,className:"px-5 py-3 rounded-xl bg-gray-900 hover:bg-black text-white font-black disabled:opacity-60",children:k?"Varsaylan gndemler oluturuluyor":"Varsaylan gndemleri olutur"}),e.jsx("button",{type:"button",onClick:()=>p(!0),className:"px-5 py-3 rounded-xl border border-gray-300 bg-white hover:bg-gray-50 text-gray-900 font-black",children:"Yeni gndem ekle"})]})]}):e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left font-black text-gray-700",children:"Balk"}),e.jsx("th",{className:"px-4 py-3 text-left font-black text-gray-700",children:"Ksa Adres"}),e.jsx("th",{className:"px-4 py-3 text-left font-black text-gray-700",children:"Trend Skoru"}),e.jsx("th",{className:"px-4 py-3 text-left font-black text-gray-700",children:"PolitPuan"}),e.jsx("th",{className:"px-4 py-3 text-left font-black text-gray-700",children:"Trend"}),e.jsx("th",{className:"px-4 py-3 text-left font-black text-gray-700",children:"Aktif"}),e.jsx("th",{className:"px-4 py-3 text-right font-black text-gray-700",children:"lem"})]})}),e.jsxs("tbody",{className:"divide-y",children:[le.map(D=>{var $,B;return e.jsxs("tr",{className:D.is_active?"":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{value:D.title||"",onChange:Y=>ye(D.id,{title:Y.target.value}),maxLength:80,className:"w-full px-3 py-2 border border-gray-200 rounded-lg"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"w-full px-3 py-2 border border-gray-200 rounded-lg font-mono text-xs bg-gray-50 text-gray-800",children:String(D.slug||"").trim()||l(D.title)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{value:($=D.trending_score)!=null?$:0,onChange:Y=>ye(D.id,{trending_score:Y.target.value}),className:"w-[120px] px-3 py-2 border border-gray-200 rounded-lg",inputMode:"numeric"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{value:(B=D.total_polit_score)!=null?B:0,onChange:Y=>ye(D.id,{total_polit_score:Y.target.value}),className:"w-[120px] px-3 py-2 border border-gray-200 rounded-lg",inputMode:"numeric"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:!!D.is_trending,onChange:async Y=>{const Q=!!Y.target.checked,q={...D,is_trending:Q};ye(D.id,{is_trending:Q}),await z(q)},className:"w-5 h-5 accent-primary-blue cursor-pointer"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("input",{type:"checkbox",checked:!!D.is_active,onChange:async Y=>{const Q=!!Y.target.checked,q={...D,is_active:Q};ye(D.id,{is_active:Q}),await z(q)},className:"w-5 h-5 accent-primary-blue cursor-pointer"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsxs("button",{type:"button",onClick:()=>z(D),disabled:String(g)===String(D.id),className:"px-3 py-2 rounded-lg bg-gray-900 hover:bg-black text-white font-black inline-flex items-center gap-2 disabled:opacity-50",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),"Kaydet"]})})})]},D.id)}),le.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-4 py-10 text-center text-gray-500",children:"Kayt bulunamad."})})]})]})})})]})},ry=r=>{if(r&&typeof r=="object")return r;const s=String(r!=null?r:"").trim();if(!s)return null;try{return JSON.parse(s)}catch(l){return null}},JS=()=>{const[r,s]=m.useState(!1),[l,i]=m.useState(""),[d,u]=m.useState(""),[c,g]=m.useState({legislatureName:"TBMM",legislatureYear:"",termStart:"",termEnd:"",speakerName:"",speakerProfileId:"",description:"",officials:[]}),[f,v]=m.useState((Array.isArray(ul)?ul:[]).map(y=>({name:y.name,shortName:y.shortName,seats:y.seats,color:y.color,slug:"",logo_url:""})));m.useEffect(()=>{let y=!0;return(async()=>{s(!0);try{const p=await re("/api/settings",{method:"GET"});if(!y||(p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&u(String(p.requiredSql||"")),!(p!=null&&p.success)))return;const j=p!=null&&p.data&&typeof p.data=="object"?p.data:{},E=ry(j.parliament_distribution),C=ry(j.parliament_info);Array.isArray(E)&&E.length>0&&v(E.map(O=>({name:String((O==null?void 0:O.name)||"").trim(),shortName:String((O==null?void 0:O.shortName)||(O==null?void 0:O.short_name)||"").trim(),seats:Math.max(0,Number((O==null?void 0:O.seats)||0)||0),color:String((O==null?void 0:O.color)||"").trim(),slug:String((O==null?void 0:O.slug)||"").trim(),logo_url:String((O==null?void 0:O.logo_url)||"").trim()})).filter(O=>O.shortName&&O.name)),C&&typeof C=="object"&&g(O=>({...O,legislatureName:String(C.legislatureName||C.legislature_name||O.legislatureName).trim(),legislatureYear:String(C.legislatureYear||C.legislature_year||O.legislatureYear).trim(),termStart:String(C.termStart||C.term_start||O.termStart).trim(),termEnd:String(C.termEnd||C.term_end||O.termEnd).trim(),speakerName:String(C.speakerName||C.speaker_name||O.speakerName).trim(),speakerProfileId:String(C.speakerProfileId||C.speaker_profile_id||O.speakerProfileId).trim(),description:String(C.description||O.description).trim(),officials:Array.isArray(C.officials)?C.officials.map(P=>({role:String((P==null?void 0:P.role)||"").trim(),name:String((P==null?void 0:P.name)||"").trim(),profileId:String((P==null?void 0:P.profileId)||(P==null?void 0:P.profile_id)||"").trim()})).filter(P=>P.role&&P.name):O.officials}))}catch(p){}finally{y&&s(!1)}})(),()=>{y=!1}},[]);const b=m.useMemo(()=>Array.isArray(f)?f.reduce((y,p)=>y+(Number((p==null?void 0:p.seats)||0)||0),0):0,[f]),w=()=>{v(y=>[...Array.isArray(y)?y:[],{name:"",shortName:"",seats:0,color:"#6B7280",slug:"",logo_url:""}])},N=y=>{v(p=>Array.isArray(p)?p.filter((j,E)=>E!==y):[])},k=(y,p)=>{v(j=>(Array.isArray(j)?j:[]).map((E,C)=>C===y?{...E,...p}:E))},_=async()=>{s(!0),i("");try{const y=await re("/api/parties",{method:"GET"}).catch(()=>null),p=Array.isArray(y)?y:Array.isArray(y==null?void 0:y.data)?y.data:[],j=C=>String(C||"").trim().toUpperCase("tr-TR"),E=new Map((p||[]).map(C=>[j((C==null?void 0:C.short_name)||""),C]).filter(([C])=>C));v(C=>(Array.isArray(C)?C:[]).map(O=>{const P=E.get(j(O==null?void 0:O.shortName))||null;return P?{...O,name:String((O==null?void 0:O.name)||"").trim()?O.name:String((P==null?void 0:P.name)||(O==null?void 0:O.name)||"").trim(),color:String((O==null?void 0:O.color)||"").trim()?O.color:String((P==null?void 0:P.color)||(O==null?void 0:O.color)||"").trim(),slug:String((O==null?void 0:O.slug)||"").trim()?O.slug:String((P==null?void 0:P.slug)||(O==null?void 0:O.slug)||"").trim(),logo_url:String((O==null?void 0:O.logo_url)||"").trim()?O.logo_url:String((P==null?void 0:P.logo_url)||(P==null?void 0:P.logoUrl)||(O==null?void 0:O.logo_url)||"").trim()}:O})),i(" Partilerden dolduruldu"),setTimeout(()=>i(""),2500)}catch(y){i(" ".concat((y==null?void 0:y.message)||"Partilerden doldurulamad"))}finally{s(!1)}},M=async()=>{s(!0),i("");try{const y={parliament_info:{legislatureName:c.legislatureName,legislatureYear:c.legislatureYear,termStart:c.termStart,termEnd:c.termEnd,speakerName:c.speakerName,speakerProfileId:c.speakerProfileId,description:c.description,officials:Array.isArray(c.officials)?c.officials.map(j=>({role:String((j==null?void 0:j.role)||"").trim(),name:String((j==null?void 0:j.name)||"").trim(),profileId:String((j==null?void 0:j.profileId)||"").trim()})).filter(j=>j.role&&j.name):[]},parliament_distribution:(Array.isArray(f)?f:[]).map(j=>({name:String((j==null?void 0:j.name)||"").trim(),shortName:String((j==null?void 0:j.shortName)||"").trim(),seats:Math.max(0,Number((j==null?void 0:j.seats)||0)||0),color:String((j==null?void 0:j.color)||"").trim(),slug:String((j==null?void 0:j.slug)||"").trim(),logo_url:String((j==null?void 0:j.logo_url)||"").trim()})).filter(j=>j.shortName&&j.name)},p=await re("/api/settings",{method:"PUT",body:JSON.stringify(y)});p!=null&&p.success?(i(" Kaydedildi"),setTimeout(()=>i(""),2500)):(p!=null&&p.schemaMissing&&(p!=null&&p.requiredSql)&&u(String(p.requiredSql||"")),i(" ".concat((p==null?void 0:p.error)||"Kaydedilemedi")))}catch(y){i(" ".concat((y==null?void 0:y.message)||"Kaydedilemedi"))}finally{s(!1)}},T=()=>{g(y=>({...y,officials:[...Array.isArray(y.officials)?y.officials:[],{role:"",name:"",profileId:""}]}))},A=y=>{g(p=>({...p,officials:(Array.isArray(p.officials)?p.officials:[]).filter((j,E)=>E!==y)}))},S=(y,p)=>{g(j=>({...j,officials:(Array.isArray(j.officials)?j.officials:[]).map((E,C)=>C===y?{...E,...p}:E)}))};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-black text-gray-900 flex items-center gap-2",children:[e.jsx(hd,{className:"w-7 h-7 text-primary-blue"}),"Meclis Ynetimi"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ana sayfadaki meclis dalm ve Meclis Dalm sayfas buradan ynetilir."})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[l?e.jsx("span",{className:"text-sm font-bold ".concat(l.includes("")?"text-green-600":"text-red-600"),children:l}):null,e.jsxs("button",{onClick:M,disabled:r,className:"px-5 py-3 bg-primary-blue text-white rounded-xl hover:bg-blue-600 flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ks,{className:"w-6 h-6 sm:w-5 sm:h-5"}),r?"Kaydediliyor":"Kaydet"]})]})]}),d?e.jsxs("div",{className:"rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"DB tablosu eksik: `site_settings`"}),e.jsx("div",{className:"text-sm mt-1",children:"Supabase SQL Editorda u SQLi altrn:"}),e.jsx("pre",{className:"mt-3 p-3 rounded-lg bg-white border border-amber-200 overflow-auto text-xs text-gray-800",children:d})]}):null,e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-5",children:[e.jsx("div",{className:"text-lg font-black text-gray-900 mb-4",children:"Genel Bilgiler"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Kurum Ad"}),e.jsx("input",{value:c.legislatureName,onChange:y=>g(p=>({...p,legislatureName:y.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"TBMM"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Yasama Yl"}),e.jsx("input",{value:c.legislatureYear,onChange:y=>g(p=>({...p,legislatureYear:y.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"28. Dnem"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Balang Tarihi"}),e.jsx("input",{value:c.termStart,onChange:y=>g(p=>({...p,termStart:y.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"YYYY-MM-DD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Biti Tarihi"}),e.jsx("input",{value:c.termEnd,onChange:y=>g(p=>({...p,termEnd:y.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"YYYY-MM-DD"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Meclis Bakan"}),e.jsx("input",{value:c.speakerName,onChange:y=>g(p=>({...p,speakerName:y.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"Ad Soyad"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Bakan Profil ID (ops.)"}),e.jsx("input",{value:c.speakerProfileId,onChange:y=>g(p=>({...p,speakerProfileId:y.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3",placeholder:"Kullanc ID"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700",children:"Aklama (ops.)"}),e.jsx("textarea",{value:c.description,onChange:y=>g(p=>({...p,description:y.target.value})),className:"w-full mt-1 border border-gray-300 rounded-xl p-3 min-h-[90px]",placeholder:"Meclis hakknda ksa aklama"})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Meclis Ynetimi (Dier Grevliler)"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Rol + isim zorunlu, profil ID opsiyonel."})]}),e.jsxs("button",{type:"button",onClick:T,className:"px-4 py-2 rounded-xl bg-gray-900 hover:bg-black text-white font-bold flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5"}),"Yeni Grevli"]})]}),e.jsxs("div",{className:"space-y-3",children:[(Array.isArray(c.officials)?c.officials:[]).map((y,p)=>e.jsx("div",{className:"border border-gray-200 rounded-2xl p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-3 items-end",children:[e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Rol"}),e.jsx("input",{value:y.role,onChange:j=>S(p,{role:j.target.value}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",placeholder:"rn: Bakanvekili"})]}),e.jsxs("div",{className:"md:col-span-3",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"sim"}),e.jsx("input",{value:y.name,onChange:j=>S(p,{name:j.target.value}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",placeholder:"Ad Soyad"})]}),e.jsxs("div",{className:"md:col-span-1",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Profil ID (ops.)"}),e.jsx("input",{value:y.profileId,onChange:j=>S(p,{profileId:j.target.value}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",placeholder:"ID"})]}),e.jsx("div",{className:"md:col-span-1 flex items-center justify-end",children:e.jsx("button",{type:"button",onClick:()=>A(p),className:"p-2 rounded-xl border border-gray-300 hover:bg-gray-50","aria-label":"Sil",children:e.jsx(Ka,{className:"w-5 h-5 text-gray-700"})})})]})},"".concat(y.role||"role","-").concat(p))),(Array.isArray(c.officials)?c.officials.length:0)===0?e.jsx("div",{className:"text-sm text-gray-600",children:"Henz grevli eklenmedi."}):null]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Sandalye Dalm"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Toplam sandalye: ",b]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{type:"button",onClick:_,disabled:r,className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-900 font-black flex items-center gap-2 disabled:opacity-50",title:"Parti Ynetimi'ndeki logo/slug/renk alanlarn buraya tar",children:[e.jsx(fr,{className:"w-5 h-5"}),"Partilerden Doldur"]}),e.jsxs("button",{type:"button",onClick:w,className:"px-4 py-2 rounded-xl bg-gray-900 hover:bg-black text-white font-bold flex items-center gap-2",children:[e.jsx(As,{className:"w-5 h-5"}),"Yeni Satr"]})]})]}),e.jsx("div",{className:"space-y-3",children:(f||[]).map((y,p)=>e.jsxs("div",{className:"border border-gray-200 rounded-2xl p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-3 items-end",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Parti Ad"}),e.jsx("input",{value:y.name,onChange:j=>k(p,{name:j.target.value}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",placeholder:"Parti ad"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Ksa Ad"}),e.jsx("input",{value:y.shortName,onChange:j=>k(p,{shortName:j.target.value}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",placeholder:"CHP"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Sandalye"}),e.jsx("input",{value:y.seats,onChange:j=>k(p,{seats:Number(j.target.value||0)}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",type:"number",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Renk"}),e.jsx("input",{value:y.color,onChange:j=>k(p,{color:j.target.value}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",placeholder:"#009FD6"})]}),e.jsx("div",{className:"flex items-center justify-end",children:e.jsx("button",{type:"button",onClick:()=>N(p),className:"p-2 rounded-xl border border-gray-300 hover:bg-gray-50","aria-label":"Sil",children:e.jsx(Ka,{className:"w-5 h-5 text-gray-700"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Party Slug (ops.)"}),e.jsx("input",{value:y.slug,onChange:j=>k(p,{slug:j.target.value}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",placeholder:"chp"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Logo URL (ops.)"}),e.jsx("input",{value:y.logo_url,onChange:j=>k(p,{logo_url:j.target.value}),className:"w-full mt-1 border border-gray-300 rounded-xl p-2.5",placeholder:"https://..."})]})]})]},"".concat(y.shortName||"row","-").concat(p)))})]})]})},QS=()=>{const[r]=ud(),s=r.get("token")||"",[l,i]=m.useState(!0),[d,u]=m.useState(!1),[c,g]=m.useState(""),[f,v]=m.useState("");return m.useEffect(()=>{s?(async()=>{i(!0),u(!1);try{const w=await fetch("/api/users/delete-confirm?token=".concat(encodeURIComponent(s))),N=await w.json().catch(()=>({}));if(!w.ok||!(N!=null&&N.success))throw new Error((N==null?void 0:N.error)||"Onay baarsz.");u(!0),g((N==null?void 0:N.message)||"Hesabnz silinmek zere kayda alnd. 90 gn iinde grnrlnz kaldrlacaktr."),v((N==null?void 0:N.scheduled_for)||"")}catch(w){u(!1),g((w==null?void 0:w.message)||"Onay baarsz.")}finally{i(!1)}})():(i(!1),u(!1),g("Token eksik."))},[s]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-lg bg-white rounded-3xl shadow-xl p-8 border border-gray-100",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto rounded-2xl bg-blue-50 border border-blue-100 flex items-center justify-center mb-4",children:e.jsx(on,{className:"w-8 h-8 text-primary-blue"})}),e.jsx("h1",{className:"text-2xl font-black text-gray-900",children:"Hesap Silme Onay"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Gvenlik iin bu ilem eposta ile onaylanr."})]}),l?e.jsx("div",{className:"text-center py-10 text-gray-600",children:"Onaylanyor"}):d?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4 text-green-800 flex items-start gap-2",children:[e.jsx(Ga,{className:"w-6 h-6 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:"Onayland"}),e.jsx("div",{className:"text-sm",children:c}),f&&e.jsxs("div",{className:"text-xs text-green-700 mt-2",children:["Planlanan kesin silme: ",e.jsx("span",{className:"font-semibold",children:new Date(f).toLocaleString("tr-TR")})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 text-blue-900",children:[e.jsx("div",{className:"font-bold mb-1",children:"nemli"}),e.jsxs("div",{className:"text-sm",children:["Bu sre boyunca hesabnz pasif bekler ve profiliniz/ierikleriniz dier kullanclara grnmez. sterseniz giri yaparak ",e.jsx("strong",{children:"Ayarlar  Hesab Sil"})," ekranndan hesabnz tekrar aktif edebilirsiniz."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Tt,{to:"/login-new",className:"flex-1 text-center bg-primary-blue hover:bg-blue-600 text-white font-bold py-3 rounded-xl",children:"Giri Yap"}),e.jsx(Tt,{to:"/",className:"flex-1 text-center border border-gray-300 hover:bg-gray-50 text-gray-800 font-bold py-3 rounded-xl",children:"Ana Sayfa"})]})]}):e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-800 flex items-start gap-2",children:[e.jsx(fs,{className:"w-6 h-6 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold",children:"Onaylanamad"}),e.jsx("div",{className:"text-sm",children:c}),e.jsx("div",{className:"text-xs text-red-700 mt-2",children:"Balant 24 saat iinde geerlidir."})]})]})]})})},ZS=()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-10",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-50 border border-blue-100 flex items-center justify-center",children:e.jsx(hl,{className:"w-6 h-6 text-primary-blue"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Hakkmzda"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Polithane: zgr, ak ve effaf siyaset."})]})]}),e.jsx("div",{className:"prose prose-gray max-w-none",children:e.jsx("p",{children:"Polithane, farkl grlerin bir arada konuabildii, dorulanabilir bilgiyle beslenen ve effafl merkeze alan bir sosyal siyaset platformudur."})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-8",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-5 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(ts,{className:"w-5 h-5 text-primary-blue"})," Topluluk"]}),e.jsx("div",{className:"text-sm text-gray-700 mt-2",children:"yeler; siyaseti, tekilat, medya ve vatanda profilleriyle ayn zeminde etkileim kurar."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-5 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(Kj,{className:"w-5 h-5 text-primary-blue"})," Diyalog"]}),e.jsx("div",{className:"text-sm text-gray-700 mt-2",children:"Hakaret/iddet/zararl ieriklere kar moderasyon; fikir eitliliine ise tam alan."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-5 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(hl,{className:"w-5 h-5 text-primary-blue"})," effaflk"]}),e.jsx("div",{className:"text-sm text-gray-700 mt-2",children:"Polit Puan gibi mekaniklerin mant anlalr ve takip edilebilir ekilde sunulur."})]})]})]})})}),WS=()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-10",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-purple-50 border border-purple-100 flex items-center justify-center",children:e.jsx(r0,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Misyonumuz"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Toplum iin daha anlalr ve hesap verebilir bir siyaset."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(Hj,{className:"w-5 h-5 text-purple-600"})," Kaliteli ierik"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Bilgiye dayal, kaynak gsterilebilir ve toplumsal fayday byten paylamlar ne karmay hedefleriz."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(on,{className:"w-5 h-5 text-purple-600"})," Gvenli alan"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Hakaret, taciz, spam ve zararl ieriklere kar gl kurallar ve tutarl moderasyon uygularz."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(r0,{className:"w-5 h-5 text-purple-600"})," effaflk"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Platform ii etkileimlerin ve skorlamalarn mantn anlalr klar; kullancya kontrol sunarz."})]})]})]})})}),ek=()=>{const[r,s]=m.useState("info@polithane.com");return m.useEffect(()=>{let l=!0;return(async()=>{var i;try{const d=await re("/api/public/site",{method:"GET"}).catch(()=>null),u=String(((i=d==null?void 0:d.data)==null?void 0:i.contactEmail)||"").trim();l&&u&&s(u)}catch(d){}})(),()=>{l=!1}},[]),e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-10",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-emerald-50 border border-emerald-100 flex items-center justify-center",children:e.jsx(Vj,{className:"w-6 h-6 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"letiim"}),e.jsx("p",{className:"text-sm text-gray-600",children:"neri, hata bildirimi ve destek iin bize ulan."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(hr,{className:"w-5 h-5 text-emerald-600"})," Eposta"]}),e.jsx("div",{className:"text-sm text-gray-700 mt-2",children:r})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(ed,{className:"w-5 h-5 text-emerald-600"})," Telefon"]}),e.jsx("div",{className:"text-sm text-gray-700 mt-2",children:"+90 (212) 123 45 67"})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(ii,{className:"w-5 h-5 text-emerald-600"})," Konum"]}),e.jsx("div",{className:"text-sm text-gray-700 mt-2",children:"Trkiye"})]})]}),e.jsxs("div",{className:"mt-8 rounded-2xl border border-gray-200 p-6",children:[e.jsx("div",{className:"font-black text-gray-900",children:"Hzl Not"}),e.jsx("div",{className:"text-sm text-gray-700 mt-2",children:"Hesap/yelik sreleri, ierik raporlar ve gvenlik bildirimleri iin mmknse profil linkinizi ve ekran grntsn ekleyin. Bylece daha hzl yardmc olabiliriz."})]})]})})})},tk=()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-10",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gray-50 border border-gray-200 flex items-center justify-center",children:e.jsx(rn,{className:"w-6 h-6 text-gray-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Kullanm artlar"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Bu sayfa genel bilgilendirme amaldr."})]})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(on,{className:"w-5 h-5 text-primary-blue"})," Topluluk Kurallar"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Hakaret, taciz, nefret sylemi, spam ve zararl ierikler yasaktr. erikler gerektiinde moderasyona alnabilir veya kaldrlabilir."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-yellow-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(gi,{className:"w-5 h-5 text-yellow-700"})," Sorumluluk"]}),e.jsx("p",{className:"text-sm text-gray-800 mt-2",children:"Paylalan ieriklerin sorumluluu ierik sahibine aittir. Platform, mevzuata uygun ekilde gerekli durumlarda ilem yapabilir."})]})]})]})})}),ak=()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-10",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-50 border border-blue-100 flex items-center justify-center",children:e.jsx(nn,{className:"w-6 h-6 text-primary-blue"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"Gizlilik Politikas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Kiisel verilerin korunmas ve platform gizlilii."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(hl,{className:"w-5 h-5 text-primary-blue"})," Gvenlik"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Hesap gvenlii, oturum ynetimi ve ktye kullanm nleme mekanizmalar uygulanr."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(ml,{className:"w-5 h-5 text-primary-blue"})," Gizlilik tercihleri"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Gizlilik ayarlarnz; profil grnrl ve bildirim tercihleri gibi seeneklerle ynetilebilir."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(nn,{className:"w-5 h-5 text-primary-blue"})," Veri minimizasyonu"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Hizmet iin gerekli olmayan veriler istenmez; saklama sreleri ve silme sreleri effaftr."})]})]})]})})}),sk=()=>e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-10",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-amber-50 border border-amber-100 flex items-center justify-center",children:e.jsx(n0,{className:"w-6 h-6 text-amber-700"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-black text-gray-900",children:"erez Politikas"}),e.jsx("p",{className:"text-sm text-gray-600",children:"erezler ve benzeri teknolojiler hakknda."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(hl,{className:"w-5 h-5 text-amber-700"})," Zorunlu erezler"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Oturum, gvenlik ve temel ilevler iin gereklidir (rn: giri durumunuz)."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(Fj,{className:"w-5 h-5 text-amber-700"})," Tercihler"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Grnm ve bildirim ayarlar gibi tercihlerinizi hatrlamak iin kullanlabilir."})]}),e.jsxs("div",{className:"rounded-2xl border border-gray-200 p-6 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2 font-black text-gray-900",children:[e.jsx(n0,{className:"w-5 h-5 text-amber-700"})," Analiz"]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Performans ve kullanm analizleri iin snrl lde kullanlabilir (varsa)."})]})]})]})})}),rk=r=>{const s=String(r||"").trim().toUpperCase("tr-TR");return s==="AK PART"||s==="AK PARTI"?"akp":s==="CHP"?"chp":s==="MHP"?"mhp":s==="DEM PART"||s==="DEM PARTI"||s==="DEM"?"dem":s==="Y PART"||s==="IYI PARTI"||s==="IYI PART"?"iyi":s==="YEN YOL"?"yeni-yol":s==="YRP"||s==="YENDEN REFAH"?"yrp":s==="HRDAVA"||s==="HDAPAR"||s==="HUDA PAR"||s==="HDA PAR"?"hurdava":s==="TP"||s==="TIP"?"tip":s==="BAIMSIZ"||s==="BAGIMSIZ"?"bagimsiz":s==="DBP"?"dbp":s==="EMEP"?"emep":s==="SAADET"||s==="SP"||s==="SAADET PARTS"||s==="SAADET PARTISI"?"saadet":s==="DSP"?"dsp":s==="DP"?"dp":null},nk=()=>{const r=Qt(),[s,l]=m.useState(ul),[i,d]=m.useState({legislatureName:"",legislatureYear:"",termStart:"",termEnd:"",speakerName:"",speakerProfileId:"",description:"",officials:[]});m.useEffect(()=>{let c=!0;return(async()=>{var b,w;const g=await re("/api/public/parliament",{method:"GET"}).catch(()=>null),f=(b=g==null?void 0:g.data)==null?void 0:b.distribution,v=(w=g==null?void 0:g.data)==null?void 0:w.info;c&&(Array.isArray(f)&&f.length>0&&l(f),v&&typeof v=="object"&&d(N=>({...N,...v,officials:Array.isArray(v.officials)?v.officials:N.officials})))})(),()=>{c=!1}},[]);const u=m.useMemo(()=>(Array.isArray(s)?s:[]).slice().sort((g,f)=>(Number((f==null?void 0:f.seats)||0)||0)-(Number((g==null?void 0:g.seats)||0)||0)).map(g=>{const f=Number((g==null?void 0:g.seats)||0)||0,v=f/wo*100,b=String((g==null?void 0:g.slug)||"").trim()||rk(g==null?void 0:g.shortName)||"";return{...g,seats:f,pct:v,slug:b}}),[s]);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-8",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-[#0B3D91] text-white",children:e.jsx(hd,{className:"w-7 h-7"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-black text-gray-900",children:"Meclis Dalm"}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:[(i==null?void 0:i.legislatureName)||"TBMM",i!=null&&i.legislatureYear?"  ".concat(i.legislatureYear):""," (toplam ",wo," sandalye)."]})]})]}),((i==null?void 0:i.termStart)||(i==null?void 0:i.termEnd)||(i==null?void 0:i.speakerName))&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs",children:[i!=null&&i.termStart||i!=null&&i.termEnd?e.jsxs("span",{className:"px-3 py-1 rounded-full bg-gray-100 text-gray-800 font-bold",children:["Dnem: ",(i==null?void 0:i.termStart)||"","  ",(i==null?void 0:i.termEnd)||""]}):null,i!=null&&i.speakerName?i!=null&&i.speakerProfileId?e.jsxs("button",{type:"button",className:"px-3 py-1 rounded-full bg-blue-50 text-primary-blue font-black hover:bg-blue-100",onClick:()=>r("/profile/".concat(encodeURIComponent(i.speakerProfileId))),children:["Bakan: ",i.speakerName]}):e.jsxs("span",{className:"px-3 py-1 rounded-full bg-blue-50 text-primary-blue font-black",children:["Bakan: ",i.speakerName]}):null]})]}),e.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-900 font-black",onClick:()=>r("/"),children:"Ana Sayfa"})]}),e.jsx("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-4",children:u.map(c=>e.jsxs("button",{type:"button",className:"w-full text-left p-4 rounded-2xl border border-gray-200 hover:bg-gray-50 transition-colors",onClick:()=>{c.slug&&r("/party/".concat(c.slug))},children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-lg font-black text-gray-900 truncate",children:c.shortName}),e.jsx("div",{className:"text-sm text-gray-600 truncate",children:c.name})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("div",{className:"text-xl font-black text-primary-blue",children:c.seats}),e.jsxs("div",{className:"text-xs font-bold text-gray-600",children:[c.pct.toFixed(1),"%"]})]})]}),e.jsx("div",{className:"mt-3 h-2 w-full bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full",style:{width:"".concat(Math.min(100,c.pct),"%"),backgroundColor:c.color}})})]},c.shortName))}),Array.isArray(i==null?void 0:i.officials)&&i.officials.length>0?e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"text-lg font-black text-gray-900",children:"Meclis Ynetimi"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Dier grevliler"}),e.jsx("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-3",children:i.officials.map((c,g)=>{const f=String((c==null?void 0:c.role)||"").trim(),v=String((c==null?void 0:c.name)||"").trim(),b=String((c==null?void 0:c.profileId)||"").trim();return!f||!v?null:e.jsxs("div",{className:"p-4 rounded-2xl border border-gray-200 bg-white",children:[e.jsx("div",{className:"text-xs font-black text-gray-500 uppercase",children:f}),b?e.jsx("button",{type:"button",className:"mt-1 text-base font-black text-primary-blue hover:underline text-left",onClick:()=>r("/profile/".concat(encodeURIComponent(b))),children:v}):e.jsx("div",{className:"mt-1 text-base font-black text-gray-900",children:v})]},"".concat(f,"-").concat(g))})})]}):null,e.jsx("div",{className:"mt-8 text-xs text-gray-500",children:i!=null&&i.description?e.jsx("span",{children:String(i.description)}):e.jsxs("span",{children:["Not: Meclis ynetimi/bakanlk bilgileri admin panelinden ynetilebilir.",i!=null&&i.legislatureYear?" Yasama yl: ".concat(i.legislatureYear):"",i!=null&&i.termStart?"  Balang: ".concat(i.termStart):"",i!=null&&i.termEnd?"  Biti: ".concat(i.termEnd):""]})})]})})})},ny=r=>{const s=String(r||"").trim().toUpperCase("tr-TR");return s==="AK PART"||s==="AK PARTI"?"akp":s==="CHP"?"chp":s==="MHP"?"mhp":s==="DEM PART"||s==="DEM PARTI"||s==="DEM"?"dem":s==="Y PART"||s==="IYI PARTI"||s==="IYI PART"?"iyi":s==="YEN YOL"?"yeni-yol":s==="YRP"||s==="YENDEN REFAH"?"yrp":s==="HRDAVA"||s==="HDAPAR"||s==="HUDA PAR"||s==="HDA PAR"?"hurdava":s==="TP"||s==="TIP"?"tip":s==="BAIMSIZ"||s==="BAGIMSIZ"?"bagimsiz":s==="DBP"?"dbp":s==="EMEP"?"emep":s==="SAADET"||s==="SP"||s==="SAADET PARTS"||s==="SAADET PARTISI"?"saadet":s==="DSP"?"dsp":s==="DP"?"dp":null},lk=()=>{const r=Qt(),[s,l]=m.useState([]),[i,d]=m.useState(ul);m.useEffect(()=>{let c=!0;return(async()=>{const g=await ma.parties.getAll().catch(()=>[]);c&&l(Array.isArray(g)?g:[])})(),()=>{c=!1}},[]),m.useEffect(()=>{let c=!0;return(async()=>{var v;const g=await re("/api/public/parliament",{method:"GET"}).catch(()=>null),f=(v=g==null?void 0:g.data)==null?void 0:v.distribution;c&&Array.isArray(f)&&f.length>0&&d(f)})(),()=>{c=!1}},[]);const u=m.useMemo(()=>{const c=Array.isArray(s)&&s.length>0?s:[],g=Array.isArray(i)?i:[],f=new Map(g.map(w=>[String((w==null?void 0:w.shortName)||"").trim().toUpperCase("tr-TR"),w])),v=w=>({id:w==null?void 0:w.id,name:w==null?void 0:w.name,shortName:(w==null?void 0:w.short_name)||(w==null?void 0:w.shortName),slug:(w==null?void 0:w.slug)||ny((w==null?void 0:w.short_name)||(w==null?void 0:w.shortName))||"",color:(w==null?void 0:w.color)||null,logo_url:(w==null?void 0:w.logo_url)||null}),b=c.map(v).filter(w=>w&&w.shortName).map(w=>{const N=String(w.shortName||"").trim().toUpperCase("tr-TR"),k=f.get(N)||null,_=Number((k==null?void 0:k.seats)||0)||0,M=_/wo*100;return{...w,seats:_,pct:M,color:w.color||(k==null?void 0:k.color)||"#6B7280",longName:(k==null?void 0:k.name)||w.name}}).sort((w,N)=>{const k=(Number((N==null?void 0:N.seats)||0)||0)-(Number((w==null?void 0:w.seats)||0)||0);return k!==0?k:String((w==null?void 0:w.shortName)||"").localeCompare(String((N==null?void 0:N.shortName)||""),"tr-TR")});return b.length>0?b:g.slice().sort((w,N)=>(Number((N==null?void 0:N.seats)||0)||0)-(Number((w==null?void 0:w.seats)||0)||0)).map(w=>{const N=Number((w==null?void 0:w.seats)||0)||0,k=N/wo*100,_=ny(w==null?void 0:w.shortName)||"";return{...w,seats:N,pct:k,slug:_,longName:(w==null?void 0:w.name)||"",logo_url:null}})},[s,i]);return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsx("div",{className:"container-main py-8",children:e.jsxs("div",{className:"bg-white border border-gray-200 rounded-3xl p-6 md:p-10",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsx("div",{className:"min-w-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-[#6D28D9] text-white",children:e.jsx(Rr,{className:"w-7 h-7"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-2xl md:text-3xl font-black text-gray-900",children:"Siyasi Partiler"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Meclis sandalye sralamasna gre listelenir."})]})]})}),e.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 text-gray-900 font-black",onClick:()=>r("/"),children:"Ana Sayfa"})]}),e.jsx("div",{className:"mt-8 space-y-3",children:u.map(c=>{var g;return e.jsx("button",{type:"button",className:"w-full text-left p-4 rounded-2xl border border-gray-200 hover:bg-gray-50 transition-colors",onClick:()=>{c.slug&&r("/party/".concat(c.slug))},children:e.jsxs("div",{className:"flex items-center gap-4",children:[c.logo_url?e.jsx("img",{src:c.logo_url,alt:c.shortName,className:"w-14 h-14 rounded-2xl object-contain bg-white border border-gray-200 p-2 flex-shrink-0",onError:f=>{f.currentTarget.style.display="none"}}):e.jsx("div",{className:"w-3.5 h-14 rounded-full flex-shrink-0",style:{backgroundColor:c.color},"aria-hidden":"true"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-lg font-black text-gray-900 truncate",children:c.shortName}),e.jsx("div",{className:"text-sm text-gray-600 truncate",children:c.longName||c.name})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsx("div",{className:"text-xl font-black text-primary-blue",children:c.seats}),e.jsxs("div",{className:"text-xs font-bold text-gray-600",children:[c.pct.toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Parti bakan:"," ",(g=c==null?void 0:c.party_chair)!=null&&g.id?e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 font-black text-primary-blue hover:underline",onClick:f=>{f.stopPropagation(),r("/profile/".concat(encodeURIComponent(c.party_chair.id)))},title:"Bakan profilini grntle",children:[c.party_chair.avatar_url?e.jsx("img",{src:c.party_chair.avatar_url,alt:c.party_chair.full_name||c.party_chair.username||"Bakan",className:"w-6 h-6 rounded-full object-cover border border-gray-200",onError:f=>{f.currentTarget.style.display="none"}}):null,e.jsx("span",{className:"truncate",children:c.party_chair.full_name||(c.party_chair.username?"@".concat(c.party_chair.username):"")}),c.party_chair.username?e.jsxs("span",{className:"text-[11px] font-black text-gray-500 truncate",children:["@",c.party_chair.username]}):null]}):e.jsx("span",{className:"font-bold",children:"Atanmam"})]})]})]})},c.id||c.shortName)})})]})})})},an=(r,s,l="name")=>{if(!s)return;const i=document.head||document.getElementsByTagName("head")[0];if(!i)return;const d="meta[".concat(l,'="').concat(r,'"]');let u=i.querySelector(d);u||(u=document.createElement("meta"),u.setAttribute(l,r),i.appendChild(u)),u.setAttribute("content",String(s))},ly=(r,s)=>{if(!s)return;const l=document.head||document.getElementsByTagName("head")[0];if(!l)return;const i='link[rel="'.concat(r,'"]');let d=l.querySelector(i);d||(d=document.createElement("link"),d.setAttribute("rel",r),l.appendChild(d)),d.setAttribute("href",String(s))},ik=r=>{const s=String(r||"").trim();if(!s)return"";const l=s.match(/G-[A-Z0-9]+/i);return l?l[0].toUpperCase():""},ok=r=>{if(!r)return!1;const s=document.head||document.getElementsByTagName("head")[0];if(!s)return!1;const l="https://www.googletagmanager.com/gtag/js?id=".concat(encodeURIComponent(r));if(!s.querySelector('script[src="'.concat(l,'"]'))){const d=document.createElement("script");d.async=!0,d.src=l,s.appendChild(d)}return window.dataLayer||(window.dataLayer=[]),window.__polithane_gtag_initialized||(window.gtag=function(){window.dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",r,{send_page_view:!1}),window.__polithane_gtag_initialized=!0),!0},iy=(r,s,l)=>{const i=document;if(!r||!i)return;const d=String(s||"").trim();if(i.querySelectorAll('[data-polithane-inject="'.concat(l,'"]')).forEach(f=>{var v,b;return(b=(v=f==null?void 0:f.parentNode)==null?void 0:v.removeChild)==null?void 0:b.call(v,f)}),!d)return;const c=i.createElement("template");c.innerHTML=d;const g=Array.from(c.content.childNodes||[]);for(const f of g){try{f&&f.setAttribute&&f.setAttribute("data-polithane-inject",l)}catch(v){}r.appendChild(f)}},oy=()=>{const[r,s]=m.useState(""),l=m.useRef(!1),i=tr();return m.useEffect(()=>{l.current||(l.current=!0,(async()=>{var d;try{const u=await re("/api/public/site",{method:"GET"}),c=u!=null&&u.success?(d=u==null?void 0:u.data)==null?void 0:d.seo:null;if(c&&typeof c=="object"){const g=String(c.metaTitle||"").trim(),f=String(c.metaDescription||"").trim(),v=String(c.metaKeywords||"").trim(),b=String(c.robots||"").trim(),w=String(c.canonicalURL||"").trim(),N=String(c.ogTitle||g||"").trim(),k=String(c.ogDescription||f||"").trim(),_=String(c.ogImage||"").trim(),M=String(c.twitterCard||"").trim(),T=String(c.twitterSite||"").trim(),A=String(c.favicon||"").trim(),S=String(c.headHtml||"").trim(),y=String(c.bodyHtml||"").trim();g&&(document.title=g),f&&an("description",f,"name"),v&&an("keywords",v,"name"),b&&an("robots",b,"name"),w&&ly("canonical",w),A&&ly("icon",A),N&&an("og:title",N,"property"),k&&an("og:description",k,"property"),_&&an("og:image",_,"property"),w&&an("og:url",w,"property"),M&&an("twitter:card",M,"name"),T&&an("twitter:site",T,"name"),iy(document.head,S,"head"),iy(document.body,y,"body");const p=ik(c.googleAnalyticsID);p&&s(p)}}catch(u){}})())},[]),m.useEffect(()=>{var u;if(!r||!ok(r))return;const d="".concat(i.pathname).concat(i.search||"").concat(i.hash||"");try{(u=window.gtag)==null||u.call(window,"event","page_view",{page_path:d})}catch(c){}},[r,i.pathname,i.search,i.hash]),null},cy=()=>{const r=tr(),s=zr();return m.useEffect(()=>{if(new URLSearchParams(r.search||"").get("comment")!=="1"&&!r.hash&&s!=="POP")try{window.scrollTo(0,0)}catch(i){}},[r.pathname,r.search,r.hash,s]),null},dy=()=>{const{site:r}=Eo(),s=m.useMemo(()=>String((r==null?void 0:r.siteName)||"Polithane").trim(),[r==null?void 0:r.siteName]),l=m.useMemo(()=>String((r==null?void 0:r.supportEmail)||(r==null?void 0:r.contactEmail)||"").trim(),[r==null?void 0:r.supportEmail,r==null?void 0:r.contactEmail]),i=m.useMemo(()=>String((r==null?void 0:r.siteSlogan)||"").trim(),[r==null?void 0:r.siteSlogan]);return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6 bg-gray-50",children:e.jsxs("div",{className:"w-full max-w-xl bg-white border border-gray-200 rounded-2xl p-8 shadow-sm",children:[e.jsx("div",{className:"text-2xl font-black text-gray-900",children:s}),i?e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:i}):null,e.jsxs("div",{className:"mt-6 rounded-xl border border-amber-200 bg-amber-50 p-4 text-amber-900",children:[e.jsx("div",{className:"font-black",children:"Bakm modu aktif"}),e.jsx("div",{className:"mt-1 text-sm",children:"u anda sistemde bakm almas var. Ltfen biraz sonra tekrar deneyin."})]}),e.jsxs("div",{className:"mt-6 flex flex-wrap gap-3",children:[e.jsx(Tt,{to:"/login-new",className:"px-5 py-2 rounded-xl bg-gray-900 hover:bg-black text-white font-black",children:"Admin girii"}),e.jsx(Tt,{to:"/",className:"px-5 py-2 rounded-xl border border-gray-300 hover:bg-gray-50 font-black text-gray-900",children:"Ana sayfa"})]}),l?e.jsxs("div",{className:"mt-6 text-xs text-gray-500",children:["Destek: ",e.jsx("a",{className:"underline",href:"mailto:".concat(l),children:l})]}):null]})})};function ck(){const r=tr(),{maintenanceMode:s}=Eo(),{isAdmin:l}=Pa(),i=String((r==null?void 0:r.pathname)||"/"),d=i.startsWith("/login")||i.startsWith("/register")||i.startsWith("/forgot-password")||i.startsWith("/reset-password")||i.startsWith("/verify-email"),u=i.startsWith("/adminyonetim"),c=(l==null?void 0:l())===!0||u||d;return s&&!c?e.jsxs("div",{className:"min-h-screen flex flex-col app-shell",children:[e.jsx(oy,{}),e.jsx(cy,{}),e.jsx(dy,{}),e.jsx(l0,{position:"top-right"})]}):e.jsxs("div",{className:"min-h-screen flex flex-col app-shell",children:[e.jsx(oy,{}),e.jsx(cy,{}),e.jsxs(lj,{children:[e.jsx(at,{path:"/",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsxs("div",{className:"home-layout",children:[e.jsx(jN,{}),e.jsx(ka,{})]}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/post/:postId",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(TN,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/profile/:userId",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(_m,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/@:username",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(_m,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/:username",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(_m,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/party/:partyId",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(RN,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/agenda/:agendaSlug",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(ON,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/category/:categoryId",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(tS,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/hit",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(sS,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/gundem-disi",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(aS,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/agendas",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(zN,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/city/:cityCode",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(PN,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/messages",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(Q_,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/search",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(W_,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/polit-at",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(F0,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/test",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(eS,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/polifest",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(X0,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/fast",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(rS,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/fast-at",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(F0,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/fast/:usernameOrId",element:e.jsx(nS,{})}),e.jsx(at,{path:"/polifest/:usernameOrId",element:e.jsx(Q0,{})}),e.jsx(at,{path:"/delete-confirm",element:e.jsx(QS,{})}),e.jsx(at,{path:"/about",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(ZS,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/mission",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(WS,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/contact",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(ek,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/parliament",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(nk,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/parties",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(lk,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/terms",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(tk,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/privacy-policy",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(ak,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/cookie-policy",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(sk,{}),e.jsx(ka,{}),e.jsx(Ea,{}),e.jsx(Ca,{limit:8})]})}),e.jsx(at,{path:"/maintenance",element:e.jsx(dy,{})}),e.jsx(at,{path:"/stories",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(X0,{}),e.jsx(ka,{}),e.jsx(Ea,{})]})}),e.jsx(at,{path:"/stories/:usernameOrId",element:e.jsx(Q0,{})}),e.jsx(at,{path:"/login",element:e.jsx(DN,{})}),e.jsx(at,{path:"/login-new",element:e.jsx(lS,{})}),e.jsx(at,{path:"/register",element:e.jsx(BN,{})}),e.jsx(at,{path:"/register-new",element:e.jsx(oS,{})}),e.jsx(at,{path:"/forgot-password",element:e.jsx(cS,{})}),e.jsx(at,{path:"/reset-password",element:e.jsx(dS,{})}),e.jsx(at,{path:"/verify-email",element:e.jsx(uS,{})}),e.jsxs(at,{path:"/settings",element:e.jsxs(e.Fragment,{children:[e.jsx(Na,{}),e.jsx(mS,{}),e.jsx(ka,{})]}),children:[e.jsx(at,{path:"profile",element:e.jsx(hS,{})}),e.jsx(at,{path:"account",element:e.jsx(fS,{})}),e.jsx(at,{path:"security",element:e.jsx(xS,{})}),e.jsx(at,{path:"notifications",element:e.jsx(gS,{})}),e.jsx(at,{path:"privacy",element:e.jsx(yS,{})}),e.jsx(at,{path:"blocked",element:e.jsx(vS,{})}),e.jsx(at,{path:"appearance",element:e.jsx(bS,{})}),e.jsx(at,{path:"delete",element:e.jsx(jS,{})})]}),e.jsxs(at,{path:"/adminyonetim",element:e.jsx(wS,{}),children:[e.jsx(at,{index:!0,element:e.jsx(_S,{})}),e.jsx(at,{path:"analytics",element:e.jsx(zS,{})}),e.jsx(at,{path:"users",element:e.jsx(ES,{})}),e.jsx(at,{path:"parties",element:e.jsx(FS,{})}),e.jsx(at,{path:"parliament",element:e.jsx(JS,{})}),e.jsx(at,{path:"agendas",element:e.jsx(XS,{})}),e.jsx(at,{path:"posts",element:e.jsx(TS,{})}),e.jsx(at,{path:"comments",element:e.jsx(PS,{})}),e.jsx(at,{path:"media",element:e.jsx(DS,{})}),e.jsx(at,{path:"algorithm",element:e.jsx(SS,{})}),e.jsx(at,{path:"site-settings",element:e.jsx(CS,{})}),e.jsx(at,{path:"theme",element:e.jsx(AS,{})}),e.jsx(at,{path:"seo",element:e.jsx(MS,{})}),e.jsx(at,{path:"email",element:e.jsx(BS,{})}),e.jsx(at,{path:"mail-settings",element:e.jsx(ty,{})}),e.jsx(at,{path:"email-test",element:e.jsx(ty,{})}),e.jsx(at,{path:"notifications",element:e.jsx(US,{})}),e.jsx(at,{path:"automation",element:e.jsx(RS,{})}),e.jsx(at,{path:"scraping",element:e.jsx(LS,{})}),e.jsx(at,{path:"sources",element:e.jsx($S,{})}),e.jsx(at,{path:"ads",element:e.jsx(OS,{})}),e.jsx(at,{path:"payments",element:e.jsx(ay,{})}),e.jsx(at,{path:"revenue",element:e.jsx(ay,{})}),e.jsx(at,{path:"security",element:e.jsx(YS,{})}),e.jsx(at,{path:"database",element:e.jsx(GS,{})}),e.jsx(at,{path:"api",element:e.jsx(KS,{})}),e.jsx(at,{path:"system",element:e.jsx(HS,{})}),e.jsx(at,{path:"jobs",element:e.jsx(VS,{})})]})]}),e.jsx(l0,{position:"top-right"})]})}class dk extends ij.Component{constructor(s){super(s),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0}}componentDidCatch(s,l){console.error("ErrorBoundary caught an error:",s,l),this.setState({error:s,errorInfo:l})}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx(fs,{className:"w-6 h-6 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Bir Hata Olutu"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"zgnz, bir eyler ters gitti. Ltfen sayfay yenilemeyi deneyin."}),this.state.error&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsx("p",{className:"text-sm text-red-800 font-mono break-all",children:this.state.error.toString()})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-primary-blue hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Sayfay Yenile"}),e.jsx("button",{onClick:()=>window.history.back(),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors",children:"Geri Dn"})]}),!1]})}):this.props.children}}aN.createRoot(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(dk,{children:e.jsx(oj,{children:e.jsx(pS,{children:e.jsx(NN,{children:e.jsx(oN,{children:e.jsx(dN,{children:e.jsx(ck,{})})})})})})})}));export{uk as __vite_legacy_guard};
